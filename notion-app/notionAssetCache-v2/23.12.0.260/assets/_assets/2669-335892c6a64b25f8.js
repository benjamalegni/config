"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2669],{95466:(e,t,n)=>{n.r(t),n.d(t,{AssistantChatStep:()=>a.H,AssistantFullPageChat:()=>ae,AssistantLabelerBar:()=>R,AssistantMenuPopup:()=>re,AssistantOriginElement:()=>te,SearchAssistantPane:()=>Ae,assistantActions:()=>i});var i=n(23622),a=n(45906),s=n(67294),o=n(480),r=n(86628),l=n(24405),c=n(94568),d=n(42875),u=n(59054),p=n(72126),g=n(21202),h=n(70203),m=n(82990),f=n(54642),x=n(98104),v=n(52275),S=n(88359),y=n(1743),k=n(74194),C=n(84076),w=n(68785),b=n(63296),j=n(53437),A=n(45959),I=n(95477),M=n(98180),Z=n(82375),T=n(35661),B=n(24666),_=n(85893);function R(){window.__c={n:"AssistantLabelerBar"};const e=(0,o.O7)(),t=(0,l.yK)((e=>({wrap:{padding:8,backgroundColor:e.contentBackground,width:400},samplingPicker:{display:"flex",alignItems:"center",marginBottom:8,gap:4},error:{fontSize:14,color:e.accentColors.red[600],maxHeight:150,overflow:"scroll"},observation:{fontSize:14,maxHeight:150,overflow:"scroll"},tooltip:{width:500,whiteSpace:"pre-wrap",fontFamily:m.Z.baseFontFamily.mono},input:{marginTop:5,marginBottom:5,fontFamily:m.Z.baseFontFamily.githubMono,fontSize:12},inputInner:{height:100}})),[]),n=(0,r.VK)((()=>Z.Hl.state),[]),a=(0,r.VK)((()=>M.Z.getActiveAssistantRuntimeState()),[]),c=(0,r.VK)((()=>M.Z.getActiveAssistantConfigurationState()),[]),d=(0,r.VK)((()=>Boolean(a&&a.sampledSteps.length>0)),[a]),u=(0,r.VK)((()=>Boolean(c&&(c.sampling||c.evaluating))),[c]),p=(0,r.VK)((()=>null==a?void 0:a.previewingStepIndex),[a]),g=(0,r.VK)((()=>{const e=null==a?void 0:a.previewingStepIndex;var t;if("number"==typeof e)return null==a||null===(t=a.sampledSteps)||void 0===t?void 0:t[e]}),[a],{useDeepEqual:!0}),h=(0,r.VK)((()=>(null==a?void 0:a.previewingStepObservations)||[]),[a],{useDeepEqual:!0}),f=h.filter((e=>"error"===e.observationType)),v=h.filter((e=>"error"!==e.observationType)),S=(0,s.useCallback)((()=>{const e=M.Z.getActiveSessionId();e&&i.cancelPreviewStep({sessionId:e})}),[]),C=(0,s.useCallback)((async t=>{const n=M.Z.getActiveSessionId(),a=M.Z.getActiveAssistantRuntimeStore();if(!g||!a||!n)return;const s={...g,value:t.target.value};(0,Z.zZ)({store:a,step:s}),await i.simulateOrCommitStep({environment:e,step:s,commit:!1,isStreaming:!1,preventSelection:!0,sessionId:n})}),[e,g]),A=(0,s.useCallback)((async t=>{const n=M.Z.getActiveSessionId(),a=M.Z.getActiveAssistantRuntimeState();a&&n&&await i.simulateOrCommitStep({environment:e,step:a.sampledSteps[t],commit:!1,isStreaming:!1,sessionId:n})}),[e]),T=(0,s.useCallback)((async()=>{const t=M.Z.getActiveSessionId(),n=M.Z.getActiveAssistantRuntimeState();if(!n||!t)return;const a=n.previewingStepObservations.length>0;await i.commitPreviewAssistantStep({environment:e,sessionId:t}),a||await i.applyUncommittedOperations({environment:e,sessionId:t})}),[e]),R=(0,s.useCallback)((async()=>{const t=M.Z.getActiveSessionId();t&&await i.retryNextAssistantSteps({environment:e,sessionId:t})}),[e]),P=(0,r.VK)((()=>({top:20,left:0,right:0,bottom:0,width:e.WindowSizeStore.state.width,height:0})),[e],{useDeepEqual:!0}),[L,V]=(0,s.useState)(!1),K=(0,s.useCallback)((()=>{B.default.hasSelection()&&x.ZH(e),V(!0)}),[e,V]),W=(0,s.useCallback)((()=>{V(!1)}),[V]),E=I.default.isLocalhost||!1;return(0,_.jsx)(j.ZP,{popupType:j.kQ.Popup,open:!0,originRect:P,originGap:6,disableMouseCapture:!0,render:()=>(0,_.jsx)(y.Z,{capture:L,children:(0,_.jsxs)("div",{style:t.wrap,children:[(0,_.jsx)(F,{}),d&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{style:t.samplingPicker,children:[(0,_.jsx)(b.Z,{hovered:void 0===p||void 0,onClick:S,children:"Original"}),(0,_.jsx)(b.Z,{hovered:0===p||void 0,onClick:()=>A(0),children:"A"}),(0,_.jsx)(b.Z,{hovered:1===p||void 0,onClick:()=>A(1),children:"B"}),(0,_.jsx)("div",{style:{flexGrow:1}}),u&&(0,_.jsx)(w.Z,{style:{marginRight:4}}),(0,_.jsx)(b.Z,{disabled:!E&&(void 0===p||u||!n),disabledFeedback:!0,onClick:R,children:"Retry"}),(0,_.jsx)(b.Z,{disabled:!E&&(void 0===p||u||!n),disabledFeedback:!0,onClick:T,isBlue:!0,children:"Accept"})]}),g&&(0,_.jsx)(k.Z,{style:t.input,inputStyle:t.inputInner,value:g.value,onChange:C,onFocus:K,onBlur:W,textarea:!0,spellCheck:!1}),f.length>0&&!u&&(0,_.jsx)("div",{style:t.error,children:f.map((e=>e.value)).join("\n")}),v.length>0&&!u&&(0,_.jsxs)("div",{style:t.observation,children:["Results: ",v.map((e=>e.value)).join("\n")]})]})]})})})}function F(e){var t;window.__c={n:"TaskPicker"};const n=(0,o.O7)(),i=(0,r.VK)((()=>Z.Hl.state),[]),[a]=(0,u.r5)((async()=>{const e="results",t={type:"reducer",filter:{operator:"and",filters:[{property:"ouFf",filter:{operator:"status_is",value:{type:"is_group",value:"In progress"}}}]},sort:[],userId:n.currentUser.id,userTimeZone:(0,d.r)(),searchQuery:void 0,reducers:{[e]:{type:"results",limit:100}}},i=await f.queryCollection(n,{source:{type:"collection",id:"f704a995-6417-457a-8038-ca9e1cb2c65f",spaceId:c.vj},collectionView:{id:"1dee420b-aa96-4e48-8eba-c2a0613e179e",spaceId:c.vj},loader:t},void 0,{src:"queryCollectionAction"});if("failed"===i.type)return;const a=i.data.result.reducerResults.results;if(!a||"results"!==a.type)return;const{blockIds:s}=a;let o=p.oA(s.map((e=>new T.G(n,{table:g.iU,id:e}).getValue()))).map((e=>{var t,n,i;return{id:e.id,name:(0,h.QaF)(null==e||null===(t=e.properties)||void 0===t?void 0:t.title),url:(0,h.QaF)(null==e||null===(n=e.properties)||void 0===n?void 0:n["}v_K"]),type:(0,h.QaF)(null==e||null===(i=e.properties)||void 0===i?void 0:i.pdfW)}}));return o=p.MR(o,(e=>e.name.toLowerCase())),o}),[n]),m=(0,s.useCallback)((e=>{var t;const n=null===(t=a.value)||void 0===t?void 0:t.find((t=>t.id===e));n&&Z.Hl.setState(n)}),[a]),x={menuTitle:"",items:(null===(t=a.value)||void 0===t?void 0:t.map((e=>e.id)))??[],getKey:e=>e,selectedItem:null==i?void 0:i.id,onSelect:m,renderItem:e=>{var t;const n=null===(t=a.value)||void 0===t?void 0:t.find((t=>t.id===e.value));return(0,_.jsx)(v.Z,{...e,title:null==n?void 0:n.name})},renderOrigin:e=>(0,_.jsx)(S.Z,{focused:!1,title:"",right:(null==i?void 0:i.name)||(0,_.jsx)("span",{style:{color:"red"},children:"Please select a task"}),...e}),width:300},y=(0,l.yK)((e=>({wrap:{marginBottom:8},inner:{display:"flex",alignItems:"center",marginBottom:4,gap:4},label:{fontSize:14,flexShrink:0},link:{fontSize:14,textDecoration:"underline"}})),[]);return(0,_.jsxs)("div",{style:y.wrap,children:[(0,_.jsxs)("div",{style:y.inner,children:[(0,_.jsx)("div",{style:y.label,children:"Current task:"}),(0,_.jsx)(A.Z,{...x})]}),i&&(0,_.jsx)(C.Z,{style:y.link,href:i.url,external:!0,children:"Instructions for task"})]})}var P=n(49628),L=n(22081),V=n(5257),K=n(11751),W=n(97880),E=n(51454),O=n(5366),z=n(50906),N=n(55031),D=n(64921),H=n(91839),U=n(31156),q=n(28020),Q=n(24646),G=n(21273),$=n(4926),J=n(55320),Y=n(33932),X=n(56206),ee=n(40824);function te(){window.__c={n:"AssistantOriginElement"};const e=(0,o.O7)(),t=(0,l.Fg)(),n=(0,r.VK)((()=>G.Z.isQnAOnlyEnabled()),[]);!function(){const e=(0,r.VK)((()=>{var e;return Boolean(null===(e=M.Z.getActiveAssistantRuntimeState())||void 0===e?void 0:e.isCurrentlyCommittingHumanStep)}),[]),{lastStepLoadingCompletionUnixEpochMs:t,aiWindowLastSeenUnixEpochMs:n}=(0,r.VK)((()=>ee.N.state),[]);(0,s.useEffect)((()=>{const i=ee.N.state.currentState,a=t===-1/0||n>t;e||a||"answerLoading"!==i||t===-1/0?e||"answerLoading"!==i&&!a?e&&"default"===i&&ee.N.setState({...ee.N.state,currentState:"answerLoading"}):ee.N.setState({...ee.N.state,currentState:"default"}):ee.N.setState({...ee.N.state,currentState:"answerWaitingForUserClick"})}),[n,e,t])}();const a=(0,l.yK)((e=>({faceImg:{width:16,pointerEvents:"none"}})),[]),c=(0,s.useCallback)((async()=>{ee.N.setState({...ee.N.state,currentState:"default"}),Y.O({view:"chat"});const t=M.Z.getActiveAssistantConfigurationState();n&&(t&&!M.Z.wasActiveSessionLastOpenedOutsideOfHistorySavedWindow()||await(0,i.resetAndInitializeAssistantStores)({environment:e,primeTextInput:void 0,isQnA:!0}),z.IR(e,{configurationState:t,runtimeState:M.Z.getActiveAssistantRuntimeState(),hasQuery:!1,from:"button",searchSessionId:void 0})),M.Z.setLastSessionInitializedUnixEpochTime()}),[e,n]),d=(0,r.VK)((()=>(0,N.y)(e,{theme:t,rightEdgeDistance:16,isInPeekRenderer:!1,width:36})),[e,t]),u=(0,s.useMemo)((()=>(0,K.t)({...a.faceImg})),[a.faceImg]),p=(0,r.VK)((()=>{var e,t;const n=ee.N.state.currentState;return null!==(e=X.d.state)&&void 0!==e&&e.open||null!==(t=J.default.state)&&void 0!==t&&t.open?"default":n}),[]);switch(p){case"answerLoading":return(0,_.jsx)(ne,{onClick:c,isAnswerReady:!1});case"answerWaitingForUserClick":return(0,_.jsx)(ne,{onClick:c,isAnswerReady:!0});case"default":return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(D.Z,{ariaLabel:"ai",className:"notion-ai-button",style:{...d},hoveredStyle:{background:t.whiteButtonHoveredBackground},onClick:c,children:u})});default:throw(0,W.t1)(p)}}function ne(e){let{onClick:t,isAnswerReady:n}=e;window.__c={n:"QnaBackgroundProcessingElement"};const i=(0,l.yK)((e=>({sparklesIcon:{height:18,width:18,fill:e.regularIconColor},aiProcessingButtonTopLevelStyle:{display:"flex",alignItems:"center",flexDirection:"row",marginLeft:12.5,marginRight:14,height:52},sparklesIconWrapperStyle:{borderRadius:"100%",background:e.whiteButtonBackground,height:30,width:30,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${e.outlineButtonBorder}`,fill:e.regularIconColor},messagesWrapperStyle:{display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:8},notionAiTitleStyle:{fontSize:12,fontWeight:"500",color:e.lightTextColor},answerReadyStyle:{fontSize:13,fontWeight:"500",color:e.aiPurpleColor,display:"flex",alignItems:"center"},preparingYourAnswerStyle:{fontSize:14,fontWeight:"500",color:e.aiPurpleColor},chevronRightStyle:{height:19,width:15,opacity:.2,marginLeft:"auto"}})),[]),a=(0,l.Fg)(),c=(0,o.O7)(),d=(0,r.VK)((()=>function(e){const{rightEdgeDistance:t,theme:n,environment:i,isInPeekRenderer:a,width:s,height:o}=e,r=(0,Q.ll)(i,a)-(0,Q.vJ)(i);return{position:"absolute",bottom:16+$.Z.state,right:t+$.Z.state,width:s,height:o,borderRadius:100,fontSize:20,boxShadow:n.lightBoxShadow,zIndex:E.hT,background:n.aiPurpleTranslucentRadialGradientBackground,backdropFilter:"blur(20px)",backgroundBlendMode:"overlay, normal",opacity:q.tu.state?0:1,transform:`translateX(-${r}px) translateZ(0)`,transition:`\n\t\t\topacity ${U.Z.transitionDuration}ms,\n\t\t\tcolor ${U.Z.transitionDuration}ms,\n\t\t\ttransform 200ms\n\t\t`}}({rightEdgeDistance:16,isInPeekRenderer:!1,width:278,height:52,environment:c,theme:a})),[c,a]),[u,p]=(0,P.H)(),[g,h]=(0,P.H)(),m=(0,s.useCallback)((async()=>{await p(u.current,{width:278}),await h(g.current,{display:"block",opacity:1})}),[p,h,u,g]);(0,s.useEffect)((()=>{m()}),[m]);return(0,_.jsx)(L.E.div,{"aria-label":"ai processing",className:"notion-ai-button",onClick:t,style:{...d,cursor:"pointer",overflow:"hidden",flexWrap:"wrap"},variants:{initial:{width:28},animate:{width:278,transition:{type:"spring",stiffness:20,damping:15}}},initial:"initial",animate:"animate",ref:u,children:(0,_.jsxs)("div",{style:i.aiProcessingButtonTopLevelStyle,children:[(0,_.jsx)("div",{style:i.sparklesIconWrapperStyle,children:(0,K.t)(i.sparklesIcon)}),(0,_.jsx)("div",{style:{...i.messagesWrapperStyle,display:"none"},ref:g,children:n?(0,_.jsx)("div",{style:i.answerReadyStyle,children:(0,_.jsx)(O.FormattedMessage,{id:"AssistantOriginElement.answerReady",defaultMessage:"Your answer is ready"})}):(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,_.jsx)("div",{style:i.preparingYourAnswerStyle,children:(0,_.jsx)(O.FormattedMessage,{id:"AssistantOriginElement.notionAiLoadingText",defaultMessage:"Preparing your answer"})}),(0,_.jsx)("div",{style:{marginLeft:6,fontWeight:"500"},children:(0,_.jsx)(H.Z,{})})]})}),(0,V.o)(i.chevronRightStyle)]})})}var ie=n(71106);function ae(){window.__c={n:"AssistantFullPageChat"};const e=(0,l.yK)((e=>({wrap:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",paddingLeft:12,paddingRight:12}})),[]);return(0,_.jsx)("div",{style:e.wrap,children:(0,_.jsx)(ie.Qn,{renderAsFullPage:!0})})}var se=n(31945),oe=n(4023);function re(){window.__c={n:"AssistantMenuPopup"};const e=(0,r.VK)((()=>X.d.state.open),[]),[t,n]=(0,s.useState)(),i=(0,o.O7)(),{isMobile:a,isPhone:c}=i.device,d=(0,r.VK)((()=>{const e=(0,Q.ll)(i,!1)-(0,Q.vJ)(i);return{bottom:15+$.Z.state,right:15+$.Z.state,xPosition:e}}),[i]);(0,s.useEffect)((()=>{const e=()=>{n(new DOMRect(window.innerWidth-d.right-d.xPosition,window.innerHeight-d.bottom,0,0))};return e(),addEventListener("resize",e),()=>removeEventListener("resize",e)}),[d.right,d.xPosition,d.bottom]);const u=(0,l.yK)((e=>({wrap:{borderRadius:12,boxShadow:e.largeLightBoxShadow}})),[]);return(0,_.jsx)(j.ZP,{popupType:a?se.Z4.SlideUp:se.Z4.Popup,forceFullScreenSlideUp:a&&c,alignmentToOrigin:oe.v.End,alignBoxStyle:{transition:"left 200ms, top 200ms"},originRect:t,disableMouseCapture:!0,preventScaleTransition:!1,popupWrapStyle:u.wrap,isWaxPaper:!0,open:e,slideUpWrapStyle:{...a&&c?{height:"calc(100vh - 54px)"}:{}},render:()=>(0,_.jsx)(ie.Qn,{renderAsFullPage:a,onClose:()=>{Y.r()}})})}var le=n(80721),ce=n(13148),de=n(59822),ue=n(23063),pe=n(73063),ge=n(36488),he=n(56940),me=n(78140),fe=n(72495),xe=n(33991),ve=n(55888),Se=n(43250),ye=n(34700),ke=n(87279),Ce=n(85665),we=n(29026),be=n(18830),je=n(49053);function Ae(e){window.__c={n:"SearchAssistantPane"};const t=(0,o.Fy)();return(0,Ce.Z)(),(0,_.jsx)(he.Z,{capture:!0,ignoreBlockSelection:!0,focusOffscreenInput:!1,restoreSelection:!t.isMobile,render:()=>(0,_.jsx)(ge.Z,{capture:!0,allowMenuList:!0,render:t=>(0,_.jsx)(Ie,{...e,ignoreAreaEvents:t})})})}function Ie(e){window.__c={n:"SearchAssistantPaneInner"};const{ignoreAreaEvents:t,renderAsPage:n,quickSearchMode:a,searchContentPaneType:c,onClose:d}=e,{modalBodyMenuRef:u}=(0,s.useContext)(xe.SearchStaticContext),p=(0,o.O7)(),g=(0,r.VK)((()=>null===M.Z||void 0===M.Z?void 0:M.Z.getActiveAssistantConfigurationState()),[]),h=(0,s.useCallback)((()=>{we.ZP.update((e=>({...e,mode:"search"})))}),[]),m=(0,s.useCallback)((()=>{z.Ti_(p,g,null===M.Z||void 0===M.Z?void 0:M.Z.getActiveAssistantRuntimeState(),"search"),d()}),[g,p,d]),f=(0,r.VK)((()=>(0,ve.ip)({searchContentPaneType:c,renderAsPage:n,environment:p})),[n,c,p]),x=(0,l.yK)((e=>({header:{display:"flex",justifyContent:"space-between",alignItems:"center",pointerEvents:"auto",paddingTop:8,paddingLeft:12,paddingRight:16,paddingBottom:8},body:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},scroller:{display:"flex",flexDirection:"column",maxHeight:f.maxHeight,minHeight:f.minHeight},clearButton:{...(0,ye.X)({noDrag:Boolean(a)})},headerButton:{color:e.mediumIconColor,...(0,ye.X)({noDrag:Boolean(a)})},closeButton:{borderRadius:"100%",marginLeft:6,...(0,ye.X)({noDrag:Boolean(a)})},backButton:{marginRight:6,...(0,ye.X)({noDrag:Boolean(a)})}})),[f,a]),v=(0,o.Fy)(),S=(0,s.useMemo)((()=>{if(v.isMobile){return{menuType:ke.og.Modal,width:n?"100vw":void 0,disableHeaderShadow:!0,bodyScrollerClassName:Se.GZn,...t}}const e={menuType:ke.og.Popup,maxHeight:f.maxHeight,minHeight:f.minHeight,...a?{width:"100vw"}:{},disableScroller:!0,scrollerStyle:x.scroller,...t};return n&&v.isDesktop&&(e.maxWidth="100%"),e}),[v,x,t,f,n,a]),y=(0,s.useCallback)((async()=>{z.Le6(p,g,null===M.Z||void 0===M.Z?void 0:M.Z.getActiveAssistantRuntimeState()),await(0,i.clearAndResetActiveAssistantSession)({environment:p})}),[g,p]),k=(0,r.VK)((()=>{const e=M.Z.getActiveAssistantRuntimeState();return!e||!M.Z.getActiveAssistantConfigurationState()||0===e.clientSteps.length&&0===e.temporaryClientSteps.length}),[]);return(0,_.jsxs)(me.Z,{...S,className:Se.Oau,ref:u,children:[(0,_.jsx)(fe.Z,{children:(0,_.jsxs)("div",{style:x.header,children:[(0,_.jsx)(pe.Z,{icon:le.W,onClick:h,ariaLabel:"back",style:x.backButton}),(0,_.jsx)(ie.xu,{}),(0,_.jsx)("div",{style:{flexGrow:1}}),(0,_.jsx)(ue.Z,{enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},animationStyle:{opacity:1},render:()=>(0,_.jsx)(je.v,{style:x.clearButton,onClick:y,disabled:k}),isVisible:!k}),(0,_.jsx)(pe.Z,{style:x.closeButton,hovered:!0,icon:a?ce.U:de.J,onClick:m,ariaLabel:"close"})]})}),(0,_.jsx)(be.R,{renderAsFullPage:n,isQuickSearchMode:a})]})}},2405:(e,t,n)=>{n.d(t,{Z:()=>o});n(67294);var i=n(24405),a=n(64921),s=n(85893);function o(e){window.__c={n:"AssistantActionButton"};const{style:t,icon:n,disabled:o,iconStyle:r,title:l,onClick:c,focused:d}=e,u=(0,i.yK)((e=>({AssistantActionButton:{display:"flex",alignItems:"center",border:`1px solid ${e.aiActionButtonBorderColor}`,padding:"6px 10px",color:e.regularTextColor,fontSize:13,fontWeight:500,borderRadius:24,width:"max-content"},icon:{width:14,height:14,fill:e.regularIconColor,marginRight:6}})),[]);return(0,s.jsxs)(a.Z,{disabled:o,style:{...u.AssistantActionButton,...t},onClick:c,focused:d,children:[null==n?void 0:n({...u.icon,...r}),l]})}},18830:(e,t,n)=>{n.d(t,{R:()=>je});n(52262),n(24506);var i=n(67294),a=n(480),s=n(86628),o=n(24405),r=n(49085),l=n(7057),c=n(53877),d=n(42875),u=n(84169),p=n(72126),g=n(5366),h=n(70203),m=n(97880),f=n(82990),x=n(47307),v=n(24677),S=n(80402),y=n(97444),k=n(98104),C=n(39699),w=n(63594),b=n(1892),j=n(53336),A=n(37712),I=n(57254),M=n(19124),Z=n(17809),T=n(34859),B=n(80444),_=n(98180),R=n(82375),F=n(69454),P=n(45589),L=n(55320),V=n(23622),K=n(67973),W=n(2405),E=n(84969),O=n(45906),z=n(42899),N=n(83176),D=n(88437),H=n(18101),U=n(98519),q=n(55863),Q=n(4615),G=n(14871),$=n(56518),J=n(85893);function Y(e){window.__c={n:"AssistantFeedbackBar"};const{type:t}=e,n=(0,a.O7)(),r=(0,o.yK)((e=>({wrap:{display:"flex",marginTop:8,marginBottom:0,gap:6}})),[]),[l,c]=(0,i.useState)((()=>(0,Q.ZP)())),d=(0,s.VK)((()=>w.Z.state),[]),u=(0,i.useCallback)((async()=>{const e=_.Z.getActiveSessionId();e&&(await V.saveFeedback({environment:n,inferenceId:l,type:"assistant_accept_edits",sessionId:e}),await V.commitPreviewAssistantStep({environment:n,sessionId:e}),await V.applyUncommittedOperations({environment:n,sessionId:e}))}),[n,l]),p=(0,i.useCallback)((async()=>{const e=_.Z.getActiveSessionId();e&&(await V.saveFeedback({environment:n,inferenceId:l,type:"assistant_fix_errors",sessionId:e}),await V.commitPreviewAssistantStep({environment:n,sessionId:e}))}),[n,l]),h=(0,i.useCallback)((async()=>{const e=_.Z.getActiveSessionId();e&&(await V.saveFeedback({environment:n,inferenceId:l,type:"assistant_undo",sessionId:e}),await V.commitPreviewAssistantStep({environment:n,sessionId:e}),V.resetUncommittedOperations({environment:n,sessionId:e}))}),[n,l]),f=(0,i.useCallback)((async()=>{const e=_.Z.getActiveSessionId();e&&(await V.saveFeedback({environment:n,inferenceId:l,type:"assistant_retry",sessionId:e}),await V.retryNextAssistantSteps({environment:n,sessionId:e}))}),[n,l]),x=(0,i.useCallback)((()=>{const e=_.Z.getActiveAssistantRuntimeState(),t=null==e?void 0:e.temporaryClientSteps.find((e=>"assistantChat"===e.type||"assistantChatText"===e.type));if(t)if("assistantChatText"===t.type)G.RD({environment:n,stringValue:t.text??"",copiedMessage:G.tq.copiedQnAMessageToClipboard});else{if("assistantChat"===t.type){const e=(0,E.G)({environment:n,clientStep:t,citationOrdering:void 0}),i=(0,$.X4)({rootBlock:{...e[0].pointer,spaceId:e[0].getSpaceId()},blockValues:e.map((e=>e.getValue())).filter(m.$K),getRecordValue:e[0].getRecordValue,isWindows:n.device.isWindows,markdownLinkifyIt:void 0});return void G.RD({environment:n,stringValue:i.markdown??"",copiedMessage:G.tq.copiedQnAMessageToClipboard})}(0,m.t1)(t)}}),[n]);return(0,J.jsxs)("div",{style:r.wrap,children:["accept_action"===t&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(W.Z,{icon:U.k,onClick:u,title:(0,J.jsx)(g.FormattedMessage,{defaultMessage:"Accept all",id:"assistant.acceptAllButton"})}),(0,J.jsx)(W.Z,{icon:q.s,onClick:h,title:(0,J.jsx)(g.FormattedMessage,{defaultMessage:"Undo all",id:"assistant.undoAllButton"})})]}),"error"===t&&(0,J.jsx)(J.Fragment,{children:(0,J.jsx)(W.Z,{icon:N.z,onClick:p,title:(0,J.jsx)(g.FormattedMessage,{defaultMessage:"Fix errors",id:"assistant.fixErrorsButton"})})}),"accept_action"!==t&&(0,J.jsx)(W.Z,{icon:D.a,onClick:x,title:(0,J.jsx)(g.FormattedMessage,{defaultMessage:"Copy",id:"assistant.copyButton"})}),d?(0,J.jsx)(W.Z,{icon:H.b,onClick:f,title:(0,J.jsx)(g.FormattedMessage,{defaultMessage:"Try again",id:"assistant.retryButton"})}):null]})}var X=n(71106),ee=n(1302),te=n(83065),ne=n(15336),ie=n(73063),ae=n(65187),se=n(43250),oe=n(12534),re=n(28685),le=n(29026);function ce(e){window.__c={n:"AssistantRichTextInput"};const{store:t,placeholder:n,disabled:r,onSubmit:l,onFocus:c}=e,d=(0,a.O7)(),{isMobile:u}=(0,a.Fy)(),g=(0,s.VK)((()=>""===(0,h.Jcv)(t.getValue()).trim()),[t]),[m,f]=i.useState(!1),x=(0,i.useCallback)((e=>{g||!l||r||m||(l(t.getValue()),C.createAndCommit({userAction:"AssistantRichTextInput.valueChanged",environment:d,perform:e=>{y.sO({environment:d,store:t,value:void 0,transaction:e})}}))}),[r,d,l,t,g,m]),v=(0,i.useCallback)((e=>{(0,oe.ZP)({event:e,context:oe.Af.ButtonMouseDown,callback:()=>{!async function(e){const{environment:t,textValueStore:n,setIsUndoing:i}=e;i(!0);const a=await(0,V.rewindActiveAssistantSession)({environment:t});a&&C.createAndCommit({userAction:"AssistantRichTextInput.undoLastHumanStep",environment:t,perform:e=>{y.sO({environment:t,store:n,value:a,transaction:e})}});await ee.default.afterNextFlush((()=>{k.NX({store:n})})),i(!1)}({environment:d,textValueStore:t,setIsUndoing:f})}})}),[d,t]),S=(0,i.useCallback)((e=>{!l||g||m||(l(t.getValue()),C.createAndCommit({userAction:"AssistantRichTextInput.valueChanged",environment:d,perform:e=>{y.sO({environment:d,store:t,value:void 0,transaction:e})}}))}),[l,g,t,d,m]),w=(0,i.useCallback)((()=>{le.ZP.setState({...le.ZP.state,mode:"search"})}),[]),b=(0,o.yK)((e=>({wrap:{display:"flex",alignItems:"center",flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:u?22:16,padding:u?"6px 16px":"6px 12px",height:u?44:void 0,marginLeft:16,marginRight:16,overflow:"hidden",fontSize:u?16:14},text:{maxHeight:64},placeholder:{maxHeight:64,opacity:r?.5:1,cursor:"text"}})),[r,u]);return(0,J.jsxs)("div",{style:b.wrap,...u?{}:{className:se.Wh_},onClick:e=>{if(e.target===e.currentTarget){const n=re.E.findEditableWithStore(t);n&&n.handleClick(e)}},children:[(0,J.jsx)(ae.Z,{onEsc:()=>{w()},placeholder:n,disabled:!1,store:t,style:b.text,placeholderStyle:b.placeholder,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!1,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onEnter:r?p.ZT:S,disableMobileActionBar:!0,disableDateReminderMentions:!0,disableStyleAnnotations:!0,disableMentions:!0,onFocus:c}),(0,J.jsx)(de,{disabled:r??!1,isUndoing:m,storeIsEmpty:g,handleClickEnter:x,handleClickStop:v})]})}function de(e){window.__c={n:"AssistantIconButton"};const{disabled:t,isUndoing:n,storeIsEmpty:i,handleClickStop:a,handleClickEnter:s}=e,r=(0,o.yK)((e=>({icon:{height:20,width:20},button:{pointerEvents:"auto",height:16,width:16}})),[]);return n?(0,J.jsx)(ie.Z,{icon:te._,onClick:()=>{},isBlue:!1,disabled:!0,iconStyle:r.icon,style:r.button,ariaLabel:"submit-ai-message"}):t?(0,J.jsx)(ie.Z,{icon:ne.q,onClick:a,style:r.button,iconStyle:r.icon,ariaLabel:"stop-ai-message"}):(0,J.jsx)(ie.Z,{icon:te._,onClick:s,isBlue:!i,disabled:i||t,iconStyle:r.icon,style:r.button,ariaLabel:"submit-ai-message"})}var ue=n(21202),pe=n(91839),ge=n(31278),he=n(76798),me=n(35661),fe=n(6507);function xe(e){window.__c={n:"AssistantSearchResultsThinkingMessage"};const{clientStep:t,parentStore:n,configurationState:a,citationHoverStore:s,renderAsFullPage:o}=e,{searchResults:r}=t,l=(0,i.useMemo)((()=>r.map((e=>me.G.createChildStore(n,{table:ue.iU,id:e})))),[n,r]),c=(0,i.useRef)(null);return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(fe.J,{clientStep:t,configurationState:a,fakeSlackUser:void 0,forceShowFeedback:!1,ref:c,children:(0,J.jsx)(ve,{searchResultStores:l})}),(0,J.jsx)(z.P,{containerRef:c,hoverStore:s,parentStore:n,renderAsFullPage:o})]})}function ve(e){window.__c={n:"ThinkingMessageBody"};const{searchResultStores:t}=e,[n,a]=(0,i.useState)(0),r=(0,o.yK)((e=>({messageWrapper:{display:"flex",marginTop:6,marginBottom:6},currentElementStyle:{marginRight:6,display:"flex",height:21}})),[]);(0,i.useEffect)((()=>{const e=setInterval((()=>{a((e=>e+1))}),800);return()=>clearInterval(e)}),[]);const l=(0,s.VK)((()=>t.map(((e,t)=>(0,J.jsx)("div",{style:r.currentElementStyle,children:(0,J.jsx)(g.FormattedMessage,{id:"AssistantChatStep.searchingText",defaultMessage:"Reading {link}",values:{link:(0,J.jsx)("div",{style:f.Z.textOverflowStyle,children:(0,J.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,J.jsx)(ge.Z,{disabled:!0,isEmptyPage:e.isEmptyPage(),icon:e.getIcon(),size:20,emojiSize:20,disableShrinking:!0,largeIcon:!0,style:{margin:"0px 4px"}}),(0,J.jsx)(he.Z,{store:e})]})})}})},t)))),[t,r.currentElementStyle]),c=n>=t.length?(0,J.jsx)("div",{style:{...r.currentElementStyle},children:(0,J.jsx)(g.FormattedMessage,{id:"AssistantChatStep.summarize",defaultMessage:"Summarizing"})}):l[n];return(0,J.jsxs)("div",{style:{display:"flex"},children:[(0,J.jsx)("div",{style:{minWidth:50},children:c}),(0,J.jsx)("div",{style:{display:"flex",alignItems:"center",marginLeft:2},children:(0,J.jsx)(pe.Z,{isTriColored:!0})})]})}var Se=n(72263),ye=n(1865),ke=n(42922),Ce=n(35057);function we(){window.__c={n:"AssistantUpsellButton"};const e=(0,a.O7)(),t=(0,o.yK)((()=>({button:{alignSelf:"flex-start",borderRadius:100,display:"flex",gap:6,marginTop:6,marginBottom:6,padding:"7px 12px"}})),[]),n=(0,i.useCallback)((()=>{ye.y(e,{from:"ai_limit_in_app",for:(0,Ce.zt)(),addOnFeature:"ai"})}),[e]);return(0,J.jsxs)(ke.Z,{style:t.button,onClick:n,children:[(0,Se._)({width:16,height:16}),(0,J.jsx)(g.FormattedMessage,{id:"AssistantUpsellButton.label",defaultMessage:"Get unlimited AI"})]})}const be=(0,g.defineMessages)({qnaInputPlaceholder:{id:"assistantChat.qnaInputPlaceholder.text",defaultMessage:"Ask a question…"},assistantInputPlaceholder:{id:"assistantChat.assistantInputPlaceholder.text",defaultMessage:"Ask for anything…"},qnaAssistantChatText:{id:"assistantChat.qnaWelcomeMessage.text",defaultMessage:"Hi {firstName}! Ask me about anything in {workspaceName}. I’ll find an answer in the pages you have access to."},assistantBetaDisclaimerText:{id:"assistantChat.qnaWelcomeMessage.disclaimerText",defaultMessage:"I’m still in Beta, so please use the 👍 👎 buttons to help me improve."}});function je(e){window.__c={n:"AssistantChat"};const{isQuickSearchMode:t,renderAsFullPage:n=!1}=e,u=(0,a.O7)(),{isMobile:L}=u.device,W=(0,i.useRef)(void 0),z=(0,g.useIntl)(),N=(0,s.VK)((()=>_.Z.getActiveAssistantRuntimeState()),[]),D=(0,s.VK)((()=>_.Z.getActiveAssistantConfigurationState()),[]),H=(0,s.VK)((()=>B.default.state.mainEditorCurrentBlockStore),[]),U=(0,s.VK)((()=>B.default.state.currentSpaceStore),[]),q=(0,s.VK)((()=>w.Z.state),[]),[Q,G]=(0,i.useState)(!1),$=null==N?void 0:N.selectedSkill,X=Boolean(null==D?void 0:D.isQnA),ee=(0,s.VK)((()=>{var e;const t=null===(e=_.Z.getActiveAssistantRuntimeState())||void 0===e?void 0:e.previewingStepObservations.filter((e=>"observation"===e.type&&"error"===e.observationType));return null==t?void 0:t.map((e=>e.value)).join("\n")}),[]),te=(0,s.VK)((()=>(0,M.Gw)()),[]),ne=(0,s.VK)((()=>R.Pl.state),[]),ie=Boolean(ne),{store:ae}=(0,Z.Cl)({initialValue:void 0,onChange:p.yR}),se=(null==D?void 0:D.evaluating)||(null==D?void 0:D.sampling)||(null==D?void 0:D.committing)||!1===q,oe=(0,i.useMemo)((()=>{if(null==D||!D.startTimestamp)return;const e=(0,c.kT)({date:D.startTimestamp,timezone:(0,d.r)()});return[(0,l.p6)({allowRelativeDates:!0,date:e,dateFormat:"relative",intl:z,shortenDate:!1}),e.toFormat("hh:mm a")].join(" ")}),[null==D?void 0:D.startTimestamp,z]),re=(0,i.useCallback)((()=>{W.current&&(W.current.scrollToBottom(),G(!1))}),[G]),le=(0,i.useCallback)((async e=>{if(ie&&(null==ne||!ne.selectedFakeUser))return void x.deprecatedShowErrorMessage("Please select a user to send the message as");if(!e)return;re();let t=_.Z.getActiveSessionId();if(!t){t=(await V.resetAndInitializeAssistantStores({environment:u,isLabelerSlackMode:ie,fakeSlackChannel:null==ne?void 0:ne.selectedFakeChannel,clientSkill:$,isQnA:X})).sessionId}V.commitHumanStep({environment:u,text:e,fakeUser:null==ne?void 0:ne.selectedFakeUser,sessionId:t}),_.Z.setLastSessionInitializedUnixEpochTime()}),[ie,null==ne?void 0:ne.selectedFakeUser,null==ne?void 0:ne.selectedFakeChannel,re,u,$,X]),de=(0,i.useCallback)((()=>{const e=W.current;e&&(e.atScrollEnd()?G(!1):G(!0))}),[]),ue=(0,i.useCallback)((e=>X?"human"===e.type||"assistantChat"===e.type||"assistantChatText"===e.type||"assistantShowSearchResults"===e.type:"human"===e.type||"assistantChat"===e.type||"assistantChatText"===e.type||"assistantShowSearchResults"===e.type||"assistantTransaction"===e.type),[X]);(0,i.useEffect)((()=>{v.ZH({device:u.device}),k.N_({store:ae})}),[u,ae]),(0,i.useEffect)((()=>{const e=_.Z.getActiveAssistantRuntimeStore();e&&null!=N&&N.primeTextInput&&(C.createAndCommit({userAction:"assistant.primeTextFromSearch",environment:u,perform:e=>{y.sO({environment:u,store:ae,value:h.TPx(N.primeTextInput),transaction:e})}}),V.clearPrimedText({assistantRuntimeStore:e}))}),[u,ae,null==N?void 0:N.primeTextInput]),(0,i.useEffect)((()=>{W.current&&!Q&&W.current.scrollToBottom()}),[null==N?void 0:N.clientSteps,null==N?void 0:N.temporaryClientSteps,Q]);const pe=function(e){const{assistantRuntimeState:t,assistantConfigurationState:n}=e;return(0,s.VK)((()=>{if(!t||!n)return;if(!n.sampling&&!n.evaluating)return;const e=t.temporaryClientSteps.find((0,m.AO)((e=>"assistantChat"===e.type||"assistantTransaction"===e.type||"assistantChatText"===e.type?{true:e}:{false:e})));if(e&&("assistantTransaction"===e.type||!(0,I.S)(e)))return;const i=t.clientSteps[t.clientSteps.length-1];return i&&"assistantShowSearchResults"===i.type?{type:"searchResults",step:i}:{type:"default"}}),[t,n])}({assistantRuntimeState:N,assistantConfigurationState:D}),ge=(0,s.qz)(void 0,K.d),he=(0,i.useMemo)((()=>r.default.createValue(!1)),[]),me=(0,i.useMemo)((()=>r.default.createValue(!0)),[]);(0,i.useEffect)((()=>{pe&&(he.setState(!1),me.setState(!0))}),[he,me,pe]);const fe=Boolean((null==D?void 0:D.sampling)||(null==D?void 0:D.evaluating));(0,i.useEffect)((()=>{if(!fe){var e;const t=null===(e=_.Z.getActiveAssistantRuntimeStore())||void 0===e?void 0:e.getCombinedSteps().at(-1);if("assistantChat"===(null==t?void 0:t.type)){const{pageCitations:e}=(0,E.KD)({environment:u,clientStep:t,citationOrdering:void 0});0===e.length&&me.setState(!1)}}}),[me,u,fe]);const ve=(0,s.VK)((()=>{var e;return Boolean(null===(e=_.Z.getActiveAssistantRuntimeState())||void 0===e?void 0:e.clientSteps.find((e=>"human"===e.type)))}),[]),Se=function(){const{device:e}=(0,a.O7)(),{isMobile:t}=e;return(0,o.yK)((e=>({wrap:{display:"flex",flexDirection:"column",background:e.contentBackground,width:400,height:"max(calc(100vh - 78px), 300px)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",pointerEvents:"auto",paddingTop:8,paddingLeft:12,paddingRight:12},labeledInput:{display:"flex",gap:8,alignItems:"center"},reset:{color:e.mediumIconColor},toggleSlackMode:{color:e.mediumIconColor},closeButton:{borderRadius:"100%",marginLeft:4},input:{width:void 0,marginLeft:8,marginRight:8},scroller:{flexGrow:1,display:"flex",flexDirection:"column",paddingTop:8,paddingBottom:12,paddingLeft:16,paddingRight:16,WebkitMaskImage:"linear-gradient(black calc(100% - 12px), transparent)"},samplesLabel:{fontSize:t?14:12,marginTop:8,marginBottom:8},inputLabel:{fontSize:t?16:14,color:e.mediumTextColor},previewLabel:{fontSize:t?14:12},editLink:{fontSize:t?16:14,color:e.mediumTextColor,textDecoration:"underline",paddingLeft:8,paddingRight:8},error:{fontSize:t?16:14,color:e.errorText},addCustomInstructionsIcon:{fill:e.aiPurpleColor},suggestionsLabel:{fontSize:t?14:12,color:e.mediumTextColor,marginTop:18,marginBottom:12},emptyStateIntro:{marginLeft:18,marginRight:18},faceImgWrap:{width:64,height:64,borderRadius:"100%",background:"white",boxShadow:e.largeLightBoxShadow,overflow:"hidden"},faceImg:{width:64,pointerEvents:"none"},emptyStateText:{marginTop:28,fontSize:16,color:e.regularTextColor,fontFamily:f.Z.baseFontFamily.serif},inputWrap:{paddingTop:0,paddingBottom:12},skillsCaption:{fontSize:t?14:12,color:e.mediumTextColor,marginBottom:8},skillIcon:{fill:e.aiPurpleColor},skillsWrap:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:8},date:{fontSize:t?14:12,color:e.lightTextColor},dateContainer:{display:"flex",justifyContent:"center",marginTop:4,marginBottom:4},upsellWrap:{marginTop:4,display:"flex",flexDirection:"column"}})),[t])}();if(!U||!n&&!H)return null;const ye=new P.Z;return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(A.A,{scrollerStore:ye}),(0,J.jsxs)(j.Z,{ref:W,type:T.Z.Y,style:Se.scroller,onScroll:de,store:ye,children:[(0,J.jsx)("div",{style:{marginTop:"auto"}}),oe&&(0,m.$K)(N)&&N.clientSteps.length>0?(0,J.jsx)("div",{style:Se.dateContainer,children:(0,J.jsx)("div",{style:Se.date,children:oe})}):null,!ve&&(0,J.jsx)(Te,{renderAsFullPage:n}),null!=N&&N.clientSteps?N.clientSteps.filter(ue).map(((e,t)=>(0,J.jsx)(O.H,{clientStep:e,parentStore:U,parentSpaceId:U.id,fakeSlackUser:"human"===e.type?e.fakeUser:void 0,configurationState:D,renderAsFullPage:n,latestStepCitationHoverStore:ge},t))):null,null!=N&&N.temporaryClientSteps?N.temporaryClientSteps.filter(ue).map(((e,t)=>(0,J.jsx)(O.H,{clientStep:e,parentStore:U,parentSpaceId:U.id,configurationState:D,renderAsFullPage:n,latestStepCitationHoverStore:ge},t))):null,pe&&("default"===pe.type?(0,J.jsx)(O.H,{clientStep:{type:"assistantLoading"},parentStore:U,parentSpaceId:U.id,configurationState:D,renderAsFullPage:n,latestStepCitationHoverStore:ge}):"searchResults"===pe.type?(0,J.jsx)(xe,{clientStep:pe.step,parentStore:U,configurationState:D,citationHoverStore:ge,renderAsFullPage:n}):(0,m.t1)(pe)),(0,J.jsx)(Ae,{hoverStore:ge,parentStore:U,expandedStore:he,toggledStore:me,isLoading:!(0,m.$K)(pe)&&fe}),D&&ee&&!D.sampling&&!D.evaluating&&(X?(0,J.jsx)(O.H,{clientStep:{type:"assistantFriendlyError"},parentStore:U,parentSpaceId:U.id,configurationState:D,renderAsFullPage:n,latestStepCitationHoverStore:ge}):(0,J.jsx)("div",{style:Se.error,children:ee})),!te&&N&&D&&(N.temporaryClientSteps.length>0||ee)&&!D.sampling&&!D.evaluating&&(0,J.jsx)(Y,{type:ee?X?"retry_only":"error":Boolean(N.temporaryClientSteps.find((e=>"assistantTransaction"===e.type)))?"accept_action":"feedback"}),!t&&!L&&!te&&(!N||0===N.clientSteps.length&&0===N.temporaryClientSteps.length)&&(!D||!D.sampling&&!D.evaluating)&&(0,J.jsx)(Ze,{}),q?null:(0,J.jsxs)("div",{style:Se.upsellWrap,children:[(0,J.jsx)(O.H,{clientStep:{type:"assistantUpsell"},parentStore:U,parentSpaceId:U.id,configurationState:D,renderAsFullPage:n,latestStepCitationHoverStore:ge}),(0,J.jsx)(we,{})]})]}),q?(0,J.jsx)("div",{style:Se.inputWrap,children:(0,J.jsx)(b.Z,{capture:L,render:()=>(0,J.jsx)(ce,{store:ae,placeholder:X?z.formatMessage(be.qnaInputPlaceholder):z.formatMessage(be.assistantInputPlaceholder),onSubmit:le,onFocus:()=>{S.MO(),L&&F.Z.onShow(re)},disabled:se})})}):null]})}function Ae(e){window.__c={n:"LatestStepCitations"};const{hoverStore:t,parentStore:n,expandedStore:i,toggledStore:a,isLoading:o}=e,{chatStep:r,searchResultsStep:l}=(0,s.VK)((()=>{var e;const t=(null===(e=_.Z.getActiveAssistantRuntimeStore())||void 0===e?void 0:e.getCombinedSteps())??[];if(0===t.length)return{chatStep:void 0,searchResultsStep:void 0};const n=t.slice(-2).reverse().find((0,m.AO)((e=>"assistantShowSearchResults"===e.type?{true:e}:{false:e}))),i=t[t.length-1];return{chatStep:"assistantChat"===i.type?i:void 0,searchResultsStep:n}}),[]),c={hoverStore:t,parentStore:n,expandedStore:i,canExpand:!0,toggledStore:a,isLoading:o};return(0,m.$K)(r)?(0,J.jsx)(Ie,{...c,chatStep:r,searchResultsStep:l}):(0,m.$K)(l)?(0,J.jsx)(Me,{...c,searchResultsStep:l}):null}function Ie(e){window.__c={n:"CitedPagesListWithNumbers"};const{chatStep:t,parentStore:n,searchResultsStep:s,...o}=e,r=(0,a.O7)(),{pageCitations:l}=(0,E.RS)({environment:r,clientStep:t,citationOrdering:s?(0,E.TT)(s):void 0}),c=(0,i.useMemo)((()=>(0,E.Zr)({pageCitationsFromChat:l,parentStore:n,searchResultsStep:s})),[l,n,s]);return(0,J.jsx)(z.d,{citations:c,...o})}function Me(e){window.__c={n:"CitedPagesListFromSearch"};const{parentStore:t,searchResultsStep:n,...a}=e,s=(0,i.useMemo)((()=>(0,E.Zr)({pageCitationsFromChat:[],parentStore:t,searchResultsStep:n})),[t,n]);return(0,J.jsx)(z.d,{citations:s,...a})}function Ze(){window.__c={n:"AssistantHelpRedirectBar"};const e=(0,o.yK)((e=>({wrap:{display:"flex",marginTop:8,marginBottom:6,gap:6}})),[]);return(0,s.VK)((()=>L.default.state.open),[])?null:(0,J.jsx)("div",{style:e.wrap,children:(0,J.jsx)(W.Z,{icon:e=>(0,u.m)({...e,fontWeight:500}),onClick:()=>X.GA.update((e=>({...e,open:!0}))),title:(0,J.jsx)(g.FormattedMessage,{defaultMessage:"Get Notion help",id:"AssistantChat.routeToNotionHelp"})})})}function Te(e){window.__c={n:"AssistantWelcomeHeader"};const{renderAsFullPage:t}=e,n=(0,g.useIntl)(),i=(0,s.VK)((()=>_.Z.getActiveAssistantConfigurationState()),[]),a=(0,s.VK)((()=>B.default.state.mainEditorCurrentBlockStore),[]),o=(0,s.VK)((()=>B.default.state.currentSpaceStore),[]),r=(0,s.VK)((()=>{var e;return null===(e=B.default.state.currentUserStore)||void 0===e?void 0:e.getDisplayName(n)}),[n]),l=(0,s.VK)((()=>w.Z.state),[]),c=(0,s.VK)((()=>null==o?void 0:o.getName()),[o]);return o&&c&&(t||a)&&r&&l?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(O.H,{clientStep:{type:"assistantChatText",text:n.formatMessage(be.qnaAssistantChatText,{firstName:r,workspaceName:c})},parentStore:o,parentSpaceId:o.id,configurationState:i,renderAsFullPage:t,latestStepCitationHoverStore:void 0}),(0,J.jsx)(O.H,{clientStep:{type:"assistantChatText",text:n.formatMessage(be.assistantBetaDisclaimerText)},parentStore:o,parentSpaceId:o.id,configurationState:i,renderAsFullPage:t,latestStepCitationHoverStore:void 0})]}):null}},84969:(e,t,n)=>{n.d(t,{G:()=>_,KD:()=>F,RS:()=>T,TT:()=>R,Zr:()=>B,mN:()=>Z});n(57658),n(21703);var i=n(67294),a=n(18466),s=n(26263),o=n(480),r=n(86628),l=n(49085),c=n(88891),d=n(24993),u=n(72126),p=n(21202),g=n(19889),h=n(70203),m=n(44805),f=n(97880),x=n(14871),v=n(39699),S=n(15201),y=n(55217),k=n(62619),C=n(35661),w=n(49065),b=n(48588),j=n(67973),A=n(6507),I=n(42899),M=n(85893);function Z(e){window.__c={n:"AssistantChatMessageRenderer"};const{clientStep:t,parentStore:n,configurationState:a,fakeSlackUser:s,isLatestStep:c,renderAsFullPage:d,priorSearchResultsStep:u}=e,p=(0,o.O7)(),g=(0,r.qz)(void 0,j.d),x=e.citationHoverStore??g,{temporaryListStore:v,pageCitations:C}=T({environment:p,clientStep:t,citationOrdering:u?R(u):void 0}),w=(0,i.useMemo)((()=>B({pageCitationsFromChat:C,parentStore:n,searchResultsStep:u})),[C,n,u]),Z=(0,i.useRef)(null),_=(0,i.useMemo)((()=>l.default.createValue(!1)),[]),F=(0,i.useMemo)((()=>l.default.createValue(!1)),[]);return function(e){const{containerRef:t,citationHoverStore:n}=e,a=(0,r.VK)((()=>{var e;const n=b.Z.state;if(!n||!t.current||!k.r3(t.current,n.token.node))return;const i=n.annotations.find(h.OU5),a=i?null===(e=h.Vv0(i))||void 0===e?void 0:e.blockId:void 0;return a?{pageId:a,tokenNode:n.token.node}:void 0}),[t]),s=(0,i.useRef)([]);(0,i.useEffect)((()=>{n.setState(a?{pageId:a.pageId,tokenNode:a.tokenNode}:void 0)}),[n,a]),(0,r.VK)((()=>{var e;const i=null===(e=n.state)||void 0===e?void 0:e.pageId,o=(0,f.$K)(a)?void 0:i;for(const t of s.current)t.style.removeProperty("background-color");const r=[];if(o&&t.current){const e=t.current.querySelectorAll(`[${m.JQ}='${o}']`);for(const t of Array.from(e))t instanceof HTMLElement&&t&&(t.style.backgroundColor="#2383e2",r.push(t))}s.current=r}),[n,t,a]),(0,i.useEffect)((()=>()=>{for(const e of s.current)e.style.removeProperty("background-color")}),[])}({containerRef:Z,citationHoverStore:x}),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(A.J,{ref:Z,clientStep:t,configurationState:a,fakeSlackUser:s,forceShowFeedback:c,children:(0,M.jsx)(S.O,{displayName:"AssistantChatStepContent",disabled:!0,children:(0,M.jsx)(y.Z,{store:v,disabled:!1,disableCommentMenu:!0,disableHoverMenu:!0,disableDrag:!0})})}),!c&&(0,M.jsx)(I.d,{citations:w,hoverStore:x,canExpand:!0,toggledStore:_,expandedStore:F}),(0,M.jsx)(I.P,{containerRef:Z,hoverStore:x,parentStore:n,renderAsFullPage:d})]})}function T(e){const{environment:t,clientStep:n,citationOrdering:s}=e;return(0,i.useMemo)((()=>a.Z.withListenerIgnored((()=>F({environment:t,clientStep:n,citationOrdering:s})))),[t,n,s])}function B(e){const{pageCitationsFromChat:t,searchResultsStep:n,parentStore:i}=e,a=u.jj([...(null==n?void 0:n.searchResults)??[],...t.map((e=>e.pointer.id))]),s=new Map(t.map((e=>[e.pointer.id,e.number])));return a.map((e=>{const t={id:e,table:p.iU};return{pointer:t,store:C.G.createChildStore(i,t),number:s.get(e)}}))}function _(e){const{environment:t,clientStep:n,transaction:i,citationOrdering:a}=e,o=new s.Z({name:"AssistantChatMessageRenderer",isSyntheticAssistantData:!0}),r=t.currentUser.id;if(!r)throw new Error("No current user.");const l={table:g.KJ,id:r},u=e=>{const i=(0,d.Cr)({pageIdOrder:a});for(const a of n.operations){const n=(0,c.ND)({assistantOperation:a,actorPointer:l,getRecordValue:o.makeGetRecordValueFn(r),spaceId:e.spaceId,getCitationNumberForPage:i});for(const i of n){let n;n=i.pointer.table===p.iU?new C.G(t,i.pointer,{inMemoryRecordCache:o}):new w.ST({environment:t,pointer:i.pointer,path:i.path,inMemoryRecordCache:o}),v.applyOperation({store:n,operation:i,transaction:e}),n instanceof C.G&&o.setModelAndRole({pointer:i.pointer,userId:r},n.getModel(),"reader")}}return n.blockIds.map((e=>new C.G(t,{table:p.iU,id:e},{inMemoryRecordCache:o})))};if(o.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),i)return u(i);return v.createAndCommit({userAction:"AssistantChatMessageRenderer.temporaryListStore",environment:t,perform:u,canUndo:!1}).performResult}const R=e=>e.searchResults;function F(e){const{environment:t,clientStep:n,citationOrdering:i}=e,a=new s.Z({name:"AssistantChatMessageListRenderer"});return v.createAndCommit({userAction:"AssistantChatMessageRenderer.temporaryListStore",environment:t,canUndo:!1,perform:e=>{const s=_({environment:t,clientStep:n,transaction:e,citationOrdering:i}),o=u.MR(s.flatMap((e=>e.getTitleValue())).filter(h.km_).flatMap(h.hn0).filter(h.OU5).map((e=>{const{number:t,blockId:n}=h.Vv0(e);if(n)return{number:t,pointer:{id:n,table:p.iU}}})).filter(f.$K),(e=>e.number)),r=u.mN(o,(e=>e.pointer.id));return{temporaryListStore:x.Lh({environment:t,stores:s,inMemoryRecordCache:a,transaction:e}),pageCitations:r}}}).performResult}},45906:(e,t,n)=>{n.d(t,{H:()=>D});n(67635);var i=n(67294),a=n(480),s=n(86628),o=n(24405),r=n(49019),l=n(35840),c=n(23867),d=n(97880),u=n(5366),p=n(1865),g=n(91839),h=n(60682),m=n(57254),f=n(14976),x=n(98180),v=n(35057),S=n(85893);function y(e){window.__c={n:"AssistantBlueLink"};const t=(0,o.yK)((e=>({assistantBlueLink:{color:e.text.interactive,cursor:"pointer",fontWeight:600}})),[]);return(0,S.jsx)("span",{style:t.assistantBlueLink,onClick:e.onClick,children:e.children})}var k=n(84969),C=(n(21703),n(18466)),w=n(26263),b=n(46964),j=n(14871),A=n(39699),I=n(15201),M=n(55217),Z=n(77907);function T(e){window.__c={n:"AssistantChatMessageRendererMarkdown"};const{clientStep:t}=e,n=(0,a.O7)(),{value:s}=(0,Z.useDependency)(Z.deps.markdownLinkifyIt),o=(0,i.useMemo)((()=>s?C.Z.withListenerIgnored((()=>function(e){const{environment:t,clientStep:n,markdownLinkifyIt:i}=e,a=new w.Z({name:"AssistantChatMessageListRenderer"});return A.createAndCommit({userAction:"AssistantChatMessageRenderer.temporaryListStore",environment:t,perform:e=>{const s=function(e){const{environment:t,clientStep:n,transaction:i,markdownLinkifyIt:a}=e,s=new w.Z({name:"AssistantChatMessageRenderer",isSyntheticAssistantData:!0}),o=t.currentUser.id;if(!o)throw new Error("No current user.");const r=e=>{const i=j.Mt({environment:t,text:(0,b.rr)(n.text),transaction:e,inMemoryRecordCache:s,markdownLinkifyIt:a,tinyMceMicrosoftWordPasteFilter:void 0});if(!i)return[];for(const t of i)s.setModelAndRole({pointer:t.pointer,userId:o},t.getModel(),"reader");return i};if(s.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),i)return r(i);return A.createAndCommit({userAction:"AssistantChatMessageRenderer.temporaryListStore",environment:t,perform:r}).performResult}({environment:t,clientStep:n,transaction:e,markdownLinkifyIt:i});return j.Lh({environment:t,stores:s,inMemoryRecordCache:a,transaction:e})}}).performResult}({environment:n,clientStep:t,markdownLinkifyIt:s}))):void 0),[t,n,s]);return(0,S.jsx)(I.O,{displayName:"AssistantChatStepContent",disabled:!0,children:o?(0,S.jsx)(M.Z,{store:o,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,disableDrag:!0}):null})}var B=n(6507),_=n(15145),R=n(88891),F=n(21202),P=n(82990),L=n(61519),V=n(84076),K=n(76798),W=n(84210),E=n(80444),O=n(35661);function z(e){window.__c={n:"AssistantTransactionRenderer"};const{clientStep:t}=e,n=(0,R.rn)(t.operations),a=(0,o.yK)((e=>({divider:{marginTop:6,marginBottom:6},subheader:{color:e.mediumTextColor}})),[]);return(0,S.jsx)(S.Fragment,{children:n.map(((e,t)=>(0,S.jsxs)(i.Fragment,{children:[(0,S.jsx)(N,{group:e},t),n[t+1]&&(0,S.jsx)(L.Z,{style:a.divider,size:1})]},t)))})}function N(e){window.__c={n:"AssistantTransactionGroupRenderer"};const{group:t}=e,n=(0,o.yK)((e=>({header:{marginTop:4,marginBottom:6,color:e.mediumTextColor},pageTitle:{display:"inline",color:e.regularTextColor,fontWeight:P.Z.fontWeight.semibold,whiteSpace:void 0,overflow:void 0,textOverflow:void 0,textDecoration:"underline"},divider:{marginBottom:6},subheader:{color:e.mediumTextColor,marginBottom:4}})),[]),i=(0,s.VK)((()=>{const{mainEditorCurrentBlockStore:e}=E.default.state;if(!e)throw new Error("No main editor current block store");return e}),[]),a=(0,s.VK)((()=>i.getSpaceId()),[i]),r=O.G.createChildStore(i,{table:F.iU,id:t.pageId,spaceId:a}),l=(0,s.VK)((()=>t.pageId===i.id?(0,W.ZP)({store:i,pageVisitSource:_.tY.AIChat,fullyQualified:!1}):(0,W.ZP)({store:i,pageVisitSource:_.tY.AIChat,fullyQualified:!1,peekViewBlockId:t.pageId})),[i,t.pageId]);if("updatedPage"===t.type){const{insertedBlockIds:e,updatedBlockIds:i,removedBlockIds:a,updatedTitle:s,updatedPropertyNames:o}=t,c=e.size+i.size+a.size+(s?1:0)+o.size;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(V.Z,{style:n.header,href:l,children:(0,S.jsx)("span",{children:t.didCreatePage?(0,S.jsx)(u.FormattedMessage,{defaultMessage:"Created {page}",id:"assistant.transactionRenderer.createdPage.title",values:{page:(0,S.jsx)(K.Z,{store:r,style:n.pageTitle})}}):(0,S.jsx)(u.FormattedMessage,{defaultMessage:"{numEdits, plural, one {1 edit to {page}} other {{numEdits} edits to {page}}}",id:"assistant.transactionRenderer.editedPage.title",values:{numEdits:c,page:(0,S.jsx)(K.Z,{store:r,style:n.pageTitle})}})})}),s&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{style:n.subheader,children:"Updated title"})}),e.size>0&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{style:n.subheader,children:`Inserted ${e.size} block${e.size>1?"s":""}`})}),i.size>0&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{style:n.subheader,children:`Updated ${i.size} block${i.size>1?"s":""}`})}),a.size>0&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{style:n.subheader,children:`Removed ${a.size} block${a.size>1?"s":""}`})})]})}if("removedPage"===t.type)return(0,S.jsx)(V.Z,{style:n.header,href:l,children:(0,S.jsx)("span",{children:(0,S.jsx)(u.FormattedMessage,{defaultMessage:"Deleted {page}",id:"assistant.transactionRenderer.removedPage.title",values:{page:(0,S.jsx)("span",{style:{fontWeight:P.Z.fontWeight.bold},children:(0,S.jsx)(K.Z,{store:r,style:n.pageTitle})})}})})});(0,d.t1)(t)}function D(e){window.__c={n:"AssistantChatStep"};const{clientStep:t,parentStore:n,parentSpaceId:i,fakeSlackUser:C,configurationState:w,renderAsFullPage:b,latestStepCitationHoverStore:j}=e,A=(0,a.O7)(),I=(0,o.Fg)(),M=(0,s.VK)((()=>{const e=x.Z.getActiveAssistantRuntimeStore(),t=(null==e?void 0:e.getCombinedSteps())??[],n=t.findLast((e=>"human"===e.type));if(!n)return;const i=t.indexOf(n);return t.slice(i-1).find((e=>"assistantSearch"===e.type||"assistantLoadPage"===e.type))}),[]),{isCurrentClientStepLatestStep:Z,priorSearchResultsStep:_}=(0,s.VK)((()=>{const e=x.Z.getActiveAssistantRuntimeState(),n=[...(null==e?void 0:e.clientSteps)??[],...(null==e?void 0:e.temporaryClientSteps)??[]],i=n.indexOf(t),a=i-1>=0?n[i-1]:void 0;return{isCurrentClientStepLatestStep:i>=0&&i===n.length-1,priorSearchResultsStep:"assistantShowSearchResults"===(null==a?void 0:a.type)?a:void 0}}),[t]),R=(0,s.VK)((()=>{if("human"===t.type)return{element:(0,S.jsx)("div",{style:{wordBreak:"break-word"},children:(0,f.IY)({environment:A,textValue:{value:t.text,spaceId:(0,c.C)(i)},parentStore:n,disableHover:!1,disableStyleAnnotations:!1,disableDateStyleAnnotations:!1,disabled:!0,theme:I,emojiType:(0,h.e_)(A),katex:A.KatexStore.getKatex(),formulaValueTypes:[]})})};if("assistantLoading"===t.type)return{element:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",whiteSpace:"pre"},children:["assistantSearch"===(null==M?void 0:M.type)?(0,S.jsx)(u.FormattedMessage,{id:"AssistantChatStep.searching",defaultMessage:"Searching {icon} {keywords}",description:"Placeholder text while the AI is searching. The icon is a magnifying glass.",values:{icon:(0,l.R)({width:12,height:12}),keywords:(0,S.jsx)("span",{style:{fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",maxWidth:"70%",textTransform:"lowercase",whiteSpace:"nowrap"},children:M.keywords})},children:function(e){return(0,S.jsx)(S.Fragment,{children:e.map(((e,t)=>"string"==typeof e?(0,S.jsx)("span",{children:e},t):e))})}}):"assistantLoadPage"===(null==M?void 0:M.type)?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(u.FormattedMessage,{id:"AssistantChatStep.loadingPage",defaultMessage:"Reading page"})," "]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(u.FormattedMessage,{id:"AssistantChatStep.thinking",defaultMessage:"Thinking"})," "]}),(0,S.jsx)("div",{style:{marginLeft:4},children:(0,S.jsx)(g.Z,{isTriColored:!0})})]})};if("assistantThink"===t.type)return{element:(0,S.jsx)(S.Fragment,{children:`💡 ${t.thought}`})};if("assistantChatText"===t.type)return(0,m.S)(t)?{element:null,doNotWrap:!0}:{element:(0,S.jsx)(T,{clientStep:t})};if("assistantChat"===t.type)return(0,m.S)(t)?{element:null,doNotWrap:!0}:{element:(0,S.jsx)(k.mN,{clientStep:t,parentStore:n,configurationState:w,fakeSlackUser:C,isLatestStep:Z,renderAsFullPage:b,priorSearchResultsStep:_,citationHoverStore:Z?j:void 0}),doNotWrap:!0};if("assistantTransaction"===t.type)return{element:(0,S.jsx)(z,{clientStep:t})};if("assistantLoadPage"===t.type)return{element:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(u.FormattedMessage,{id:"AssistantChatStep.loadPage",defaultMessage:"Reading pages"}),(0,S.jsx)("div",{style:{marginLeft:6},children:(0,S.jsx)(g.Z,{})})]})};if("assistantFriendlyError"===t.type)return{element:(0,S.jsx)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:"I'm sorry! I wasn't able to complete this query. Please try asking me a different question."})};if("assistantSearch"===t.type)return{element:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[(0,r.e)({width:14,marginRight:4}),(0,S.jsx)(u.FormattedMessage,{id:"AssistantChatStep.search",defaultMessage:"Search {text}",values:{text:(0,S.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.question})}})]})};if("assistantSearchPeople"===t.type)return{element:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(u.FormattedMessage,{id:"AssistantChatStep.searchPeople",defaultMessage:"Looking up people"}),(0,S.jsx)("div",{style:{marginLeft:6},children:(0,S.jsx)(g.Z,{})})]})};if("queryDatabase"===t.type)return{element:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(u.FormattedMessage,{id:"AssistantChatStep.queryDatabase",defaultMessage:"Querying databases"}),(0,S.jsx)("div",{style:{marginLeft:6},children:(0,S.jsx)(g.Z,{})})]})};if("assistantShowSearchResults"===t.type)return{element:null,doNotWrap:!0};if("assistantUpsell"===t.type){const e=()=>{p.y(A,{from:"ai_limit_in_app",for:(0,v.zt)(),addOnFeature:"ai"})};return{element:(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(u.FormattedMessage,{id:"AssistantChatStep.upsell",defaultMessage:"There are no more AI responses left in your plan. Get the <bold>Notion AI Add-on</bold> so that I can answer an unlimited number of questions for you!",values:{bold:t=>(0,S.jsx)(y,{onClick:e,children:t})}})})}}(0,d.t1)(t)}),[t,A,i,n,I,w,C,Z,b,_,j,M]);return R.doNotWrap?R.element:(0,S.jsx)(B.J,{clientStep:t,configurationState:w,fakeSlackUser:C,forceShowFeedback:Z,children:R.element})}},6507:(e,t,n)=>{n.d(t,{J:()=>Q,O:()=>q});var i=n(67294),a=n(480),s=n(6740),o=n(24405),r=n(72126),l=n(50906),c=n(26388),d=(n(95477),n(82375)),u=n(86628),p=n(77058),g=n(33676),h=n(97022),m=n(39986),f=n(10498),x=n(64964),v=n(23063),S=n(73063),y=n(49085);class k extends y.default{getInitialState(){return{}}}const C=new k;var w=n(98180);class b extends y.default{getInitialState(){return{open:!1,inferenceId:void 0}}}const j=new b;var A=n(95466),I=n(39040),M=n(70203),Z=n(82990),T=n(5366),B=n(54642),_=n(42922),R=n(60458),F=n(36488),P=n(74194),L=n(64369),V=n(92660),K=n(60682),W=n(14976),E=n(80444),O=n(85893);const z=["Difficult to understand","Does not answer my question","Contains irrelevant details","Contains misleading or made-up information","Uses outdated information","I don't fully trust this answer"];function N(){window.__c={n:"ReportBadQnAForm"};const e=(0,o.yK)((e=>({reasonsArea:{width:"100%",background:e.popoverBackground,display:"block",marginBottom:16},title:{},checkboxArea:{display:"flex",alignItems:"center",gap:8},modalWrap:{width:"32rem",padding:24,fontSize:14,maxWidth:"100%"},modalTitle:{fontSize:16,fontWeight:Z.Z.fontWeight.medium},modalSubtitle:{fontSize:14},titleContainer:{marginBottom:16},buttonArea:{display:"flex",justifyContent:"flex-end",marginTop:18},outlineButton:{marginRight:12},selectAll:{fontWeight:500,marginBottom:4},checkboxContainer:{display:"flex",flexDirection:"column",gap:4},linkTruncated:{maxWidth:"16rem",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),[]),[t,n]=(0,i.useState)([]),s=(0,i.useCallback)((e=>()=>{t.includes(e)?n((t=>t.filter((t=>t!==e)))):n((t=>[...t,e]))}),[t]),r=e=>t.includes(e),[l,c]=(0,i.useState)(),[d,p]=(0,i.useState)([]),g=(0,u.VK)((()=>E.default.state.currentSpaceStore),[]),h=(0,a.O7)(),m=(0,o.Fg)(),f=(0,i.useCallback)((()=>{const{inferenceId:e}=j.state,n=null==g?void 0:g.id;e&&n&&(B.saveAssistantFeedback(h,{type:"slackbot_followup_feedback",id:e,notes:l||"",reasons:t,correctAnswerPageIds:d}),j.reset())}),[null==g?void 0:g.id,h,l,t,d]),x=(0,i.useCallback)((e=>{d.includes(e)?p((t=>t.filter((t=>t!==e)))):p((t=>[...t,e]))}),[d]),v=(0,i.useCallback)((e=>d.includes(e)),[d]),S=(0,u.VK)((()=>{var e,t,n;const i=w.Z.getActiveAssistantRuntimeState(),a=null==i||null===(e=i.evaluator)||void 0===e||null===(e=e.codeEvaluator)||void 0===e?void 0:e.state,s=E.default.state.currentSpaceStore,o=null==i||null===(t=i.evaluator)||void 0===t?void 0:t.getTranscript().filter((e=>"observation"===e.type&&"search"===e.observationType)),r=null==o||null===(n=o[o.length-1])||void 0===n?void 0:n.value;if(!r||!s)return[];const l=(0,I.P)(r)[0];if("element"===(c=l).type&&"search-results"===c.tagName&&(null===(d=c.children)||void 0===d?void 0:d.every((e=>"element"===e.type&&"page-result"===e.tagName)))){return l.children.map((e=>{var t;return((null==e||null===(t=e.attributes)||void 0===t?void 0:t.id)&&(null==a?void 0:a.getIdMapper().mapCounterToKey(e.attributes.id).key))??void 0})).filter((e=>!!e)).map((e=>({pageId:e,component:(0,W.IY)({environment:h,parentStore:s,textValue:{value:[(0,M.YCD)(["p",e])],spaceId:s.id},disableHover:!1,disableStyleAnnotations:!1,disableDateStyleAnnotations:!1,disabled:!0,theme:m,emojiType:(0,K.e_)(h),katex:h.KatexStore.getKatex(),formulaValueTypes:[]})})))}var c,d;return[]}),[h,m]);return(0,O.jsx)(V.Z,{onDismiss:D,render:()=>(0,O.jsx)(F.Z,{allowMobileAutoScroll:!0,capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!1,render:t=>(0,O.jsxs)("div",{style:e.modalWrap,...t,children:[(0,O.jsx)("div",{style:e.titleContainer,children:(0,O.jsx)("div",{style:e.modalTitle,children:(0,O.jsx)(T.FormattedMessage,{id:"BadQnAFeedbackForm.title",defaultMessage:"Report bad question & answer"})})}),(0,O.jsxs)("div",{style:e.reasonsArea,children:[(0,O.jsx)("div",{style:e.selectAll,children:"What should we know about this answer?"}),(0,O.jsx)("div",{style:e.checkboxContainer,children:z.map((t=>(0,O.jsxs)("div",{style:e.checkboxArea,children:[(0,O.jsx)(R.Z,{checked:r(t),onClick:s(t),size:14,checkSize:10}),(0,O.jsx)(L.Z,{style:e.title,children:t})]},t)))})]}),(0,O.jsxs)("div",{style:e.reasonsArea,children:[(0,O.jsx)("div",{style:e.selectAll,children:"Do any of these pages have the correct answer?"}),(0,O.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:S.map(((t,n)=>(0,O.jsxs)("div",{style:e.checkboxArea,children:[(0,O.jsx)(R.Z,{checked:v(t.pageId),onClick:()=>x(t.pageId),size:14,checkSize:10}),(0,O.jsx)("div",{style:e.linkTruncated,onClick:e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.firstElementChild instanceof HTMLAnchorElement&&window.open(e.currentTarget.firstElementChild.href,"_blank")},children:t.component})]},t.pageId)))})]}),(0,O.jsx)(P.Z,{textarea:!0,placeholder:"Additional comments...",value:l,onChange:e=>c(e.target.value),focusInitial:!0,inputStyle:{padding:8}}),(0,O.jsxs)("div",{style:e.buttonArea,children:[(0,O.jsx)(_.Z,{isLarge:!0,onClick:D,style:e.outlineButton,isGray:!0,children:(0,O.jsx)(T.FormattedMessage,{id:"BadQnAFeedbackForm.cancelButton.label",defaultMessage:"Cancel"})}),(0,O.jsx)(_.Z,{isLarge:!0,onClick:f,children:(0,O.jsx)(T.FormattedMessage,{id:"BadQnAFeedbackForm.reportButton.label",defaultMessage:"Submit"})})]})]})}),requireOnline:!0,modalStore:j})}function D(){j.update((()=>({open:!1,inferenceId:void 0})))}function H(e){let{configurationState:t,environment:n,isVisible:a,clientAssistantChatStep:s}=e;window.__c={n:"AssistantFeedbackButtons"};const{inferenceId:r}=s,l=(0,u.VK)((()=>C.state[r]??void 0),[r]),c=(0,o.yK)((e=>({thumbsUpFeedbackButton:{width:14,height:14,fill:"thumbs_up"===l?e.blueButtonBackground:e.grayButtonHoveredBackground},thumbsDownFeedbackButton:{width:14,height:14,fill:"thumbs_down"===l?e.blueButtonBackground:e.grayButtonHoveredBackground}})),[l]),d=(0,i.useMemo)((()=>Boolean(t&&t.isQnA)),[t]),S=(0,i.useCallback)((async()=>{const e=w.Z.getActiveSessionId();e&&(await A.assistantActions.saveFeedback({environment:n,inferenceId:r,type:"assistant_thumbs_up",sessionId:e}),C.update((e=>({...e,[r]:"thumbs_up"}))),x.oV({label:(0,O.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,p.$)({width:16,height:16}),"Thanks for your feedback!"]})}))}),[n,r]),y=(0,i.useCallback)((async()=>{const e=w.Z.getActiveSessionId();e&&(await A.assistantActions.saveFeedback({environment:n,inferenceId:r,type:"assistant_thumbs_down",sessionId:e}),C.update((e=>({...e,[r]:"thumbs_down"}))),j.update((()=>({open:!0,inferenceId:r}))))}),[n,r]);return(0,O.jsx)(v.Z,{isVisible:!0,animationStyle:{opacity:a||Boolean(l)?1:0},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:1},render:()=>(0,O.jsxs)("div",{style:{marginTop:"auto",display:"flex"},children:[(0,O.jsx)(U,{type:"up",iconHollow:m.P,iconFilled:f.w,onClick:S,style:c.thumbsUpFeedbackButton,feedbackReceived:l}),(0,O.jsx)(U,{type:"down",iconHollow:g.A,iconFilled:h.E,onClick:y,style:c.thumbsDownFeedbackButton,feedbackReceived:l}),d?(0,O.jsx)(N,{}):null]})})}function U(e){let{type:t,iconHollow:n,iconFilled:i,feedbackReceived:a,style:s,onClick:o}=e;const r=a===`thumbs_${t}`;return(0,O.jsx)(S.Z,{icon:r?i:n,onClick:r?()=>{}:o,disableBackground:r,iconStyle:{cursor:r?"initial":"pointer",...s},ariaLabel:`Thumbs ${t} feedback on assistant message`})}const q="min(calc(100% - 48px), 512px)",Q=(0,i.forwardRef)((function(e,t){window.__c={n:"AssistantChatStepWrapper"};const{children:n,clientStep:u,configurationState:p,fakeSlackUser:g,forceShowFeedback:h}=e,m=(0,a.O7)(),{isMobile:f}=m.device,x=(0,o.yK)((e=>({wrap:{display:"flex",marginTop:6,marginBottom:6,gap:6},baseMessage:{maxWidth:q,borderRadius:16,padding:"4px 12px",fontSize:f?16:14,whiteSpace:"pre-wrap",overflowWrap:"break-word",position:"relative",lineHeight:1.45},userLabel:{fontSize:12,color:e.mediumTextColor},humanMessage:{backgroundColor:"light"===e.mode?e.cardHoveredBackground:e.accentColors.translucentGray[100],color:e.darkTextColor,border:"unset"},assistantThinkMessage:{backgroundColor:e.accentColors.gray[50],color:e.mediumTextColor},assistantLoadingMessage:{fontSize:12,color:e.lightTextColor,fontWeight:500,padding:"4px 0 0 6px"},assistantShowSearchResultsMessage:{color:e.mediumTextColor,border:`1px solid ${"light"===e.mode?e.accentColors.gray[75]:e.accentColors.translucentGray[200]}`},assistantMessage:{border:`1px solid ${"light"===e.mode?e.accentColors.gray[75]:e.accentColors.translucentGray[200]}`,backgroundColor:"light"===e.mode?e.contentBackground:e.accentColors.translucentGray[200],color:e.regularTextColor,padding:f?"4px 12px":"2px 10px",boxShadow:"0px 2px 4px 0px rgba(0, 0, 0, 0.04), 0px 0px 6px 0px rgba(0, 0, 0, 0.02)"}})),[f]),[v,S]=(0,i.useState)(!1),y=(0,i.useMemo)((()=>(0,r.Ds)(S,100)),[S]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(c.Z,{placement:c.Z.Placement.Left,textWrap:!0,style:{maxWidth:240},disableTooltip:!("thought"in u&&u.thought,0),renderTooltip:()=>"thought"in u?`💡 ${u.thought}`:void 0,delayThreshold:500,render:e=>(0,O.jsxs)("div",{ref:t,style:x.wrap,...e,onClick:e=>{e.target instanceof HTMLSpanElement&&null!=p&&p.isQnA&&l.lO(m,p,e.target.baseURI.split("/").slice(-1)[0])},onFocus:t=>{var n;null===(n=e.onFocus)||void 0===n||n.call(e,t),(0,s.E)(t.target)&&y(!0)},onMouseEnter:t=>{var n;null===(n=e.onMouseEnter)||void 0===n||n.call(e,t),y(!0)},onBlur:t=>{var n;null===(n=e.onBlur)||void 0===n||n.call(e,t),y(!1)},onMouseLeave:t=>{var n;null===(n=e.onMouseLeave)||void 0===n||n.call(e,t),y(!1)},children:["human"===u.type&&(0,O.jsx)("div",{style:{flexGrow:1}}),(0,O.jsx)("div",{style:{...x.baseMessage,..."human"===u.type?x.humanMessage:"assistantThink"===u.type||"assistantLoading"===u.type?x.assistantLoadingMessage:"assistantShowSearchResults"===u.type?x.assistantShowSearchResultsMessage:x.assistantMessage},children:n}),"assistantChat"===u.type&&(0,d.Of)(u)&&(0,O.jsx)(H,{configurationState:p,environment:m,isVisible:v||h,clientAssistantChatStep:u})]})}),g&&"human"===u.type&&(0,O.jsxs)("div",{style:{display:"flex"},children:[(0,O.jsx)("div",{style:{flexGrow:1}}),(0,O.jsx)("div",{style:x.userLabel,children:g.name})]})]})}))},49053:(e,t,n)=>{n.d(t,{v:()=>l});n(67294);var i=n(480),a=n(24405),s=n(5366),o=n(89728),r=n(85893);function l(e){window.__c={n:"AssistantClearButton"};const{disabled:t,onClick:n,style:l}=e,{isMobile:c}=(0,i.Fy)(),d=(0,a.yK)((e=>({button:{color:t?e.lightTextColor:e.mediumIconColor,opacity:t?.5:1,height:24,paddingLeft:6,paddingRight:6,fontSize:c?15:13,...l}})),[t,l,c]);return(0,r.jsx)(o.Z,{style:d.button,onClick:n,disabled:t,isSmall:!0,children:(0,r.jsx)(s.FormattedMessage,{id:"searchAssistantPane.header.clear.label",defaultMessage:"Clear"})})}},71106:(e,t,n)=>{n.d(t,{Qn:()=>Tt,xu:()=>Bt,GA:()=>Zt});n(82801),n(21703);var i=n(67294),a=n(480),s=n(86628),o=n(24405),r=n(59054),l=n(37652),c=n(1464),d=n(64275),u=n(56666),p=n(88437),g=n(11751),h=n(5366),m=n(82990),f=n(50906),x=n(31299),v=n(19471),S=n(23063),y=n(52275),k=n(31945),C=n(88359),w=n(73063),b=n(78140),j=n(32163),A=n(89728),I=n(72495),M=n(45959),Z=n(26388),T=n(19124),B=n(87279),_=n(77907),R=n(80444),F=n(21273),P=n(98180),L=n(82375),V=n(61766),K=n(23622),W=n(33932),E=n(41432),O=n(4615),z=n(71644),N=n(21202),D=n(6287),H=n(13493),U=n(91644),q=n(19889),Q=n(70203),G=n(54642),$=n(94419),J=n(9953),Y=n(89912);function X(e){const{environment:t}=e,n=t.currentUser.id,i=Date.now();if(!n)throw new Error("No current user.");return{created_time:i,created_by_id:n,created_by_table:q.KJ,last_edited_time:i,last_edited_by_id:n,last_edited_by_table:q.KJ}}function ee(e){const{environment:t,skillValue:n,transaction:i}=e,{inMemoryRecordCache:a}=t.defaultRecordCache,s=J.ae({environment:t,table:U.AT,value:{...n,...X({environment:t})},inMemoryRecordCache:a,transaction:i});return Y.L.addLocallyCreatedSkillId(s.id),s}function te(e){const{store:t,update:n,transaction:i}=e;J.sW({store:t.getSettingsStore(),data:n,transaction:i})}var ne=n(56206),ie=n(40824),ae=n(18830),se=n(49053),oe=n(18442),re=n(72126),le=n(39699),ce=n(53336),de=n(98165),ue=n(34859),pe=n(81582),ge=n(2405),he=n(85893);function me(e){window.__c={n:"AssistantSkillName"};const{clientSkill:t}=e,n=(0,h.useIntl)(),i=(0,s.VK)((()=>{if("persisted"===t.type){const e=t.skillStore.getName();if(e)return e}return n.formatMessage(pe.jo[t.skillType])}),[t,n]);return(0,he.jsx)(he.Fragment,{children:i})}var fe=n(47307),xe=n(2553),ve=n(15201),Se=n(68709),ye=n(55217),ke=n(3553),Ce=n(43250),we=n(12534);const be=(0,h.defineMessages)({instructionSectionTitle:{id:"CustomSkillMenu.instructionSection.title",defaultMessage:"Instructions"}});function je(e){window.__c={n:"CustomSkillMenu"};const{clientSkill:t}=e,{skillStore:n}=t,r=(0,a.O7)(),l=(0,h.useIntl)(),c=(0,o.yK)((e=>({listWrap:{background:e.contentBackground,boxShadow:e.inputBoxShadow,padding:"3px 9px",margin:"0 8px",borderRadius:5,minHeight:64,..."dark"===e.mode?{backgroundColor:e.inputBackground}:{},fontSize:14},emptyPlaceholder:{caretColor:e.mediumTextColor,color:e.lightTextColor,fontSize:14,padding:"5px 0",display:"inline-block"},sectionTitle:{color:e.lightTextColor,fontSize:12}})),[]),d=(0,s.VK)((()=>!n.canEdit()),[n]),u=(0,s.VK)((()=>{if(n.isType("custom"))return n.getInstructionParentStore()}),[n]),p=(0,s.VK)((()=>{if(u)return u.getContentStore()}),[u]),g=(0,i.useCallback)((e=>{(0,we.ZP)({event:e,context:we.Af.EditorClick,callback:()=>{if(!p)return;(p.getValue()||[]).length>0||le.createAndCommit({userAction:"CustomSkillMenu.handleListClick",environment:r,perform:e=>{xe.Nj({environment:r,parentStore:p,transaction:e})}})}})}),[r,p]);return(0,he.jsx)(he.Fragment,{children:p&&u&&(0,he.jsx)(I.Z,{title:l.formatMessage(be.instructionSectionTitle),children:(0,he.jsx)(ke.Z,{store:u,isDefaultContainer:!0,droppable:!1,render:()=>(0,he.jsx)(Se.p,{allowSelectionWithin:!0,children:(0,he.jsx)("div",{style:c.listWrap,onClick:g,className:Ce.Wh_,children:(0,he.jsx)(ve.O,{displayName:"CustomSkillMenuContent",disabled:d,children:(0,he.jsx)(ye.Z,{disabled:d,store:p,emptyPlaceholder:(0,he.jsx)("div",{style:c.emptyPlaceholder,children:(0,he.jsx)(h.FormattedMessage,{id:"automations.CustomSkillMenu.emptyPlaceholder",defaultMessage:"Click to edit instructions…"})}),disableCommentMenu:!0,disableHoverMenu:!1,disableDrag:!1})})})})},u.id)})})}var Ae=n(24600),Ie=n(53437),Me=n(42876),Ze=(n(57658),n(8848)),Te=n(80721),Be=n(37612),_e=n(97880),Re=n(95193),Fe=n(18441),Pe=n(30874),Le=n(41892),Ve=n(77657),Ke=n(149),We=n(42631),Ee=n(42922);function Oe(e){const{renderMenu:t,onClose:n,onConnect:i}=e,a=[{key:"connect-to-slack-menu",items:[],render:e=>(0,he.jsx)(ze,{...e,onClose:n,onConnect:i})}];return(0,he.jsx)(he.Fragment,{children:t(a)})}function ze(e){window.__c={n:"ConnectSection"};const{onClose:t,onConnect:n}=e,i=He();return(0,he.jsx)(I.Z,{children:(0,he.jsxs)("div",{style:i.container,children:[(0,he.jsx)(Ne,{}),(0,he.jsxs)("div",{style:i.connectToSlackBody,children:[(0,he.jsx)("div",{style:i.connectToSlackTitleText,children:(0,he.jsx)(h.FormattedMessage,{id:"slackConnectToSlackView.connectToSlackView.title",defaultMessage:"Connect to Slack"})}),(0,he.jsx)("div",{style:i.connectToSlackDescriptionText,children:(0,he.jsx)(h.FormattedMessage,{id:"slackConnectToSlackView.connectToSlackView.description",defaultMessage:"Enable your assistant to listen to Slack channels"})})]}),(0,he.jsx)(De,{onClose:t,onConnect:n})]})})}function Ne(){window.__c={n:"SlackIcon"};const e=He();return(0,he.jsx)("div",{children:(0,he.jsx)("img",{src:Le.Z.images.externalIntegrations.slackIconPng,style:e.slackIcon})})}function De(e){window.__c={n:"AuthActionButtons"};const{onClose:t,onConnect:n}=e,i=(0,a.O7)(),o=(0,s.VK)((()=>{var e;return null===(e=R.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),r=(0,s.VK)((()=>Pe.Z.integrations.state.find((e=>e.id===Ve.nO))),[]),l=He();return r&&o?(0,he.jsxs)("div",{style:l.buttonGroup,children:[(0,he.jsx)(Ee.Z,{style:l.connectToSlackButton,isLarge:!0,onClick:async()=>{const e=await We.hM({environment:i,integration:r,spaceId:o,from:"collection_view_settings"});Ke.x.isFail(e)?n({type:"workspace"}):e.value.externalAuthentication?n({type:"channel",externalAuthentication:e.value.externalAuthentication}):n({type:"workspace"})},children:(0,he.jsx)(h.FormattedMessage,{id:"notificationRuleSettingsSetupSlackView.connectToSlackView.connectButton.label",defaultMessage:"Connect"})}),(0,he.jsx)(A.Z,{style:l.cancelButton,isLarge:!0,onClick:()=>{t()},children:(0,he.jsx)(h.FormattedMessage,{id:"notificationRuleSettingsSetupSlackView.connectToSlackView.cancelButton.label",defaultMessage:"Cancel"})})]}):null}function He(){return(0,o.yK)((e=>({container:{display:"flex",flexDirection:"column",margin:"10px 15px",justifyContent:"center",textAlign:"center"},connectToSlackBody:{margin:"0px 25px"},connectToSlackTitleText:{marginBottom:2,fontWeight:m.Z.fontWeight.semibold},connectToSlackDescriptionText:{fontSize:13,color:e.mediumTextColor},slackIcon:{width:23,height:"auto"},buttonGroup:{margin:"10px 10px 0px 10px"},connectToSlackButton:{width:"100%"},cancelButton:{color:e.mediumTextColor,width:"100%",justifyContent:"center",fontWeight:m.Z.fontWeight.medium,fontSize:13,marginTop:8}})),[])}var Ue=n(93364);const qe=(0,h.defineMessages)({backButtonAriaLabel:{id:"SlackSelectWorkspaceAndChannelMenu.backButton.ariaLabel",defaultMessage:"Back to previous step"},selectSlackWorkspace:{id:"SlackSelectWorkspaceAndChannelMenu.selectSlackWorkspace",defaultMessage:"Select Slack workspace"},selectSlackChannel:{id:"SlackSelectWorkspaceAndChannelMenu.selectSlackChannel",defaultMessage:"Select Slack channel"},remove:{id:"SlackSelectWorkspaceAndChannelMenu.remove",defaultMessage:"Remove"}});function Qe(e){window.__c={n:"SlackSelectWorkspaceAndChannelMenu"};const{onSelect:t,onClose:n,onRemove:a,channelFilter:o,workspaceFilter:r,onNewSlackAccountAdded:l}=e,c=(0,s.VK)((()=>(0,Fe.P9)(Pe.Z.completeSlackAuthentications.state,r)),[r]),[d,u]=i.useState(function(e){return 0===e.length?{type:"connect"}:1===e.length?{type:"channel",externalAuthentication:e[0]}:{type:"workspace"}}(c)),p=(0,Re.F)({maxHeight:"50vh",width:266});return"connect"===d.type?(0,he.jsx)(Oe,{onClose:n,onConnect:e=>u(e),renderMenu:e=>(0,he.jsx)(b.Z,{...p,children:(0,he.jsx)(j.Z,{type:j.i.Vertical,sections:e,initialFocus:0})})}):"workspace"===d.type?(0,he.jsx)(Ue.U,{onWorkspaceSelect:e=>{const t=(0,Fe.jc)(e);(!r||t&&r(t))&&u({type:"channel",externalAuthentication:e})},workspaceFilter:r,onNewSlackAccountAdded:l,renderMenu:e=>(0,he.jsx)(b.Z,{...p,header:(0,he.jsx)(Ge,{children:(0,he.jsx)(h.FormattedMessage,{...qe.selectSlackWorkspace})}),children:(0,he.jsx)(j.Z,{type:j.i.Vertical,sections:e,initialFocus:0})})}):"channel"===d.type?(0,he.jsx)(Me.ZP,{channelFilter:o,onClose:n,currentNotificationChannel:void 0,onNewSlackAccountAdded:()=>{u({type:"workspace"}),null==l||l()},currentExternalAuthentication:d.externalAuthentication,onNotificationChannelSelect:e=>t({notificationChannel:e,externalAuthentication:d.externalAuthentication}),renderMenu:e=>{const t=[...e];return a&&t.push({key:"remove",render:e=>(0,he.jsx)(I.Z,{topBorder:!0,...e}),items:[{key:"remove",render:e=>(0,he.jsx)(y.Z,{...e,icon:(0,Be.y)({width:16,height:16,marginRight:2}),title:(0,he.jsx)(h.FormattedMessage,{...qe.remove}),hoveredStyle:{color:Ze.ZP.red,fill:Ze.ZP.red}}),action:()=>{a(),n()}}]}),(0,he.jsx)(b.Z,{...p,header:(0,he.jsx)(Ge,{onBack:()=>u({type:"workspace"}),children:(0,he.jsx)(h.FormattedMessage,{...qe.selectSlackChannel})}),children:(0,he.jsx)(j.Z,{type:j.i.Vertical,sections:t,initialFocus:0})})}}):(0,_e.t1)(d)}function Ge(e){window.__c={n:"MenuHeader"};const{onBack:t,children:n}=e,i=(0,o.yK)((e=>({wrap:{display:"flex",alignItems:"center",margin:8,color:e.mediumTextColor,fontWeight:m.Z.fontWeight.medium,fontSize:m.Z.fontSize.UISmall.desktop,minHeight:22},iconButtonStyle:{marginRight:8,marginLeft:-2,height:22},iconButtonIconStyle:{width:16,height:16}})),[]),a=(0,h.useIntl)();return(0,he.jsxs)("div",{style:i.wrap,children:[t&&(0,he.jsx)(w.Z,{ariaLabel:a.formatMessage(qe.backButtonAriaLabel),icon:Te.W,style:i.iconButtonStyle,iconStyle:i.iconButtonIconStyle,onClick:t}),n]})}n(95477);const $e=(0,h.defineMessages)({slackSectionTitle:{id:"editSkillMenu.optionalSlackSection.title",defaultMessage:"Slack (optional)"}});function Je(e){window.__c={n:"SlackSkillMenu"};const{clientSkill:t}=e,n=(0,a.Fy)(),l=(0,a.O7)(),c=(0,h.useIntl)(),d=t.skillStore.pointer,[{value:u},p]=(0,r.r5)((async()=>{const e=null==d?void 0:d.id,t=null==d?void 0:d.spaceId;if(e&&t)return await G.getPageAssistantPreferences(l,{skillId:e,spaceId:t})}),[l,d]),g="success"===(null==u?void 0:u.type)?u.data:void 0,m=(0,s.VK)((()=>{var e;const t=null==g||null===(e=g.associatedChannels)||void 0===e?void 0:e[0];if("channel"===(null==t?void 0:t.type))return t.channel}),[g]),f=(0,i.useCallback)((e=>Boolean(null==g?void 0:g.aiEnabledSlackWorkspaceIds.includes(e))),[g]),x=(0,s.VK)((()=>t.skillStore.isType("custom")||t.skillStore.isType("wiki_slack")||t.skillStore.isType("tasks_slack")),[t.skillStore]),v=i.useCallback((async e=>{const{externalAuthentication:t,notificationChannel:n}=e,i=null==d?void 0:d.id,a=null==d?void 0:d.spaceId;i&&a&&(await G.setPageAssistantPreferences(l,{type:"skill",skillId:i,spaceId:a,operation:{type:"set_channel",botId:t.parent_id,channelId:n.id}}),await p())}),[l,d,p]),S=i.useCallback((async()=>{const e=null==d?void 0:d.id,t=null==d?void 0:d.spaceId;e&&t&&m&&t&&(await G.setPageAssistantPreferences(l,{type:"skill",skillId:e,spaceId:t,operation:{type:"clear_channel"}}),await p())}),[l,d,m,p]),C=(0,o.yK)((e=>({button:{width:"max-content",boxShadow:e.borderBoxShadow},selectChannelPlaceholder:{color:e.lightTextColor},container:{fontSize:14},icon:{width:12,height:12}})),[]);return x?(0,he.jsx)(I.Z,{title:c.formatMessage($e.slackSectionTitle),children:(0,he.jsx)(k.ZP,{popupType:n.isMobile?Ie.kQ.SlideUp:Ie.kQ.Popup,render:e=>(0,he.jsx)(Qe,{onClose:()=>e.close(),channelFilter:Ye,workspaceFilter:f,onSelect:async e=>{await v(e)},onRemove:async()=>{await S()}}),renderOrigin:e=>(0,he.jsx)(y.Z,{...e,focused:!1,buttonStyle:C.button,icon:!m&&(0,Ae.P)(C.icon),title:m?(0,he.jsx)(Xe,{channel:m}):(0,he.jsx)(h.FormattedMessage,{id:"slackSkillRows.connectStart.label",defaultMessage:"Connect to a Slack channel"})})})}):null}const Ye=e=>"public"===e.type;function Xe(e){window.__c={n:"ChannelValue"};const{channel:t}=e,n=(0,o.yK)((()=>({wrap:{display:"flex",alignItems:"center"},icon:{height:12,width:12}})),[]),i=(0,Me.N_)({channel:t,styles:n.icon});return(0,he.jsxs)("div",{style:n.wrap,children:[i," ",t.name]})}var et=n(64369);function tt(e){window.__c={n:"TasksSlackSkillMenu"};const{clientSkill:t}=e,n=(0,a.O7)(),o=t.skillStore,r=(0,s.VK)((()=>{var e;return(null===(e=o.getSettings())||void 0===e||null===(e=e.tasks_team_options)||void 0===e?void 0:e.team_block_id)??""}),[o]),l=(0,s.VK)((()=>{var e;return(null===(e=o.getSettings())||void 0===e||null===(e=e.tasks_team_options)||void 0===e?void 0:e.tag_ids)??[]}),[o]),[c,d]=i.useState(r),[u,p]=i.useState(l.join(",")),g=i.useCallback((e=>{let t=e;e.includes("-")||(t=`${e.slice(0,8)}-${e.slice(8,12)}-${e.slice(12,16)}-${e.slice(16,20)}-${e.slice(20,32)}`),d(t),le.createAndCommit({userAction:"TasksSkillMenu.handleTeamBlockIdChange",environment:n,perform:e=>{te({store:o,update:{tasks_team_options:{team_block_id:t}},transaction:e})}})}),[o,n]),m=i.useCallback((e=>{const t=e.split(",").map((e=>e.trim())).map((e=>e.includes("-")?e:(0,O.Mt)(e)));p(t.join(",")),le.createAndCommit({userAction:"TasksSkillMenu.handleTagIdsChange",environment:n,perform:e=>{te({store:o,update:{tasks_team_options:{tag_ids:t}},transaction:e})}})}),[o,n]);return(0,he.jsx)(he.Fragment,{children:(0,he.jsxs)(I.Z,{children:[(0,he.jsx)(et.Z,{isSecondaryColor:!0,isSmall:!0,style:{marginLeft:"4px",marginBottom:"6px"},children:(0,he.jsx)(h.FormattedMessage,{id:"taskSlackSkillMenu.notes",defaultMessage:"Config here will change a lot - if anything breaks, ping @sophia"})}),(0,he.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6,margin:"0px 12px"},children:[(0,he.jsx)(v.b,{value:c,onChange:g,placeholder:"uuid for the team's page block"}),(0,he.jsx)(v.b,{value:u,onChange:m,placeholder:"uuids for tags to associate, comma separated"})]})]})})}var nt=n(15047),it=n(40190),at=n(60458),st=n(76798),ot=n(35661);function rt(e){window.__c={n:"AssistantSkillMenuProperty"};const{property:t,value:n}=e,i=(0,o.yK)((e=>({row:{display:"flex",alignItems:"center",marginLeft:8,marginRight:8,marginBottom:8,gap:8},property:{fontSize:14,flexGrow:1}})),[]);return(0,he.jsxs)("div",{style:i.row,children:[(0,he.jsx)("div",{style:i.property,children:t}),n]})}var lt=n(17215),ct=n(53877),dt=n(35840),ut=n(92338),pt=n(35294),gt=n(68894),ht=n(31278),mt=n(48141),ft=n(88632);const xt=(0,h.defineMessages)({qnaSearchPlaceholderLabel:{id:"wikiQuestionAndAnswerDropdownButton.databaseSearch.inputPLaceholder",defaultMessage:"Search for databases…"},qnaFeatureOffLabel:{id:"wikiQuestionAndAnswerDropdownButton.qnaFeatureMenu.disabledLabel",defaultMessage:"Off"}});function vt(e){window.__c={n:"WikiQuestionAndAnswerDropdownButton"};const{skillStore:t,disabled:n}=e,l=(0,a.O7)(),c=(0,h.useIntl)(),d=(0,pt.d)(),[u,p]=i.useState(""),g=(0,s.VK)((()=>{var e;const n=null===(e=t.getSettings())||void 0===e?void 0:e.qna_collection_view_block_id;if(n)return ot.G.createChildStore(t,{table:N.iU,id:n,spaceId:t.getSpaceId()})}),[t]),m=(0,s.VK)((()=>null==g?void 0:g.getIcon()),[g]),[{value:f}]=(0,r.r5)((async()=>{const{currentSpaceStore:e,currentSpaceViewStore:t}=R.default.state;if(e)return await(0,mt.hb)({environment:l,currentSpaceStore:e,currentSpaceViewStore:t})}),[l]),[{value:x}]=(0,r.r5)((async()=>{if(f)return await async function(e){const{environment:t,localCache:n,searchQuery:i}=e,a={query:{text:i,filters:(0,ut.u4)({requireEditPermissions:!0,isDeletedOnly:!1,excludeTemplates:!0,navigableBlockContentOnly:!0,blockTypes:["collection_view","collection_view_page"]}),sort:{field:"relevance"}},limit:5},s=await async function(e){const{environment:t,localCache:n,query:i}=e,{currentUserRootStore:a}=R.default.state;if(!a)return;return Promise.resolve((0,mt.Y_)({query:i,localCachedPages:n,parentStore:a,isOnline:ft.Z.state.online,environment:t,shouldLimitLocalResultsWhenOnline:!1,applyScoreThresholdWhenOnline:!0,canUseLtr:!1}))}({environment:t,localCache:n,query:a});if(s&&Ke.x.isSuccess(s)){const e=s.value.results;if(e.length>0)return e}return await async function(e){const{environment:t,query:{query:{text:n,filters:i,sort:a},limit:s}}=e,{currentSpaceStore:o}=R.default.state;if(!o)return;const r=await G.search(t,{type:ut.n8.BlocksInSpace,query:n,spaceId:o.id,limit:s,filters:i,sort:a,source:"quick_find_public",recentPagesForBoosting:void 0});if("success"===(null==r?void 0:r.type))return r.data.results.map((e=>({id:e.id,store:ot.G.createChildStore(o,{id:e.id,table:N.iU,spaceId:e.spaceId})})))}({environment:t,query:a})??[]}({environment:l,localCache:f,searchQuery:u})}),[l,f,u]),v=(0,o.yK)((()=>({recordRow:{display:"flex",alignItems:"center"},recordIcon:{marginRight:6}})),[]);return(0,he.jsx)(k.ZP,{popupType:d,alignmentToOrigin:k.vR.End,placementToOrigin:k.pO.Bottom,originGap:0,disabled:n,renderOrigin:e=>(0,he.jsx)(it.S,{disabled:!1,variant:"gray",...e,children:g?(0,he.jsxs)("div",{style:v.recordRow,children:[(0,he.jsx)(ht.Z,{style:v.recordIcon,disabled:!0,icon:m,isEmptyPage:!1,size:16}),(0,he.jsx)(st.Z,{store:g})]}):c.formatMessage(xt.qnaFeatureOffLabel)}),render:e=>(0,he.jsx)(St,{skillStore:t,buttonPopupParent:e,searchQuery:u,setSearchQuery:p,searchResults:x})})}function St(e){window.__c={n:"QuestionAndAnswerDropdownMenu"};const{skillStore:t,searchQuery:n,setSearchQuery:r,buttonPopupParent:l,searchResults:c}=e,d=(0,a.O7)(),u=(0,o.yK)((e=>({menuItem:{paddingTop:8,paddingBottom:8},noResults:{color:e.mediumTextColor}})),[]),p=(0,h.useIntl)(),g=i.useCallback((e=>{le.createAndCommit({userAction:"QuestionAndAnswerDropdownMenu.onChange",environment:d,perform:n=>{J.sW({store:t.getSettingsStore(),data:{qna_collection_view_block_id:e},transaction:n})}})}),[d,t]),m={key:"input",action:()=>{},render:e=>(0,he.jsx)(gt.ZP,{...e,inputLeft:(0,he.jsx)(gt.f_,{icon:dt.R}),showClearButton:!0,value:n,onChange:e=>{r(e.target.value)},placeholder:p.formatMessage(xt.qnaSearchPlaceholderLabel),focus:!0,style:u.menuItem})},f=(0,s.VK)((()=>c&&0!==c.length?c.map((e=>{let{id:t,store:n}=e;const i=n.getModel(),a=(null==i?void 0:i.getRenderTitle({getRecordModel:n.getRecordModel,userTimeZone:ct.x7,intl:p}))??(0,lt.Q2)(p),s=n.getIcon();return{key:t,action:()=>{g(t),l.close()},render:e=>(0,he.jsx)(y.Z,{...e,title:a,left:(0,he.jsx)(ht.Z,{icon:s,disabled:!0,isEmptyPage:!1,size:16})})}})):[{key:"no-results",action:()=>{},render:e=>(0,he.jsx)(y.Z,{...e,style:{...u.menuItem,...u.noResults},title:(0,he.jsx)(h.FormattedMessage,{id:"wikiQuestionAndAnswerDropdownButton.noResult.label",defaultMessage:"No results"})})}]),[p,c,g,l,u]),x={key:"remove",action:()=>{g(void 0),l.close()},render:e=>(0,he.jsx)(y.Z,{...e,title:p.formatMessage(xt.qnaFeatureOffLabel),style:u.menuItem})},v={menuType:B.og.Popup,width:280,maxWidth:360};return(0,he.jsx)(b.Z,{...v,children:(0,he.jsx)(j.Z,{type:j.i.Vertical,initialFocus:0,sections:[{key:"search-input",render:e=>(0,he.jsx)(I.Z,{...e}),items:[m]},{key:"search-results",render:e=>(0,he.jsx)(I.Z,{...e,topBorder:!0}),items:f},{key:"disable-qna",render:e=>(0,he.jsx)(I.Z,{...e,topBorder:!0}),items:[x]}]})})}function yt(e){const{clientSkill:t}=e,n=t.skillStore;return(0,he.jsx)(he.Fragment,{children:(0,he.jsxs)(I.Z,{children:[(0,he.jsx)(rt,{property:(0,he.jsx)(h.FormattedMessage,{id:"WikiSlackSkillMenu.searchIn",defaultMessage:"Search in"}),value:(0,he.jsx)(Ct,{skillStore:n,disabled:!1})}),(0,he.jsx)(rt,{property:(0,he.jsx)(h.FormattedMessage,{id:"WikiSlackSkillMenu.saveQuestionsAndAnswers",defaultMessage:"Save questions and answers"}),value:(0,he.jsx)(vt,{skillStore:n,disabled:!1})}),(0,he.jsx)(rt,{property:(0,he.jsx)(h.FormattedMessage,{id:"WikiSlackSkillMenu.confirmEdits",defaultMessage:"Confirm edits before saving"}),value:(0,he.jsx)(kt,{skillStore:n,disabled:!1})})]})})}function kt(e){window.__c={n:"WikiConfirmEditsButton"};const{skillStore:t,disabled:n}=e,o=(0,a.O7)(),r=(0,s.VK)((()=>{var e;return Boolean(null===(e=t.getSettings())||void 0===e?void 0:e.qna_ingestion_confirm_edits)}),[t]),l=(0,i.useCallback)((()=>{le.createAndCommit({userAction:"WikiConfirmEditsButton.onChange",environment:o,perform:e=>{J.sW({store:t.getSettingsStore(),data:{qna_ingestion_confirm_edits:!r},transaction:e})}})}),[o,r,t]);return(0,he.jsx)(at.Z,{checked:r,disabled:n,size:16,onClick:l})}function Ct(e){window.__c={n:"SearchContextDropdownButton"};const{skillStore:t,disabled:n}=e,i=(0,a.Fy)(),o=(0,s.VK)((()=>{var e;return null===(e=t.getSettings())||void 0===e?void 0:e.search_context}),[t]);return o?(0,he.jsx)(k.ZP,{popupType:i.isMobile?k.Z4.SlideUp:k.Z4.Popup,alignmentToOrigin:k.vR.End,placementToOrigin:k.pO.Bottom,originGap:0,disabled:n,renderOrigin:e=>(0,he.jsx)(it.S,{disabled:n,variant:"gray",...e,children:(0,he.jsx)(bt,{value:o,skillStore:t})}),render:t=>(0,he.jsx)(wt,{value:o,parent:t,...e})}):null}function wt(e){window.__c={n:"SearchContextDropdownMenu"};const{value:t,skillStore:n,parent:r}=e,l=(0,a.O7)(),c=(0,o.yK)((()=>({menuItem:{paddingTop:8,paddingBottom:8}})),[]),d=(0,i.useCallback)((e=>{le.createAndCommit({userAction:"SearchContextDropdownMenu.onChange",environment:l,perform:t=>{J.sW({store:n.getSettingsStore(),data:{search_context:e},transaction:t})}})}),[l,n]),u={menuType:B.og.Popup,width:280,maxWidth:360},p=(0,s.VK)((()=>n.getParentPointer()),[n]),g=(0,s.VK)((()=>n.getSpacePointer()),[n]);if(!p||!g)return null;const h=[p,g].map(((e,i)=>({key:i,render:i=>(0,he.jsx)(y.Z,{...i,disabled:!1,title:(0,he.jsx)(bt,{value:e,skillStore:n}),style:c.menuItem,checkState:t.id===e.id,...i}),action:()=>{d(e),r.close()}})));return(0,he.jsx)(b.Z,{...u,children:(0,he.jsx)(j.Z,{type:j.i.Vertical,sections:[{key:0,render:e=>(0,he.jsx)(I.Z,{enableActionSheetTitle:!0,...e}),items:h}],initialFocus:0})})}function bt(e){const{value:t,skillStore:n}=e;return t.table===N.iU?(0,he.jsx)(st.Z,{store:ot.G.createChildStore(n,t)}):t.table===nt.bx?(0,he.jsx)(h.FormattedMessage,{id:"WikiSlackSkillMenu.workspace",defaultMessage:"Workspace"}):void(0,_e.t1)(t)}function jt(e){window.__c={n:"EditSkillMenu"};const{clientSkill:t,onClose:n,onDelete:r}=e,{skillStore:l}=t,c=(0,a.O7)(),d=(0,s.VK)((()=>l.getType()),[l]),u=(0,s.VK)((()=>l.isRenameable()),[l]),p=(0,s.VK)((()=>l.getName()),[l]),[g,m]=i.useState(p),f=i.useCallback((e=>{m(e),le.createAndCommit({userAction:"EditSkillMenu.handleNameChange",environment:c,perform:t=>{te({store:l,update:{name:e},transaction:t})}})}),[l,c]),x=(0,i.useCallback)((async()=>{if(!(await fe.confirmUserAction({message:(0,he.jsx)(h.FormattedMessage,{defaultMessage:"Are you sure you want to delete this skill?",id:"EditSkillMenu.delete.cancelConfirmation"}),acceptLabel:(0,he.jsx)(h.FormattedMessage,{defaultMessage:"Delete",id:"EditSkillMenu.delete.cancelConfirmation.delete"})})))return;const e=l.getSpaceId();e&&await G.setPageAssistantPreferences(c,{type:"skill",spaceId:e,skillId:l.id,operation:{type:"clear_channel"}}),le.createAndCommit({userAction:"EditSkillMenu.handleDelete",environment:c,perform:e=>{!function(e){const{store:t,transaction:n}=e;J.sW({store:t,data:{alive:!1},transaction:n})}({store:l,transaction:e})}}),null==r||r(),n()}),[c,l,n,r]),S=(0,o.yK)((e=>({scroller:{maxHeight:"50vh"},skillIcon:{width:16,fill:e.aiPurpleColor,marginRight:4},fromRowWrap:{display:"flex",alignItems:"center",margin:"4px 8px",gap:4,fontSize:14},rowWrap:{display:"flex",alignItems:"center",margin:"0 8px",gap:8,fontSize:14},headerNameWrap:{flexGrow:1},sectionTitle:{color:e.lightTextColor,fontSize:12}})),[]);return(0,he.jsxs)(ce.Z,{type:ue.Z.Y,style:S.scroller,children:[(0,he.jsx)(I.Z,{children:(0,he.jsxs)("div",{style:S.rowWrap,children:[pe.AN[t.skillType](S.skillIcon),d&&u?(0,he.jsx)(v.b,{value:g,onChange:f,placeholder:"custom"===d?"Custom skill name":"Skill name"}):(0,he.jsx)("div",{style:S.headerNameWrap,children:(0,he.jsx)(me,{clientSkill:t})}),(0,he.jsx)(A.Z,{onClick:n,isBlue:!0,children:"Done"})]})}),"custom"===d&&(0,he.jsx)(je,{clientSkill:t}),"wiki_slack"===d&&(0,he.jsx)(yt,{clientSkill:t}),"tasks_slack"===d&&(0,he.jsx)(tt,{clientSkill:t}),(0,he.jsx)(Je,{clientSkill:t}),(0,he.jsx)(I.Z,{children:(0,he.jsx)("div",{style:S.rowWrap,children:(0,he.jsx)(A.Z,{onClick:x,isRed:!0,children:"Delete"})})})]})}function At(e){window.__c={n:"AssistantSkillPopup"};const{clientSkill:t,renderOrigin:n,buttonPopupStore:i,onDelete:s}=e,r=(0,a.O7)(),l=(0,o.yK)((e=>({headerWrap:{display:"flex",alignItems:"center",margin:"0 4px"},editPopupWrap:{borderRadius:12,boxShadow:e.largeLightBoxShadow,width:392}})),[]);return(0,he.jsx)(k.ZP,{popupType:r.device.isMobile?k.Z4.SlideUp:k.Z4.Popup,preventScaleTransition:!0,preventOpacityTransition:!0,popupWrapStyle:l.editPopupWrap,renderOrigin:n,render:e=>t&&(0,he.jsx)(jt,{clientSkill:t,onClose:e.close,onDelete:s}),buttonPopupStore:i})}function It(){window.__c={n:"AssistantSkillSwitcher"};const e=(0,a.O7)(),t=(0,o.yK)((e=>({wrap:{display:"flex",flexDirection:"column",overflow:"hidden"},skillIcon:{width:16,fill:e.aiPurpleColor,marginRight:4},headerWrap:{display:"flex",alignItems:"center",margin:"0 4px"},editPopupWrap:{borderRadius:12,boxShadow:e.largeLightBoxShadow,width:392},skillMenuItemWrap:{display:"flex",alignItems:"center",margin:"8px 8px"},settingsButton:{marginLeft:8}})),[]),[n,r]=i.useState([]),l=i.useCallback((()=>{r((0,pe.Qv)())}),[]);i.useEffect((()=>{l()}),[l]);const[c,d]=i.useState(void 0),u=(0,s.qz)(void 0,V.Z),p=(0,s.VK)((()=>{if(c)return(0,pe.WE)(c)}),[c]),g=(0,i.useCallback)((()=>{const{performResult:t}=le.createAndCommit({userAction:"AssistantSkillSwitcher.handleAddCustomSkillClick",environment:e,perform:t=>function(e){const{environment:t,transaction:n}=e,{inMemoryRecordCache:i}=t.defaultRecordCache,a=t.currentUser.id,{currentSpaceStore:s,mainEditorCurrentBlockStore:o}=R.default.state;if(!a)throw new Error("No current user.");if(!s)throw new Error("No current space.");if(!o)throw new Error("No current block.");const r=e.parent??{id:o.id,table:N.iU,spaceId:s.id},l=J.j4({environment:t,type:E.Ti.text,inMemoryRecordCache:i,transaction:n,spaceId:s.id,useCrdt:!1}),c=ee({environment:t,transaction:n,skillValue:{type:"custom",parent_id:r.id,parent_table:r.table,space_id:r.spaceId,alive:!0}});return $.R3({transaction:n,parent:c.getKeyStore("blocks"),append:l}),c}({environment:e,transaction:t})});d(t),u.setState({...u.state,open:!0}),l()}),[e,u,l]),h=(0,i.useCallback)((()=>{const{performResult:t}=le.createAndCommit({userAction:"AssistantSkillSwitcher.handleWikiAddToSlackClick",environment:e,perform:t=>function(e){const{environment:t,transaction:n}=e,{inMemoryRecordCache:i}=t.defaultRecordCache,a=t.currentUser.id,{currentSpaceStore:s,mainEditorCurrentBlockStore:o}=R.default.state;if(!a)throw new Error("No current user.");if(!s)throw new Error("No current space.");if(!o)throw new Error("No current block.");const r=J.j4({environment:t,type:E.Ti.collectionViewPage,inMemoryRecordCache:i,transaction:n,spaceId:s.id,useCrdt:o.useCrdt()}),l=J.ae({environment:t,table:D.v,value:{name:(0,Q.TPx)("FAQ"),schema:{title:{name:"Question",type:"title"},[(0,z.ZP)()]:{name:"Answer",type:"text"},[(0,z.ZP)()]:{name:"Sources",type:"text"},[(0,z.ZP)()]:{name:"Last edited time",type:"last_edited_time"},[(0,z.ZP)()]:{name:"Created by",type:"created_by"},[(0,z.ZP)()]:{name:"Created time",type:"created_time"},[(0,z.ZP)()]:{name:"Last edited by",type:"last_edited_by"}},parent_table:N.iU,parent_id:r.id,alive:!0,space_id:s.id},inMemoryRecordCache:i,transaction:n}),c=J.ae({environment:t,table:H.n,value:{name:"View all",type:"table",parent_table:N.iU,parent_id:r.id,alive:!0,space_id:s.id},inMemoryRecordCache:i,transaction:n});return J.sW({store:r.getFormatStore(),data:{collection_pointer:l.pointer},transaction:n}),J.sW({store:r,data:{view_ids:[c.id]},transaction:n}),$.R3({parent:o.getContentStore(),append:r,transaction:n}),ee({environment:t,transaction:n,skillValue:{type:"wiki_slack",settings:{search_context:s.pointer,qna_collection_view_block_id:r.id},parent_id:o.id,parent_table:N.iU,space_id:s.id,alive:!0}})}({environment:e,transaction:t})});d(t),u.setState({...u.state,open:!0})}),[e,u]),m=(0,s.VK)((()=>{var e;const{mainEditorCurrentBlockStore:t}=R.default.state;return null==t||null===(e=t.getFormat())||void 0===e?void 0:e.app_config_uri}),[]),f=(0,s.VK)((()=>{const{mainEditorCurrentBlockStore:e}=R.default.state;if(!e)return[];return(0,de.uJ)(e).map((e=>e.id))}),[]),x=(0,s.VK)((()=>F.Z.allowWikiSkillCreation(m)),[m]),v=(0,s.VK)((()=>F.Z.allowCustomSkillCreation()),[]),S=(0,s.VK)((()=>{const e=n.filter((e=>"persisted"===e.type&&Boolean(e.inAppSkillTrigger)&&f.includes(e.skillStore.getParentId()))),t=n.filter((e=>"persisted"===e.type&&!e.inAppSkillTrigger&&Boolean(e.slackSkillTriggers)&&f.includes(e.skillStore.getParentId()))),i=n.filter((n=>Boolean(n.inAppSkillTrigger)&&!e.includes(n)&&!t.includes(n)));return{slackSkills:t,pageSkills:e,workspaceSkills:i}}),[f,n]),y=S.pageSkills.map((n=>Mt({environment:e,clientSkill:n,styles:t,onDelete:l}))),k=S.workspaceSkills.map((n=>Mt({environment:e,clientSkill:n,styles:t,onDelete:l}))),C=re.oA([...S.slackSkills.map((n=>Mt({environment:e,clientSkill:n,styles:t,onDelete:l}))),x&&{key:"wiki_slack",render:e=>(0,he.jsx)("div",{style:t.skillMenuItemWrap,onMouseEnter:e.onMouseEnter,ref:e.ref,children:(0,he.jsx)(ge.Z,{iconStyle:t.skillIcon,title:"Add to Slack",icon:pe.AN.wiki_slack,focused:e.focused,onClick:e.onClick})},e.key),action:h}]);return(0,he.jsx)(he.Fragment,{children:(0,he.jsxs)(I.Z,{style:t.wrap,children:[(0,he.jsxs)("div",{style:t.headerWrap,children:[(0,he.jsx)("div",{style:{flexGrow:1}}),(v||x)&&(0,he.jsx)(At,{clientSkill:p,renderOrigin:()=>(0,he.jsx)(A.Z,{onClick:g,isBlue:!0,children:"New skill"}),buttonPopupStore:u,onDelete:l})]}),(0,he.jsx)(ce.Z,{type:ue.Z.Y,children:(0,he.jsx)(j.Z,{type:j.i.Vertical,initialFocus:0,sections:re.oA([y.length>0&&{key:"page",render:e=>(0,he.jsx)(I.Z,{topBorder:!1,disableMobileBorders:!0,title:"From this page",...e}),items:y},C.length>0&&{key:"slack",render:e=>(0,he.jsx)(I.Z,{topBorder:!1,disableMobileBorders:!0,title:"From Slack",...e}),items:C},k.length>0&&{key:"workspace",render:e=>(0,he.jsx)(I.Z,{topBorder:!1,disableMobileBorders:!0,title:"Other skills",...e}),items:k}])})})]})})}function Mt(e){const{environment:t,clientSkill:n,styles:i,onDelete:a}=e;return{key:n.key,render:e=>"persisted"===n.type?(0,he.jsx)(At,{clientSkill:n,onDelete:a,renderOrigin:t=>(0,he.jsxs)("div",{style:i.skillMenuItemWrap,onMouseEnter:e.onMouseEnter,ref:e.ref,children:[(0,he.jsx)(ge.Z,{iconStyle:i.skillIcon,title:(0,he.jsx)(me,{clientSkill:n}),icon:pe.AN[n.skillType],onClick:e.onClick,focused:e.focused}),"persisted"===n.type&&e.focused&&(0,he.jsx)(w.Z,{icon:oe.H,ariaLabel:"edit",style:i.settingsButton,...t})]},e.key)}):(0,he.jsx)("div",{style:i.skillMenuItemWrap,onMouseEnter:e.onMouseEnter,ref:e.ref,children:(0,he.jsx)(ge.Z,{iconStyle:i.skillIcon,title:(0,he.jsx)(me,{clientSkill:n}),icon:pe.AN[n.skillType],focused:e.focused,onClick:e.onClick})},e.key),action:async()=>{await async function(e){const{environment:t,clientSkill:n}=e,i=L.Pl.state,a=Boolean(i);if(!n.inAppSkillTrigger)return;(0,W.O)({view:"chat"});const{sessionId:s}=await(0,K.resetAndInitializeAssistantStores)({environment:t,isLabelerSlackMode:a,fakeSlackChannel:null==i?void 0:i.selectedFakeChannel,clientSkill:n,isQnA:!1});n.inAppSkillTrigger.requiresInput||await(0,K.sampleNextAssistantSteps)({environment:t,inferenceId:(0,O.ZP)(),sessionId:s})}({environment:t,clientSkill:n})}}}const Zt=new V.Z;function Tt(e){window.__c={n:"AssistantMenu"};const{renderAsFullPage:t,showBackButton:n,onClose:g}=e,V=(0,a.O7)(),E=(0,s.VK)((()=>P.Z.getActiveAssistantRuntimeState()),[]),O=(0,s.VK)((()=>{var e;return null===(e=P.Z.getActiveAssistantConfigurationStore())||void 0===e?void 0:e.hasLockAction()}),[]),z=(0,i.useCallback)((async()=>{var e;null!==(e=P.Z.getActiveAssistantConfigurationState())&&void 0!==e&&e.isQnA&&f.Le6(V,P.Z.getActiveAssistantConfigurationState(),P.Z.getActiveAssistantRuntimeState()),await(0,K.clearAndResetActiveAssistantSession)({environment:V})}),[V]),N=(0,s.VK)((()=>{const e=P.Z.getActiveAssistantRuntimeState();return!e||!P.Z.getActiveAssistantConfigurationState()||0===e.clientSteps.length&&0===e.temporaryClientSteps.length}),[]),D=(0,i.useCallback)((()=>{var e;const t=(null===(e=P.Z.getActiveAssistantRuntimeState())||void 0===e?void 0:e.evaluator.getTranscript())??{},n=JSON.stringify(t);navigator.clipboard.writeText(n)}),[]),H=(0,i.useCallback)((()=>{var e;const t=null===(e=P.Z.getActiveAssistantRuntimeState())||void 0===e?void 0:e.evaluator.getInferenceInputForEval({skipLastAssistantStep:!0}),n=JSON.stringify(t);navigator.clipboard.writeText(n)}),[]),U=(0,i.useCallback)((()=>{var e;const t=null===(e=P.Z.getActiveAssistantRuntimeState())||void 0===e?void 0:e.evaluator.getInferenceInputForEval({skipLastAssistantStep:!0}),n=JSON.stringify(t),i=btoa(encodeURIComponent(n));window.open(`/design/aiJsonRenderer#jsonl=${i}`,"_blank")}),[]),q=(0,s.VK)((()=>{var e;return null===(e=R.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),Q=(0,s.VK)((()=>(0,T.Gw)()),[]),$=(0,s.VK)((()=>t?"chat":ne.d.state.currentView),[t]),J=(0,s.VK)((()=>L.Pl.state),[]),X=Boolean(J),ee=(0,s.VK)((()=>F.Z.isMode("ai_team")),[]);(0,r.r5)((async()=>{q&&await async function(e){const{environment:t,spaceId:n}=e,i=await G.getSkillsInSpace(t,{spaceId:n});if("success"!==i.type)throw new Error("Failed to fetch skills in space.");const{skillIds:a}=i.data;Y.L.setState({...Y.L.state,serverSkillIds:new Set(a)})}({environment:V,spaceId:q})}),[V,q]);const[te,oe]=(0,i.useState)([]);(0,i.useEffect)((()=>{X&&x.Yu({environment:V,query:"",membersOnly:!1}).then((e=>oe(e))).catch((e=>{throw new Error(e)}))}),[V,X]);const re=(0,i.useCallback)((()=>{(0,W.O)({view:"chat"})}),[]),le=(0,i.useCallback)((()=>{var e;ie.N.setAssistantLastViewedTime(),null==g||g(),null!==(e=P.Z.getActiveAssistantConfigurationState())&&void 0!==e&&e.isQnA&&f.Ti_(V,P.Z.getActiveAssistantConfigurationState(),P.Z.getActiveAssistantRuntimeState(),"button")}),[V,g]),ce=(0,i.useCallback)((()=>{P.Z.endCurrentSession(),X?L.Pl.setState(void 0):L.Pl.setState({enabled:!0,selectedFakeUser:void 0,selectedFakeChannel:"#"})}),[X]),de=function(e){const{hasLockAction:t,renderAsFullPage:n}=e,{device:i}=(0,a.O7)(),{isMobile:s}=i;return(0,o.yK)((e=>({wrap:{display:"flex",flexDirection:"column",width:n?"min(100%, 800px)":375,transition:"height 200ms ease",minHeight:128,height:n?"100%":void 0,maxHeight:n?void 0:"max(calc(100vh - 78px), 300px)"},header:{display:"flex",alignItems:"center",pointerEvents:"auto",paddingTop:12,paddingLeft:16,paddingRight:16,paddingBottom:12},labeledInput:{display:"flex",gap:8,alignItems:"center"},clearButton:{color:t?e.lightTextColor:e.mediumIconColor,opacity:t?.5:1},headerButton:{color:e.mediumIconColor},closeButton:{borderRadius:"100%",marginLeft:4,width:22,height:22},backwardButton:{borderRadius:"100%",marginRight:6},input:{width:void 0,marginLeft:8,marginRight:8},inputLabel:{fontSize:s?16:14,color:e.mediumTextColor},faceImgWrap:{width:64,height:64,borderRadius:"100%",background:"white",boxShadow:e.largeLightBoxShadow,overflow:"hidden"},faceImg:{width:64,pointerEvents:"none"},emptyStateText:{marginTop:28,fontSize:16,color:e.regularTextColor,fontFamily:m.Z.baseFontFamily.serif},inputWrap:{paddingTop:8,paddingBottom:8},skillsCaption:{fontSize:s?14:12,color:e.mediumTextColor,marginBottom:8},skillIcon:{fill:e.aiPurpleColor},skillsWrap:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:8},chatAndHelpButton:{display:"flex",alignItems:"center",gap:6},headerContentLeftOfClose:{display:"flex",marginRight:"8px",flexGrow:1,alignItems:"center"}})),[t,n,s])}({hasLockAction:O,renderAsFullPage:t});return(0,he.jsxs)("div",{style:de.wrap,children:[(0,he.jsxs)("div",{style:de.header,children:[(0,he.jsxs)("div",{style:de.headerContentLeftOfClose,children:[n&&(0,he.jsx)(w.Z,{iconStyle:{width:32,height:32},style:de.backwardButton,icon:c.k,onClick:le,disableBackground:!0,isDarkIconColor:!0,ariaLabel:"close"}),"chat"===$&&(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(Bt,{}),(0,he.jsx)("div",{style:{flexGrow:1}}),Q&&(0,he.jsx)(A.Z,{style:de.headerButton,onClick:ce,children:X?"Disable Slack mode":"Enable Slack mode"})]}),"skillSwitcher"===$&&(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(w.Z,{icon:l.V,onClick:re,ariaLabel:"back"}),(0,he.jsx)("div",{style:{marginLeft:4,fontSize:14},children:"All skills"}),(0,he.jsx)("div",{style:{flexGrow:1}})]}),ee&&(0,he.jsx)(k.ZP,{popupType:V.device.isMobile?k.Z4.SlideUp:k.Z4.Popup,renderOrigin:e=>(0,he.jsx)(Z.Z,{render:t=>(0,he.jsx)(w.Z,{iconStyle:{width:18,height:18},icon:p.a,ariaLabel:"See debug data",...t,...e}),renderTooltip:()=>(0,he.jsx)(h.FormattedMessage,{id:"assistant.copyTranscript",defaultMessage:"Debug data [dev]"})}),render:e=>(0,he.jsx)(b.Z,{menuType:B.og.Popup,children:(0,he.jsx)(j.Z,{type:j.i.Vertical,initialFocus:0,sections:[{key:"debug-data",render:e=>(0,he.jsx)(I.Z,{...e}),items:[{key:"copy-transcript",render:e=>(0,he.jsx)(y.Z,{...e,title:"Copy transcript"}),action:()=>{D(),e.close()}},{key:"copy-eval",render:e=>(0,he.jsx)(y.Z,{...e,title:"Copy as AssistantInferenceInput"}),action:()=>{H(),e.close()}},{key:"open-in-jsonl-viewer",render:e=>(0,he.jsx)(y.Z,{...e,title:"Open in JSONL viewer"}),action:()=>{U(),e.close()}}]}]})})}),(0,he.jsxs)("div",{style:de.chatAndHelpButton,children:[(0,he.jsx)(S.Z,{enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},animationStyle:{opacity:1},render:()=>(0,he.jsx)(se.v,{onClick:z,disabled:N}),isVisible:!N}),"chat"===$&&!V.device.isMobileNative&&(0,he.jsx)(k.ZP,{buttonPopupStore:Zt,popupType:V.device.isMobile?k.Z4.SlideUp:k.Z4.Popup,renderOrigin:e=>(0,he.jsx)(Z.Z,{render:t=>(0,he.jsx)(w.Z,{iconStyle:{width:16,height:16},icon:u.o,ariaLabel:"more",...t,...e}),renderTooltip:()=>(0,he.jsx)(h.FormattedMessage,{id:"assistant.help",defaultMessage:"Help, contact, more..."})}),render:()=>(0,he.jsx)(_.LazyHelpButtonContent,{shouldRenderAsStaticModal:!1})})]})]}),!t&&(0,he.jsx)(w.Z,{style:de.closeButton,hovered:!0,icon:d.D,onClick:le,ariaLabel:"close"})]}),X&&(0,he.jsxs)("div",{style:{...de.header,flexDirection:"column",gap:6},children:[(0,he.jsxs)("div",{style:de.labeledInput,children:[(0,he.jsx)("div",{style:de.inputLabel,children:"Channel"}),(0,he.jsx)(v.b,{value:(null==J?void 0:J.selectedFakeChannel)||"",onChange:e=>{if(!J)throw new Error("slackModeState is undefined");L.Pl.setState({...J,selectedFakeChannel:e})},disabled:Boolean(E),placeholder:"Channel name",style:de.input})]}),(0,he.jsxs)("div",{style:de.labeledInput,children:[(0,he.jsx)("div",{style:de.inputLabel,children:"User"}),(0,he.jsx)(M.Z,{items:te,selectedItem:null==J?void 0:J.selectedFakeUser,getKey:e=>e.name||e.id,renderItem:e=>(0,he.jsx)(y.Z,{...e,title:e.key}),onSelect:e=>{if(!J)throw new Error("slackModeState is undefined");L.Pl.setState({...J,selectedFakeUser:e})},renderOrigin:e=>(0,he.jsx)(C.Z,{focused:!1,title:null!=J&&J.selectedFakeUser?null==J?void 0:J.selectedFakeUser.name:"Select a user",...e})})]})]}),"chat"===$&&(0,he.jsx)(ae.R,{renderAsFullPage:t}),"skillSwitcher"===$&&(0,he.jsx)(It,{})]})}function Bt(){window.__c={n:"QnaBadge"};const{device:e}=(0,a.O7)(),{isMobile:t}=e,n=(0,o.yK)((e=>({headerSparkles:{width:t?18:16,height:t?18:16,marginRight:6,color:e.regularIconColor},headerLabel:{fontSize:t?16:14,color:e.regularTextColor,fontWeight:m.Z.fontWeight.medium,display:"flex",alignItems:"center"},badge:{marginLeft:8,fontSize:t?13:10,fontWeight:500,padding:"1px 4px",backgroundColor:e.cardHoveredBackground,color:e.lightTextColor,borderRadius:4}})),[t]);return(0,he.jsxs)(he.Fragment,{children:[(0,g.t)(n.headerSparkles),(0,he.jsx)("div",{style:n.headerLabel,children:(0,he.jsx)(h.FormattedMessage,{id:"assistantMenu.header.askNotionAI.label",defaultMessage:"Ask Notion AI"})}),(0,he.jsx)("div",{style:n.badge,children:(0,he.jsx)(h.FormattedMessage,{id:"assistantMenu.header.Beta.label",defaultMessage:"Beta"})})]})}},42899:(e,t,n)=>{n.d(t,{P:()=>M,d:()=>b});var i=n(67294),a=n(480),s=n(86628),o=n(24405),r=n(15145),l=n(40745),c=n(17693),d=n(5366),u=n(21202),p=n(97880),g=n(82990),h=n(84076),m=n(91839),f=n(53437),x=n(31278),v=n(76798),S=n(98567),y=n(84210),k=n(35661),C=n(6507),w=n(85893);function b(e){window.__c={n:"CitedPagesList"};const{citations:t,hoverStore:n,toggledStore:r,isLoading:l}=e,c=(0,a.Fy)(),u=e.canExpand&&t.length>4,h=(0,s.VK)((()=>{var e;return null===(e=n.state)||void 0===e?void 0:e.pageId}),[n]),m=(0,i.useCallback)((e=>n.setState(e?{pageId:e,tokenNode:void 0}:void 0)),[n]),f=e.canExpand?e.expandedStore:void 0,x=(0,s.VK)((()=>r.state),[r]),v=(0,i.useCallback)((e=>{r.setState(e),!e&&(0,p.$K)(f)&&f.setState(!1)}),[f,r]),S=(0,s.VK)((()=>!(0,p.$K)(f)||f.state),[f]),y=(0,i.useCallback)((e=>{(0,p.$K)(f)&&f.setState(e)}),[f]);(0,s.VK)((()=>{t.forEach((e=>e.store.getTitleValue()))}),[t]);const k=S?t:t.slice(0,4),b=(0,o.yK)((e=>({wrap:{position:"relative",marginLeft:6,marginBottom:6,display:"flex",fontSize:c.isMobile?g.Z.fontSize.UISmall.mobile:g.Z.fontSize.UISmall.desktop},listWrap:{display:"flex",flexDirection:"column",flexGrow:1,gap:2,maxWidth:C.O,marginLeft:-6,paddingLeft:6,...u&&!S?{WebkitMaskImage:"linear-gradient(180deg, black, rgba(0,0,0,0.99) 80%, transparent)"}:{}}})),[u,c,S]);return 0===k.length?null:(0,w.jsxs)("div",{style:b.wrap,children:[(0,w.jsxs)("div",{style:b.listWrap,children:[(0,w.jsx)(j,{enabled:!l,isLoading:Boolean(l),onClick:()=>{v(!x)},open:x,children:(0,w.jsx)(d.FormattedMessage,{id:"assistantCitationHelpers.numPagesFound",defaultMessage:"{count, plural, one {{count} page found} other {{count} pages found}}",values:{count:t.length}})}),x&&k.map((e=>(0,w.jsx)(I,{citation:e,hovered:h===e.store.id,setHovered:t=>{m(t?e.store.id:void 0)}},e.store.id)))]}),u&&!S&&x&&(0,w.jsx)(A,{onClick:()=>y(!0)})]})}function j(e){window.__c={n:"PageListHeader"};const{enabled:t,onClick:n,children:a,open:s,isLoading:r}=e,[l,d]=(0,i.useState)(!1),u=(0,o.yK)((e=>({wrap:{color:e.lightTextColor,fontWeight:500,fontSize:12,padding:"4px 0 2px",display:"flex",alignItems:"center"},content:{padding:"1px 2px",margin:"-1px -2px",cursor:t?"pointer":"default"},icon:{width:11,height:11,marginLeft:4,fill:e.lightIconColor,transform:`rotateZ(${s?0:-90}deg)`,opacity:l?1:0,transition:"opacity 0.2s ease, transform 200ms ease-out"},loadingDots:{marginLeft:8}})),[t,s,l]);return(0,w.jsxs)("div",{style:u.wrap,children:[(0,w.jsx)("div",{style:u.content,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onClick:()=>{t&&n()},children:a}),t&&(0,c.A)(u.icon),r&&(0,w.jsx)(m.Z,{isTriColored:!0,styleParentContainer:u.loadingDots})]})}function A(e){window.__c={n:"ExpandOverlay"};const{onClick:t}=e,n=(0,a.Fy)(),[s,r]=(0,i.useState)(!1),c=(0,o.yK)((e=>({wrap:{position:"absolute",left:0,right:0,bottom:0,cursor:"pointer",height:24,display:"flex",justifyContent:"center",alignItems:"flex-end",fontSize:n.isMobile?g.Z.fontSize.UISmall.mobile:g.Z.fontSize.UISmall.desktop,opacity:s?1:0,transition:"opacity 0.2s ease"},label:{display:"flex",gap:2,alignItems:"center",color:e.mediumTextColor,fontWeight:500,fontSize:11,borderRadius:6,padding:"2px 6px",boxShadow:"0px 0px 1px 0px rgba(0, 0, 0, 0.04), 0px 0px 2px 0px rgba(0, 0, 0, 0.06), 0px 4px 8px 0px rgba(0, 0, 0, 0.04)",background:e.whiteButtonBackground},icon:{width:12,height:12,fill:e.mediumIconColor}})),[n,s]);return(0,w.jsx)("div",{style:c.wrap,onClick:t,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:(0,w.jsxs)("div",{style:c.label,children:[(0,w.jsx)("div",{children:(0,w.jsx)(d.FormattedMessage,{id:"assistantCitationHelpers.seeMore",defaultMessage:"See more"})}),(0,l.M)(c.icon)]})})}function I(e){window.__c={n:"CitedPageRow"};const{citation:{number:t,store:n},hovered:i,setHovered:a}=e,l=(0,o.yK)((e=>({wrap:{display:"flex",position:"relative"},linkBox:{display:"flex",alignItems:"center",gap:4,padding:"0 4px",borderRadius:6,fontWeight:500,fontSize:13,transition:"background 0.2s ease",maxWidth:"95%",marginLeft:-4},linkBoxHoveredStyle:{background:e.accentColors.interactiveBlue[100]},iconWrap:{position:"relative",marginRight:4,width:14,height:14,flexShrink:0},icon:{position:"absolute",left:0,top:0,transition:"opacity 0.2s ease",opacity:(0,p.$K)(t)&&i?0:1},number:{position:"absolute",left:0,top:0,opacity:i?1:0,transition:"opacity 0.2s ease",zIndex:10},titleWrap:{display:"flex",alignItems:"center",padding:2,minWidth:50}})),[i,t]),c=(0,s.VK)((()=>n.getIcon()),[n]),d=(0,s.VK)((()=>n.isEmptyPage()),[n]),u=(0,s.VK)((()=>(0,y.ZP)({store:n,fullyQualified:!1,pageVisitSource:r.tY.AIQna})),[n]);return(0,w.jsx)("div",{style:l.wrap,children:(0,w.jsx)(h.Z,{href:u,style:l.linkBox,hovered:i,hoveredStyle:l.linkBoxHoveredStyle,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:(0,w.jsxs)("div",{style:l.titleWrap,children:[(0,w.jsxs)("div",{style:l.iconWrap,children:[(0,p.$K)(t)&&(0,w.jsx)(T,{number:t,hovered:i,style:l.number}),(0,w.jsx)(x.Z,{disabled:!0,icon:c,isEmptyPage:d,size:14,style:l.icon,useInvertedColors:!1})]}),(0,w.jsx)(v.Z,{store:n})]})})})}function M(e){window.__c={n:"CitationPreviewPopup"};const{containerRef:t,hoverStore:n,parentStore:i,renderAsFullPage:o}=e,r=(0,a.Fy)(),l=(0,s.VK)((()=>{if(!n.state||!t.current||r.isMobile||o)return;const e=t.current.getBoundingClientRect(),a=e.left>=S.Tq+24;let s;if(a)s=e;else{if(!n.state.tokenNode)return;s=n.state.tokenNode.getBoundingClientRect()}return{store:k.G.createChildStore(i,{id:n.state.pageId,table:u.iU}),originRect:s,isFullTooltip:a}}),[t,i,r,o,n]);if((0,p.$K)(l)){const{originRect:e,isFullTooltip:t,store:n}=l;return(0,w.jsx)(f.ZP,{disableMouseCapture:!0,preventCaptureEsc:!0,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:f.ZP.PopupType.Popup,originGap:t?24:8,alignmentToOrigin:f.ZP.Alignment.Start,open:!0,placementToOrigin:t?f.ZP.Placement.Left:f.ZP.Placement.Bottom,originRect:e,useLightBoxShadow:!t,render:()=>t?(0,w.jsx)(S.E5,{store:n}):(0,w.jsx)(Z,{store:n})})}return null}function Z(e){window.__c={n:"MinimalCitationTooltip"};const{store:t}=e,n=(0,o.yK)((e=>({wrap:{fontSize:g.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,fontWeight:g.Z.fontWeight.regular,fill:e.mediumIconColor,padding:"4px 6px 4px 6px",display:"flex",alignItems:"center",gap:2}})),[]),i=(0,s.VK)((()=>t.getIcon()),[t]),a=(0,s.VK)((()=>t.isEmptyPage()),[t]);return(0,w.jsxs)("div",{style:n.wrap,children:[(0,w.jsx)(x.Z,{disabled:!0,icon:i,isEmptyPage:a,size:14,useInvertedColors:!1}),(0,w.jsx)(v.Z,{store:t})]})}function T(e){window.__c={n:"CitationNumber"};const{number:t,hovered:n,style:i}=e,a=(0,o.yK)((e=>({wrap:{verticalAlign:"text-bottom",cursor:"pointer",transition:"all 100ms ease-in",textDecoration:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:90,padding:"0 4px",fontSize:10,minWidth:14,height:14,fontWeight:g.Z.fontWeight.semibold,color:"dark"===e.mode?"#2f2f2f":"white",backgroundColor:n?"#2383e2":"dark"===e.mode?"#787774":"#acaba9",...i}})),[n,i]),s=(0,d.useIntl)();return(0,w.jsx)("div",{style:a.wrap,children:t.toLocaleString(s.locale)})}},67973:(e,t,n)=>{n.d(t,{d:()=>a});var i=n(49085);class a extends i.default{getInitialState(){}}},40190:(e,t,n)=>{n.d(t,{S:()=>h,d:()=>m});var i=n(67294),a=n(480),s=n(24405),o=n(42853),r=n(54497),l=n(82990),c=n(24677),d=n(98104),u=n(89728),p=n(26388),g=n(85893);const h=i.forwardRef(((e,t)=>{window.__c={n:"AutomationDropdownButton"};const{variant:n,onClick:h,style:m,icon:f,children:x,disabled:v}=e,S=(0,a.O7)(),y=(0,s.yK)((e=>({button:{..."gray"===n&&{color:e.mediumTextColor},..."blue"===n&&{color:e.blueColor,fontWeight:500},..."error"===n&&{color:e.errorText},maxWidth:"calc(100% + 2px)",marginLeft:1,padding:"0 8px 0 5px",...m},warningIcon:{width:12,height:12,marginLeft:-6,marginLeft:6,fill:e.errorText,color:e.errorText},chevronIcon:{width:10,height:10,marginLeft:4,marginTop:2,fill:e.lightIconColor},spacer:{flexGrow:1}})),[n,m]),k=(0,i.useCallback)((e=>{d.ZH(S),c.ZH(S),null==h||h(e)}),[h,S]);return(0,g.jsx)(p.Z,{renderTooltip:()=>"error"===n?e.errorMessage:null,placement:p.Z.Placement.Bottom,disableTooltip:"error"!==n,delayThreshold:0,render:e=>(0,g.jsxs)(u.Z,{...e,style:y.button,icon:f,onClick:k,ref:t,shouldShrink:!0,disabled:v,disabledFeedback:v,children:[(0,g.jsx)("div",{style:{...l.Z.textOverflowStyle},children:x}),(0,g.jsx)("div",{style:y.spacer}),"error"===n&&(0,r.t)(y.warningIcon),(0,o.i)(y.chevronIcon)]})})}));function m(e){const{errorMessage:t,hasValue:n}=e;return(0,i.useMemo)((()=>t?{variant:"error",errorMessage:t}:n?{variant:"gray"}:{variant:"blue"}),[t,n])}},19471:(e,t,n)=>{n.d(t,{Y:()=>h,b:()=>g});var i=n(67294),a=n(480),s=n(86628),o=n(9953),r=n(98104),l=n(39699),c=n(21199),d=n(1743),u=n(74194),p=n(85893);function g(e){window.__c={n:"AutomationPlainTextInput"};const{value:t,onChange:n,wrapStyle:a,...s}=e,[o,l]=(0,i.useState)(!1);return(0,p.jsx)(d.Z,{capture:o,children:(0,p.jsx)(c.Z,{capture:!0,render:e=>(0,p.jsx)("div",{...e,style:a,children:(0,p.jsx)(u.Z,{value:t,onChange:e=>n(e.currentTarget.value),onBlur:()=>{l(!1)},onFocus:()=>{r.o9(),l(!0)},...s})})})})}function h(e){window.__c={n:"ConnectedAutomationPlainTextInput"};const{store:t,...n}=e,r=(0,a.O7)(),c=(0,s.VK)((()=>t.getValue()??""),[t]),d=(0,i.useCallback)((e=>{l.createAndCommit({userAction:"AutomationPlainTextInput.setValue",environment:r,perform:n=>{o.sO({store:t,transaction:n,value:e})}})}),[r,t]);return(0,p.jsx)(g,{value:c,onChange:d,...n})}},95193:(e,t,n)=>{n.d(t,{F:()=>r,U:()=>o});var i=n(480),a=n(86628),s=n(87279);function o(e){return e.device.isPhone||"actionSheet"===e.tabletBehavior&&e.device.isTablet?{menuType:s.og.ActionSheet}:{menuType:s.og.Popup,maxHeight:e.maxHeight,maxWidth:e.maxWidth,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,width:e.width,minWidth:e.minWidth}}function r(e){const t=(0,i.Fy)();return(0,a.VK)((()=>o({device:t,maxHeight:null==e?void 0:e.maxHeight,maxWidth:null==e?void 0:e.maxWidth,paddingTop:null==e?void 0:e.paddingTop,paddingBottom:null==e?void 0:e.paddingBottom,width:null==e?void 0:e.width,minWidth:null==e?void 0:e.minWidth,tabletBehavior:null==e?void 0:e.tabletBehavior})),[t,null==e?void 0:e.maxHeight,null==e?void 0:e.maxWidth,null==e?void 0:e.paddingTop,null==e?void 0:e.paddingBottom,null==e?void 0:e.width,null==e?void 0:e.minWidth,null==e?void 0:e.tabletBehavior])}},35294:(e,t,n)=>{n.d(t,{d:()=>o});var i=n(480),a=n(86628),s=n(53437);function o(e){const t=(0,i.Fy)();return(0,a.VK)((()=>t.isPhone||"slideUp"===(null==e?void 0:e.tabletBehavior)&&t.isTablet?s.kQ.SlideUp:s.kQ.Popup),[t,null==e?void 0:e.tabletBehavior])}},37712:(e,t,n)=>{n.d(t,{A:()=>o});n(67294);var i=n(86628),a=n(24405),s=n(85893);function o(e){let{scrollerStore:t}=e;window.__c={n:"SidebarScrollToTopBorder"};const n=(0,i.VK)((()=>0===t.state.scrollTop),[t]),o=(0,a.yK)((e=>({border:{width:"100%",boxShadow:n?"0 0 0 transparent":`0 1px 0 ${e.regularDividerColor}`,transition:"box-shadow 300ms",height:2,marginTop:-2,zIndex:99}})),[n]);return(0,s.jsx)("div",{style:o.border})}},42876:(e,t,n)=>{n.d(t,{ZP:()=>L,N_:()=>K});n(57658);var i=n(67294),a=n(480),s=n(86628),o=n(24405),r=n(41892),l=n(77657),c=n(82114),d=n(36591),u=n(90199),p=n(35840),g=n(55159),h=n(72126),m=n(149),f=n(97880),x=n(5366),v=n(54642),S=n(42631),y=n(33929),k=n(18441),C=n(80444),w=n(30874),b=n(49085),j=n(92595);class A extends b.default{getStateForBot(e){return this.state[e]??{channels:{},fetching:!1,lastRefreshed:0}}updateStateForBot(e,t){this.setState({...this.state,[e]:{...this.getStateForBot(e),...t}})}addChannelsForBot(e,t){const n=this.getStateForBot(e);this.setState({...this.state,[e]:{...n,channels:{...n.channels,...t}}})}}const I=new A;(0,j.exposeDebugValue)("ExternalNotificationChannelsStore",I);const M=I;var Z=n(52275),T=n(68894),B=n(68785),_=n(72495),R=n(33411),F=n(85893);const P=(0,x.defineMessages)({channelSearchPlaceholder:{id:"notificationRuleSettings.selectChannelView.searchInput.placeholder",defaultMessage:"Search…"}});function L(e){window.__c={n:"SlackSelectChannelView"};const{currentNotificationChannel:t,onNotificationChannelSelect:n,onClose:c,onNewSlackAccountAdded:u,renderMenu:g,channelFilter:b}=e,j=(0,a.O7)(),{isMobile:A}=(0,a.Fy)(),I=(0,s.VK)((()=>w.Z.completeSlackAuthentications.state),[]),L=e.currentExternalAuthentication??h.Ps(I);i.useEffect((()=>{L&&async function(e){const{environment:t,botId:n,spaceId:i}=e,a=M.getStateForBot(n);if(a.fetching||Date.now()-a.lastRefreshed<15e3)return;let s;M.updateStateForBot(n,{fetching:!0,lastRefreshed:Date.now()});for(;;){const e=await v.getExternalNotificationChannels(t,{botId:n,spaceId:i,cursor:s});if("success"!==e.type){console.error(e.error);break}{const t={};for(const n of e.data.channels)t[n.id]=n;if(M.addChannelsForBot(n,t),s=e.data.cursor,!s)break}}M.updateStateForBot(n,{fetching:!1})}({environment:j,botId:L.id,spaceId:L.space_id})}),[j,L]);const[W,E]=i.useState(""),{loadedChannelsForAccount:O,isLoading:z}=(0,s.VK)((()=>{if(!L)return{loadedChannelsForAccount:[],isLoading:!1};const e=M.getStateForBot(L.id);return{loadedChannelsForAccount:Object.values(e.channels),isLoading:e.fetching}}),[L]),N=(0,s.VK)((()=>w.Z.integrations.state.find((e=>e.id===l.nO))),[]),D=(0,s.VK)((()=>{var e;return null===(e=C.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),H=i.useCallback((e=>{L&&n(e,L),c()}),[n,L,c]),U=(0,o.yK)((e=>({icon:{marginLeft:8,width:12,height:12,color:e.lightTextColor},container:{backgroundColor:e.popoverBackground,marginTop:12,marginBottom:6},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,color:e.regularIconColor}})),[]),q=i.useCallback((e=>{const{channel:n}=e;return{key:n.id,render:e=>(0,F.jsx)(Z.Z,{...e,icon:K({channel:n,styles:U.icon}),desktopIconStyle:{width:8},title:n.name,right:n.id===(null==t?void 0:t.id)&&(0,d.e)(U.icon)}),action:()=>{H(n)}}}),[H,U.icon,t]),{publicChannels:Q,privateChannels:G,personalChannels:$}=i.useMemo((()=>function(e,t){const n=[],i=[],a=[];for(const s of e)t&&!t(s)||("public"===s.type?n.push(s):"private"===s.type?i.push(s):"me"===s.type?a.push(s):(0,f.t1)(s.type));return{publicChannels:n,privateChannels:i,personalChannels:a}}(O,b)),[b,O]),J=i.useCallback((()=>Q.map((e=>({menuListItem:q({channel:e}),channelName:e.name})))),[Q,q]),Y=i.useCallback((()=>G.map((e=>({menuListItem:q({channel:e}),channelName:e.name})))),[G,q]),X=i.useCallback((()=>$.map((e=>({menuListItem:q({channel:e}),channelName:e.name})))),[$,q]),ee=i.useCallback((()=>J().map((e=>{let{menuListItem:t,channelName:n}=e;if(V({channelName:n,query:W}))return t})).filter(f.$K)),[J,W]),te=i.useCallback((()=>Y().map((e=>{let{menuListItem:t,channelName:n}=e;if(V({channelName:n,query:W}))return t})).filter(f.$K)),[Y,W]),ne=i.useCallback((()=>X().map((e=>{let{menuListItem:t,channelName:n}=e;if(V({channelName:n,query:W}))return t})).filter(f.$K)),[X,W]),ie=i.useCallback((()=>{if(!L)return[];const e=[],t=ee(),n=te(),i=ne();return i.length>0&&e.push({key:"personal-channels",render:e=>(0,F.jsx)(_.Z,{...e,title:(0,k.jg)(L).organizationName}),items:i}),t.length>0&&e.push({key:"public-channels",render:e=>(0,F.jsx)(_.Z,{...e,topBorder:i.length>0,title:0===i.length&&(0,k.jg)(L).organizationName}),items:t}),n.length>0&&e.push({key:"private-channels",render:e=>(0,F.jsx)(_.Z,{...e,topBorder:t.length>0,title:0===i.length&&t.length>0&&(0,k.jg)(L).organizationName}),items:n}),e}),[ee,te,ne,L]);if(!L||!N)return null;const ae=[{key:"search-input-section",items:[{key:"search-input-item",action:()=>{},render:e=>(0,F.jsx)("div",{children:(0,F.jsx)(T.ZP,{...e,inputLeft:(0,F.jsx)(T.f_,{icon:p.R}),inputRight:(0,F.jsx)(R.Z,{show:z,showDelay:500,showHold:300,render:e=>e&&(0,F.jsx)(B.Z,{style:{marginRight:2}})}),showClearButton:!0,placeholder:y.default.formatMessage(P.channelSearchPlaceholder),focusInitial:!A,value:W,onChange:e=>{E(e.target.value)}})})}],render:e=>(0,F.jsx)(_.Z,{...e})},...ie()];return t||ae.push({key:"add-another-slack-account-section",items:[{key:"add-another-slack-account-item",action:async()=>{if(!D)return;const e=await S.hM({environment:j,integration:N,spaceId:D,from:"collection_view_settings"});m.x.isFail(e)||u()},render:e=>(0,F.jsx)(Z.Z,{...e,icon:(0,F.jsx)("img",{src:r.Z.images.externalIntegrations.slackIconPng,style:{width:18,height:"auto"}}),title:(0,F.jsx)(x.FormattedMessage,{id:"notificationRuleSettings.selectChannelView.setupAnotherSlackAccount.label",defaultMessage:"Add another Slack account"})})}],render:e=>(0,F.jsx)(_.Z,{...e,topBorder:!0})}),(0,F.jsx)(F.Fragment,{children:g(ae)})}function V(e){const{channelName:t,query:n}=e;return 0===n.length||t.toLocaleLowerCase().indexOf(n.trim().toLocaleLowerCase())>=0}function K(e){const{channel:t,styles:n}=e;return"private"===t.type?(0,u.b)(n):"me"===t.type?(0,c.p)(n):(0,g.J)(n)}},93364:(e,t,n)=>{n.d(t,{U:()=>w});n(30541),n(57658);var i=n(67294),a=n(480),s=n(86628),o=n(24405),r=n(41892),l=n(77657),c=n(5257),d=n(35840),u=n(5366),p=n(149),g=n(42631),h=n(33929),m=n(18441),f=n(80444),x=n(30874),v=n(52275),S=n(68894),y=n(72495),k=n(85893);const C=(0,u.defineMessages)({workspaceSearchPlaceholder:{id:"notificationRuleSettings.selectWorkspaceView.searchInput.placeholder",defaultMessage:"Search…"}});function w(e){window.__c={n:"SlackSelectWorkspaceView"};const{onWorkspaceSelect:t,renderMenu:n,workspaceFilter:w,onNewSlackAccountAdded:b}=e,j=(0,a.O7)(),{isMobile:A}=(0,a.Fy)(),I=(0,s.VK)((()=>{var e;return null===(e=f.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),M=(0,s.VK)((()=>(0,m.P9)(x.Z.completeSlackAuthentications.state,w)),[w]),Z=(0,s.VK)((()=>x.Z.integrations.state.find((e=>e.id===l.nO))),[]),[T,B]=i.useState(""),_=(0,o.yK)((e=>({chevronRight:{width:12,height:"auto",color:e.lightIconColor}})),[]);if(!Z)return null;const R=Object.entries((0,m.YJ)(M,T)).map(((e,n)=>{let[i,a]=e;return{key:i,items:a.map((e=>{let{workspaceName:n,externalAuthentication:i}=e;return{key:i.id,action:()=>{t(i)},render:e=>(0,k.jsx)(v.Z,{...e,title:n??(0,k.jsx)(u.FormattedMessage,{id:"notificationRuleSettings.selectWorkspace.untitledWorkspace",defaultMessage:"Slack workspace"}),right:(0,c.o)(_.chevronRight)})}})),render:e=>(0,k.jsx)(y.Z,{...e,title:i,topBorder:0!==n})}}));return R.unshift({key:"search-input-section",items:[{key:"search-input-item",action:()=>{},render:e=>(0,k.jsx)("div",{children:(0,k.jsx)(S.ZP,{...e,inputLeft:(0,k.jsx)(S.f_,{icon:d.R}),showClearButton:!0,placeholder:h.default.formatMessage(C.workspaceSearchPlaceholder),focus:!A||void 0,value:T,onChange:e=>{B(e.target.value)}})})}],render:e=>(0,k.jsx)(y.Z,{...e})}),R.push({key:"add-another-slack-account-section",items:[{key:"add-another-slack-account-item",action:async()=>{if(!I)return;const e=await g.hM({environment:j,integration:Z,spaceId:I,from:"collection_view_settings"});p.x.isFail(e)||e.value.externalAuthentication&&(t(e.value.externalAuthentication),null==b||b())},render:e=>(0,k.jsx)(v.Z,{...e,icon:(0,k.jsx)("img",{src:r.Z.images.externalIntegrations.slackIconPng,style:{width:18,height:"auto"}}),title:(0,k.jsx)(u.FormattedMessage,{id:"notificationRuleSettings.selectWorkspaceView.setupAnotherSlackAccount.label",defaultMessage:"Add another Slack account"})})}],render:e=>(0,k.jsx)(y.Z,{...e,topBorder:!0})}),(0,k.jsx)(k.Fragment,{children:n(R)})}},83176:(e,t,n)=>{n.d(t,{z:()=>s});n(67294);var i=n(45238),a=n(85893);const s=(0,i.I)("analyticsSearch",{viewBox:"0 0 51 52",svg:(0,a.jsx)("path",{d:"M.414 21.297c0 2.86.533 5.543 1.6 8.049a21.156 21.156 0 004.468 6.576 20.797 20.797 0 006.577 4.443c2.505 1.067 5.18 1.6 8.023 1.6 2.116 0 4.13-.305 6.043-.914a21.55 21.55 0 005.332-2.565l11.654 11.655a3.44 3.44 0 001.245.812c.473.186.964.28 1.472.28.728 0 1.371-.17 1.93-.508a3.48 3.48 0 001.32-1.346 3.887 3.887 0 00.482-1.93 3.8 3.8 0 00-.279-1.447 3.126 3.126 0 00-.787-1.193l-11.578-11.63a20.414 20.414 0 002.818-5.51c.694-2.013 1.041-4.138 1.041-6.372 0-2.844-.541-5.51-1.625-7.998a20.718 20.718 0 00-4.443-6.602 20.515 20.515 0 00-6.602-4.468c-2.488-1.067-5.162-1.6-8.023-1.6-2.844 0-5.518.533-8.023 1.6a20.592 20.592 0 00-6.577 4.468A21.072 21.072 0 002.014 13.3c-1.067 2.488-1.6 5.154-1.6 7.998zm5.408 0c0-2.1.39-4.071 1.168-5.916a15.517 15.517 0 013.301-4.875 15.168 15.168 0 014.875-3.276c1.845-.795 3.817-1.193 5.916-1.193 2.116 0 4.096.398 5.941 1.193a14.877 14.877 0 014.85 3.276 15.515 15.515 0 013.3 4.875c.796 1.845 1.194 3.817 1.194 5.916 0 2.116-.398 4.096-1.193 5.941a15.517 15.517 0 01-3.301 4.875 15.426 15.426 0 01-4.85 3.276c-1.845.795-3.825 1.193-5.941 1.193-2.099 0-4.07-.398-5.916-1.193a15.737 15.737 0 01-4.875-3.276 15.52 15.52 0 01-3.3-4.875c-.78-1.845-1.169-3.825-1.169-5.941zm15.31 10.36c.458 0 .746-.263.864-.788.237-1.32.474-2.437.711-3.351.254-.931.559-1.693.914-2.286a4.554 4.554 0 011.397-1.498c.575-.389 1.311-.694 2.209-.914.914-.237 2.056-.448 3.427-.634.542-.085.813-.381.813-.89 0-.507-.271-.812-.813-.913-1.354-.17-2.496-.373-3.427-.61-.915-.253-1.668-.567-2.26-.939a4.814 4.814 0 01-1.422-1.498c-.373-.61-.677-1.363-.914-2.26a42.337 42.337 0 01-.635-3.326c-.084-.542-.372-.813-.863-.813s-.796.263-.914.788a53.724 53.724 0 01-.737 3.377c-.22.914-.507 1.675-.863 2.285a4.64 4.64 0 01-1.396 1.472c-.576.373-1.32.677-2.235.914-.914.22-2.048.424-3.402.61-.559.101-.838.406-.838.914 0 .49.28.787.838.889 1.693.186 3.055.44 4.088.761 1.032.305 1.828.762 2.387 1.371.575.61 1.015 1.44 1.32 2.489.305 1.05.584 2.395.838 4.037a1 1 0 00.279.584c.17.152.38.228.635.228z"})})},37652:(e,t,n)=>{n.d(t,{V:()=>s});n(67294);var i=n(45238),a=n(85893);const s=(0,i.I)("arrowLeft",{viewBox:"0 0 30 30",svg:(0,a.jsx)("polygon",{points:"29 14 4.813 14 13.406 5.406 12 4 1 15 12 26 13.406 24.594 4.813 16 29 16"})})},82114:(e,t,n)=>{n.d(t,{Q:()=>a,p:()=>s});n(67294);var i=n(45238);const a=(0,n(85893).jsx)("path",{d:"M.911 8.034c0 4.505 3.049 7.24 7.246 7.24 1.135 0 2.215-.158 2.885-.376.472-.15.622-.397.622-.65a.44.44 0 00-.451-.444 1.3 1.3 0 00-.321.048c-.834.205-1.552.341-2.516.341-3.74 0-6.29-2.255-6.29-6.118 0-3.698 2.407-6.275 6.03-6.275 3.206 0 5.886 1.975 5.886 5.523 0 2.072-.697 3.466-1.825 3.466-.752 0-1.176-.437-1.176-1.183V4.972c0-.37-.205-.595-.554-.595-.341 0-.553.226-.553.595v.779h-.062c-.349-.84-1.203-1.374-2.222-1.374-1.77 0-3.014 1.51-3.014 3.678 0 2.187 1.237 3.712 3.042 3.712 1.06 0 1.88-.575 2.276-1.545h.062c.13.963.943 1.551 2.023 1.551 1.907 0 3.09-1.873 3.09-4.498 0-3.971-2.92-6.548-6.96-6.548C3.886.727.912 3.632.912 8.034zm6.911 2.652c-1.223 0-2.003-1.018-2.003-2.638 0-1.593.786-2.611 2.01-2.611 1.258 0 2.05.998 2.05 2.584 0 1.62-.813 2.665-2.057 2.665z"}),s=(0,i.I)("at",{viewBox:"0 0 16 16",svg:a})},59822:(e,t,n)=>{n.d(t,{J:()=>s});n(67294);var i=n(45238),a=n(85893);const s=(0,i.I)("collapse",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M2.477 7.51h3.787c.396 0 .701-.106.916-.32.214-.22.321-.525.321-.917V2.534a.723.723 0 00-.745-.745.731.731 0 00-.54.212.736.736 0 00-.205.533v.486l.15 2.146-1.6-1.682-1.968-1.982a.695.695 0 00-.52-.219.791.791 0 00-.574.219.736.736 0 00-.219.554.78.78 0 00.055.294.917.917 0 00.17.253L3.482 4.57l1.675 1.593-2.153-.143h-.526a.723.723 0 00-.746.745.723.723 0 00.746.745zm6.74 6.912a.71.71 0 00.526-.212.7.7 0 00.212-.526v-.554l-.143-2.14 1.6 1.682 2.002 2.016a.69.69 0 00.526.22c.224 0 .41-.074.561-.22a.725.725 0 00.226-.553.707.707 0 00-.062-.294.728.728 0 00-.164-.246l-2.01-2.017-1.688-1.586 2.16.144h.588a.736.736 0 00.533-.205.711.711 0 00.219-.534.72.72 0 00-.219-.54.723.723 0 00-.533-.211H9.702c-.392 0-.697.109-.916.328-.214.214-.321.517-.321.909v3.8a.7.7 0 00.212.527.746.746 0 00.54.212z"})})},40462:(e,t,n)=>{n.d(t,{o:()=>s});n(67294);var i=n(45238),a=n(85893);const s=(0,i.I)("globe2",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM3.88477 3.76465C4.56836 3.11523 5.39551 2.61621 6.31836 2.34277C5.83301 2.82812 5.42285 3.51172 5.11523 4.3457C4.63672 4.19531 4.22656 3.99707 3.88477 3.76465ZM9.68848 2.34961C10.6045 2.62305 11.4316 3.11523 12.1084 3.76465C11.7734 4.00391 11.3633 4.19531 10.8848 4.35254C10.5771 3.51172 10.167 2.82812 9.68848 2.34961ZM8.47852 2.56836C9.0459 2.8418 9.56543 3.58008 9.93457 4.58496C9.4834 4.66699 8.99805 4.71484 8.47852 4.73535V2.56836ZM6.06543 4.58496C6.44141 3.58008 6.9541 2.8418 7.52148 2.56836V4.73535C7.00195 4.71484 6.5166 4.66699 6.06543 4.58496ZM2.05273 7.58594C2.14844 6.42383 2.58594 5.35059 3.25586 4.46875C3.67285 4.77637 4.21289 5.04297 4.8418 5.24121C4.66406 5.95215 4.54785 6.74512 4.51367 7.58594H2.05273ZM11.4863 7.58594C11.4521 6.74512 11.3359 5.95215 11.1582 5.24121C11.7871 5.04297 12.3271 4.7832 12.7373 4.46875C13.4141 5.35059 13.8516 6.42383 13.9473 7.58594H11.4863ZM5.49121 7.58594C5.52539 6.84082 5.62793 6.12988 5.78516 5.4873C6.33203 5.59668 6.91309 5.66504 7.52148 5.69238V7.58594H5.49121ZM8.47852 7.58594V5.69238C9.08691 5.66504 9.66797 5.59668 10.2148 5.4873C10.3721 6.12988 10.4746 6.84082 10.5088 7.58594H8.47852ZM2.05273 8.54297H4.51367C4.54785 9.39746 4.66406 10.1973 4.8418 10.915C4.21973 11.1133 3.68652 11.373 3.27637 11.6807C2.59277 10.792 2.14844 9.71191 2.05273 8.54297ZM5.49121 8.54297H7.52148V10.4707C6.91992 10.498 6.33203 10.5664 5.79199 10.6689C5.62793 10.0195 5.51855 9.29492 5.49121 8.54297ZM8.47852 10.4707V8.54297H10.5088C10.4814 9.29492 10.3721 10.0195 10.208 10.6689C9.66797 10.5664 9.08691 10.498 8.47852 10.4707ZM11.1582 10.915C11.3428 10.1973 11.4521 9.39746 11.4863 8.54297H13.9473C13.8516 9.71191 13.4072 10.792 12.7236 11.6807C12.3135 11.373 11.7803 11.1133 11.1582 10.915ZM8.47852 11.4277C8.99121 11.4482 9.47656 11.4961 9.9209 11.5781C9.55176 12.5625 9.03906 13.2939 8.47852 13.5605V11.4277ZM6.0791 11.5781C6.52344 11.4961 7.00879 11.4482 7.52148 11.4277V13.5605C6.96094 13.2939 6.44824 12.5625 6.0791 11.5781ZM3.90527 12.3848C4.24023 12.1523 4.65039 11.9609 5.12207 11.8105C5.42969 12.6309 5.83301 13.3008 6.30469 13.7793C5.40234 13.5059 4.58203 13.0205 3.90527 12.3848ZM10.8779 11.8105C11.3496 11.9609 11.7598 12.1523 12.0947 12.3848C11.418 13.0205 10.5977 13.5059 9.69531 13.7793C10.167 13.3008 10.5703 12.6309 10.8779 11.8105Z"})})},18101:(e,t,n)=>{n.d(t,{b:()=>s});n(67294);var i=n(45238),a=n(85893);const s=(0,i.I)("reopen",{viewBox:"0 0 14 14",svg:(0,a.jsx)("path",{d:"M1.64844 7.88477C1.64844 10.791 3.98047 13.1289 6.88086 13.1289C9.78125 13.1289 12.1133 10.791 12.1133 7.88477C12.1133 7.53906 11.873 7.29297 11.5273 7.29297C11.1934 7.29297 10.9707 7.53906 10.9707 7.88477C10.9707 10.1582 9.14844 11.9805 6.88086 11.9805C4.61328 11.9805 2.79688 10.1582 2.79688 7.88477C2.79688 5.59961 4.60156 3.78906 6.86328 3.78906C7.25 3.78906 7.60742 3.81836 7.90625 3.88281L6.3125 5.46484C6.20703 5.57617 6.1543 5.69922 6.1543 5.85156C6.1543 6.17383 6.39453 6.41992 6.71094 6.41992C6.875 6.41992 7.00977 6.36719 7.10938 6.26172L9.51758 3.83594C9.64062 3.71289 9.69922 3.57227 9.69922 3.41406C9.69922 3.26172 9.63477 3.10938 9.51758 2.99219L7.10938 0.548828C7.00977 0.4375 6.875 0.378906 6.71094 0.378906C6.39453 0.378906 6.1543 0.636719 6.1543 0.953125C6.1543 1.10547 6.20703 1.24023 6.30664 1.3457L7.72461 2.74609C7.4668 2.69336 7.16797 2.66406 6.86328 2.66406C3.96875 2.66406 1.64844 4.98438 1.64844 7.88477Z"})})},83065:(e,t,n)=>{n.d(t,{_:()=>s});n(67294);var i=n(45238),a=n(85893);const s=(0,i.I)("sendArrow",{viewBox:"0 0 20 20",svg:(0,a.jsx)("path",{d:"M9.79883 18.5894C14.6216 18.5894 18.5894 14.6216 18.5894 9.79883C18.5894 4.96777 14.6216 1 9.79053 1C4.95947 1 1 4.96777 1 9.79883C1 14.6216 4.96777 18.5894 9.79883 18.5894ZM9.79883 14.3062C9.20947 14.3062 8.76953 13.9077 8.76953 13.3433V9.69922L8.86914 8.00586L8.25488 8.84424L7.3916 9.81543C7.23389 10.0063 6.98486 10.1143 6.72754 10.1143C6.21289 10.1143 5.84766 9.75732 5.84766 9.25928C5.84766 8.99365 5.92236 8.79443 6.12158 8.58691L8.96045 5.61523C9.19287 5.35791 9.4585 5.2417 9.79883 5.2417C10.1309 5.2417 10.4048 5.36621 10.6372 5.61523L13.4761 8.58691C13.667 8.79443 13.75 8.99365 13.75 9.25928C13.75 9.75732 13.3848 10.1143 12.8618 10.1143C12.6128 10.1143 12.3638 10.0063 12.2061 9.81543L11.3428 8.86914L10.7202 7.99756L10.8281 9.69922V13.3433C10.8281 13.9077 10.3799 14.3062 9.79883 14.3062Z"})})},15336:(e,t,n)=>{n.d(t,{q:()=>s});n(67294);var i=n(45238),a=n(85893);const s=(0,i.I)("squareStop",{viewBox:"0 0 21 21",svg:(0,a.jsx)("path",{d:"M10.709 20.4102C5.26953 20.4102 0.748047 15.8887 0.748047 10.4492C0.748047 5 5.25977 0.488281 10.6992 0.488281C16.1484 0.488281 20.6699 5 20.6699 10.4492C20.6699 15.8887 16.1582 20.4102 10.709 20.4102ZM8.05273 14.1113H13.3652C14 14.1113 14.3711 13.7402 14.3711 13.125V7.77344C14.3711 7.14844 14 6.78711 13.3652 6.78711H8.05273C7.42773 6.78711 7.04688 7.14844 7.04688 7.77344V13.125C7.04688 13.7402 7.42773 14.1113 8.05273 14.1113Z"})})}}]);