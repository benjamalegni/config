"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6329],{37834:(e,t,o)=>{o.d(t,{FF:()=>m,U4:()=>h,gs:()=>b,jN:()=>f,xx:()=>y,zb:()=>v});o(67294);var i=o(23867),n=o(82990),a=o(5366),s=o(77080),r=o(46096),l=o(50906),d=o(54642),c=o(47307),g=o(92625),u=o(85893);const p=(0,a.defineMessages)({restoringPreviousVersion:{id:"historyModalActions.restoringPreviousVersion.loadingMessage",defaultMessage:"Restoringâ€¦"}});function f(e){const{environment:t,from:o,...i}=e;l.ya1(t,o),r.Z.setState({...i,open:!0,size:50})}const m=()=>{const e=r.Z.state;e.open&&r.Z.setState({...e,size:e.size+20})},h=function(){r.Z.setState({open:!1})};function b(e){const{environment:t,snapshot:o,nextFutureSnapshot:i}=e;l.qDg(t,o);const n=r.Z.state;n.open&&r.Z.setState({...n,snapshot:o,nextFutureSnapshot:i,openSnapshotNearTimestamp:void 0})}function v(){const e=r.Z.state;e.open&&r.Z.setState({...e,snapshot:void 0,nextFutureSnapshot:void 0})}async function y(e){if(!r.Z.state.open)return;if(!r.Z.state.snapshot)return;const t="restore_collection",o=r.Z.state.pageHasCollection,f=s.default.checkGate("snapshot_optional_collection_rollback_enabled")&&o?[{key:t,text:(0,u.jsx)(a.FormattedMessage,{defaultMessage:"Also restore databases on this page",id:"historyModal.confirmDialog.selectOption.collection"}),description:(0,u.jsx)(a.FormattedMessage,{defaultMessage:"All database pages will be restored to the previous version, which may impact other users or database views.",id:"historyModal.confirmDialog.selectOption.collection.description"})}]:void 0,{accept:m,selectionResult:b}=await c.confirmUserActionV2({message:(0,u.jsx)("div",{style:{fontWeight:n.Z.fontWeight.semibold,fontSize:"medium"},children:(0,u.jsx)(a.FormattedMessage,{defaultMessage:"Restore to this version?",id:"historyModal.confirmDialog.description"})}),acceptLabel:(0,u.jsx)(a.FormattedMessage,{defaultMessage:"Restore",id:"historyModal.confirmDialog.restoreButton.label"}),selectionItems:f});if(!m)return;l.R9m(e,r.Z.state.snapshot),g.j({message:p.restoringPreviousVersion});const v=await d.restoreSnapshot(e,{block:{id:r.Z.state.blockStore.id,spaceId:(0,i.C)(r.Z.state.blockStore.pointer.spaceId)},timestamp:r.Z.state.snapshot.timestamp,shouldRestoreCollection:(null==b?void 0:b.restore_collection)??!1}).next();v.value.error&&c.showErrorMessage(v.value.error.message),g.x(),h()}},50908:(e,t,o)=>{o.r(t),o.d(t,{NOTIFICATION_GROUP_CARD_BORDER_RADIUS:()=>ee,default:()=>ie});o(57658);var i=o(67294),n=o(86628),a=o(24405),s=o(21202),r=o(63143),l=o(77907),d=o(35661),c=o(480),g=o(15145),u=o(17693),p=o(91),f=o(5366),m=o(15047),h=o(29369),b=o(82990),v=o(65598),y=o(64921),x=o(31278),k=o(76798),M=o(52867),S=o(90334),w=o(5686),C=o(55061),j=o(62967),A=o(19719),I=o(54642),N=o(17659),Z=o(12534),R=o(87279),B=o(98742),F=o(24764),_=o(57538),K=o(80444),L=o(77080),T=o(45325),G=o(48019),D=o(31945),z=o(73063),V=o(78140),U=o(72495),O=o(26388),P=o(64369),W=o(85893);function H(e){window.__c={n:"NotificationGroupActionsMenu"};const{notifications:t,rootStore:o}=e,r=(0,c.O7)(),l=(0,c.Fy)(),g=(0,f.useIntl)(),u=t?t[0]:void 0,p=(0,n.VK)((()=>t.every((e=>e.read))),[t]),m=(0,n.VK)((()=>T.ZP.state.filter),[]),h=(0,n.VK)((()=>!!u&&(0,C.$2)(u.type)),[u]),v=(0,n.VK)((()=>{const e=null==u?void 0:u.navigable_block_id;if(e)return d.G.createChildStore(o,{table:s.iU,id:e})}),[o,u]),y=(0,n.VK)((()=>null==v?void 0:v.getFollowSettingsKey()),[v]),x=(0,n.VK)((()=>{if(!y)return[];if(!v)return[];const e="inbox";return L.default.checkGate("property_updates_notifications")?F.CA({followSettingsKey:y,environment:r,blockStore:v,from:e}):F.Zk({followSettingsKey:y,environment:r,blockStore:v,from:e})}),[y,r,v]),k=(0,n.VK)((()=>h&&x.length>0),[h,x]),H=(0,i.useCallback)((e=>{t&&u&&(0,Z.ZP)({event:e,context:Z.Af.NotificationClick,callback:()=>{var e;const o=t.map((e=>{let{id:t}=e;return t})),i=null===(e=K.default.state.currentSpaceStore)||void 0===e?void 0:e.id;void 0!==i&&I.setNotificationsStatus(r,{spaceId:i,notificationIds:o,archived:!0});const n=t.filter((e=>!e.read));N.Jl("mentions",u.space_id,(e=>Math.max(e-n.length,0)))}})}),[r,t,u]),$=(0,i.useCallback)((e=>{t&&u&&(0,Z.ZP)({event:e,context:Z.Af.NotificationClick,callback:()=>{var e;const o=t.filter((e=>!e.read)).map((e=>{let{id:t}=e;return t})),i=null===(e=K.default.state.currentSpaceStore)||void 0===e?void 0:e.id;void 0!==i&&I.setNotificationsStatus(r,{spaceId:i,notificationIds:o,read:!0}),N.Jl("mentions",u.space_id,(e=>Math.max(e-o.length,0)))}})}),[r,t,u]),J=(0,i.useCallback)((()=>{y&&v&&u&&A.Z8({environment:r,notificationId:u.id,pageId:v.pointer.id,isCurrentlyFollowing:(0,_.Z)(y).following,from:"inbox"})}),[r,v,y,u]),Y=(0,a.yK)((e=>({container:{display:"flex",height:"min-content",padding:2},button:{height:l.isMobile?30:26,width:l.isMobile?30:26},inboxIconBase:{fill:e.icon.secondary,stroke:e.icon.secondary,strokeOpacity:1,strokeWidth:.25},iconStyle:{fill:e.mediumIconColor,padding:2},readIcon:{width:l.isMobile?21:19,height:l.isMobile?22:20},archiveIcon:{width:l.isMobile?24:23,height:l.isMobile?24:23},ellipsisIcon:{width:l.isMobile?24:23,height:l.isMobile?24:23},headerLabel:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:b.Z.fontWeight.semibold}})),[l]);return u?"archived"===m?null:(0,W.jsxs)("div",{style:Y.container,children:[(0,W.jsx)(O.Z,{renderTooltip:()=>p?(0,W.jsx)(f.FormattedMessage,{...E.allNotificationsInGroupAreRead}):(0,W.jsx)(f.FormattedMessage,{...E.markNotificationGroupAsRead}),render:e=>(0,W.jsx)(z.Z,{ariaLabel:p?g.formatMessage(E.allNotificationsInGroupAreRead):g.formatMessage(E.markNotificationGroupAsRead),style:Y.button,icon:w.J,iconStyle:{...Y.iconStyle,...Y.readIcon,...p?{height:17,width:17}:{height:16,width:16},...Y.inboxIconBase},disabled:p,onClick:$,...e})}),(0,W.jsx)(O.Z,{renderTooltip:()=>(0,W.jsx)(f.FormattedMessage,{...E.archiveNotificationGroup}),render:e=>(0,W.jsx)(z.Z,{ariaLabel:g.formatMessage(E.archiveNotificationGroup),style:Y.button,icon:M.H,iconStyle:{...Y.iconStyle,...Y.archiveIcon,height:18,width:18,...Y.inboxIconBase},onClick:H,...e})}),k&&(0,W.jsx)(O.Z,{renderTooltip:()=>(0,W.jsx)(f.FormattedMessage,{...E.changePageNotificationSettings}),render:e=>(0,W.jsx)(D.ZP,{popupType:l.isMobile?D.Z4.SlideUp:D.Z4.Popup,alignmentToOrigin:D.vR.Start,placementToOrigin:D.pO.Bottom,render:e=>(0,W.jsx)(V.Z,{menuType:R.og.Popup,minWidth:290,maxHeight:"50vh",maxWidth:l.isMobile?"100vw":void 0,header:(0,W.jsx)(P.Z,{style:Y.headerLabel,isSmall:!0,isSecondaryColor:!0,children:(0,W.jsx)(f.FormattedMessage,{id:"UpdateSidebarTabUpdatesHeader.pageNotificationSettings.label",defaultMessage:"Page notification settings"})}),children:(0,W.jsx)(G.Z,{context:{blocks:[],environment:r,publicEditMode:void 0},sections:[(0,j.$J)({key:"in-app-notifications-section",render:e=>(0,W.jsx)(U.Z,{...e}),actions:x.map((e=>e.action))})],initialFocus:void 0,onAccept:()=>e.close()})}),renderOrigin:t=>(0,W.jsx)(z.Z,{ariaLabel:g.formatMessage(E.changePageNotificationSettings),style:Y.button,icon:S.O,iconStyle:{...Y.iconStyle,...Y.archiveIcon,height:18,width:18,...Y.inboxIconBase},...e,...(0,B.Z)(t,{onClick:()=>J()})})})})]}):null}const E=(0,f.defineMessages)({allNotificationsInGroupAreRead:{defaultMessage:"All notifications in this page have been marked as read",id:"NotificationGroupActionsMenu.markNotificationAsReadDisabled.tooltipMessage"},markNotificationGroupAsRead:{defaultMessage:"Mark notifications in this page as read",id:"NotificationGroupActionsMenu.markNotificationAsRead.tooltipMessage"},archiveNotificationGroup:{defaultMessage:"Archive notifications in this page",id:"NotificationGroupActionsMenu.handleArchive.tooltipMessage"},changePageNotificationSettings:{defaultMessage:"Change page notification settings",id:"NotificationGroupActionsMenu.notificationSettings.tooltipMessage"}}),$=i.memo(H);var J=o(37444),Y=o(22649);const q=(0,f.defineMessages)({open:{defaultMessage:"Open",id:"toggleButton.open"},close:{defaultMessage:"Close",id:"toggleButton.close"}});function Q(e){window.__c={n:"ToggleButton"};const t=(0,c.Fy)(),o=(0,f.useIntl)(),n=(0,a.yK)((()=>{const o=e.color||"inherit",i="chevron"===e.icon?`rotateZ(${e.open?-180:0}deg)`:`rotateZ(${e.open?180:90}deg)`,n="chevron"===e.icon,a=n&&t.isMobile;return{button:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:"100%",...e.style},arrow:{width:a?14:n?12:"0.6875em",height:a?14:n?12:"0.6875em",transition:"transform 200ms ease-out",transform:i,fill:o,opacity:e.fill?1:.5}}}),[t.isMobile,e.color,e.fill,e.icon,e.open,e.style]),s=(0,i.useMemo)((()=>{switch(e.icon){case"chevron":return(0,u.A)(n.arrow);case"triangle":default:return(0,p.L)(n.arrow)}}),[e.icon,n.arrow]);return(0,W.jsxs)(y.Z,{ariaLabel:e.open?o.formatMessage(q.close):o.formatMessage(q.open),"aria-describedby":e["aria-describedby"],"aria-expanded":e.open,"aria-controls":e.open?e["aria-controls"]:void 0,style:n.button,onClick:e.onClick,onMouseDown:e.onMouseDown,disabled:e.disabled,allowShiftClick:!0,children:[e.tapArea&&(0,W.jsx)("div",{style:{position:"absolute",opacity:0,width:e.tapArea.size,height:e.tapArea.size,top:-(e.tapArea.size-24)/2,left:-(e.tapArea.size-24)/2}}),s]})}const X=function(e){window.__c={n:"NotificationGroupTitle"};const{titledRecordStore:t,getRecordModel:o,notifications:s,isNotificationGroupExpanded:r,toggleNotificationGroup:l}=e,[d,c]=(0,i.useState)(!1),u=(0,n.VK)((()=>t.getModel()),[t]),p=(0,n.VK)((()=>null==u?void 0:u.getRenderIcon({getRecordModel:o})),[u,o]),f=(0,n.VK)((()=>!!(0,v.OY)(t)&&t.isEmptyPage()),[t]),M=(0,n.VK)((()=>{if(u&&u.table!==m.bx&&u.table!==h.e0)return u.getRenderUrl({getRecordModel:t.getRecordModel,pageVisitSource:g.tY.Notification})}),[u,t]),S=(0,n.VK)((()=>s.filter((e=>{let{notification:t}=e;return!t.read})).length),[s]),w=s&&d,C=(0,i.useRef)(null),[j,A]=(0,i.useState)(!1);(0,i.useEffect)((()=>{if(!C)return;const{current:e}=C;if(!e)return;const t="IntersectionObserver"in window?new IntersectionObserver((e=>{let[t]=e;return A(t.intersectionRatio<1)}),{threshold:[1]}):void 0;return null==t||t.observe(e),()=>null==t?void 0:t.unobserve(e)}),[C]);const I=(0,a.yK)((e=>({container:{position:"sticky",top:-.01,zIndex:10,padding:4,background:e.modalBackground,boxShadow:j?"0px 1px 1px rgba(0, 0, 0, 0.03)":"0 0 0 transparent",transition:"box-shadow 300ms"},button:{display:"flex",gap:10,justifyContent:"space-between",alignItems:"center",height:36,paddingLeft:16-J.MY,paddingRight:16-J.MY,borderRadius:6},hoveredButton:{background:e.whiteButtonHoveredBackground},pressedButton:{background:e.whiteButtonPressedBackground},icon:{...Y.e9,verticalAlign:"unset",marginRight:4},nonToggleArea:{display:"flex",flexShrink:2,minWidth:0},pageTitleButton:{display:"flex",alignItems:"center",height:24,minWidth:0,borderRadius:4,paddingLeft:4,paddingRight:4},recordTitle:{fontSize:12,fontWeight:S>0?b.Z.fontWeight.semibold:b.Z.fontWeight.regular,color:e.mediumTextColor,display:"inline",width:"100%",...b.Z.textOverflowStyle},updateCount:{color:e.mediumTextColor,fontSize:12},statusDot:{position:"absolute",marginLeft:-10},toggleContainer:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0},toggleChevron:{color:e.lightIconColor}})),[S,j]);return u?(0,W.jsx)("div",{ref:C,style:I.container,children:(0,W.jsxs)(y.Z,{onClick:l,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:I.button,hoveredStyle:I.hoveredButton,pressedStyle:I.pressedButton,mobileFeedback:!1,children:[(0,W.jsx)("div",{style:I.nonToggleArea,children:(0,W.jsxs)(y.Z,{style:I.pageTitleButton,href:M,disabled:!Boolean(M),children:[(0,W.jsx)(x.Z,{disabled:!0,icon:p,isEmptyPage:f,size:Boolean(p)?12:16,style:I.icon}),(0,W.jsx)(k.Z,{store:t,style:I.recordTitle,shouldWrap:!0})]})}),(0,W.jsxs)("div",{style:I.toggleContainer,children:[w&&(0,W.jsx)($,{notifications:s.map((e=>{let{notification:t}=e;return t})),rootStore:t}),(0,W.jsx)(Q,{fill:!0,isSidebar:!0,icon:"chevron",open:r,onClick:l,color:I.toggleChevron.color})]})]})}):null},ee=16;function te(e){window.__c={n:"NotificationGroup"};const{notifications:t,rootStore:o,source:r,tab:c}=e,[g,u]=(0,i.useState)(!0),p=(0,i.useCallback)((()=>u(!g)),[g]),f=(0,n.VK)((()=>t.every((e=>{let{notification:t}=e;return t.read}))),[t]),m=(0,n.VK)((()=>{const e=t[0].notification.navigable_block_id;if(e)return d.G.createChildStore(o,{table:s.iU,id:e})}),[o,t]),h=(0,a.yK)((e=>({toggle:{color:e.lightIconColor},notificationGroup:{borderBottom:`1px solid ${e.regularDividerColor}`,paddingTop:16,backgroundColor:f?e.sidebarBackground:""},notificationGroupButton:{cursor:g?"default":"inherit"},flatIndentFooter:{height:10,backgroundColor:e.sidebarBackground},groupContainer:{backgroundColor:e.contentBackground},divider:{height:8,backgroundColor:e.sidebarBackground}})),[g,f]);if(!m){const{notification:o,activity:i}=t[0],n={source:"notifications_tab",tab:e.tab,notification:o};return(0,W.jsxs)("div",{style:h.groupContainer,children:[(0,W.jsx)(l.LazyActivityNotification,{activity:i,rootStore:e.rootStore,tabArgs:n,isLast:!0,useInboxRedesign:!0},i.id),(0,W.jsx)("div",{style:h.divider})]})}const b=t.map(((o,i)=>{let{notification:n,activity:a}=o;const s={source:"notifications_tab",tab:e.tab,notification:n};return(0,W.jsx)(l.LazyActivityNotification,{activity:a,rootStore:e.rootStore,isLast:i===t.length-1,tabArgs:s,useInboxRedesign:!0},a.id)}));return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{style:h.groupContainer,children:[(0,W.jsx)(X,{titledRecordStore:m,getRecordModel:o.getRecordModel,activity:t[0].activity,tabArgs:{source:r,tab:c,notification:t[0].notification},notifications:t,isNotificationGroupExpanded:g,toggleNotificationGroup:p}),(0,W.jsx)("div",{children:g&&b})]}),(0,W.jsx)("div",{style:h.divider})]})}function oe(e){window.__c={n:"NotificationGroups"};const{notifications:t,rootStore:o,type:i,source:s,tab:l}=e,d=(0,n.VK)((()=>{const e=(0,r.vM)(t,(e=>{let{notification:t}=e;return t.navigable_block_id??t.id}));return e.forEach(((t,o)=>{const n=[],a=new Set;t.forEach((e=>{const{activity:t}=e;"commented"!==t.type&&n.push(e);const o=t.discussion_id;void 0===o||a.has(o)||(n.push(e),a.add(o))}));const s=n.filter((e=>{let{notification:t}=e;return("mentions"!==i||!t.visited)&&!("archive"===i&&!t.visited)}));0!==s.length?e.set(o,s):e.delete(o)})),Array.from(e)}),[t,i]),c=(0,a.yK)((e=>({container:{display:"flex",flexDirection:"column",backgroundColor:e.contentBackground}})),[]);return(0,W.jsx)("div",{style:c.container,children:d.map((e=>{let[t,i]=e;return(0,W.jsx)(te,{notifications:i,rootStore:o,source:s,tab:l},`group-${t}`)}))})}oe.displayName="NotificationGroups";const ie=oe},93963:(e,t,o)=>{o.d(t,{z:()=>s});o(67294);var i=o(24405),n=o(5366),a=o(85893);function s(e){let{color:t,size:o,style:s}=e;window.__c={n:"StatusDot"};const r=(0,n.useIntl)(),l=(0,i.yK)((e=>({dot:{height:o||8,width:o||8,background:t||e.blueColor,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...s}})),[o,t,s]);return(0,a.jsx)("div",{role:"img","aria-label":r.formatMessage({id:"statusDot.ariaLabel",defaultMessage:"New"}),style:l.dot})}},37444:(e,t,o)=>{o.d(t,{MY:()=>Z,ZP:()=>L,hn:()=>K});var i=o(67294),n=o(480),a=o(86628),s=o(24405),r=o(69651),l=o(8504),d=o(21202),c=o(82990),g=o(54642),u=o(17659),p=o(37834),f=o(39699),m=o(43250),h=o(12534),b=o(33929),v=o(16402),y=o(80444),x=o(35661),k=o(4761),M=o(11066),S=o(73063),w=o(26388),C=o(67706),j=o(30573),A=o(32469),I=o(93963),N=o(85893);const Z=4;function R(e){window.__c={n:"InboxNotificationSection"};const[t,o]=(0,i.useState)(!1),[r,l]=(0,i.useState)(!1),{notification:d,prominentTitleLink:c,children:p,rootStore:b,icon:v,isPrivate:x,onBacklinkClicked:S,onArchiveClicked:w,onNotificationFrameClicked:C,onMarkAsReadClicked:j,onMarkAsUnreadClicked:R,showRecordPath:K,navigableBlockId:L,url:T,showSnapshotButton:G,timestamp:D,header:z,isLast:V}=e,U=(0,n.O7)(),O=(0,a.VK)((()=>"mentions"===k.ZP.state.currentTab),[]),P=!d||d.read,W=U.device.isMobile,H=Boolean(P&&O&&!G&&d),E=(0,a.VK)((()=>{const e=U.WindowSizeStore.state;return{left:e.paddingLeftCSS,right:e.paddingRightCSS}}),[U.WindowSizeStore]),$=(0,s.yK)((e=>({article:{display:"flex",flexDirection:"column"},mainClickTargetButton:{borderRadius:6,paddingTop:16-Z,paddingBottom:16-Z,paddingLeft:W?E.left:0,paddingRight:W?E.right:0,position:"relative",margin:Z,...H&&{opacity:.7,background:e.fill.wash}},headerAndAvatar:{display:"flex",paddingLeft:16-Z,paddingRight:16-Z,gap:12,maxWidth:"100%"},avatarAndStatusDot:{display:"flex",alignItems:"center",height:"fit-content"},statusDot:{position:"absolute",marginLeft:-10},privatePageBadge:{marginTop:1,marginBottom:4,marginLeft:8},children:{paddingLeft:52-Z,paddingRight:16-Z},divider:{width:`calc(100% - ${52-Z}px)`,height:1,backgroundColor:e.stroke.deemphasized,alignSelf:"end"}})),[E,W,H]),J=(0,i.useCallback)((e=>{d&&!d.read&&(r||(0,h.ZP)({event:e,context:h.Af.NotificationClick,callback:()=>{if(C(),"commented"===d.type&&!d.read){var e;const t=null===(e=y.default.state.currentSpaceStore)||void 0===e?void 0:e.id;void 0!==t&&g.setNotificationsStatus(U,{spaceId:t,notificationIds:[d.id],read:!0})}f.createAndCommit({userAction:"ActivityNotificationSection.handleMarkAsRead",environment:U,perform:e=>{u.$h({notification:d,rootStore:b,transaction:e,read:!0})}})}}))}),[U,r,d,C,b]),Y=(0,i.useCallback)((()=>o(!0)),[]),q=(0,i.useCallback)((()=>o(!1)),[]),Q=(0,i.useId)();return(0,N.jsxs)("article",{style:$.article,onMouseOver:Y,onMouseLeave:q,onClick:J,"aria-labelledby":Q,tabIndex:0,children:[(0,N.jsx)(B,{notification:d,rootStore:b,isMobile:W,isHovered:t,isMentionsTab:O,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onArchiveClicked:w,onMarkAsReadClicked:j,onMarkAsUnreadClicked:R}),(0,N.jsxs)(M.Z,{href:T,style:$.mainClickTargetButton,disabled:!Boolean(T),children:[(0,N.jsxs)("div",{style:$.headerAndAvatar,children:[(0,N.jsxs)("div",{className:m.FoE,style:$.avatarAndStatusDot,children:[O&&!P&&(0,N.jsx)(I.z,{style:$.statusDot,size:6}),v]}),(0,N.jsx)(F,{timestamp:D,header:z,prominentTitleLink:c,hasChildren:Boolean(p),navigableBlockId:L,rootStore:b,onBacklinkClick:S,showRecordPath:K,titleAriaId:Q,isHovered:t,isNotificationRead:P}),G&&L&&(0,N.jsx)(_,{timestamp:D,navigableBlockId:L,rootStore:b}),x&&!d&&(0,N.jsx)(A.Z,{style:$.privatePageBadge})]}),p&&(0,N.jsx)("div",{style:$.children,className:m.nU_,children:p})]}),!V&&(0,N.jsx)("div",{style:$.divider})]})}function B(e){window.__c={n:"InboxActions"};const{notification:t,rootStore:o,isMobile:i,isHovered:n,isMentionsTab:a,onArchiveClicked:r,onMarkAsReadClicked:l,onMarkAsUnreadClicked:d,onMouseEnter:c,onMouseLeave:g}=e,u=(0,s.yK)((()=>({container:{display:"flex",alignItems:"flex-start",position:"relative"},body:{transition:"opacity 100ms ease-out",opacity:i||n?1:0,position:"absolute",right:i?9:16,top:9,zIndex:1}})),[i,n]);return a&&t?t.visited?null:(0,N.jsx)("div",{style:u.container,onMouseEnter:c,onMouseLeave:g,children:(0,N.jsx)("div",{style:u.body,children:(0,N.jsx)(j.Z,{notification:t,rootStore:o,onArchiveClicked:r,onMarkAsReadClicked:l,onMarkAsUnreadClicked:d,useInboxRedesign:!0})})}):null}function F(e){window.__c={n:"Header"};const{timestamp:t,prominentTitleLink:o,header:i,hasChildren:a,titleAriaId:l,isNotificationRead:d}=e,g=(0,v.IS)(t,{useCompactFormat:!0}),u=(0,n.O7)().device.isMobile,p=(0,v.uy)(t),f=(0,s.yK)((e=>({container:{display:"flex",flexDirection:"column",width:"100%"},containerMobile:{display:"flex"},headerMobile:{fontSize:14,lineHeight:1.4,minWidth:0},header:{display:"flex",justifyContent:"space-between",alignItems:"baseline",fontSize:14,lineHeight:1.4,minWidth:0},headlineMobile:{display:"inline",fontWeight:d?c.Z.fontWeight.regular:c.Z.fontWeight.semibold,whiteSpace:"pre-wrap",wordBreak:"break-word"},headline:{flexShrink:2,fontWeight:d?c.Z.fontWeight.regular:c.Z.fontWeight.semibold,whiteSpace:"pre-wrap",wordBreak:"break-word"},title:{fontSize:14,marginTop:4,marginBottom:a?8:4},time:{fontSize:12,color:e.lightTextColor,whiteSpace:"nowrap",...u&&{display:"inline"},paddingLeft:6},path:{marginTop:4,marginBottom:4},separatorDot:{fontSize:12,color:e.lightTextColor,marginLeft:4,marginRight:4}})),[a,u,d]);return(0,N.jsxs)("div",{style:u?f.containerMobile:f.container,children:[(0,N.jsxs)("div",{style:u?f.headerMobile:f.header,children:[(0,N.jsx)("div",{style:u?f.headlineMobile:f.headline,className:m.NFf,children:(0,N.jsx)("span",{id:l,children:i})}),(0,N.jsx)("div",{style:f.time,className:m.CZG,children:(0,N.jsx)(C.Z,{text:g,tooltipText:p,icon:r.C})})]}),u&&(0,N.jsx)("div",{style:{width:96,flexShrink:0}}),o&&(0,N.jsx)("div",{style:f.title,children:o})]})}function _(e){window.__c={n:"SnapshotButton"};const{timestamp:t,navigableBlockId:o,rootStore:i}=e,a=(0,n.O7)();if(t<new Date("2018-10-26").getTime())return null;const s=b.default.getIntl().formatMessage({defaultMessage:"View version for this update",id:"activitySection.viewVersionForUpdate.tooltip"}),r=()=>{const e=x.G.createChildStore(i,{table:d.iU,id:o});p.jN({environment:a,blockStore:e,openSnapshotNearTimestamp:t.toString(),from:"activity"})};return(0,N.jsx)(w.Z,{renderTooltip:()=>s,render:e=>(0,N.jsx)(S.Z,{ariaLabel:s,onClick:r,icon:l.J,...e})})}function K(e){window.__c={n:"InboxIconCircleWrapper"};const{children:t}=e,o=(0,s.yK)((e=>({container:{borderRadius:"100%",display:"flex",flexShrink:0,justifyContent:"center",alignItems:"center",height:24,width:24,backgroundColor:"light"===e.mode?"rgb(244,244,244)":e.tint.regular},icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,N.jsx)("div",{style:o.container,children:t})}const L=i.memo(R)},24764:(e,t,o)=>{o.d(t,{t0:()=>M,Zk:()=>x,CA:()=>y});o(67294);var i=o(45433),n=o(98519),a=o(97880),s=o(5366),r=o(62967),l=o(57883),d=o(50906),c=o(9953),g=o(39699);function u(e){const{environment:t,key:o,selectedKey:i,following:n,followSettings:a,navigableBlockId:s,userId:r,spaceId:u,from:p}=e;g.createAndCommit({userAction:"UpdateSidebarFollowControl.setFollowing",environment:e.environment,canUndo:!1,perform:t=>{c.Ue({environment:e.environment,table:l.t0,args:{following:n,followSettings:a,navigableBlockId:s,userId:r,spaceId:u},inMemoryRecordCache:e.environment.defaultRecordCache.inMemoryRecordCache,transaction:t})}}),n?d.RJe(t,{from:"page_updates"}):d.ubm(t,{from:"page_updates"}),i!==o&&d.kLN(t,{from:p,navigableBlockId:s,oldSetting:i,newSetting:o})}var p=o(64964),f=o(93405),m=o(64369),h=o(80444),b=o(57538),v=o(85893);function y(e){const{followSettingsKey:t,environment:o,blockStore:n,from:a}=e,r=k({key:"none",selectedKey:t,title:(0,v.jsx)(s.FormattedMessage,{id:"GetNotifiedDropdown.repliesAndMentions.label",defaultMessage:"Replies and @mentions"}),environment:o,blockStore:n,from:a}),l=k({key:"comments",selectedKey:t,title:(0,v.jsx)(s.FormattedMessage,{id:"GetNotifiedDropdown.allComments.label",defaultMessage:"All comments"}),environment:o,blockStore:n,from:a}),d=k({key:"all",selectedKey:t,title:(0,v.jsx)(s.FormattedMessage,{id:"GetNotifiedDropdown.allUpdates.label",defaultMessage:"All updates"}),caption:(0,v.jsx)(s.FormattedMessage,{id:"GetNotifiedDropdown.simpleAllUpdates.caption",defaultMessage:"All comments and property changes"}),environment:o,blockStore:n,from:a}),c=n.getAssociatedCollectionStore();if(!c)return[l,r];const g=c.getDatabaseType();if(g===i.iS){return[d,k({key:"important",selectedKey:t,title:(0,v.jsx)(s.FormattedMessage,{id:"GetNotifiedDropdown.importantUpdatesTasks.label",defaultMessage:"Important updates"}),caption:(0,v.jsx)(s.FormattedMessage,{id:"GetNotifiedDropdown.importantUpdatesTasks.caption",defaultMessage:"All comments and changes to Status, Assignee, or Due Date"}),environment:o,blockStore:n,from:a}),r]}if(g===i.wW){return[d,k({key:"important",selectedKey:t,title:(0,v.jsx)(s.FormattedMessage,{id:"GetNotifiedDropdown.importantUpdatesProjects.label",defaultMessage:"Important updates"}),caption:(0,v.jsx)(s.FormattedMessage,{id:"GetNotifiedDropdown.importantUpdatesProjects.caption",defaultMessage:"All comments and changes to Status or Date"}),environment:o,blockStore:n,from:a}),r]}return[d,k({key:"comments",selectedKey:t,title:(0,v.jsx)(s.FormattedMessage,{id:"GetNotifiedDropdown.onlyCommentsAllComments.label",defaultMessage:"All comments"}),environment:o,blockStore:n,from:a}),r]}function x(e){const{followSettingsKey:t,environment:o,blockStore:i,from:n}=e;return[k({key:"important",selectedKey:t,title:(0,v.jsx)(s.FormattedMessage,{id:"inAppNotificationsFollowingOptionsHelpers.allComments.label",defaultMessage:"All comments"}),caption:(0,v.jsx)(s.FormattedMessage,{id:"inAppNotificationsFollowingOptionsHelpers.allComments.caption",defaultMessage:"Notified of all comments and @mentions"}),environment:o,blockStore:i,from:n}),k({key:"none",selectedKey:t,title:(0,v.jsx)(s.FormattedMessage,{id:"inAppNotificationsFollowingOptionsHelpers.mentionsAndReplies.label",defaultMessage:"Replies and @mentions"}),caption:(0,v.jsx)(s.FormattedMessage,{id:"inAppNotificationsFollowingOptionsHelpers.mentionsAndReplies.caption",defaultMessage:"Notified of comment replies and @mentions"}),environment:o,blockStore:i,from:n})]}function k(e){const{key:t,title:o,caption:i,selectedKey:a,environment:s,blockStore:l,from:d}=e,c=M({key:t,userSelectedKey:a}),g={icon:{width:14,height:14},rightWrapper:i?{alignSelf:"flex-start",paddingTop:2}:{}};return{action:(0,r.cN)({key:t,displayName:void 0,analyticsName:t,validators:[],closeParentMenu:!0,action:()=>{const{currentUserRootStore:e}=h.default.state;if(e){const{following:o,followSettings:i}=(0,b.Z)(t),n=e.id,r=l.id,c=l.getSpaceId();u({environment:s,following:o,followSettings:i,navigableBlockId:r,spaceId:c,userId:n,from:d,key:t,selectedKey:a}),"inbox"!==d&&"more_menu"!==d||p.d4({item:{label:S(t)},undoFunc:()=>{const{following:e,followSettings:o}=(0,b.Z)(a);u({environment:s,following:e,followSettings:o,navigableBlockId:r,spaceId:c,userId:n,from:d,key:t,selectedKey:a})}})}},render:e=>(0,v.jsx)(f.Z,{...e,title:(0,v.jsx)(m.Z,{children:o}),caption:i,shouldWrapCaption:!0,right:c?(0,n.k)(g.icon):(0,v.jsx)("div",{style:g.icon}),rightStyle:g.right})}),title:o,isSelectedOption:c}}function M(e){const{key:t,userSelectedKey:o}=e;return"important"===o||"comments"===o?"important"===t||"comments"===t:t===o}function S(e){switch(e){case"none":return(0,v.jsx)(s.FormattedMessage,{id:"GetNotifiedDropdown.subscribedRepliesAndMentionsSuccess.snackbarMessage",defaultMessage:"Subscribed to replies and @mentions"});case"comments":return(0,v.jsx)(s.FormattedMessage,{id:"GetNotifiedDropdown.subscribedAllCommentsSuccess.snackbarMessage",defaultMessage:"Subscribed to all comments"});case"important":return(0,v.jsx)(s.FormattedMessage,{id:"GetNotifiedDropdown.subscribedImportantUpdatesSuccess.snackbarMessage",defaultMessage:"Subscribed to important updates"});case"all":return(0,v.jsx)(s.FormattedMessage,{id:"GetNotifiedDropdown.subscribedAllUpdatesSuccess.snackbarMessage",defaultMessage:"Subscribed to all updates"});default:(0,a.t1)(e)}}},46096:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(49085);class n extends i.default{getInitialState(){return{open:!1}}}const a=new n},52867:(e,t,o)=>{o.d(t,{H:()=>a});o(67294);var i=o(45238),n=o(85893);const a=(0,i.I)("archive",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.083 14.585h7.499c1.347 0 2.064-.697 2.064-2.037V5.739c.664-.11 1.019-.608 1.019-1.34V3.36c0-.834-.458-1.36-1.299-1.36H2.3C1.499 2 1 2.526 1 3.36V4.4c0 .73.355 1.23 1.019 1.34v6.808c0 1.347.717 2.037 2.064 2.037zM2.579 4.728c-.342 0-.478-.144-.478-.486v-.724c0-.342.136-.486.478-.486h10.514c.342 0 .472.144.472.486v.724c0 .342-.13.486-.472.486H2.579zm1.49 8.825c-.615 0-.95-.335-.95-.95V5.76h9.427v6.842c0 .616-.342.95-.95.95H4.069zM5.58 8.515h4.512c.287 0 .492-.199.492-.5v-.218c0-.3-.205-.492-.492-.492H5.58c-.287 0-.485.191-.485.492v.219c0 .3.198.499.485.499z"})})},90334:(e,t,o)=>{o.d(t,{O:()=>a});o(67294);var i=o(45238),n=o(85893);const a=(0,i.I)("ellipsis",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.887 9.014c.273 0 .52-.064.738-.192.219-.132.394-.307.526-.526.133-.219.199-.46.199-.725 0-.405-.142-.747-.424-1.025a1.41 1.41 0 00-1.04-.417c-.264 0-.505.066-.724.198a1.412 1.412 0 00-.718 1.244c0 .265.064.506.192.725.132.219.307.394.526.526.219.128.46.192.725.192zm5.113 0a1.412 1.412 0 001.244-.718c.132-.219.198-.46.198-.725 0-.405-.14-.747-.423-1.025A1.386 1.386 0 008 6.129c-.264 0-.506.066-.725.198a1.412 1.412 0 00-.718 1.244c0 .265.064.506.192.725.132.219.308.394.526.526.22.128.46.192.725.192zm5.106 0c.265 0 .506-.064.725-.192.219-.132.394-.307.526-.526.133-.219.199-.46.199-.725 0-.405-.142-.747-.424-1.025a1.394 1.394 0 00-1.026-.417 1.474 1.474 0 00-1.265.718c-.127.218-.19.46-.19.724 0 .265.063.506.19.725.133.219.308.394.527.526.223.128.47.192.738.192z"})})},8843:(e,t,o)=>{o.d(t,{h:()=>a});o(67294);var i=o(45238),n=o(85893);const a=(0,i.I)("mailRound",{viewBox:"0 0 17 12",svg:(0,n.jsx)("path",{d:"M3.09961 11.9639H14.1055C15.3359 11.9639 16.0469 11.2529 16.0469 9.84473V2.29785C16.0469 0.896484 15.3291 0.185547 13.9004 0.185547H2.89453C1.66406 0.185547 0.953125 0.889648 0.953125 2.29785V9.84473C0.953125 11.2598 1.6709 11.9639 3.09961 11.9639ZM7.68652 6.41992L2.52539 1.32715C2.67578 1.26562 2.85352 1.23145 3.05859 1.23145H13.9414C14.1533 1.23145 14.3379 1.26562 14.4883 1.33398L9.34082 6.41992C9.04688 6.71387 8.78027 6.84375 8.51367 6.84375C8.24023 6.84375 7.97363 6.70703 7.68652 6.41992ZM1.99902 9.84473V2.29785C1.99902 2.24316 1.99902 2.27051 1.99902 2.22266L5.92969 6.08496L2.00586 9.96094C1.99902 9.92676 1.99902 9.88574 1.99902 9.84473ZM15.001 2.30469V9.85156C15.001 9.87891 15.001 9.91309 15.001 9.94043L11.0977 6.08496L15.001 2.24316C15.001 2.30469 15.001 2.30469 15.001 2.30469ZM3.05859 10.918C2.86719 10.918 2.70312 10.8906 2.55957 10.8291L6.64746 6.78906L7.0918 7.22656C7.57031 7.69824 8.02832 7.89648 8.51367 7.89648C8.99219 7.89648 9.45703 7.69824 9.93555 7.22656L10.3799 6.78906L14.4609 10.8223C14.3105 10.8906 14.1396 10.918 13.9414 10.918H3.05859Z"})})}}]);