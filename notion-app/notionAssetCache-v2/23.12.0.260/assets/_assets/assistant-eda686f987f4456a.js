"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8721],{55031:(e,t,n)=>{n.d(t,{y:()=>a});var i=n(51454),s=n(28020),o=n(24646),r=n(4926),l=n(31156);function a(e,t){const{theme:n,rightEdgeDistance:a,isInPeekRenderer:d}=t,h=t.width??36,u=(0,o.ll)(e,d)-(0,o.vJ)(e);return{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",background:n.whiteButtonBackground,bottom:16+r.Z.state,right:a+r.Z.state,width:h,height:h,borderRadius:"100%",fontSize:20,boxShadow:n.lightBoxShadow,zIndex:i.hT,opacity:s.tu.state?0:1,transform:`translateX(-${u}px) translateZ(0)`,transition:`\n\t\t\topacity ${l.Z.transitionDuration}ms,\n\t\t\tcolor ${l.Z.transitionDuration}ms,\n\t\t\ttransform 200ms\n\t\t`}}},255:(e,t,n)=>{n.d(t,{Z:()=>l});n(67294);var i=n(480),s=n(53465),o=n(73063),r=n(85893);const l=function(e){window.__c={n:"MenuItemRemoveButton"};const t=(0,i.O7)(),n={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}},{onClick:l,disabled:a}=e,{device:d}=t,h=d.isMobile?{...n.removeFilterButton,...n.removeFilterButtonMobile}:n.removeFilterButton;return(0,r.jsx)(o.Z,{icon:s.X,onClick:l,disabled:a,disableBackground:!0,style:h})}},83890:(e,t,n)=>{n.d(t,{Z:()=>b});var i=n(67294),s=n(83355),o=n(66897),r=n(22686),l=n(19889),a=n(7928),d=n(5366),h=n(31299),u=n(35661),m=n(92864),c=n(93044),p=n(255),g=n(97680),M=n(8319),y=n(85893);class v extends s.Z{constructor(){super(...arguments),this.renderFilterListItem=(e,t)=>{let{disabled:n,onRemove:i,onClick:s}=t;const r=this.styles,l=this.getUserValue(e),a=(0,y.jsx)(p.Z,{disabled:n,onClick:i});return(0,y.jsx)(g.Z,{disabled:n,focused:!1,actor:(0,o.m3)(l),right:a,style:r.menuItem,desktopTitleStyle:r.menuItemTitle,onClick:s},e)},this.renderItemForSummary=e=>(0,a.Nz)(this.props.intl,this.getUserValue(e)),this.renderToken=(e,t)=>{const{userIds:n}=this.props,i=1===n.length,s=this.getUserValue(e);if(s)return(0,y.jsx)(m.ZP,{format:this.environment.device.isMobile?c.lP.Large:c.lP.Small,showRemoveButton:!0,isSingle:i,onClickRemove:t.onRemove,actor:(0,o.m3)(s),shouldShrink:!0,style:{background:"transparent"}},e)},this.renderResultMenuItem=(e,t)=>{const n=this.getUserValue(e);return(0,i.createElement)(g.Z,{...t,key:e,actor:(0,o.m3)(n)})},this.performRequest=async e=>{let{query:t,current:n}=e;const i=new Set(n);return(await h.Yu({environment:this.environment,query:t,membersOnly:!1})).filter((e=>!i.has(e.id))).slice(0,20).map((e=>e.id))},this.getUserValue=e=>this.createUserStore(e).getValue(),this.createUserStore=e=>{const{parentStore:t}=this.props;return u.U6.createChildStore(t,{table:l.KJ,id:e})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:2,fill:"currentColor"}}}renderComponent(){const{mode:e,title:t,userIds:n,onChange:i,disabled:s,focused:o,onMenuDismiss:l,intl:a}=this.props;return(0,y.jsx)(M.Z,{mode:e,title:t,icon:r.f,iconStyles:this.styles.recordIcon,items:n,onChange:i,disabled:s,focused:o,renderFilter:this.renderFilterListItem,renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:(0,y.jsx)(d.FormattedMessage,{defaultMessage:"Add a person",id:"search.filterMenu.addAPersonButton.label"}),labelText:{title:t,tokenInputPlaceholder:a.formatMessage({defaultMessage:"Search people",id:"search.filterMenu.searchPeople.placeholder"}),componentDebugName:"SearchPersonFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,onMenuDismiss:l,hasItemsSelected:(null==n?void 0:n.length)>0})}}v.displayName="SearchPersonFilter";const b=(0,d.injectIntl)(v)},8319:(e,t,n)=>{n.d(t,{z:()=>P,Z:()=>z});var i=n(67294),s=n(83355),o=n(47453),r=n(72126),l=n(97880),a=n(5366),d=n(75024),h=n(49085);class u extends h.default{getInitialState(){return{isMenuOpen:!1,inputTemporaryValue:"",indexToReplace:void 0,popupOriginRect:void 0}}}const m=u;var c=n(33338),p=n(42922),g=n(52275),M=n(89728),y=n(53437),v=n(72495),b=n(75689),f=n(91642),x=n(68626),I=n(91155),C=n(87279),S=n(29798),k=n(72087),T=n(78140),j=n(32163),R=n(43765),F=n(40721),Z=n(77137),B=n(47082),O=n(85893);class w extends s.Z{constructor(){super(...arguments),this.storeTypes={requestStore:k.Z,menuListStore:S.Z},this.renderRequest=(e,t,n)=>{const{labelText:i,value:s}=this.props,{menuListStore:o}=this.stores,r=e=>(0,O.jsx)(v.Z,{...e,title:i.resultSectionTitle,loading:!n});if(e)return x.log({level:"error",from:i.componentDebugName,type:"requestFailed",error:(0,I.Ui)(e),data:{miscDataToConvertToString:{query:s}}}),(0,O.jsx)(r,{children:(0,O.jsx)(R.Z,{title:(0,O.jsx)(a.FormattedMessage,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!t)return(0,O.jsx)(r,{children:(0,O.jsx)(R.Z,{title:(0,O.jsx)(a.FormattedMessage,{defaultMessage:"Loadingâ€¦",id:"search.inputMenu.loading.message"})})});if(t&&0===t.length)return(0,O.jsx)(r,{children:(0,O.jsx)(R.Z,{title:(0,O.jsx)(a.FormattedMessage,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})})});const l={key:"results",items:t.map(this.getResultMenuItem),render:r};return(0,O.jsx)(j.Z,{type:j.i.Vertical,store:o,initialFocus:0,sections:[l]})},this.handleMenuInputRemoveLast=()=>{const{items:e,onRemove:t}=this.props,n=r.Z$(e);n&&t(n)},this.getResultMenuItem=e=>{const{renderResultMenuItem:t,onConfirm:n}=this.props;return{key:e,action:()=>n(e),render:n=>t(e,n)}},this.styles={input:{marginTop:8,marginLeft:8,marginRight:8,boxSizing:"border-box",width:"auto"},menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}}}renderComponent(){const{value:e,items:t,performRequest:n}=this.props,{requestStore:i}=this.stores,s={query:e,current:t};return(0,O.jsx)(T.Z,{...this.getMenuProps(),children:(0,O.jsx)(Z.Z,{debounce:100,requestStore:i,request:s,performRequest:n,render:this.renderRequest})})}renderTokenInput(){const{labelText:e,value:t,items:n,disabled:i,onChange:s,renderToken:o,onRemove:r,onClear:l}=this.props,a=n.map((e=>o(e,{onRemove:()=>r(e)})));return(0,O.jsx)(B.Z,{focus:!this.isMobile()||void 0,focusAfterAnimation:!0,format:B.Z.Format.FilterValue,tokens:a,placeholder:e.tokenInputPlaceholder,onRemoveLastToken:this.handleMenuInputRemoveLast,onClearButtonClick:l,value:t,onChange:s,showClearButton:!0,disabled:Boolean(i),style:this.styles.inputMenu})}getMenuProps(){const{onDismiss:e,labelText:t}=this.props,n=this.styles;if(this.isMobile()){return{menuType:C.og.Modal,title:t.title,right:(0,O.jsx)(F.DoneMenuText,{}),onClickRight:e,header:this.renderTokenInput()}}return{menuType:C.og.Popup,onClickOutside:e,header:this.renderTokenInput(),...n.menu}}isMobile(){const{device:e}=this.environment;return e.isMobile}}w.displayName="SearchTokenInputMenu";const L=w;let P=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});class q extends s.Z{constructor(){super(...arguments),this.animationFrame=void 0,this.origin=i.createRef(),this.storeTypes={componentStore:m},this.renderMobileFilterSummary=e=>{const{title:t,items:n,renderItemForSummary:s}=this.props,{disableFilters:o}=e,r=this.styles,l={...d.mK,...r.summary},a=n.length-1,h=(0,O.jsx)("ul",{style:l,children:n.map(((e,t)=>(0,O.jsx)("li",{style:r.summaryItem,children:(0,O.jsxs)(i.Fragment,{children:[s(e),t!==a&&","," "]})},e)))});return(0,O.jsx)(b.Z,{disabled:o,onClick:this.handleMenuOpenMobile,onClickClear:this.clearItems,label:t,title:h})},this.renderMenu=()=>{const{renderToken:e,renderFooter:t,allowApplyBatchSelection:n}=this.props,{componentStore:{state:i}}=this.stores;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(L,{...this.props,value:i.inputTemporaryValue,onChange:this.handleMenuInputChange,onDismiss:this.handleMenuClose,onConfirm:this.handleItemConfirm,onClear:()=>{this.handleClearTemporary(),this.clearItems()},onRemove:this.handleFilterRemove,renderToken:e}),t&&(0,O.jsxs)(v.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"},children:[(0,O.jsx)(M.Z,{onClick:()=>{this.clearItems()},children:(0,O.jsx)(a.FormattedMessage,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),n&&(0,O.jsx)(p.Z,{onClick:()=>{this.handleMenuClose("applyButton")},children:(0,O.jsx)(a.FormattedMessage,{id:"searchTokenFilter.applyButton",defaultMessage:"Apply"})})]})]})},this.handleMenuOpen=e=>{this.scheduleMeasurement(void 0,(t=>({...t,isMenuOpen:!0,indexToReplace:e})))},this.handleMenuOpenMobile=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,isMenuOpen:!0})},this.handleMenuClose=e=>{const{onMenuDismiss:t}=this.props,{componentStore:n}=this.stores;this.clearInput(),n.setState({...n.state,isMenuOpen:!1,indexToReplace:void 0}),t&&t(e)},this.handleClearTemporary=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,inputTemporaryValue:""})},this.handleItemConfirm=e=>{const{items:t}=this.props,{componentStore:n}=this.stores,{indexToReplace:i}=n.state;"number"==typeof i&&i<t.length?this.replaceItem(i,e):t.includes(e)&&q.Mode.Pill?this.removeItem(e):this.addItem(e),this.props.keepInputOnItemConfirm||this.clearInput()},this.handleFilterRemove=e=>{this.removeItem(e)},this.handleMenuInputChange=e=>{const{componentStore:t}=this.stores,{target:n}=e;t.setState({...t.state,inputTemporaryValue:String(n.value)})},this.scheduleMeasurement=(e,t)=>{this.animationFrame=requestAnimationFrame(this.measureOriginRect(t))},this.measureOriginRect=e=>t=>{const{componentStore:n}=this.stores;if(!this.origin)return;if(!this.origin.current)return;const i=e?e(n.state):n.state;n.setState({...i,popupOriginRect:this.origin.current.getBoundingClientRect()})},this.isMenuOpen=()=>{const{componentStore:{state:e}}=this.stores;return e.isMenuOpen},this.removeItem=e=>{const{items:t,onChange:n}=this.props;n(t.filter((t=>t!==e)))},this.clearItems=()=>{const{onChange:e}=this.props;e([])},this.replaceItem=(e,t)=>{const{items:n,onChange:i}=this.props;i(n.slice(0,e).concat(t,n.slice(e+1)))},this.clearInput=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,inputTemporaryValue:"",indexToReplace:void 0})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:d.yv(this.environment,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===this.props.mode?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}didMount(){window.addEventListener("resize",this.scheduleMeasurement)}willUnmount(){window.removeEventListener("resize",this.scheduleMeasurement),this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0)}didUpdate(e){(e.items.length!==this.props.items.length||e.mode!==this.props.mode)&&this.scheduleMeasurement()}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t,disabled:n}=this.props,{componentStore:{state:i}}=this.stores,s=n||i.isMenuOpen;let o;const r=(()=>e===q.Mode.Section?(o=t,this.renderSectionOrigin()):e===q.Mode.Button?this.renderButtonOrigin():e===q.Mode.Pill?this.renderPillOrigin():void(0,l.t1)(e))();return(0,O.jsxs)(f.Z,{title:o,marginAfter:e===q.Mode.Section,style:this.styles.sectionMenuItem,children:[e!==q.Mode.Pill&&this.renderFilters({disableFilters:s,showLabel:!1}),r,(0,O.jsx)(y.ZP,{popupType:y.ZP.PopupType.Popup,placementToOrigin:y.ZP.Placement.Bottom,alignmentToOrigin:y.ZP.Alignment.Start,open:this.isMenuOpen(),originRect:i.popupOriginRect,render:()=>this.renderMenu(),onDismiss:this.handleMenuClose,keepFocus:!0,preventScaleTransition:!0})]})}renderButtonOrigin(){const{icon:e,title:t,disabled:n,focused:i}=this.props,s=this.styles,o=this.getThemeColors(),r={...s.menuItem,...o.buttonMenuItem};return(0,O.jsx)("div",{ref:this.origin,style:s.menuItemWrapper,children:(0,O.jsx)(g.Z,{disabled:n||this.isMenuOpen(),icon:e(s.icon),title:t,focused:i,onClick:e=>this.handleMenuOpen(),style:r})})}renderPillOrigin(){const{icon:e,title:t,disabled:n,iconStyles:i}=this.props,s=this.styles,o=this.props.mode===P.Pill&&this.props.hasItemsSelected;return(0,O.jsx)("div",{ref:this.origin,style:s.menuItemWrapper,children:(0,O.jsx)(c.Z,{on:o,icon:e({...s.icon,...i}),title:(0,O.jsx)("span",{children:t}),onClick:e=>this.handleMenuOpen(),wrapStyle:{opacity:n?.4:1}})})}renderSectionOrigin(){const{addItemLabel:e,disabled:t}=this.props,n=this.styles,s=this.getThemeColors();return(0,O.jsxs)(i.Fragment,{children:[(0,O.jsx)("div",{ref:this.origin,style:n.menuItemWrapper}),(0,O.jsx)(g.Z,{disabled:t||this.isMenuOpen(),icon:(0,o.R)(n.iconSmall),title:e,focused:!1,onClick:e=>this.handleMenuOpen(),style:{...n.appendListItemButton,...s.appendListItemButton}})]})}renderMobile(e){const{disabled:t}=this.props,n=t||this.isMenuOpen(),i=e===q.Mode.Section?this.renderMobileFilterSummary({disableFilters:n}):this.renderMobileButtonOrigin({disableFilters:n});return(0,O.jsx)(y.ZP,{popupType:y.ZP.PopupType.SlideUp,open:this.isMenuOpen(),origin:i,render:this.renderMenu,onDismiss:this.handleMenuClose,keepFocus:!0})}renderMobileButtonOrigin(e){const{icon:t,title:n}=this.props,i=this.styles;return(0,O.jsx)(g.Z,{disabled:e.disableFilters,focused:!1,icon:t({...i.icon}),title:n,onClick:e=>this.handleMenuOpenMobile()})}renderFilters(e){const{items:t,renderFilter:n}=this.props,{device:i}=this.environment,s=t.map(((t,s)=>(0,O.jsx)("li",{children:n(t,{disabled:e.disableFilters,onRemove:()=>this.handleFilterRemove(t),onClick:()=>i.isMobile?this.handleMenuOpenMobile():this.handleMenuOpen(s)})},`${t}_${s}`)));return(0,O.jsx)("ul",{style:d.mK,children:s})}addItem(e){const{items:t,onChange:n}=this.props,i=t.concat(e);n(r.jj(i))}getThemeColors(){return{buttonMenuItem:{color:this.theme.mediumTextColor},appendListItemButton:{color:this.theme.lightTextColor}}}}q.displayName="SearchTokenFilter",q.Mode=P;const z=q},75689:(e,t,n)=>{n.d(t,{Z:()=>h});n(67294);var i=n(83355),s=n(82990),o=n(52275),r=n(24006),l=n(255),a=n(85893);class d extends i.Z{constructor(){super(...arguments),this.styles={menuItem:{background:void 0,minHeight:void 0,fontSize:this.environment.device.isMobile?s.Z.fontSize.UISmall.mobile:s.Z.fontSize.UIRegular.desktop,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}renderComponent(){const{disabled:e,label:t,title:n,onClick:i,isToggle:s,...r}=this.props,l=this.getThemeColors(),d=this.styles,h=(0,a.jsx)("span",{style:l.menuItemLabel,children:t});return(0,a.jsx)(o.Z,{focused:!1,...r,inline:s,disabled:e,icon:h,title:n,right:this.renderRight(),onClick:i,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:d.menuItem,desktopIconStyle:d.menuItemLabel})}renderRight(){const{disabled:e}=this.props,t=this.styles.rightWrapper;return this.props.isToggle?(0,a.jsx)("div",{style:t,children:(0,a.jsx)(r.Z,{on:this.props.isToggleActive,onClick:this.props.onClick})}):(0,a.jsx)(l.Z,{disabled:e,onClick:this.props.onClickClear})}getThemeColors(){return{menuItemLabel:{color:this.theme.lightTextColor}}}}d.displayName="SearchFilterSummaryMenuItem";const h=d},91642:(e,t,n)=>{n.d(t,{Z:()=>o});n(67294);var i=n(72495),s=n(85893);const o=function(e){const t={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:n,marginAfter:o,desktopStyle:r,desktopTitleStyle:l,...a}=e,d=(o||r)&&{...o&&t.marginAfter,...r},h=l?{...t.desktopTitleStyle,...l}:t.desktopTitleStyle;return(0,s.jsx)(i.Z,{isTitleUppercase:!0,disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:d,desktopTitleStyle:h,shouldShowBottomDivider:!1,title:n,...a})}},18441:(e,t,n)=>{n.d(t,{P9:()=>a,YJ:()=>d,jc:()=>l,jg:()=>r});n(57658);var i=n(77657),s=n(59753),o=n(32161);function r(e){if(e.integration_id!==i.nO)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,n,s]=t;return{organizationName:n,accountName:s}}function l(e){return s.kk.fromValue(o.P,e).getSlackWorkspaceId()}function a(e,t){return t?e.filter((e=>{const n=l(e);return!!n&&t(n)})):e}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n={};for(const i of e){const{accountName:e,organizationName:s}=r(i);h({query:t,accountName:e,organizationName:s})&&(n[e]||(n[e]=[]),n[e].push({externalAuthentication:i,workspaceName:s}))}return n}function h(e){const{accountName:t,organizationName:n,query:i}=e;if(0===i.length)return!0;const s=t.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0,o=!!n&&n.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0;return s||o}},77058:(e,t,n)=>{n.d(t,{$:()=>o});n(67294);var i=n(45238),s=n(85893);const o=(0,i.I)("checkmark",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M10.0693 18.166C14.7759 18.166 18.6606 14.2812 18.6606 9.58301C18.6606 4.88477 14.7676 1 10.061 1C5.36279 1 1.48633 4.88477 1.48633 9.58301C1.48633 14.2812 5.37109 18.166 10.0693 18.166ZM9.13965 13.6836C8.82422 13.6836 8.56689 13.5508 8.33447 13.2437L6.30078 10.7783C6.15137 10.5874 6.07666 10.3965 6.07666 10.189C6.07666 9.75732 6.41699 9.40869 6.84863 9.40869C7.10596 9.40869 7.30518 9.5 7.521 9.77393L9.11475 11.791L12.5347 6.3125C12.7173 6.02197 12.9497 5.88086 13.2153 5.88086C13.6387 5.88086 14.0205 6.17139 14.0205 6.61133C14.0205 6.80225 13.9209 7.00977 13.8047 7.19238L9.91162 13.2437C9.729 13.5342 9.45508 13.6836 9.13965 13.6836Z"})})},72263:(e,t,n)=>{n.d(t,{_:()=>o});n(67294);var i=n(45238),s=n(85893);const o=(0,i.I)("settingsUpgrade",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M9.969 17.938c4.36 0 7.969-3.618 7.969-7.97C17.938 5.61 14.32 2 9.96 2 5.609 2 2 5.61 2 9.969c0 4.351 3.617 7.969 7.969 7.969zm0-1.329a6.609 6.609 0 01-6.633-6.64 6.602 6.602 0 016.625-6.64 6.627 6.627 0 016.648 6.64 6.61 6.61 0 01-6.64 6.64zm0-2.734a.562.562 0 00.586-.586V9.383l-.063-1.656.797.945.922.937a.52.52 0 00.414.172c.32 0 .57-.242.57-.562a.566.566 0 00-.164-.406L10.43 6.219c-.149-.149-.29-.227-.461-.227-.164 0-.297.07-.453.227l-2.61 2.593a.555.555 0 00-.148.407c0 .32.242.562.562.562a.572.572 0 00.414-.172l.93-.937.781-.938-.062 1.649v3.906c0 .344.25.586.586.586z"})})}}]);