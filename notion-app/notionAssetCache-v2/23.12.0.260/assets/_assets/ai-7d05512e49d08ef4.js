"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5741],{89941:(e,t,o)=>{o.d(t,{ez:()=>a,fF:()=>r,vE:()=>s});var n=o(19037),i=o(19124);const r=[e=>(0,i.GD)(e.publicEditMode),n.J5],s=[...r,n.ff(n.fI),n.ff(n.OX)],a=[...s,e=>n.P9("ai_block")&&e.blocks.every((e=>e.isSkillBlock()))]},96323:(e,t,o)=>{o.d(t,{F0:()=>D,Hh:()=>G,LK:()=>E,NZ:()=>z,Rr:()=>T,cK:()=>B,lA:()=>Y,sH:()=>K,sY:()=>F,xI:()=>O,xj:()=>H,yY:()=>L});o(57658),o(67294);var n=o(480),i=o(86628),r=o(24405),s=o(41432),a=o(8848),l=o(12970),c=o(91856),d=o(56666),u=o(75e3),p=o(25651),m=o(11751),f=o(54434),g=o(5366),y=o(97880),v=o(42858),h=o(39699),x=o(84254),C=o(72495),k=o(19037),w=o(78663),S=o(99417),A=o(19124),I=o(40959),b=o(16772),M=o(27724),_=o(89941),P=o(62967),j=o(85893);const F=(0,g.defineMessages)({notionAI:{defaultMessage:"Notion AI",id:"completions.completionActions.AIAssist"},more:{defaultMessage:"See more",id:"completions.completionActions.more"},alternativeUiString:{defaultMessage:"{text}",id:"completions.completionActions.alternativeUiString"},aiSummaryBlockDisplayName:{defaultMessage:"Summary",id:"completions.completionActions.aiSummaryBlockDisplayName"},aiActionItemsBlockDisplayName:{defaultMessage:"Action items",id:"completions.completionActions.aiActionItemsBlockDisplayName"},aiFreePromptBlockDisplayName:{defaultMessage:"Custom AI block",id:"completions.completionActions.aiFreePromptBlockDisplayName"},aiSectionBlockDisplayName:{defaultMessage:"Custom AI section",id:"completions.completionActions.aiSectionBlockDisplayName"}});function L(e){return function(t){return(0,j.jsx)(C.Z,{...t,title:(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,m.t)({width:16,height:16,marginRight:4}),(0,j.jsx)("div",{children:t.title})]}),right:e})}}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const o=[];if(o.push(...e.slice(0,t)),e.length>t){const n=(0,P.$J)({key:"more actions",render:e=>(0,j.jsx)(C.Z,{...e}),actions:e.slice(t)});o.push((0,P.MV)({key:"more",displayName:F.more,analyticsName:"Completions - more",validators:_.vE,svg:()=>(0,j.jsx)(J,{}),subActions:()=>[n],collapseSubActionsIntoParent:!0,width:350}))}return o}function N(){return(0,j.jsx)(Y,{svg:p.R,svgFill:a.FN.light.purple[500]})}function B(e){const{key:t,name:o,analyticsName:n,textToInsert:i,onUpdatePromptState:r,right:s,renderTooltip:a,showEllipsis:l,userProvidedSearchName:c,executeImmediately:d,gtmFavoriteId:u}=e,p=o.length>1e3?`${o.slice(0,1e3)}…`:o;return(0,P.cN)({key:t,analyticsName:`Completions - insert text into prompt - ${n}`,...(m=l?`${p}…`:p,{displayName:F.alternativeUiString,displayNameInterpolatedValues:{text:m}}),validators:[],closeParentMenu:!1,svg:N,action(){r({insertText:i??o,analyticsName:n,gtmFavoriteId:u,executeImmediately:d})},right:s??W("updatePrompt"),renderTooltip:a,userProvidedSearchName:c});var m}function E(e){const{from:t,type:o,onUpdatePromptState:n}=e;function i(e){return B({key:`completions.${e.key}`,name:(0,S.t8)(e),analyticsName:e.key,textToInsert:(0,w.$W)(e),onUpdatePromptState:n,showEllipsis:!0})}const r="cursor"===o?{selectionType:o,isPageEmpty:!k.IC()}:{selectionType:o},s=(0,S.up)(r),a=(0,S.pv)(s,r),l=[];for(const[c,d]of a){const e=[];for(const r of d)"helpMeDraft"!==r.key&&"helpMeEdit"!==r.key&&"helpMeWrite"!==r.key&&("translate"===r.key?e.push(U(r,_.vE,o,t)):"changeTone"===r.key?e.push(V(r,_.vE,o,t)):r.steps?e.push(i(r)):e.push(z({prompt:r,validators:_.vE,type:o,from:t})));const n=(0,P.$J)({key:`completions.${c}`,title:(0,S.Mh)(c,"cursor"===o?"page":"selection"),render:e=>(0,j.jsx)(C.Z,{...e}),actions:T(e.filter(y.$K),7)});l.push(n)}return"cursor"===o&&l.push((0,P.$J)({key:"completions.aiBlocks",title:S.Dr.aiBlocks,render:e=>(0,j.jsx)(C.Z,{...e}),actions:I.O5.map((e=>function(e){const t=I.Hc[e.aiBlockType],{displayName:o,svg:n}=Z[e.aiBlockType],i=e=>!t.shouldShow||t.shouldShow(e);return(0,P.cN)({key:`completions.aiBlocks.${t.key}`,analyticsName:`Completions - ${t.key}`,closeParentMenu:!0,svg:n,displayName:o,validators:[..._.vE,i],action:e=>{let{environment:o}=e;h.createAndCommit({userAction:"completionActions.createAiBlockAction",environment:o,perform:e=>{v.at({environment:o,selection:M.default.state.stores,createBlockItem:t,analyticsFrom:"ai_prompt",transaction:e})}})}})}({aiBlockType:e})))})),l}const Z={[s.MF.aiSummaryBlock]:{displayName:F.aiSummaryBlockDisplayName,svg:()=>(0,j.jsx)(Q,{svg:c.Y})},[s.MF.aiActionItemsBlock]:{displayName:F.aiActionItemsBlockDisplayName,svg:()=>(0,j.jsx)(Q,{svg:l.O})},[s.MF.aiFreePromptBlock]:{displayName:F.aiFreePromptBlockDisplayName,svg:()=>(0,j.jsx)(Q,{svg:m.t})},[s.MF.aiSectionBlock]:{displayName:F.aiSectionBlockDisplayName,svg:()=>(0,j.jsx)(Q,{svg:m.t})}};function O(e){return(0,P.$J)({key:"completions",title:F.notionAI,render:L(),actions:R(e)})}function R(e){const{store:t,from:o}=e,n=[];for(const i of(0,A.G9)()){if("helpMeWrite"===i.key)continue;const e=z({prompt:i,validators:_.vE,type:"aiBlock",from:o,store:t});e&&n.push(e)}return n}function D(e){const{environment:t,inputValue:o,store:n}=e,i=(0,A.qB)({customPrompt:o,isPageEmpty:!1});x.triggerCompletionForAiBlock({environment:t,store:n,prompt:i,additionalContext:{prompt:o}})}function U(e,t,o,n){const{key:i,name:r,svg:s,svgFill:a,steps:l}=e;if("translate"!==i||!l||1!==l.length||"language"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((i=>{let{key:r,name:s}=i;return(0,P.cN)({key:`completions.translate.${r}`,analyticsName:`Completions - translate - ${r}`,displayName:s,validators:t,closeParentMenu:!0,right:W("submitPrompt"),action:t=>{let{environment:i}=t;q({environment:i,prompt:e,from:n,type:o,additionalContext:{language:r}})}})})),d=(0,P.$J)({key:"translate language actions",render:e=>(0,j.jsx)(C.Z,{...e}),actions:c}),u=s?()=>(0,j.jsx)(Y,{svg:s,svgFill:a}):void 0;return(0,P.MV)({key:"translate",displayName:r,analyticsName:`Completions - ${i}`,validators:t,svg:u,subActions:()=>[d]})}function V(e,t,o,n){const{key:i,name:r,svg:s,svgFill:a,steps:l}=e;if("changeTone"!==i||!l||1!==l.length||"tone"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((i=>{let{key:r,name:s}=i;return(0,P.cN)({key:`completions.changeTone.${r}`,analyticsName:`Completions - changeTone - ${r}`,displayName:s,validators:t,closeParentMenu:!0,right:W("submitPrompt"),action:t=>{let{environment:i}=t;q({environment:i,prompt:e,from:n,type:o,additionalContext:{tone:r}})}})})),d=(0,P.$J)({key:"changeTone tone actions",render:e=>(0,j.jsx)(C.Z,{...e}),actions:c}),u=s?()=>(0,j.jsx)(Y,{svg:s,svgFill:a}):void 0;return(0,P.MV)({key:"changeTone",displayName:r,analyticsName:`Completions - ${i}`,validators:t,svg:u,subActions:()=>[d]})}function H(e){window.__c={n:"ActionHintIcon"};const{focused:t,type:o}=e,s=(0,n.O7)(),a=(0,i.VK)((()=>s.device.isPhone),[s]),l=(0,r.yK)((e=>({iconStyle:{width:14,height:14,fill:e.mediumIconColor,opacity:!a&&t?1:0},containerStyle:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center"}})),[t,a]);switch(o){case"submitPrompt":return(0,j.jsx)("div",{style:l.containerStyle,children:(0,u.U)(l.iconStyle)});case"updatePrompt":return(0,j.jsx)("div",{style:l.containerStyle,children:(0,f.F)(l.iconStyle)});default:(0,y.t1)(o)}}function W(e){return t=>(0,j.jsx)(H,{type:e,focused:t.focused})}function K(e){const{customPrompt:t,execute:o}=e;return(0,P.cN)({analyticsName:"Completions - execute current prompt input",key:"explicitFreeFormAction",displayName:S.Dr.genericHelpMeWrite,displayNameInterpolatedValues:{filter:t},svg:N,right:W("submitPrompt"),validators:[],closeParentMenu:!1,renderTooltip:P.zz,action(){o()}})}const $=()=>(0,S.L3)();function z(e){const{prompt:t,validators:o,type:n,from:i,store:r,sortScoreMultiplier:s}=e,{key:a,name:l}=t;if("translate"===a&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return U(t,o,n,i);if("changeTone"===a&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return V(t,o,n,i);const c=function(e){const{svg:t,svgFill:o}=e;return t?()=>(0,j.jsx)(Y,{svg:t,svgFill:o}):void 0}(t),d=[...o];return t.requiresContent?d.push(k.IC):t.requiresNoContent&&d.push(k.ff(k.IC)),t.isNewModel&&d.push($),(0,P.cN)({key:`completions.${a}`,analyticsName:`Completions - ${a}`,displayName:l,fuzzySearchKeywords:t.fuzzySearchKeywords,validators:d,closeParentMenu:!0,svg:c,right:W("submitPrompt"),sortScoreMultiplier:s,action:e=>{let{environment:o}=e;q({environment:o,prompt:t,type:n,from:i,store:r})}})}function q(e){const{environment:t,prompt:o,type:n,from:i,store:r,additionalContext:s}=e;if("textSelection"===n)x.openCompletionPopupForSavedContext({environment:t,prompt:o,from:i,additionalContext:s});else if("blockSelection"===n)x.openCompletionPopupForBlockSelectionContext({environment:t,prompt:o,from:i,additionalContext:s});else if("cursor"===n){if(o.preferToNeverInsertTextAtCursor)return void x.selectPageAndOpenCompletionPopupForBlockSelectionContext({environment:t,prompt:o,from:i,additionalContext:s});x.openCompletionPopupForCursorContext({environment:t,prompt:o,from:i,additionalContext:s})}else"aiBlock"===n?r&&x.triggerCompletionForAiBlock({environment:t,store:r,prompt:o,additionalContext:s}):(0,y.t1)(n)}function G(e){const{inputValue:t,from:o,mode:n,environment:i}=e;switch(n){case"edit":return void function(e){const{customPrompt:t,from:o,environment:n}=e,i=(0,S.sB)(t);"closedWithContext"===b.default.state.type&&b.default.state.context&&x.openCompletionPopupForPrefilledContext({environment:n,context:b.default.state.context,prompt:i,additionalContext:{prompt:t},from:o,skipInitialForm:!0})}({environment:i,customPrompt:t,from:o});case"write":const e=(0,S.wq)(t);if(e){const{prompt:t,additionalContext:n}=e,r=(0,w.FD)();if(!r)return;return void x.openCompletionPopupForPrefilledContext({environment:i,context:r,prompt:t,additionalContext:n,from:o,skipInitialForm:!0})}return void function(e){const{environment:t,customPrompt:o,from:n}=e,i=(0,A.qB)({customPrompt:o,isPageEmpty:!k.IC()}),r=(0,w.FD)();r&&x.openCompletionPopupForPrefilledContext({environment:t,context:r,prompt:i,additionalContext:{prompt:o},from:n,skipInitialForm:!0})}({environment:i,customPrompt:t,from:o})}(0,y.t1)(n)}function J(){window.__c={n:"MoreIcon"};const e=(0,r.Fg)();return(0,d.o)({width:12,marginLeft:2,marginRight:2,fill:e.mediumIconColor})}function Y(e){window.__c={n:"BoxedIcon"};const t=(0,r.yK)((t=>({box:{height:e.fixedWidth?22:void 0,width:e.fixedWidth?22:void 0,display:"flex",alignItems:"center",justifyContent:"center",...e.boxStyles},icon:{height:16,width:16,fill:e.svgFill??(0,a.gh)({theme:"light"}).regularIconColor}})),[e]);return(0,j.jsx)("div",{style:t.box,children:e.svg(t.icon)})}function Q(e){window.__c={n:"AiBlockIcon"};const t=(0,r.yK)((e=>({box:{background:e.fill.purple,width:24,height:24,borderRadius:4},icon:{fill:e.icon.purple}})),[]);return(0,j.jsx)(Y,{svg:e.svg,svgFill:t.icon.fill,boxStyles:t.box})}},79474:(e,t,o)=>{o.d(t,{r:()=>i});var n=o(43604);async function i(e){return new Promise((t=>{n.Z.setState({open:!0,onClose:()=>{n.Z.setState({open:!1}),t(!1)},onConfirm:()=>{n.Z.setState({open:!1}),t(!0)},...e})}))}},16091:(e,t,o)=>{o.d(t,{RD:()=>b,gc:()=>_,gl:()=>M,u7:()=>I});var n=o(67294),i=o(36769),r=o(480),s=o(86628),a=o(41432),l=o(5366),c=o(39699),d=o(37181),u=o(81415),p=(o(95477),o(19124)),m=o(68056),f=o(89086),g=o(28685),y=o(80444),v=o(77080),h=o(83212),x=o(35661),C=o(24666),k=o(41752),w=o(89626),S=o(85893);const A=(0,l.defineMessages)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Get instant answers to your questions"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"Ask a question about anything in your workspace. Notion AI will search across your pages and generate an answer."}});function I(){window.__c={n:"SpaceForAiOnboardingTooltip"};const e=(0,r.O7)(),t=function(){const e=(0,r.O7)(),t=(0,s.VK)((()=>{const t=y.default.state.mainEditorCurrentBlockStore;return t&&h.Z.getMode(e,t)}),[e]);return(0,s.VK)((()=>{if(e.device.isMobile)return;if(!v.default.checkGate("space_for_ai_tooltip_enabled"))return;const{currentUserSettingsStore:o,inAppCalloutStore:n}=y.default.state;if(!n.canShow("ai_onboarding_tooltip"))return;const i=null==o?void 0:o.getSettings();if(!i)return;if(i.signup_time&&i.signup_time>16770636e5)return;if("space_for_ai"!==(0,w.sy)())return;if(!(0,p.GD)(t))return;const r=C.default.state;if("editing"===r.mode){const e=(0,m.QY)(r.multiSelection);if(e&&(0,f.wd)(e.selection)){const t=e.store,o=g.E.findEditableWithStore(t);if(o){const e="block"===t.pointer.table?x.G.createChildStore(t,t.pointer):void 0,n=e&&e.getType(),i=Boolean(n&&(0,a.hD)(n)),r=t.getValue();if(i&&!r)return o}}}}),[e,t])}();return t?(0,S.jsx)(u.U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,S.jsx)(l.FormattedMessage,{...A.spaceForAiHeader}),content:(0,S.jsx)(l.FormattedMessage,{...A.spaceForAiContent}),onCloseClick:()=>(0,w.h1)(e)}):null}function b(e){window.__c={n:"AskAIAnythingOnboardingTooltip"};const{originRef:t,openState:o}=e,n=(0,r.O7)(),i=(0,s.VK)((()=>(0,w.sy)()),[]);if(n.device.isMobile)return null;return"ask_ai_anything"===i&&"initialPrompt"===o.stage?(0,S.jsx)(u.U,{origin:t,placementToOrigin:"top",header:(0,S.jsx)(l.FormattedMessage,{...A.askAiAnythingHeader}),content:(0,S.jsx)(l.FormattedMessage,{...A.askAiAnythingContent}),onCloseClick:()=>(0,w.h1)(n)}):null}function M(e){window.__c={n:"RefineAIResponseOnboardingTooltip"};const{originRef:t,openState:o,isInputEmpty:n}=e,i=(0,r.O7)(),a=(0,s.VK)((()=>(0,w.sy)()),[]);if(i.device.isMobile)return null;const c="refine_ai_response"===a&&"results"===o.stage&&!o.loading&&"cursor"===o.context.type&&n;return(0,S.jsx)(u.U,{origin:c?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,S.jsx)(l.FormattedMessage,{...A.refineAiResponseHeader}),content:(0,S.jsx)(l.FormattedMessage,{...A.refineAiResponseContent}),onCloseClick:()=>(0,w.h1)(i)})}function _(e){window.__c={n:"ShowAssistantLocationTooltip"};const{origin:t}=e,o=(0,r.O7)(),i=(0,n.useCallback)((()=>{const{currentUserSettingsStore:e}=y.default.state;e&&(0,k.C)(o,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e})}),[o]);return(0,S.jsx)(u.U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,S.jsx)(l.FormattedMessage,{...A.showAssistantLocationHeader}),content:(0,S.jsx)(l.FormattedMessage,{...A.showAssistantLocationContent}),onCloseClick:i})}(0,i.exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=y.default.state;t&&c.createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,perform:e=>{d.d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},41752:(e,t,o)=>{o.d(t,{C:()=>r});var n=o(39699),i=o(37181);function r(e,t){const{phase:o,transactionUserAction:r,userSettingsStore:s}=t;n.createAndCommit({environment:e,userAction:r,perform:e=>{i.d2({userSettingsStore:s,transaction:e,data:{ai_qna_intro_onboarding_phase:o}})}})}},44866:(e,t,o)=>{o.r(t),o.d(t,{autofillPropertyForBlocks:()=>Q,autofillPropertyForCollection:()=>ee,fillAllPagesMessages:()=>W,getDefaultAiInference:()=>ne,getPropertyCompletionForBlock:()=>oe,saveOrRemovePropertyAiInference:()=>te,submitFeedbackForAiAutofill:()=>X,triggerAiAutofillUpsell:()=>J});o(57658);var n=o(67294),i=o(26263),r=o(99036),s=o(80951),a=o(74229),l=o(72126),c=o(5366),d=o(482),u=o(4615),p=o(3791),m=o(97880),f=o(50906),g=o(8406),y=o(54642),v=o(14871),h=o(45264),x=o(79474),C=o(47307),k=o(96802),w=o(9953),S=o(64964),A=o(39699),I=o(1865),b=o(86628),M=o(98519),_=o(82007),P=o(79576),j=o(73420),F=o(68785),L=o(6854),T=o(85893);const N=function(e){let{environment:t,inferenceIds:o,aiInference:i}=e;window.__c={n:"AiAutofillProgressLabel"};const r=(0,b.VK)((()=>{const{state:e}=P.W;return"uninitialized"===e.type?null:{numBlocksToAutofill:e.numBlocksToAutofill,numBlocksAutofilled:e.numBlocksAutofilled,propertySchema:e.propertySchema,collectionId:e.collectionId,sessionId:e.sessionId,haveAllBlocksCompletedAutofill:e.haveAllBlocksCompletedAutofill}}),[]),s=(0,n.useCallback)((()=>{r&&(o.forEach((e=>{f.qG2(t,{ai_inference_type:i.type,type:"undo_from_snackbar",inference_id:e,collection_id:r.collectionId,session_id:r.sessionId})})),_.Yw(t,!0),S.rN(),P.W.setState({type:"filling",...r,didInterruptStreaming:!0}))}),[r,t,i,o]);if(!r)return null;const{numBlocksToAutofill:a,numBlocksAutofilled:l,propertySchema:{name:d}}=r;return l===a?(0,T.jsxs)(j.X2,{gap:4,alignItems:"center",children:[(0,M.k)({width:16}),(0,T.jsx)(c.FormattedMessage,{defaultMessage:'AI updated "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillInProgress",values:{propertyName:d,numPages:a}}),(0,T.jsx)(L.Pn,{onClick:s,children:(0,T.jsx)(c.FormattedMessage,{defaultMessage:"Undo",id:"snackbar.aiAutofill.undo"})}),(0,T.jsx)(L.Pn,{onClick:()=>{S.rN()},children:(0,T.jsx)(c.FormattedMessage,{defaultMessage:"Close",id:"snackbar.aiAutofill.close"})})]}):(0,T.jsxs)(j.X2,{gap:4,alignItems:"center",children:[(0,T.jsx)(F.Z,{}),0===l?(0,T.jsx)(c.FormattedMessage,{defaultMessage:'AI updating "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillStarting",values:{propertyName:d,numPages:a}}):(0,T.jsx)(c.FormattedMessage,{defaultMessage:'AI updated "{propertyName}" on {numFilledPages} of {numTotalPages} pages',id:"snackbar.aiAutofill.completedAutofill",values:{propertyName:d,numFilledPages:l,numTotalPages:a}}),(0,T.jsx)(L.Pn,{onClick:s,children:(0,T.jsx)(c.FormattedMessage,{defaultMessage:"Stop & undo",id:"snackbar.aiAutofill.undoAndStop"})})]})};var B=o(99417),E=o(33929),Z=o(77907),O=o(80444),R=o(35661),D=o(1310),U=o(78291),V=o(35057),H=o(84254);const W=(0,c.defineMessages)({fillAllPagesTooltip:{defaultMessage:"{hasNames, select, true {Autofill {propertyName} for all pages in {collectionName}} other {Autofill this property for all pages in the database}}",id:"aiAutofill.fillAllPages.buttonTooltip"},fillAllPagesAddOnMessage:{defaultMessage:"Only with Notion AI add-on",id:"aiAutofill.fillAllPages.onlyWithAiAddOnMessageInTooltip"}});function K(e){let{environment:t,propertyId:o,propertySchema:n,storesWithCompletions:i,blockIdToInferenceId:a,useTemporaryStore:l,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:d,doneStreaming:u}=e;A.createAndCommit({userAction:"BlockPropertyValue.handleActionButtonClick.aiAutofill",environment:t,canUndo:!Boolean(l),undoCheckpoint:!0,perform:e=>{for(const{store:t,temporaryStore:p,completion:f}of i){const i=l?p:t;let g;switch(n.type){case"text":g=v.of({text:f.trim(),stripText:!1,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:d});break;case"multi_select":case"select":const t=i.getParentCollectionStore(),a=f.trim().split(",");if(t){const i=(0,r.RR)({newTokenValues:a.length>0&&"select"===n.type?[[a[0]]]:[a],property:o,propertySchema:n,collectionId:t.id});if(u&&i)for(const o of i)A.applyOperation({store:(0,R.Kv)(t,o.pointer),operation:o,transaction:e})}g=(0,s.zq)(a);break;default:(0,m.t1)(n)}w.sO({store:i.getPropertyStore(o),value:g,transaction:e});const y=i.getFormat().ai_property_inference_map??{},h=a[t.id]??"";k.FH({stores:[i],update:{ai_property_inference_map:{...y,[o]:{inference_id:h,created_time:Date.now()}}},transaction:e})}}})}const $=(0,c.defineMessages)({FAILED_TO_AUTOFILL:{defaultMessage:"Something went wrong. Please try again later",id:"propertyCompletionActions.error.unableToAutofill"},INVALID_PROPERTY_FOR_AUTOFILL:{defaultMessage:"Invalid property configuration for AI autofill",id:"propertyCompletionActions.error.invalidPropertyForAutofill"},NO_BLOCKS_TO_AUTOFILL:{defaultMessage:"Nothing to update with AI",id:"propertyCompletionActions.error.noBlocksToAutofill"}}),z=(0,c.defineMessages)({featureUnavailable:{id:"completionActions.featureNotEnabledError",defaultMessage:"This feature is not currently enabled"}});function q(e){let{autofillPropertyResult:t}=e;const o=E.default.formatMessage($[t]);S.rN(),C.deprecatedShowErrorMessage(o)}const G={ai_limit_property_autofill:(0,T.jsx)(c.FormattedMessage,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to add Notion AI.",id:"aiAutofill.outOfAiUpsellDialogMessage"}),ai_autofill_on_page_edit:(0,T.jsx)(c.FormattedMessage,{defaultMessage:"Auto-update requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.autoUpdateOnPageEditUpsellDialogMessage"}),ai_autofill_fill_all_pages:(0,T.jsx)(c.FormattedMessage,{defaultMessage:"Updating all pages requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.fillAllPagesUpsellDialogMessage"}),ai_autofill_bulk_fill:(0,T.jsx)(c.FormattedMessage,{defaultMessage:"Filling more pages at once requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.bulkFillUpsellDialogMessage"})};function J(e){var t;let{environment:o,from:n}=e;null!==(t=O.default.state.currentSpaceStore)&&void 0!==t&&t.canAdmin()||C.deprecatedShowErrorMessage(G[n]),I.y(o,{from:n,for:(0,V.zt)(),addOnFeature:"ai"})}function Y(e){let{errorCode:t,environment:o}=e;return 405===t?S.oV({label:E.default.formatMessage(z.featureUnavailable)}):(402===t&&(S.rN(),J({environment:o,from:"ai_limit_property_autofill"})),H.showCompletionErrorWithCode(t))}async function Q(e){var t;let{environment:o,stores:n,property:s,propertySchema:l,userEventForAnalytics:c,sessionIdForAnalytics:d,collectionContextStore:p,from:v,isBulkAction:h,aiInferenceOverride:x}=e;const C=d||(0,u.ZP)(),k=s,w=n.map((e=>({spaceId:e.getSpaceId(),...e.pointer,propertyId:k,inferenceId:(0,u.ZP)()}))),A=n[0].getParentCollectionId()??(null===(t=n[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),I=new i.Z({name:"propertyCompletionActions.autofillPropertyForBlocks"});if(P.W.setIsWriting({stores:n,propertySchema:l,sessionIdForAnalytics:d}),"uninitialized"!==P.W.state.type&&(0,r.qQ)(l)&&A){S.oV({label:(0,T.jsx)(N,{environment:o,inferenceIds:w.map((e=>e.inferenceId)),aiInference:(0,r.q3)(l)}),durationMs:D.JY});try{var b;if(o.defaultRecordCache.inMemoryRecordCache.addCacheOverride(I),!(0,m.Of)(w))return q({autofillPropertyResult:"NO_BLOCKS_TO_AUTOFILL"});const e=x||(0,r.q3)(l);if(!e)return q({autofillPropertyResult:"INVALID_PROPERTY_FOR_AUTOFILL"});w.forEach((t=>{f.qG2(o,{type:c,inference_id:t.inferenceId,ai_inference_type:e.type,collection_id:A,session_id:C})})),null!==(b=O.default.state.currentSpaceStore)&&void 0!==b&&b.id&&y.publishAiSession(o,{inference_type:"autofill",id:C,spaceId:O.default.state.currentSpaceStore.id,metadata:{blockPropertyPointers:w,aiInference:e,collection_id:A}});const t=await y.getCompletionForProperty(o,{blockPropertyPointers:w,aiInference:e,aiSessionId:C,model:(0,B.PD)()});if("success"!==t.type)return q({autofillPropertyResult:"FAILED_TO_AUTOFILL"});p&&g.rv({block_id:n[0].pointer.id,property:k,property_type:l.type,from:v,environment:o,collectionContextStore:p,isFromBulkActionsToolbar:h});const i=Object.fromEntries(n.map((e=>[e.pointer.id,{store:e,temporaryStore:e.clone(I),completion:""}]))),s=Object.fromEntries(w.map((e=>[e.id,e.inferenceId]))),d=new Set,[u,S]=await Promise.all([Z.deps.markdownLinkifyIt.loader(),Z.deps.tinyMceMicrosoftWordPasteFilter.loader()]);if(a.H1.is(t.data)){for await(const e of t.data){if("error"===e.type)return P.W.setState({...P.W.state,didInterruptStreaming:!0}),Y({errorCode:e.errorCode,environment:o});if(P.W.state.didInterruptStreaming)return;const t=i[e.blockPropertyPointer.id],n=t.completion+e.completion;i[e.blockPropertyPointer.id]={...t,completion:n},d.add(e.blockPropertyPointer.id),K({environment:o,propertyId:k,propertySchema:l,storesWithCompletions:Object.values(i),blockIdToInferenceId:s,useTemporaryStore:!0,markdownLinkifyIt:u,tinyMceMicrosoftWordPasteFilter:S}),P.W.setState({...P.W.state,numBlocksAutofilled:d.size})}P.W.setState({...P.W.state,haveAllBlocksCompletedAutofill:!0})}o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(I),K({environment:o,propertyId:k,propertySchema:l,storesWithCompletions:Object.values(i),blockIdToInferenceId:s,useTemporaryStore:!1,markdownLinkifyIt:u,tinyMceMicrosoftWordPasteFilter:S,doneStreaming:!0})}finally{o.defaultRecordCache.inMemoryRecordCache.hasCacheOverride(I)&&o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(I)}}}function X(e){const{environment:t,inferenceId:o,feedbackType:n,userContent:i,shareWithNotion:r}=e;f.NF$(t,{type:"property_autofill",inference_id:o,feedback_type:n,timestamp:(new Date).toUTCString(),user_comment:i,share_with_notion:r})}async function ee(e){var t,o;let{environment:n,collectionStore:i,propertySchema:s,property:a,sessionIdForAnalytics:c,includedCollectionSchemaUpdateOp:m}=e;if(!(0,r.qQ)(s))return;const g=(0,r.q3)(s);if(!i||!s||!g)return;const y=(null===(t=U.default.state.data)||void 0===t?void 0:t.addOns)??[];if(!(0,p.de)(y))return void J({environment:n,from:"ai_autofill_fill_all_pages"});if(!(await x.r({sourceAction:"fill_all_pages",propertyName:s.name,collectionName:(null===(o=i.getName())||void 0===o?void 0:o.toString())||""})))return;f.qG2(n,{type:"generate_from_fill_all_pages",inference_id:(0,u.ZP)(),ai_inference_type:g.type,collection_id:i.id,session_id:c??(0,u.ZP)()});const v=l.oA([m]);v.push(d.op.update({pointer:i.pointer,path:["format","update_ai_inferences_status"],args:{[a]:{type:"requested",created_time:Date.now()}}})),h.HW({environment:n,collectionStore:i,performTransaction:e=>{for(const t of v)A.applyOperation({store:(0,R.Kv)(i,t.pointer),operation:t,transaction:e})}})}function te(e){const{environment:t,propertySchema:o,collectionStore:n,property:i,draftAiInference:s}=e;let a="";switch(o.type){case"text":a="ai_inference";break;case"select":case"multi_select":a="select_ai_inference";break;default:return}const l=[];if(l.push({pointer:n.pointer,command:"set",path:["schema",i,a],args:s}),s)f._eA(t,{type:"set_ai_inference",ai_inference_type:s.type,collection_id:n.id});else{const e=(0,r.q3)(o);f._eA(t,{type:"remove_ai_inference",ai_inference_type:null==e?void 0:e.type,collection_id:n.id})}h.HW({environment:t,collectionStore:n,performTransaction:e=>{for(const t of l)A.applyOperation({store:(0,R.Kv)(n,t.pointer),operation:t,transaction:e})}})}async function oe(e){var t;let{environment:o,store:n,property:i,propertySchema:r,userEventForAnalytics:s,sessionIdForAnalytics:l}=e;const c=l||(0,u.ZP)(),d=i,p={spaceId:n.getSpaceId(),...n.pointer,propertyId:d,inferenceId:(0,u.ZP)()},m=n.getParentCollectionId()??(null===(t=n.getCollectionViewCollectionStore())||void 0===t?void 0:t.id),g=ne(r,!1);if(!g)return"";f.qG2(o,{type:s,inference_id:p.inferenceId,ai_inference_type:g.type,collection_id:m,session_id:c});const v=(0,u.ZP)();y.publishAiSession(o,{inference_type:"autofill",id:v,metadata:{blockPropertyPointers:[p],aiInference:g,collection_id:m}});const h=await y.getCompletionForProperty(o,{blockPropertyPointers:[p],aiInference:g,aiSessionId:v,model:(0,B.PD)()});if("success"!==h.type)return"";let x="";if(a.H1.is(h.data))for await(const a of h.data)"error"!==a.type&&(x+=a.completion);return x}function ne(e,t){if(!(0,r.qQ)(e))return;const o=(0,r.q3)(e);return!o&&(0,r.cu)(e)?{type:e.type,auto_update_on_edit:t,add_options:!1}:o}},51613:(e,t,o)=>{o.r(t),o.d(t,{AiEligibilityUpdater:()=>io,CompletionPopup:()=>eo});var n=o(67294),i=o(18466),r=o(26263),s=o(1302),a=o(480),l=o(86628),c=o(24405),d=o(42875),u=o(66673),p=o(82883),m=o(62965),f=o(97880),g=o(5366),y=o(96323),v=o(50906),h=o(14871),x=o(39699),C=o(3386),k=o(43250),w=o(99417),S=o(43455),A=o(95083),I=o(77907),b=o(16772),M=o(29798),_=o(84254),P=o(89626),j=o(16091),F=o(92022),L=o(11751),T=o(72897),N=o(32163),B=o(50506),E=o(63296),Z=o(72495),O=o(34859),R=o(85893);function D(e){window.__c={n:"ExitConfirmationDialog"};const{open:t,onCancelExit:o,onConfirmExit:i}=e,r=(0,n.useCallback)((()=>(0,R.jsx)(U,{onConfirmExit:i,onCancelExit:o})),[i,o]);return(0,R.jsx)(B.Z,{open:t,render:r,disableAnimation:!0,onDismiss:o})}function U(e){window.__c={n:"ExitConfirmationDialogContent"};const t=(0,c.yK)((e=>({wrapper:{padding:24,display:"flex",flexDirection:"column",minWidth:280},question:{fontWeight:500,maxWidth:240,textAlign:"center",marginTop:8,marginBottom:8,lineHeight:"1.2em"},icon:{width:32,height:32,alignSelf:"center",paddingTop:8,fill:e.accentColors.purple[400]}})),[]),o={width:"100%",marginTop:8},n=[{key:"confirm",render:e=>(0,R.jsx)(E.Z,{style:o,...e,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.ExitConfirmationDialog.confirmExit",defaultMessage:"Discard"})}),action:e.onConfirmExit},{key:"cancel",render:e=>(0,R.jsx)(E.Z,{style:o,...e,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.ExitConfirmationDialog.cancelExit",defaultMessage:"Cancel"})}),action:e.onCancelExit}];return(0,R.jsx)(T.Z,{capture:!0,preventType:O.Z.All,children:(0,R.jsxs)("div",{style:t.wrapper,children:[(0,L.t)(t.icon),(0,R.jsx)("p",{style:t.question,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.ExitConfirmationDialog.question",defaultMessage:"Do you want to discard the AI response?"})}),(0,R.jsx)(N.Z,{type:N.i.Vertical,initialFocus:0,sections:[{key:"dialog",render:e=>(0,R.jsx)(Z.Z,{topBorder:!1,disableMobileBorders:!0,...e}),items:n}]})]})})}o(57658);var V=o(50780),H=o(72126),W=o(62967),K=o(47307),$=o(64964),z=o(73063),q=o(45010),G=o(80444),J=o(77080),Y=o(30793),Q=o(71184);const X="favorite-actions",ee=(0,g.defineMessages)({favoriteActions:{defaultMessage:"Favorites",id:"ai.favoriteActions.title"},editOrShareFavorite:{defaultMessage:"Edit or share favorite",id:"ai.favoriteActions.editOrShare"}});function te(){const[e,t]=(0,n.useState)(void 0),o=(0,l.VK)((()=>J.default.checkGate("ai_favorites")),[]);return function(e){const t=(0,u.D9)(e);(0,n.useEffect)((()=>{e!==t&&q.Z.MenuScroller&&q.Z.MenuScroller.scrollToTop()}),[e,t])}(Boolean(e)),(0,n.useMemo)((()=>o?e?{type:"active",current:e,set:t,clear:()=>t(void 0)}:{type:"inactive",set:t}:{type:"disabled"}),[e,o])}const oe={maxWidth:400,whiteSpace:"pre-wrap"};function ne(e){const{value:t}=e;return(0,R.jsx)("div",{style:oe,children:(0,R.jsx)("div",{children:t.action.prompt})})}function ie(e,t,o,n,i){const r=i.filterOut.toLocaleLowerCase().trim(),s=(0,Q.JS)(n),a=[];for(const l of s){if(l.action.prompt.toLocaleLowerCase().trim()===r)continue;const n=n=>(0,R.jsxs)("div",{style:{display:"flex"},children:[(0,R.jsx)(z.Z,{style:{visibility:n.focused?"visible":"hidden",width:18,height:18},onClick:()=>{i.favoriteEditingState.set(l),v.VoR(e,{type:"edit",session_id:t.sessionId,gtm_favorite_id:l.gtmFavoriteId})},icon:V.E,ariaLabel:o.formatMessage(ee.editOrShareFavorite)}),!l.executeImmediately&&(0,R.jsx)(y.xj,{type:"updatePrompt",focused:n.focused})]});let s=!1;switch(l.action.type){case"helpMeEdit":"initialPrompt"!==t.stage||"blockSelection"!==t.context.type&&"textSelection"!==t.context.type||(s=!0);break;case"helpMeWrite":"initialPromptForAIBlock"!==t.stage&&"cursor"!==t.context.type||(s=!0);break;default:(0,f.t1)(l.action)}if(s){const e=(0,y.cK)({key:l.id,name:l.name,textToInsert:l.action.prompt,analyticsName:"favoriteAction",gtmFavoriteId:l.gtmFavoriteId,onUpdatePromptState:i.onUpdatePromptState,right:n,renderTooltip:()=>(0,R.jsx)(ne,{value:l}),userProvidedSearchName:`${l.name} ${l.action.prompt}`.slice(0,100),executeImmediately:l.executeImmediately});a.push(e)}}return[(0,W.$J)({key:X,title:ee.favoriteActions,render:e=>(0,R.jsx)(Z.Z,{...e}),actions:a})]}function re(e){const{state:t,environment:o,sessionId:n}=e,{currentUserSettingsStore:i}=G.default.state;i&&(t.current.name?(x.createAndCommit({userAction:"favoriteActions.saveFavoriteEditsAndClearState",environment:o,perform(e){(0,Q.gC)(t.current,i,e)}}),t.clear(),v.VoR(o,{type:"save",session_id:n,gtm_favorite_id:t.current.gtmFavoriteId})):$.oV({label:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Please enter a name for the action.",id:"ai.favoriteActions.nameRequiredMessage"})}))}var se=o(39186),ae=o(38715),le=o(37612),ce=o(48019),de=o(68894),ue=o(78140),pe=o(86825),me=o(64369),fe=o(33929),ge=o(87279);const ye=(0,g.defineMessages)({save:{id:"ai.favorites.save",defaultMessage:"Save changes"},delete:{id:"ai.favorites.delete",defaultMessage:"Delete"},runImmediately:{id:"ai.favorites.runImmediately",defaultMessage:"Run immediately"},actionNameLabel:{id:"ai.favorites.actionNameLabel",defaultMessage:"Action name"},cancelAndGoBack:{id:"ai.favorites.cancelAndGoBack",defaultMessage:"Cancel and go back"}});function ve(e){window.__c={n:"FavoriteEditorMenuPopupContent"};const{state:t,context:o,sessionId:i}=e,r=(0,g.useIntl)(),s=(0,a.O7)(),l=(0,n.useMemo)((()=>new M.Z),[]),c=(0,W.cN)({key:"input",analyticsName:"TODO",displayName:ye.save,validators:[],closeParentMenu:!1,render:()=>(0,R.jsx)(Z.Z,{isInput:!0,style:{marginTop:0},children:(0,R.jsx)(de.ZP,{value:t.current.name,onChange:e=>{t.set({...t.current,name:e.target.value}),l.setState({focus:{section:0,indexLocal:1,indexGlobal:1}})},placeholder:fe.default.formatMessage(ye.actionNameLabel),focusInitial:!0})}),action(e,t){}}),d=[(0,W.$J)({key:"favorite options section",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:[c,(0,W.cN)({key:"runImmediately",analyticsName:"TODO",displayName:ye.runImmediately,validators:[],render:(e,o,n)=>{let{blocks:i,environment:r}=o;const s=Boolean(t.current.executeImmediately);return(0,R.jsx)(pe.Z,{...e,title:fe.default.formatMessage(ye.runImmediately),on:s})},closeParentMenu:!1,action(e,o){t.set({...t.current,executeImmediately:!t.current.executeImmediately})}})]}),(0,W.$J)({actions:[(0,W.cN)({key:"save",analyticsName:"TODO",displayName:ye.save,validators:[],svg:ae.N,closeParentMenu:!1,action(e,o){re({state:t,environment:s,sessionId:i})}})],key:"actions",render:e=>(0,R.jsx)(Z.Z,{...e})}),(0,W.$J)({key:"delete action section",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:[(0,W.cN)({key:"delete",analyticsName:"TODO",displayName:ye.delete,validators:[],svg:le.y,closeParentMenu:!1,action(e,o){const{currentUserSettingsStore:n}=G.default.state;n&&(x.createAndCommit({userAction:"ai.favoriteEditorPopup.delete",environment:s,perform(e){(0,Q.QC)(t.current,n,e)}}),t.clear(),v.VoR(s,{type:"delete",session_id:i,gtm_favorite_id:t.current.gtmFavoriteId}))}})]})],u=(0,n.useCallback)((()=>{}),[]);return(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,R.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"8px 8px 0 8px"},children:[(0,R.jsx)(z.Z,{icon:se.G,onClick:()=>{!function(e){const{state:t,environment:o}=e,{currentUserSettingsStore:n}=G.default.state;n&&(t.current.name||x.createAndCommit({userAction:"favoriteActions.cancelFavoriteEditsAndClearState",environment:o,perform(e){(0,Q.QC)(t.current,n,e),(0,Y.Nv)(t.current.action,n,e)}}),t.clear())}({environment:s,state:t})},ariaLabel:r.formatMessage(ye.cancelAndGoBack)}),(0,R.jsx)(me.Z,{isSecondaryColor:!0,isSmall:!0,style:{fontWeight:700},children:(0,R.jsx)(g.FormattedMessage,{id:"ai.favorites.saveHeader",defaultMessage:"Save AI action"})})]}),(0,R.jsx)(ue.Z,{menuType:ge.og.Popup,width:"100%",maxHeight:"min(40vh, 320px)",minHeight:"100%",children:(0,R.jsx)(ce.Z,{menuListStore:l,sections:d,onAccept:u,initialFocus:0,context:o})})]})}var he=o(57819),xe=o(2585),Ce=o(5257);const ke=(0,g.defineMessages)({undoAriaLabel:{defaultMessage:"Go to previous AI response",id:"id.completions.undoAriaLabel"},redoAriaLabel:{defaultMessage:"Go to next AI response",id:"id.completions.redoAriaLabel"},historyLabel:{defaultMessage:"{currentRevision} of {totalRevisions}",id:"id.completions.historyLabel"}}),we={display:"flex",alignItems:"center",marginLeft:-2,marginRight:-2},Se={width:20,height:20,marginLeft:2,marginRight:2};function Ae(e){window.__c={n:"CompletionHistory"};const{onUndo:t,onRedo:o,historyLabel:n}=e,i=(0,g.useIntl)();return t||o?(0,R.jsxs)("div",{style:we,children:[(0,R.jsx)(z.Z,{icon:xe.f,ariaLabel:i.formatMessage(ke.undoAriaLabel),disabled:!t,onClick:t,style:Se}),(0,R.jsx)(me.Z,{isSmall:!0,isSecondaryColor:!0,style:{fontVariantNumeric:"tabular-nums"},children:n}),(0,R.jsx)(z.Z,{icon:Ce.o,ariaLabel:i.formatMessage(ke.redoAriaLabel),disabled:!o,onClick:o,style:Se})]}):null}const Ie={onUndo:void 0,onRedo:void 0,historyLabel:void 0};function be(e,t){const o=b.default.state;if("completionPopup"!==o.type||"results"!==o.stage)return;const{sessionId:n}=o,i=(0,w.xM)(o);v.BpO(e,{session_id:n,inference_id:i.inferenceId,type:t})}var Me=o(56863),_e=o(11066),Pe=o(1743),je=o(74194);const Fe=(0,g.defineMessages)({promptLabel:{defaultMessage:"Prompt for action",id:"ai.favoritePromptEditor.promptLabel"}});function Le(e,t){e.set({...e.current,action:{...e.current.action,prompt:t}})}function Te(e){window.__c={n:"FavoritePromptEditorContent"};const{state:t,inputRef:o,sessionId:n}=e,i=(0,a.O7)(),r=(0,he.bJ)(),s=(0,g.useIntl)().formatMessage(Fe.promptLabel);return(0,R.jsxs)(Pe.Z,{capture:!0,allowMenuList:!1,allowEsc:!0,children:[(0,R.jsx)(je.Z,{ref:o,format:je.Z.Format.Transparent,placeholder:s,selectAll:!0,value:t.current.action.prompt,textarea:!0,textareaSubmitOnEnter:!1,autosize:!0,style:{minHeight:28,paddingTop:4,paddingBottom:4},onChange:e=>Le(t,e.target.value),onKeyDown:e=>{"Enter"===e.key&&Le(t,`${t.current.action.prompt}\n`)},focusInitial:!1}),(0,R.jsx)("div",{style:r.inputActions,children:(0,R.jsx)(_e.Z,{style:r.purpleButton,onClick:()=>re({state:t,environment:i,sessionId:n}),children:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Done",id:"ai.favoritePromptEditor.done"})})})]})}var Ne=o(61519),Be=o(19124),Ee=o(98180);function Ze(e){window.__c={n:"PromptOrActionInput"};const{query:t,setQuery:o,onDismiss:i,onSubmit:r,inputRef:s,submitOnEnter:a,inputPlaceholder:l,children:c}=e,[d,u]=(0,n.useState)(void 0);return(0,R.jsxs)(Pe.Z,{capture:!0,allowMenuList:!1,allowEsc:!0,children:[(0,R.jsx)(je.Z,{ref:s,format:je.Z.Format.Transparent,placeholder:l,selectAll:!0,value:t,textarea:!0,textareaSubmitOnEnter:!0,autosize:!0,style:{minHeight:28,paddingTop:4,paddingBottom:4},onSubmit:e=>{t&&a&&(e.stopPropagation(),null==r||r())},onChange:e=>{o(e.target.value)},onKeyUp:e=>{"Backspace"===e.key&&(""===d&&i(),u(void 0))},onKeyDown:e=>{"Backspace"===e.key&&void 0===d&&u(t)},focusInitial:!0}),c]})}var Oe=o(83065),Re=o(58261),De=o(26388);function Ue(e){window.__c={n:"SubmitAIPromptButton"};const{onSubmit:t,canSend:o}=e,n=(0,he.bJ)(),i=(0,a.O7)(),r=(0,l.VK)((()=>i.device.isPhone),[i]);return(0,R.jsx)(De.Z,{renderTooltip:()=>(0,R.jsxs)("div",{children:[(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Send to AI",id:"completions.CompletionMenuActionBar.sendTooltip"}),(0,R.jsx)(Re.Z,{style:n.keyboardShortcutInverted,name:"enter"})]}),placement:De.Z.Placement.Bottom,render:e=>(0,R.jsx)(z.Z,{icon:Oe._,onClick:t,isPurple:o,disabled:!o,iconStyle:{height:r?24:20,width:r?24:20},style:{pointerEvents:"auto",height:r?24:20,width:r?24:20},...e})})}const Ve=(0,g.defineMessages)({followUpInputPlaceholder:{id:"AlternativeCommandPalette.followUp.inputPlaceholder",defaultMessage:"Tell AI what to do next…"}}),He={padding:"8px 10px 8px 14px"};function We(e){window.__c={n:"CompletionFinishedContent"};const t=(0,he.bJ)(),o=(0,g.useIntl)(),n=0===e.query.trim().length,i=(0,l.VK)((()=>{if(!(0,Be.Gw)())return!1;const e=Ee.Z.getActiveAssistantRuntimeState();return Boolean(e&&e.previewingStep)}),[]);return(0,R.jsx)(Ze,{...e,inputPlaceholder:o.formatMessage(Ve.followUpInputPlaceholder),...i&&{onSubmit:void 0},children:(0,R.jsxs)("div",{style:t.inputActions,children:[(0,R.jsx)(Ue,{onSubmit:e.onSubmit,canSend:!n&&!i}),(e.onUndo||e.onRedo)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Ne.Z,{vertical:!0,size:1,style:He}),(0,R.jsx)(Ae,{...e})]})]})})}var Ke=o(64921),$e=o(91839);function ze(e){window.__c={n:"CompletionInProgressContent"};const{onStop:t,onRetry:o}=e,n=(0,he.bJ)(),i=(0,a.O7)().device,r=i.isMobileNative&&i.isIOS;return(0,R.jsxs)(C.Z,{capture:!0,onEnter:()=>{t()},onEsc:()=>{t()},onKeypress:e=>{e.metaKey||"r"!==e.key||o()},children:[(0,R.jsxs)("div",{style:n.writingLabel,children:[(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.writing",defaultMessage:"AI is writing"}),(0,R.jsx)($e.Z,{style:n.loadingDots})]}),!r&&(0,R.jsxs)(Ke.Z,{style:n.lightweightButton,onClick:o,children:[(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.tryAgain.label",defaultMessage:"Try again"}),(0,R.jsx)("span",{style:n.keyboardShortcut,children:(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.startOver.shortcut",defaultMessage:"r"})})]}),(0,R.jsxs)(Ke.Z,{style:n.lightweightButton,onClick:t,children:[r?(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.cancel.label",defaultMessage:"Cancel"}):(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.stop.label",defaultMessage:"Stop"}),(0,R.jsx)("span",{style:n.keyboardShortcut,children:(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.stop.shortcut",defaultMessage:"esc"})})]})]})}var qe=o(15201),Ge=o(53336),Je=o(55217);function Ye(e){window.__c={n:"CompletionPreview"};const{temporaryListStore:t,isLoading:o}=e,i=(0,a.O7)(),r=(0,n.useRef)(null),s=null==r?void 0:r.current,c=null==s?void 0:s.getStore(),d=(0,l.VK)((()=>i.device.isPhone),[i]),u=(0,he.jq)({resetWhenScrolledToBottom:!0,areWeLoading:o,scrollerStore:c});(0,n.useEffect)((()=>{s&&(u?Qe.cancel():Qe(s))}),[s,t,u]);const p={scroller:{maxHeight:d?"min(15vh, 200px)":"min(40vh, 320px)",width:"100%"}};return(0,R.jsx)(n.Fragment,{children:(0,R.jsx)(Ge.Z,{type:Ge.Z.OverflowType.Y,style:p.scroller,ref:r,children:(0,R.jsx)(qe.O,{displayName:"CompletionPopupContent",disabled:!0,children:(0,R.jsx)(Je.Z,{store:t,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,disableDrag:!0})})})})}const Qe=H.Ds((e=>{e.scrollToBottom({animate:!0})}),60);var Xe=o(63594),et=o(54497),tt=o(42402);function ot(){window.__c={n:"AiWarningNotice"};const e=(0,n.useCallback)((()=>{window.open("/help/guides/using-notion-ai#what-are-the-current-limitations-of-notion-ai")}),[]),t=(0,c.yK)((e=>({icon:{width:12,height:12,fill:e.lightIconColor,marginLeft:2},link:{color:e.lightTextColor,fontWeight:500}})),[]);return(0,R.jsxs)(R.Fragment,{children:[(0,et.t)(t.icon),(0,R.jsx)(me.Z,{isSecondaryColor:!0,isSmall:!0,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.AiWarning.warning",defaultMessage:"AI responses can be inaccurate or misleading."})}),(0,R.jsx)(me.Z,{isSmall:!0,children:(0,R.jsx)(tt.Z,{onClick:e,style:t.link,disableHover:!0,disableUnderline:!0,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.AiWarning.learnMore",defaultMessage:"Learn more"})})})]})}var nt=o(935),it=o(81570),rt=o(1865),st=o(78291),at=o(80671),lt=o(88893),ct=o(35057);function dt(){window.__c={n:"UpsellNotice"};const e=(0,a.O7)(),t=(0,l.VK)((()=>e.device.isMobile),[e]),o=(0,l.VK)((()=>{const e=st.default.state.data;return lt.GJ(e)}),[]),i=(0,n.useCallback)((()=>{t?at.k2():rt.y(e,{from:"ai_upsell_notice",for:(0,ct.zt)(),addOnFeature:"ai"})}),[e,t]),r=(0,c.yK)((e=>({upsellIcon:{width:14,height:14,fill:e.lightIconColor},upsellLink:{color:e.blueColor,fontWeight:500}})),[]);return(0,R.jsxs)(R.Fragment,{children:[(0,it.T)(r.upsellIcon),(0,R.jsxs)(me.Z,{isSecondaryColor:!0,isSmall:!0,children:[(0,R.jsx)(g.FormattedMessage,{id:"UpsellNotice.label",defaultMessage:"All free AI responses have been used for this workspace."}),!o&&(0,R.jsxs)(R.Fragment,{children:[" ",(0,R.jsx)(g.FormattedMessage,{id:"UpsellNotice.contactWorkspaceOwner.label",defaultMessage:"Contact your workspace owner to add Notion AI."})]})]}),o&&(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(me.Z,{isSmall:!0,children:(0,R.jsx)(tt.Z,{onClick:i,style:r.upsellLink,disableHover:!0,disableUnderline:!0,children:(0,R.jsx)(g.FormattedMessage,{id:"UpsellNotice.link.label",defaultMessage:"Go unlimited"})})})})]})}function ut(e){window.__c={n:"MainPopupFooter"};const{state:t}=e,o=(0,a.O7)(),n=(0,l.VK)((()=>o.device.isPhone),[o]),i=(0,c.yK)((e=>({wrapper:{background:"dark"===e.mode?e.accentColors.gray[100]:e.accentColors.gray[30],display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 12px",borderTop:`1px solid ${e.lightDividerColor}`,gap:8,color:e.lightTextColor,fontSize:12,minHeight:36},noticeContent:{display:"flex",alignItems:"center",gap:8},actionContent:{display:"flex",alignItems:"center"}})),[]),r=(0,l.VK)((()=>!Xe.Z.state),[]);if(n)return null;let s,d;return r&&(s=(0,R.jsx)(dt,{})),"results"!==t.stage||t.loading||(s=s??(0,R.jsx)(ot,{}),d=(0,R.jsx)(nt.u,{revision:(0,w.xM)(t)})),s?(0,R.jsxs)("div",{style:i.wrapper,children:[(0,R.jsx)("div",{style:i.noticeContent,children:s}),d&&(0,R.jsx)("div",{style:i.actionContent,children:d})]}):null}const pt=(0,g.defineMessages)({writeInputPlaceholder:{defaultMessage:"Ask AI to write anything…",id:"completions.PromptMenu.alternativeUiWriteInputPlaceholder"},editInputPlaceholder:{defaultMessage:"Ask AI to edit or generate…",id:"completions.PromptMenu.alternativeUiEditInputPlaceholder"}});function mt(e){window.__c={n:"MainPopupContent"};const{state:t,onDismiss:o,onCompletionRetry:i,onCompletionStop:r,temporaryListStore:s,favoriteEditingState:d}=e,u=(0,n.useRef)(null);(0,n.useEffect)((()=>{Me.w()}),[]);const p=(0,a.O7)(),m=(0,l.VK)((()=>p.device.isPhone),[p]),f=(0,c.yK)((e=>({icon:{height:18,width:18,paddingLeft:m?0:4,marginLeft:m?-4:void 0,fill:"dark"===e.mode?e.accentColors.purple[600]:e.accentColors.purple[400]},outer:{width:"100%",minHeight:m?44:36,padding:m?"2px 16px 2px 16px":"2px 12px 2px 8px",display:"flex",flexDirection:"column",justifyContent:"center",gap:2,fontSize:m?16:14}})),[m]),g=(0,R.jsx)("div",{style:{height:36,alignItems:"center",display:"flex"},children:(0,L.t)(f.icon)});if("active"===d.type)return(0,R.jsx)("div",{style:f.outer,ref:u,children:(0,R.jsxs)("div",{style:{display:"flex",gap:8,width:"100%"},children:[g,(0,R.jsx)(Te,{state:d,inputRef:e.inputRef,sessionId:t.sessionId})]})});const y=(0,R.jsxs)("div",{style:f.outer,ref:u,children:[s&&(0,R.jsx)(Ye,{temporaryListStore:s,isLoading:"results"===t.stage&&t.loading}),(0,R.jsxs)("div",{style:{display:"flex",gap:8,width:"100%"},children:[g,"initialPrompt"===t.stage||"initialPromptForAIBlock"===t.stage?(0,R.jsx)(ft,{...e,paletteMode:(0,he.rR)(t)}):t.loading?(0,R.jsx)(ze,{onDismiss:o,state:t,onRetry:i,onStop:r}):(0,R.jsx)(We,{...e})]})]});return(0,R.jsxs)(R.Fragment,{children:[y,(0,R.jsx)(ut,{state:t})]})}function ft(e){window.__c={n:"MainPopupInitialPromptContent"};const{query:t,onSubmit:o,paletteMode:n}=e,i=(0,he.bJ)(),r=(0,g.useIntl)(),s="edit"===n?r.formatMessage(pt.editInputPlaceholder):r.formatMessage(pt.writeInputPlaceholder),a=t.trim().length>0;return(0,R.jsx)(Ze,{...e,inputPlaceholder:s,children:(0,R.jsx)("div",{style:i.inputActions,children:(0,R.jsx)(Ue,{onSubmit:o,canSend:a})})})}o(30541);var gt=o(8848),yt=o(7500),vt=o(13148),ht=o(1230),xt=o(25651),Ct=o(91427),kt=o(98519),wt=o(55863),St=o(68204),At=(o(21703),o(36769)),It=o(64275),bt=o(56666),Mt=o(37181);const _t="recent-actions",Pt=(0,g.defineMessages)({recentActions:{defaultMessage:"Recents",id:"commandPalette.recentActions.title"},more:{defaultMessage:"See more",id:"commandPalette.recentActions.more"},removeFromMenu:{defaultMessage:"Remove this action from the menu",id:"commandPalette.recentActions.removeFromMenu"},addToFavorites:{defaultMessage:"Add to favorites",id:"commandPalette.recentActions.addToFavorites"}});function jt(e){window.__c={n:"FavoriteButton"};const{focused:t,recentAction:o,state:n,intl:i,sessionId:r}=e,s=(0,a.O7)();return(0,R.jsx)(z.Z,{style:{visibility:t?"visible":"hidden",width:18,height:18},onClick:()=>{v.VoR(s,{type:"create_from_recent",session_id:r,gtm_favorite_id:void 0}),n.set((0,Q.kg)(o))},icon:Ct.e,ariaLabel:i.formatMessage(Pt.addToFavorites)})}function Ft(){window.__c={n:"MoreIcon"};const e=(0,c.Fg)();return(0,bt.o)({width:12,fill:e.mediumIconColor,marginLeft:2,marginRight:2})}(0,At.exposeDebugEnvironmentValue)("resetRecentAndFavoriteAIActions",(e=>()=>{const{currentUserSettingsStore:t}=G.default.state;if(!t)throw new Error("currentUserSettingsStore not found");x.createAndCommit({userAction:"recentActions.debugging.resetRecentAndFavoriteAIActions",environment:e,perform(e){Mt.d2({userSettingsStore:t,transaction:e,data:{recent_ai_actions:[],favorite_ai_actions:[]}})}})}));const Lt="This string should never show up in analytics",Tt=(0,g.defineMessages)({clickToEditAndRetry:{id:"completions.CompletionMenuActionBar.tryAgain.clickToEditAndRetry",defaultMessage:"Click to edit prompt and retry"},clickToRetry:{id:"completions.CompletionMenuActionBar.tryAgain.clickToRetry",defaultMessage:"Click to retry"},tryAgain:{id:"completions.CompletionMenuActionBar.tryAgain",defaultMessage:"Try again"},delete:{id:"completions.CompletionMenuActionBar.delete",defaultMessage:"Discard"},close:{id:"completions.CompletionMenuActionBar.close",defaultMessage:"Close"},keep:{id:"completions.CompletionMenuActionBar.done",defaultMessage:"Done"},replace:{id:"completions.CompletionMenuActionBar.replace",defaultMessage:"Replace selection"},insert:{id:"completions.CompletionMenuActionBar.insert",defaultMessage:"Insert below"},addToFavorites:{id:"completions.CompletionMenuActionBar.addToFavorites",defaultMessage:"Add to favorites"}});function Nt(e){const{filter:t,state:o,from:n,favoriteEditingState:i,onUpdatePromptState:r,onImprove:s,context:a,intl:l,environment:c,completionResultInfo:d}=e;let u;switch(o.stage){case"initialPrompt":case"initialPromptForAIBlock":u=function(e){const{state:t,environment:o,intl:n,filter:i,from:r,onUpdatePromptState:s,favoriteEditingState:a,type:l}=e,{currentUserSettingsStore:c}=G.default.state,d=c?function(e,t,o,n,i){const r=i.filterOut.toLocaleLowerCase().trim(),s=(0,Y.pz)(o),a=[];let l=0;for(const u of s){const s="recentAction."+l++,c=r=>(0,R.jsxs)("div",{style:{display:"flex"},children:[(0,R.jsx)(z.Z,{style:{visibility:r.focused?"visible":"hidden",width:18,height:18},onClick:()=>x.createAndCommit({userAction:"ai.recentActions.renderRemoveButton",environment:n,perform(e){(0,Y.lG)(u,o,e)}}),icon:It.D,ariaLabel:t.formatMessage(Pt.removeFromMenu)}),"inactive"===i.favoriteEditingState.type?(0,R.jsx)(jt,{sessionId:e.sessionId,state:i.favoriteEditingState,focused:r.focused,recentAction:u,intl:t}):(0,R.jsx)(y.xj,{type:"updatePrompt",focused:r.focused})]});let d;if(u.prompt.toLocaleLowerCase().trim()!==r){switch(u.type){case"helpMeEdit":"initialPrompt"!==e.stage||"blockSelection"!==e.context.type&&"textSelection"!==e.context.type||(d=(0,y.cK)({key:s,name:u.prompt,analyticsName:"recentAction",right:c,onUpdatePromptState:i.onUpdatePromptState,renderTooltip:W.zz}));break;case"helpMeWrite":"initialPromptForAIBlock"!==e.stage&&"cursor"!==e.context.type||(d=(0,y.cK)({key:s,name:u.prompt,analyticsName:"recentAction",right:c,onUpdatePromptState:i.onUpdatePromptState,renderTooltip:W.zz}));break;default:(0,f.t1)(u)}d&&a.push(d)}}const c=a.slice(0,3),d=a.slice(3);if(d.length){const e=(0,W.$J)({key:"more recent actions",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:d}),t=(0,W.MV)({key:"more recent actions extension",displayName:Pt.more,analyticsName:"Completions - more",validators:[],svg:()=>(0,R.jsx)(Ft,{}),subActions:()=>[e],collapseSubActionsIntoParent:!0,width:400});c.push(t)}return[(0,W.$J)({key:_t,title:Pt.recentActions,render:e=>(0,R.jsx)(Z.Z,{...e}),actions:c})]}(t,n,c,o,{onUpdatePromptState:s,favoriteEditingState:a,filterOut:i}):[],u=[...c&&"disabled"!==a.type?ie(o,t,n,c,{onUpdatePromptState:s,favoriteEditingState:a,filterOut:i}):[]];"initialPromptForAIBlock"===t.stage?u.push((0,y.xI)({store:t.store,from:r})):"aiBlock"!==l&&u.push(...(0,y.LK)({from:r,type:l,onUpdatePromptState:s}));return u.push(...d),u}({state:o,environment:c,intl:l,filter:t,from:n,context:a,favoriteEditingState:i,onUpdatePromptState:r,type:(0,he.VZ)(o)});break;case"results":u=o.loading?[]:function(e){const{environment:t,state:o,defaultAction:n,closeOrDiscard:i,favoriteEditingState:r}=e,s={key:"insert",analyticsName:Lt,displayName:Tt.insert,validators:[],closeParentMenu:!0,svg:ht.H,action(){e.onInsert()}},a={key:"delete",analyticsName:Lt,displayName:Tt.delete,validators:[],closeParentMenu:!0,svg:le.y,action(){e.onCancel()}},l=function(e){const{state:t,onRetry:o}=e;if("results"!==t.stage)return;return{key:"tryAgain",analyticsName:Lt,displayName:Tt.tryAgain,validators:[],closeParentMenu:!0,svg:wt.s,renderTooltip:()=>(0,R.jsx)(Et,{state:t}),action(){o()}}}({...e}),c=[],d=kt.k;"accept"===n?c.push((0,W.cN)({key:"keep",analyticsName:Lt,displayName:Tt.keep,validators:[],closeParentMenu:!0,svg:d,action(){e.onAccept({exitType:"accept"})}})):"replace"===n?c.push((0,W.cN)({key:"replace",analyticsName:Lt,displayName:Tt.replace,validators:[],closeParentMenu:!0,svg:d,action(){e.onReplace()}}),(0,W.cN)(s)):"insert"===n?c.push((0,W.cN)({...s,svg:d})):(0,f.t1)(n);c.push((0,W.cN)({key:"continueWriting",analyticsName:Lt,displayName:w.Dr.continueWriting,validators:[],closeParentMenu:!0,svg:Zt(xt.R),action(){e.onImprove({type:"continueWriting"})}}),(0,W.cN)({key:"makeLonger",analyticsName:Lt,displayName:w.Dr.makeLonger,validators:[],closeParentMenu:!0,svg:Zt(yt.H),action(){e.onImprove({type:"makeLonger"})}}));const u=[(0,W.cN)({key:"addToFavorites",analyticsName:Lt,displayName:Tt.addToFavorites,validators:[()=>Boolean(Ot(o,r))],closeParentMenu:!0,svg:Ct.e,action(){const e=Ot(o,r);if(!e)return;const n=(0,Q.kg)(e.recentAction);e.favoriteEditingState.set(n),v.VoR(t,{type:"create_from_completion",session_id:o.sessionId,gtm_favorite_id:void 0})}}),l?(0,W.cN)(l):void 0,"discard"===i?(0,W.cN)(a):(0,W.cs)({key:"close",analyticsName:Lt,displayName:Tt.close,validators:[],closeParentMenu:!0,svg:vt.U,shortcuts:["esc"],action(){e.onAccept({exitType:"click_outside_window_accept",selectInsertion:!0})}})],p=(0,W.$J)({key:"main",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:c}),m=(0,W.$J)({key:"final",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:u.filter(f.$K)});return[p,m]}({environment:c,state:o,onImprove:s,closeOrDiscard:"cursor"===o.context.type?"close":"discard",favoriteEditingState:i,...d});break;default:(0,f.t1)(o)}let p=(0,St.sG)({sections:u,context:a,query:t});if(1===p.length&&p[0].key===_t){const e=p[0].actions.slice();(0,w.LN)(t,l)||e.unshift((0,y.sH)({customPrompt:t,execute:d.onSubmit})),p=[(0,W.$J)({key:"actions",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:e})]}else(function(e){let t=!1;for(const o of e)if(o.key===X)t=!0;else if(o.key!==_t)return!1;return t})(p)&&p.push((0,W.$J)({key:"literal-actions",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:[(0,y.sH)({customPrompt:t,execute:d.onSubmit})]}));return p}function Bt(e,t){switch(t.type){case"continueWriting":return e.formatMessage(w.Dr.continueWriting);case"makeLonger":return e.formatMessage(w.Dr.makeLonger);case"helpMeEdit":return t.prompt}}function Et(e){window.__c={n:"TryAgainTooltip"};const{state:t}=e,o=(0,c.yK)((e=>({hint:{color:e.mediumInvertedTextColor}})),[]),n=(0,w.xM)(t),i=(0,g.useIntl)();let r,s=Tt.clickToEditAndRetry;if("initial"===n.type)if(_.doesPromptNeedAdditionalUserInput(n))r=(0,w.gY)(n);else{s=Tt.clickToRetry;const e=n.clientPrompt.name;r="string"==typeof e?e:i.formatMessage(e)}else"followup"===n.type?r=Bt(i,n.improvement):(0,f.t1)(n);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{children:r}),(0,R.jsx)("div",{style:o.hint,children:i.formatMessage(s)})]})}function Zt(e){return()=>(0,R.jsx)(y.lA,{svg:e,svgFill:gt.FN.light.purple[400]})}function Ot(e,t){if("disabled"===t.type)return;const o=function(e){if("completionPopup"!==e.type||"results"!==e.stage)return;const t=(0,w.xM)(e);return"initial"===t.type?t:void 0}(e);if(!o)return;const{currentUserSettingsStore:n}=G.default.state;if(!n)return;const i=(0,Y.BG)({clientPrompt:o.clientPrompt,additionalContext:o.additionalContext,promptTitle:o.promptTitle});return i&&!(0,Q.Gl)(n,i)?{currentInitialRevision:o,recentAction:i,favoriteEditingState:t,currentUserSettingsStore:n}:void 0}function Rt(e){window.__c={n:"MenuPopupContent"};const{sections:t,onCloseParentMenu:o,context:i,menuListStore:r}=e,s=(0,n.useCallback)((e=>{e.closeParentMenu&&o()}),[o]),c=(0,a.O7)(),d=(0,l.VK)((()=>c.device.isPhone),[c]);return(0,R.jsx)(ue.Z,{menuType:d?ge.og.ActionSheet:ge.og.Popup,width:"100%",maxHeight:d?"min(17vh, 160px)":"min(40vh, 320px)",maxWidth:"100%",children:(0,R.jsx)(ce.Z,{menuListStore:r,sections:t,onAccept:s,initialFocus:0,context:i})})}var Dt=o(51454),Ut=o(69454),Vt=o(77794),Ht=o(21199),Wt=o(35661);function Kt(e){window.__c={n:"PopupPositioner"};const{scrollerStore:t,openState:o,children:i}=e,[r,s]=(0,n.useState)(Date.now()),a=(0,n.useCallback)((()=>s(Date.now())),[]),d=(0,n.useRef)(null),[u,p]=(0,n.useState)(void 0),[m,f]=(0,n.useState)(void 0),g=(0,l.VK)((()=>{const e=(0,he.$b)(o);if(!e)return;const n=(0,w.wA)(e);if(!n)return;const{origin:i}=e;"results"!==o.stage&&n&&i instanceof Wt.G&&("spacebar"===o.from||i.isEmptyEditableBlock())&&(n.height=0);const r=t.state,s=r.clientRect??new DOMRect,a=r.scrollTop;return function(e){const{openState:t,originRect:o,scrollerRect:n,scrollerScrollTop:i,popupRect:r}=e,s=(null==r?void 0:r.height)??0,a=(null==r?void 0:r.width)??0,l=Math.min(Math.max(o.width,500),730);let c;const d=o.bottom-n.top+i+zt;o.bottom+s+zt+qt>n.bottom&&(c=d-(n.height-s-qt+i));let u;a+Gt+Jt>n.width?u=Gt:o.left+a>n.right?u=n.width-a-Jt:(u=o.left-n.left,"initialPromptForAIBlock"===t.stage&&(u-=a-o.width));return{top:d,left:u,width:l,scrollTopIntoView:c}}({openState:o,originRect:n,scrollerRect:s,scrollerScrollTop:a,popupRect:u})}),[t,u,o]);(0,n.useEffect)((()=>{g&&f(g)}),[g]);const y=g??m;(0,n.useEffect)((()=>{if(Date.now()-r>500)return;const e=null==y?void 0:y.scrollTopIntoView;if(!e)return;const o=Yt(t);o&&$t(e,o)}),[null==y?void 0:y.scrollTopIntoView,t,r]);const v=(0,c.yK)((e=>({wrap:{position:"absolute",left:null==y?void 0:y.left,top:null==y?void 0:y.top,width:null==y?void 0:y.width,zIndex:Dt.lB}})),[y]);(0,n.useEffect)((()=>{const e=new Vt.E;if(!d.current)throw new Error("ref.current is null");return e.observe(d.current),e.rect.addListener((e=>{p(e.state)})),()=>{e.destroy()}}),[]);const h="results"===o.stage&&!o.loading;(0,n.useEffect)((()=>{h&&a()}),[h,a]);const x="results"===o.stage&&o.loading,C=(0,he.jq)({resetWhenScrolledToBottom:!1,areWeLoading:x,scrollerStore:t}),k="results"===o.stage&&"cursor"===o.context.type,[S,A]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{!x||!k&&S||(C?$t.cancel():null!=y&&y.scrollTopIntoView&&(a(),A(!0)))}),[C,S,k,x,y,a]),(0,R.jsx)(Ht.Z,{capture:!0,render:e=>(0,R.jsx)(Pe.Z,{capture:!0,allowMenuList:!0,allowEsc:!0,children:(0,R.jsx)("div",{style:v.wrap,ref:d,...e,children:y&&i})})})}const $t=H.Ds(((e,t)=>{t.scrollByOffset(e,0,{animate:!0}),q.Z.MenuScroller&&q.Z.MenuScroller.scrollToTop()}),60),zt=4,qt=6,Gt=6,Jt=16;function Yt(e){var t,o;return e===(null===(t=q.Z.PageScroller)||void 0===t?void 0:t.stores.store)?q.Z.PageScroller:e===(null===(o=q.Z.PeekViewScroller)||void 0===o?void 0:o.stores.store)?q.Z.PeekViewScroller:void 0}function Qt(e){window.__c={n:"MobilePopupPositioner"};const{children:t,scrollerStore:o,openState:i}=e,[r,s]=(0,n.useState)(Date.now()),c=(0,n.useRef)(null),[d,p]=(0,n.useState)(void 0),m=(0,n.useCallback)((()=>s(Date.now())),[]),{WindowSizeStore:f}=(0,a.O7)();(0,n.useEffect)((()=>{const e=new Vt.E,t=c.current;if(!t)throw new Error("ref.current is null");e.observe(t);let o=t.getBoundingClientRect().top;e.rect.addListener((e=>{o=e.state.top,p(e.state)}));const n=setInterval((()=>{const n=t.getBoundingClientRect().top;n!==o&&(o=n,e.recompute())}),50);return()=>{e.destroy(),clearInterval(n)}}),[]);const g="results"===i.stage&&!i.loading,y=("results"===i.stage||"initialPrompt"===i.stage)&&"cursor"===i.context.type,v=(0,l.VK)((()=>{const e=(0,he.$b)(i);if(!e)return;const t=(0,w.wA)(e);if(!t)return;if(!d)return;const o=t.bottom-d.top;return o>0?o:void 0}),[i,d]);(0,n.useEffect)((()=>{if(Date.now()-r>500)return;if(!v)return;const e=Yt(o);e&&$t(v,e)}),[v,o,r]),(0,n.useEffect)((()=>{g&&y&&m()}),[g,y,m]);const h="results"===i.stage&&i.loading,x=(0,u.D9)(h),[C,k]=(0,n.useState)();(0,n.useEffect)((()=>{x&&!h&&k(Date.now())}),[h,x]),(0,n.useEffect)((()=>{const e=!!C&&Date.now()-C<1e3;(h||e)&&y&&v&&m()}),[y,h,m,v,C]);const S=(0,l.VK)((()=>{const e=Ut.Z.state.phase===Ut.i.hidden||Ut.Z.state.phase===Ut.i.willHide,t=Ut.Z.estimatedNativeWebBottomOverlap()+qt;return e?f.getSafePaddingBottomPx(t):t}),[f]);return(0,R.jsx)("div",{ref:c,style:{position:"absolute",bottom:S,left:Gt,right:Gt,zIndex:Dt.Mo},children:t})}const Xt="notion-alternate-ai-ui";function eo(e){window.__c={n:"CompletionPopup"};const{scrollerStore:t}=e,o=(0,a.O7)(),i=(0,l.VK)((()=>b.default.state),[]);(0,P.w9)(i);const r=(0,n.useMemo)((()=>(0,he.RR)(i)),[i]),s=(0,l.VK)((()=>r&&(0,he.$b)(r)),[r]),c=(0,l.VK)((()=>o.device.isPhone),[o]);return r?t!==(null==s?void 0:s.scrollerStore)?null:c?(0,R.jsx)(Qt,{scrollerStore:t,openState:r,children:(0,R.jsx)(to,{openState:r})}):(0,R.jsx)(Kt,{scrollerStore:t,openState:r,children:(0,R.jsx)(to,{openState:r})}):null}function to(e){window.__c={n:"PopupContent"};const{openState:t}=e,o=(0,a.O7)(),L=(0,g.useIntl)(),T=(0,n.useState)(function(e){switch(e.stage){case"results":return"";case"initialPromptForAIBlock":return e.prompt??e.prefilledValue;case"initialPrompt":return e.prefilledValue;default:return(0,f.t1)(e)}}(t))[0],[N,B]=function(e){const t=(0,g.useIntl)(),[o,i]=(0,n.useState)("");return[(0,l.VK)((()=>{if("initialPromptForAIBlock"!==e.stage||!(0,w.dU)())return o;const n=e.store.getTitleValue();return(0,p.X)({intl:t,textValue:n,getRecordModel:e.store.getRecordModel,userTimeZone:(0,d.r)()})}),[o,t,e]),i]}(t),[E,Z]=(0,n.useState)(!1),[O,U]=(0,n.useState)(!1),[V,W]=(0,n.useState)(""),$=te(),z=(0,n.useRef)(null),q=(0,he.rR)(t),Y=(0,n.useMemo)((()=>({environment:o,blocks:[],publicEditMode:void 0})),[o]);(0,P.lZ)(t);const X=(0,n.useCallback)((e=>{v.ovL(o,{session_id:t.sessionId,type:e.analyticsName,gtm_favorite_id:e.gtmFavoriteId}),B(e.insertText),_.maybeSetPromptForCurrentAiBlock(o,e.insertText),e.executeImmediately&&Z(!0),z.current&&z.current.focusInput()}),[t.sessionId,o,B]),ee="results"===t.stage?(0,w.xM)(t).completion:void 0,oe=(0,u.Z_)(ee,_.COMPLETION_THROTTLE,m.Z),ne="results"===t.stage?t:void 0,ie=(0,I.useDependency)(I.deps.markdownLinkifyIt),re=(0,I.useDependency)(I.deps.tinyMceMicrosoftWordPasteFilter),se=(0,n.useMemo)((()=>{if(!ne||"textSelection"!==ne.context.type&&"blockSelection"!==ne.context.type)return;if(["idle","pending"].includes(ie.status)||["idle","pending"].includes(re.status))return;const{userSearchCache:e}=(0,w.xM)(ne);return oe?i.Z.withListenerIgnored((()=>{const t=new r.Z({name:"CompletionPopup.PopupContent",isTemporaryData:!0}),n=x.createAndCommit({userAction:"CompletionPopup.temporarymarkdownToBlocks",environment:o,canUndo:!1,perform:n=>{const i=h.Mt({environment:o,text:oe,inMemoryRecordCache:t,transaction:n,markdownOptions:(0,S.N9)(e),markdownLinkifyIt:ie.value,tinyMceMicrosoftWordPasteFilter:re.value});if(i)return _.postProcessAICreatedStores(o,i),h.Lh({environment:o,stores:i,inMemoryRecordCache:t,transaction:n})}}).performResult;return t.addCacheFallback(o.defaultRecordCache.inMemoryRecordCache),n})):void 0}),[ne,oe,o,ie,re]),ae=(0,l.VK)((()=>{if(!se||!ne||"completionPopup"!==ne.type||"results"!==ne.stage||"textSelection"!==ne.context.type&&"blockSelection"!==ne.context.type)return;return ne.context.stores.every((e=>{const t=e.getType();return!!t&&("blockSelection"===ne.context.type?Boolean(A.d[t]):"textSelection"===ne.context.type&&Boolean(A.D[t]))}))}),[ne,se]);let le=!0,ce=!1;switch(t.stage){case"initialPrompt":if(t.futureRevisions.length>0)break;case"initialPromptForAIBlock":le=!1;break;case"results":t.loading||"cursor"!==t.context.type||""!==N||(ce=!0);break;default:(0,f.t1)(t)}const de=function(e){const{environment:t,sessionId:o}=e,{value:i}=(0,I.useDependency)(I.deps.markdownLinkifyIt),{value:r}=(0,I.useDependency)(I.deps.tinyMceMicrosoftWordPasteFilter),s=(0,n.useCallback)((e=>{let{exitType:n,selectInsertion:s}=e;const a=b.default.state;"completionPopup"!==a.type||"results"!==a.stage||a.loading||(v.HCf(t,{session_id:o,inference_id:(0,w.xM)(a).inferenceId,exit_type:n}),x.createAndCommit({userAction:"CompletionPopup.handleAccept",environment:t,perform:e=>{_.acceptCursorCompletion({environment:t,transaction:e,selectInsertion:s,exitType:n,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:r})}}))}),[t,o,i,r]),a=(0,n.useCallback)((()=>{const e=b.default.state;"completionPopup"!==e.type||"results"!==e.stage||e.loading||((0,he.Tq)(t),v.HCf(t,{session_id:o,inference_id:(0,w.xM)(e).inferenceId,exit_type:"insert"}),"textSelection"===e.context.type?x.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{_.insertTextSelectionCompletion({environment:t,transaction:e,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:r})}}):"blockSelection"===e.context.type&&x.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{_.insertBlockSelectionCompletion({environment:t,transaction:e,replace:!1,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:r})}}))}),[t,o,i,r]),l=(0,n.useCallback)((()=>{const e=b.default.state;"completionPopup"!==e.type||"results"!==e.stage||e.loading||"textSelection"!==e.context.type&&"blockSelection"!==e.context.type||((0,he.Tq)(t),v.HCf(t,{session_id:o,inference_id:(0,w.xM)(e).inferenceId,exit_type:"replace"}),"textSelection"===e.context.type?x.createAndCommit({userAction:"CompletionPopup.handleReplace",environment:t,perform:e=>{_.replaceTextSelectionCompletion({environment:t,transaction:e,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:r})}}):"blockSelection"===e.context.type&&x.createAndCommit({userAction:"CompletionPopup.handleReplace",environment:t,perform:e=>{_.insertBlockSelectionCompletion({environment:t,transaction:e,replace:!0,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:r})}}))}),[t,o,i,r]);return(0,n.useMemo)((()=>({onAccept:s,onInsert:a,onReplace:l})),[s,a,l])}({environment:o,sessionId:t.sessionId});(0,n.useEffect)((()=>{B(T),z.current&&z.current.focusInput()}),[T,B]);const ue="results"===t.stage&&t.hasErrored,pe=(0,u.D9)(ue),me=ue&&!pe,fe=(0,n.useCallback)((e=>{const{purgeFromHistory:t}=e,n=_.revertCurrentCompletionRevision({environment:o,purgeFromHistory:t});n&&"followup"===n.type&&(B(Bt(L,n.improvement)),z.current&&z.current.focusInput())}),[o,L,B]),ge=(0,n.useCallback)((()=>{"results"===t.stage&&(_.revertCurrentCompletionRevision({environment:o,purgeFromHistory:!1}),z.current&&z.current.focusInput())}),[t,o]),ye=(0,n.useCallback)((()=>{"results"===t.stage&&(_.redoCompletionRevision(o),z.current&&z.current.focusInput())}),[o,t]);(0,n.useEffect)((()=>{if(!me||"results"!==t.stage)return;const{sessionId:e}=t;if((0,w.sr)(t))return void fe({purgeFromHistory:!0});const n=(0,w.Iz)(t);_.doesPromptNeedAdditionalUserInput(n)?(B(V),(0,F.jn)({environment:o})):_.cancelCompletion({environment:o,sessionId:e,inferenceId:n.inferenceId,exitType:"error_modal"})}),[o,me,t,V,fe,B]);const xe=(0,n.useCallback)((()=>{if("results"!==t.stage)return;const{sessionId:e}=t,n=(0,w.xM)(t);if((0,w.sr)(t))return v.XwB(o,{session_id:e,inference_id:n.inferenceId,is_reverting_follow_up_improvement:!0}),void fe({purgeFromHistory:!1});v.XwB(o,{session_id:e,inference_id:n.inferenceId,is_reverting_follow_up_improvement:!1});const i=(0,w.Iz)(t);_.doesPromptNeedAdditionalUserInput(i)?(B((0,w.gY)(i)),(0,F.jn)({environment:o})):_.handleCompletionPopupRetry({environment:o})}),[o,t,fe,B]),Ce=(0,n.useCallback)((()=>{if("results"!==t.stage)return;if(!(0,w.xM)(t).completion)return(0,w.sr)(t)?void fe({purgeFromHistory:!0}):(B(V),void(0,F.jn)({environment:o}));_.stopCompletion(o)}),[t,o,fe,V,B]),we=(0,n.useCallback)((()=>{U(!1),s.default.afterNextFlush((()=>{z.current&&z.current.focusInput()}))}),[]),Se=(0,n.useCallback)((()=>{switch(t.stage){case"initialPromptForAIBlock":v.HCf(o,{session_id:t.sessionId,inference_id:void 0,exit_type:"accept"}),(0,F.fz)();break;case"initialPrompt":B(""),(0,F.sj)();break;case"results":break;default:(0,f.t1)(t)}}),[t,o,B]),Ae=(0,n.useCallback)((e=>{switch((0,he.Tq)(o),U(!1),t.stage){case"initialPrompt":case"initialPromptForAIBlock":v.HCf(o,{session_id:t.sessionId,inference_id:void 0,exit_type:e}),(0,F.fz)();break;case"results":_.cancelCompletion({environment:o,sessionId:t.sessionId,inferenceId:(0,w.xM)(t).inferenceId,exitType:e});break;default:(0,f.t1)(t)}}),[t,o]),Me=(0,n.useCallback)((()=>Ae("cancel")),[Ae]),_e=(0,n.useCallback)((()=>{"active"!==$.type?ce?de.onAccept({exitType:"click_outside_window_accept",selectInsertion:!0}):le?U(!0):Ae("click_outside_window_cancel"):async function(e){const{state:t}=e,{currentUserSettingsStore:o}=G.default.state;if(o){const e=(0,Q.JS)(o).filter((e=>e.id===t.current.id));if(e.length>0&&H.Xy(t.current,e[0]))return void t.clear()}await K.confirmUserAction({message:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Are you sure you want to stop editing your favorite? Unsaved changes will be lost.",id:"ai.favoriteActions.cancelConfirmation"}),acceptLabel:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Discard changes",id:"ai.favoriteActions.cancelConfirmation.discardChanges"}),cancelLabel:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Go back",id:"ai.favoriteActions.cancelConfirmation.goBack"})})&&t.clear()}({state:$})}),[$,ce,de,Ae,le]),Pe=(0,l.VK)((()=>(0,w.dU)()),[]);(0,n.useEffect)((()=>{function e(e){return!!(e instanceof Element&&(e.closest(`.${Xt}`)||e.closest(`.${k.YPt}`)||e.closest(`.${k.p4m}`)||e.closest(`.${k.zov}`)))}function t(t){Pe||!e(t.target)&&e(t.relatedTarget)&&t.relatedTarget instanceof HTMLElement&&t.relatedTarget.focus()}function o(t){e(t.target)||("click"!==t.type&&"contextmenu"!==t.type||_e(),Pe||(t.preventDefault(),t.stopPropagation()))}if(!O)return window.addEventListener("focus",t,!0),window.addEventListener("click",o,!0),window.addEventListener("contextmenu",o,!0),window.addEventListener("mousedown",o,!0),window.addEventListener("mouseup",o,!0),window.addEventListener("mouseover",o,!0),window.addEventListener("mouseout",o,!0),window.addEventListener("mouseenter",o,!0),window.addEventListener("mouseleave",o,!0),window.addEventListener("mousemove",o,!0),()=>{window.removeEventListener("focus",t,!0),window.removeEventListener("click",o,!0),window.removeEventListener("contextmenu",o,!0),window.removeEventListener("mousedown",o,!0),window.removeEventListener("mouseup",o,!0),window.removeEventListener("mouseover",o,!0),window.removeEventListener("mouseout",o,!0),window.removeEventListener("mouseenter",o,!0),window.removeEventListener("mouseleave",o,!0),window.removeEventListener("mousemove",o,!0)}}),[_e,O,Pe]);const je=(0,n.useCallback)((e=>{W(N),B(""),_.improveCompletion(o,e)}),[o,N,B]),Fe=(0,n.useCallback)((()=>{switch(t.stage){case"initialPrompt":(0,F.sj)(),W(N),B(""),(0,y.Hh)({environment:o,inputValue:N,from:t.from,mode:q});break;case"initialPromptForAIBlock":v.HCf(o,{session_id:t.sessionId,inference_id:void 0,exit_type:"accept"}),(0,F.fz)(),W(N),B(""),(0,y.F0)({environment:o,inputValue:N,store:t.store});break;case"results":je({type:"helpMeEdit",prompt:N});break;default:(0,f.t1)(t)}}),[N,q,t,o,je,B]);(0,n.useEffect)((()=>{E&&(Z(!1),Fe())}),[E,Fe]);let Le="insert";"results"===t.stage&&"cursor"===t.context.type?Le="accept":ae&&(Le="replace");const Te=(0,l.VK)((()=>t?Nt({environment:o,intl:L,filter:N,state:t,from:t.from,favoriteEditingState:$,onUpdatePromptState:X,onImprove:je,context:Y,completionResultInfo:{...de,onRetry:xe,onSubmit:Fe,onCancel:Me,defaultAction:Le}}):[]),[$,Y,o,X,Fe,je,N,L,t,de,xe,Me,Le]),Ne=Te.length>0,Be=(0,n.useMemo)((()=>new M.Z),[]);(0,n.useEffect)((()=>{Be.setState({focus:{section:0,indexLocal:0,indexGlobal:0}})}),[N,Be]);const Ee=(0,l.VK)((()=>o.device.isPhone),[o]),Ze=(0,c.yK)((e=>({mainPopup:{borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,overflow:"hidden",isolation:"isolate"},menuPopup:{marginTop:4,marginBottom:4,borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,width:Ee?"100%":320,overflow:"hidden",isolation:"isolate"}})),[Ee]),Oe=(0,n.useRef)(null);let Re;"active"===$.type?Re=(0,R.jsx)("div",{style:Ze.menuPopup,ref:Oe,className:Xt,children:(0,R.jsx)(ve,{sessionId:t.sessionId,state:$,context:Y})}):Ne&&(Re=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{style:Ze.menuPopup,ref:Oe,className:Xt,children:(0,R.jsx)(Rt,{sections:Te,onCloseParentMenu:Se,context:Y,menuListStore:Be})}),(0,R.jsx)(j.gl,{originRef:Oe,openState:t,isInputEmpty:!N})]}));const De=(0,n.useRef)(null),Ue=function(e){const{openState:t,undoRevision:o,redoRevision:i}=e,r=(0,a.O7)(),s=(0,g.useIntl)(),c=(0,l.VK)((()=>J.default.checkGate("ai_multi_level_undo")),[]),d=(0,n.useCallback)((()=>{o(),be(r,"undo")}),[r,o]),u=(0,n.useCallback)((()=>{i(),be(r,"redo")}),[r,i]);if("results"!==t.stage||!c)return Ie;const p=t.revisions.length,m=t.futureRevisions.length,f=p+m,y=p;return 1===f?Ie:{onUndo:p>1?d:void 0,onRedo:m>0?u:void 0,historyLabel:s.formatMessage(ke.historyLabel,{currentRevision:y.toString(),totalRevisions:f.toString()})}}({openState:t,undoRevision:ge,redoRevision:ye});return Pe?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(C.Z,{capture:!0,onEsc:_e}),Re]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(C.Z,{capture:!0,onEsc:_e}),Ee&&Re,(0,R.jsx)(j.RD,{originRef:De,openState:t}),(0,R.jsx)("div",{ref:De,className:Xt,style:Ze.mainPopup,children:(0,R.jsx)(mt,{state:t,onDismiss:_e,onCompletionRetry:xe,onCompletionStop:Ce,query:N,setQuery:B,onSubmit:Fe,submitOnEnter:!Ne&&!O,inputRef:z,temporaryListStore:se,favoriteEditingState:$,...Ue})}),!Ee&&Re,(0,R.jsx)(D,{open:O,onConfirmExit:Me,onCancelExit:we})]})}var oo=o(63143),no=o(56206);function io(e){window.__c={n:"AiEligibilityUpdater"};const t=(0,a.O7)(),o=(0,l.VK)((()=>"completionPopup"===b.default.state.type||no.d.state.open),[]),i=(0,l.VK)((()=>{var e;return null===(e=G.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]);return((e,t,o)=>{const i=(0,n.useRef)(e),r=(0,n.useRef)(null);(0,n.useEffect)((()=>{i.current=e}),[e]),(0,n.useEffect)((()=>{const e=async()=>{r.current&&(clearTimeout(r.current),r.current=null),o&&(await i.current(),r.current=setTimeout(e,t))};return o&&e(),()=>{r.current&&(clearTimeout(r.current),r.current=null)}}),[o,t])})((0,n.useCallback)((async()=>{i&&await _.updateAiEligibility(t,i)}),[t,i]),o?30*oo.C0:30*oo.hM,!1),null}},16859:(e,t,o)=>{o.d(t,{d:()=>j});var n=o(67294),i=o(480),r=o(5366),s=o(73063),a=o(53437),l=o(26388),c=o(935),d=o(24405),u=o(64275),p=o(81570),m=o(83065),f=o(82990),g=o(42922),y=o(64921),v=o(60458),h=o(1743),x=o(74194),C=o(16354),k=o(64369),w=o(42402),S=o(43250),A=o(18514),I=o(85893);function b(e){const{checked:t,onChange:o}=e;return(0,I.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,I.jsx)(v.Z,{checked:t,onClick:o,size:14}),(0,I.jsx)("div",{onClick:o,children:(0,I.jsx)(k.Z,{style:{cursor:"pointer"},isSmall:!0,children:(0,I.jsx)(r.FormattedMessage,{defaultMessage:"Share this AI session with Notion",id:"completions.FeedbackPopup.shareWithNotion"})})})]})}function M(){window.__c={n:"OptInLearnMore"};const e=(0,d.yK)((e=>({container:{display:"flex",flexDirection:"row"},giftIcon:{width:16,height:16,fill:e.lightIconColor},message:{marginLeft:9,color:e.mediumTextColor,fontSize:12}})),[]);return(0,I.jsxs)("div",{style:e.container,children:[(0,p.T)(e.giftIcon),(0,I.jsx)("div",{style:e.message,children:(0,I.jsx)(r.FormattedMessage,{defaultMessage:"You’re sharing data with Notion for AI quality improvement. <aiTerms>Learn more</aiTerms>",id:"completions.OptInLearnMore.description",values:{aiTerms:e=>(0,I.jsx)(w.Z,{external:!0,href:(0,A.UY)("ai.dataSharingTerms"),children:e})}})})]})}function _(e){window.__c={n:"ShareDataPopup"};const{onSubmit:t}=e,o=(0,d.yK)((e=>({container:{width:300,display:"flex",flexDirection:"column",alignItems:"center",padding:19,position:"relative"},closeButtonContainer:{position:"absolute",top:10,right:10},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor},giftIcon:{width:24,height:24,fill:e.lightIconColor},terms:{color:e.mediumTextColor,textAlign:"center",fontSize:13},shareButton:{width:"100%",marginTop:17,paddingTop:7,paddingBottom:7},notNowButton:{color:e.mediumTextColor,fontSize:14,marginTop:15},title:{textAlign:"center",marginTop:9,marginBottom:8,fontWeight:f.Z.fontWeight.semibold}})),[]);return(0,I.jsxs)("div",{style:o.container,children:[(0,I.jsx)("div",{style:o.closeButtonContainer,children:(0,I.jsx)(y.Z,{onClick:()=>{t({optIn:!1})},style:o.closeButton,hoveredStyle:o.closeButtonHover,children:(0,u.D)(o.closeButtonIcon)})}),(0,p.T)(o.giftIcon),(0,I.jsx)("div",{style:o.title,children:(0,I.jsx)(r.FormattedMessage,{defaultMessage:"Always share data to improve Notion AI?",id:"completions.ShareDataPopup.title"})}),(0,I.jsx)("div",{style:o.terms,children:(0,I.jsx)(r.FormattedMessage,{defaultMessage:"Help Notion improve AI quality by automatically sharing data from your usage of AI powered features.{br}By continuing, you agree to <aiTerms>AI Data Sharing Terms</aiTerms>",id:"completions.ShareDataPopup.description",values:{br:(0,I.jsx)("br",{}),aiTerms:e=>(0,I.jsx)(w.Z,{external:!0,href:(0,A.UY)("ai.dataSharingTerms"),children:e})}})}),(0,I.jsx)(g.Z,{style:o.shareButton,onClick:()=>{t({optIn:!0})},children:(0,I.jsx)(r.FormattedMessage,{defaultMessage:"Always share",id:"completions.ShareDataPopup.alwaysShareButton"})}),(0,I.jsx)(C.Z,{style:o.notNowButton,onClick:()=>{t({optIn:!1})},children:(0,I.jsx)(r.FormattedMessage,{defaultMessage:"Not now",id:"completions.ShareDataPopup.notNowButton"})})]})}function P(e){window.__c={n:"FeedbackPopup"};const{state:t,onUpdate:o,onSubmit:a,onCancel:l,userOptIn:c}=e,d=(0,n.useCallback)((()=>{o({...t,shareWithNotion:!t.shareWithNotion})}),[t,o]),u=(0,n.useCallback)((()=>{a(t)}),[a,t]),p=(0,n.useCallback)((e=>{o({...t,userContent:e.target.value})}),[o,t]),f=(0,r.useIntl)(),g=(0,i.O7)(),y=!c;return(0,I.jsx)("div",{style:{padding:14,...g.device.isMobile?{width:"100%"}:{minWidth:400}},className:S.YOJ,children:(0,I.jsxs)(h.Z,{capture:!0,children:[(0,I.jsx)(x.Z,{value:t.userContent,onChange:p,onSubmit:e=>{e.stopPropagation(),u()},onCancel:l,focusInitial:!0,placeholder:f.formatMessage({id:"completions.FeedbackPopup.userCommentPlaceholder",defaultMessage:"How could the output be improved? (optional)"})}),(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:10},children:[y?(0,I.jsx)(b,{checked:t.shareWithNotion,onChange:d}):(0,I.jsx)(M,{}),(0,I.jsx)(s.Z,{icon:m._,onClick:u,ariaLabel:f.formatMessage({id:"completions.FeedbackPopup.submitButtonLabel",defaultMessage:"Submit feedback"}),isBlue:!0,iconStyle:{height:24,width:24},style:{height:20,width:20}})]})]})})}function j(e){window.__c={n:"FeedbackButtonWithPopup"};const{type:t,ariaLabel:o,onClick:d,feedbackState:u,onDismiss:p,onSubmit:m,onUpdate:f,showShareDataPopup:g,onDataShareSubmit:y,userOptIn:v,iconButtonStyles:h}=e,x=(0,i.O7)(),C=t===(null==u?void 0:u.type),k=(0,c.L)(t,C),w=(0,n.useCallback)((()=>d(t)),[d,t]),S=(0,I.jsx)(l.Z,{renderTooltip:()=>(0,I.jsx)("div",{children:(0,I.jsx)(r.FormattedMessage,{defaultMessage:"Share feedback with Notion",id:"completions.CompletionMenuActionBar.feedbackTooltip"})}),placement:l.Z.Placement.Bottom,render:e=>(0,I.jsx)(s.Z,{onClick:w,icon:k,ariaLabel:o,style:{...h},...e})});return(0,I.jsx)(a.ZP,{origin:S,open:(null==u?void 0:u.type)===t,popupType:x.device.isMobile?a.kQ.SlideUp:a.kQ.Popup,onDismiss:p,render:()=>u?g?(0,I.jsx)(_,{onCancel:p,onSubmit:y}):(0,I.jsx)(P,{state:u,onSubmit:m,onUpdate:f,onCancel:p,userOptIn:v}):null})}},935:(e,t,o)=>{o.d(t,{L:()=>k,u:()=>w});var n=o(67294),i=o(480),r=o(86628),s=o(33676),a=o(97022),l=o(39986),c=o(10498),d=o(5366),u=o(50906),p=o(64964),m=o(39699),f=o(37181),g=o(80444),y=o(77080),v=o(35057),h=o(84254),x=o(16859),C=o(85893);function k(e,t){switch(e){case"thumbsup":return t?c.w:l.P;case"thumbsdown":return t?a.E:s.A}}function w(e){window.__c={n:"FeedbackButtons"};const{revision:t}=e,o=(0,d.useIntl)(),s=(0,i.O7)(),[a,l]=(0,n.useState)(void 0),[c,k]=(0,n.useState)(!1),w=(0,n.useRef)(null),S=(0,r.VK)((()=>y.default.checkGate("ai_data_sharing")),[]),A=(0,r.VK)((()=>g.default.state.currentUserSettingsStore),[]),I=(0,r.VK)((()=>{var e;const t=null==A||null===(e=A.getSettings())||void 0===e?void 0:e.seen_ai_data_share_prompt_at,o=!(0,v.mq)();return!Boolean(t)&&o}),[A]),b=(0,r.VK)((()=>{var e;return(null==A||null===(e=A.getSettings())||void 0===e?void 0:e.ai_data_share_opt_in)??false}),[A]),M=(0,n.useCallback)((()=>{p.oV({label:o.formatMessage({id:"completions.CompletionMenuFooter.showFeedbackThanksMessage",defaultMessage:"Thanks for submitting feedback!"})})}),[o]),_=(0,n.useCallback)((e=>{w.current=document.activeElement,l((t=>({userContent:"",shareWithNotion:true,...t,type:e})))}),[]),P=(0,n.useCallback)((e=>{e.shareWithNotion&&I&&S?k(!0):(M(),l(void 0)),h.submitFeedbackForRevision({...e,environment:s,revision:t,userOptIn:b})}),[t,s,b,I,S,M]),j=(0,n.useCallback)((e=>{e&&e.stopPropagation&&e.stopPropagation(),l(void 0),w.current&&w.current instanceof HTMLElement&&w.current.focus()}),[]),F=(0,n.useCallback)((e=>{const{optIn:t}=e;A&&(m.createAndCommit({userAction:"FeedbackButtons.aiDataShareOptIn",environment:s,userId:A.id,perform:e=>{f.d2({userSettingsStore:A,data:{ai_data_share_opt_in:t,seen_ai_data_share_prompt_at:Date.now()},transaction:e})}}),u.bd0(s,{user_opt_in:t}),t?p.oV({label:o.formatMessage({id:"completions.CompletionMenuFooter.dataShareThanks",defaultMessage:"Thank you for your help making Notion better!"})}):M(),k(!1),l(void 0))}),[o,A,s,M]);return t.hasFeedback&&!c?null:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(x.d,{type:"thumbsup",ariaLabel:o.formatMessage({id:"completions.CompletionMenuFooter.thumbsUp",defaultMessage:"Submit positive feedback"}),onClick:_,feedbackState:a,onDismiss:j,onSubmit:P,onUpdate:l,showShareDataPopup:c,onDataShareSubmit:F,userOptIn:b}),(0,C.jsx)(x.d,{type:"thumbsdown",ariaLabel:o.formatMessage({id:"completions.CompletionMenuFooter.thumbsDown",defaultMessage:"Submit negative feedback"}),onClick:_,feedbackState:a,onDismiss:j,onSubmit:P,onUpdate:l,showShareDataPopup:c,onDataShareSubmit:F,userOptIn:b})]})}},95083:(e,t,o)=>{o.d(t,{D:()=>i,d:()=>n});const n={text:!0,bulleted_list:!0,numbered_list:!0,quote:!0,to_do:!0,header:!0,sub_header:!0,sub_sub_header:!0,callout:!0,toggle:!0,table:!0,equation:!0,code:!0},i={...n}},79576:(e,t,o)=>{o.d(t,{W:()=>s});var n=o(49085),i=o(4615);class r extends n.default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:o,stores:n,sessionIdForAnalytics:r}=e,s=n[0].getParentCollectionId()??(null===(t=n[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),a=r||(0,i.ZP)();return this.setState({type:"filling",propertySchema:o,collectionId:s,numBlocksToAutofill:n.length,numBlocksAutofilled:0,sessionId:a,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),a}}const s=new r},43604:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(49085).default.createValue({open:!1})},80671:(e,t,o)=>{o.d(t,{Cl:()=>p,Kj:()=>m,jw:()=>f,k2:()=>d,v5:()=>u});o(21703);var n=o(72126),i=o(4615),r=o(896),s=o(50906),a=o(80444),l=o(21273),c=o(63423);function d(){c.Z.setState({open:!0,stage:"limit_reached",addOnUpgradeId:(0,i.ZP)(),tax:0})}function u(){c.Z.setState({open:!1})}function p(e){const t=c.Z.state;t.open&&c.Z.setState({...t,stage:"confirm_purchase",coupon:e&&!(0,r.$v)(e)?e:void 0})}function m(){c.Z.setState({open:!0,stage:"cancel_plan",addOnUpgradeId:(0,i.ZP)(),tax:0})}function f(e){var t;if(!l.Z.isQnAOnlyEnabled())throw new Error("Not available");const o=function(){var e;const t=null===(e=a.default.state.currentSpaceStore)||void 0===e?void 0:e.getAdminIds();if(!t||0===t.length)throw new Error("No admins found in the current space");return(0,n.UP)(t)}(),i=null===(t=a.default.state.currentSpaceStore)||void 0===t?void 0:t.getName();s.bfr(e,{admin_id:o,space_name:i})}},39186:(e,t,o)=>{o.d(t,{G:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("backward",{viewBox:"0 0 24 24",svg:(0,i.jsx)("polygon",{points:"23,11 4.801,11 11.4,4.4 10,3 1,12 10,21 11.4,19.6 4.801,13 23,13 "})})},2585:(e,t,o)=>{o.d(t,{f:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},13148:(e,t,o)=>{o.d(t,{U:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("close",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},64878:(e,t,o)=>{o.d(t,{h:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("dot",{viewBox:"0 0 5 4",svg:(0,i.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},50780:(e,t,o)=>{o.d(t,{E:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("editPropertyType",{viewBox:"0 0 16 16 ",svg:(0,i.jsx)("path",{d:"M11.5615 4.84473L12.2998 4.11328C12.6689 3.74414 12.6826 3.34082 12.3545 3.00586L12.0879 2.73926C11.7529 2.4043 11.3428 2.43848 10.9736 2.79395L10.2354 3.52539L11.5615 4.84473ZM3.22168 13.1641L10.9053 5.4873L9.59277 4.16797L1.90918 11.8516L1.23926 13.4512C1.16406 13.6562 1.37598 13.875 1.57422 13.7998L3.22168 13.1641ZM3.92578 13.8066H14.1045C14.4736 13.8066 14.7744 13.499 14.7744 13.1367C14.7744 12.7676 14.4736 12.4668 14.1045 12.4668H5.27246L3.92578 13.8066Z"})})},81570:(e,t,o)=>{o.d(t,{T:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("giftOutline",{viewBox:"0 0 32 34",svg:(0,i.jsx)("path",{d:"M7.781 33.219h16.422c2.938 0 4.563-1.547 4.563-4.5v-9.594h.109c1.375-.297 2.14-1.406 2.14-3v-4.11c0-1.906-1.062-3.109-2.968-3.109H24.89c.828-.828 1.312-1.953 1.312-3.25 0-3.031-2.39-5.187-5.422-5.187-2.187 0-4 1.203-4.797 3.297C15.187 1.672 13.39.469 11.187.469c-3.016 0-5.422 2.156-5.422 5.187 0 1.297.484 2.422 1.328 3.25H3.937C2.11 8.906.97 10.11.97 12.016v4.109c0 1.594.75 2.703 2.125 3h.11v9.594c0 2.953 1.624 4.5 4.577 4.5zm6.922-24.313h-2.437c-2.454 0-3.891-1.39-3.891-3.11 0-1.718 1.25-2.718 2.969-2.718 1.86 0 3.36 1.406 3.36 3.719v2.11zm2.563 0v-2.11c0-2.312 1.5-3.718 3.359-3.718 1.719 0 2.969 1 2.969 2.719 0 1.719-1.422 3.11-3.89 3.11h-2.438zm-2.672 7.969H4.578c-.781 0-1.094-.328-1.094-1.11V12.36c0-.78.313-1.093 1.094-1.093h10.016v5.609zm2.781 0v-5.61h10.047c.781 0 1.078.313 1.078 1.094v3.407c0 .78-.297 1.109-1.078 1.109H17.375zm-2.781 14H7.75c-1.297 0-2.031-.734-2.031-2.031v-9.61h8.875v11.641zm2.781 0v-11.64h8.875v9.609c0 1.297-.734 2.031-2.031 2.031h-6.844z"})})},1230:(e,t,o)=>{o.d(t,{H:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("insertDown",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M9.55548 13.0343H14.2085C14.5315 13.0343 14.7951 13.2913 14.7951 13.6142C14.7951 13.9372 14.5315 14.1942 14.2085 14.1942H9.55548C9.23254 14.1942 8.9755 13.9372 8.9755 13.6142C8.9755 13.2913 9.23254 13.0343 9.55548 13.0343ZM1.21167 9.67959C1.21167 9.09961 1.52802 8.74371 2.0421 8.74371C2.55617 8.74371 2.87911 9.11279 2.87911 9.65982V10.7868C2.87911 10.945 2.96479 11.0373 3.12956 11.0373H4.70473V10.365C4.70473 9.818 5.26494 9.60709 5.68675 9.94322L7.56509 11.4525C7.84849 11.6766 7.84849 12.0786 7.56509 12.2961L5.68675 13.812C5.25176 14.1679 4.70473 13.9569 4.70473 13.3836V12.7047H2.93184C1.89051 12.7047 1.21167 12.0984 1.21167 11.057V9.67959ZM9.55548 9.58073H14.2085C14.5315 9.58073 14.7951 9.83777 14.7951 10.1607C14.7951 10.4837 14.5315 10.7407 14.2085 10.7407H9.55548C9.23254 10.7407 8.9755 10.4837 8.9755 10.1607C8.9755 9.83777 9.23254 9.58073 9.55548 9.58073ZM1.78506 6.12721H14.2085C14.5315 6.12721 14.7951 6.38425 14.7951 6.70719C14.7951 7.03014 14.5315 7.28717 14.2085 7.28717H1.78506C1.46211 7.28717 1.20508 7.03014 1.20508 6.70719C1.20508 6.38425 1.46211 6.12721 1.78506 6.12721ZM1.78506 2.68028H14.2085C14.5315 2.68028 14.7951 2.93073 14.7951 3.25367C14.7951 3.5832 14.5315 3.83365 14.2085 3.83365H1.78506C1.46211 3.83365 1.20508 3.5832 1.20508 3.25367C1.20508 2.93073 1.46211 2.68028 1.78506 2.68028Z"})})},38715:(e,t,o)=>{o.d(t,{N:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("save",{viewBox:"0 0 16 16",svg:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("path",{d:"M7.99316 10.8877C8.16406 10.8877 8.31445 10.833 8.47168 10.6758L10.7686 8.46094C10.8848 8.34473 10.9463 8.22168 10.9463 8.05762C10.9463 7.74316 10.6934 7.51074 10.3857 7.51074C10.2285 7.51074 10.0713 7.5791 9.96191 7.70215L8.99805 8.7207L8.56055 9.21973L8.62891 8.20801V1.11914C8.62891 0.78418 8.3418 0.49707 7.99316 0.49707C7.65137 0.49707 7.36426 0.78418 7.36426 1.11914V8.20801L7.43262 9.22656L6.98828 8.7207L6.03125 7.70215C5.92188 7.5791 5.75781 7.51074 5.60059 7.51074C5.29297 7.51074 5.04004 7.74316 5.04004 8.05762C5.04004 8.22168 5.1084 8.34473 5.22461 8.46094L7.52148 10.6758C7.67871 10.833 7.8291 10.8877 7.99316 10.8877ZM4.0625 15.3174H11.9307C13.4072 15.3174 14.1729 14.5586 14.1729 13.1025V6.36914C14.1729 4.91309 13.4072 4.1543 11.9307 4.1543H10.0781V5.49414H11.8486C12.4775 5.49414 12.833 5.82227 12.833 6.48535V12.9863C12.833 13.6494 12.4775 13.9775 11.8486 13.9775H4.14453C3.50879 13.9775 3.16016 13.6494 3.16016 12.9863V6.48535C3.16016 5.82227 3.50879 5.49414 4.14453 5.49414H5.92871V4.1543H4.0625C2.58594 4.1543 1.82031 4.91309 1.82031 6.36914V13.1025C1.82031 14.5586 2.58594 15.3174 4.0625 15.3174Z"})})})},83065:(e,t,o)=>{o.d(t,{_:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("sendArrow",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M9.79883 18.5894C14.6216 18.5894 18.5894 14.6216 18.5894 9.79883C18.5894 4.96777 14.6216 1 9.79053 1C4.95947 1 1 4.96777 1 9.79883C1 14.6216 4.96777 18.5894 9.79883 18.5894ZM9.79883 14.3062C9.20947 14.3062 8.76953 13.9077 8.76953 13.3433V9.69922L8.86914 8.00586L8.25488 8.84424L7.3916 9.81543C7.23389 10.0063 6.98486 10.1143 6.72754 10.1143C6.21289 10.1143 5.84766 9.75732 5.84766 9.25928C5.84766 8.99365 5.92236 8.79443 6.12158 8.58691L8.96045 5.61523C9.19287 5.35791 9.4585 5.2417 9.79883 5.2417C10.1309 5.2417 10.4048 5.36621 10.6372 5.61523L13.4761 8.58691C13.667 8.79443 13.75 8.99365 13.75 9.25928C13.75 9.75732 13.3848 10.1143 12.8618 10.1143C12.6128 10.1143 12.3638 10.0063 12.2061 9.81543L11.3428 8.86914L10.7202 7.99756L10.8281 9.69922V13.3433C10.8281 13.9077 10.3799 14.3062 9.79883 14.3062Z"})})},91427:(e,t,o)=>{o.d(t,{e:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("star",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.2627 14.7637C3.58398 15.0098 3.98047 14.9277 4.44531 14.5928L8 11.9814L11.5547 14.5928C12.0195 14.9277 12.4229 15.0098 12.7441 14.7637C13.0586 14.5244 13.127 14.1279 12.9424 13.5879L11.541 9.41113L15.1299 6.83398C15.5879 6.50586 15.7861 6.14355 15.6562 5.76074C15.5264 5.38477 15.1641 5.2002 14.5967 5.20703L10.1943 5.23438L8.85449 1.03711C8.68359 0.490234 8.40332 0.196289 8 0.196289C7.60352 0.196289 7.32324 0.490234 7.14551 1.03711L5.80566 5.23438L1.40332 5.20703C0.835938 5.2002 0.480469 5.38477 0.350586 5.76074C0.220703 6.14355 0.412109 6.50586 0.876953 6.83398L4.46582 9.41113L3.05762 13.5879C2.87305 14.1279 2.94141 14.5244 3.2627 14.7637ZM4.45898 13.1162C4.45215 13.1025 4.45215 13.0957 4.45898 13.0615L5.75781 9.39062C5.87402 9.05566 5.83301 8.84375 5.52539 8.63867L2.3125 6.4375C2.28516 6.42383 2.27148 6.41016 2.27832 6.38965C2.29199 6.37598 2.30566 6.36914 2.33984 6.36914L6.22949 6.45801C6.58496 6.47168 6.7627 6.35547 6.86523 6.01367L7.96582 2.28125C7.97266 2.24023 7.98633 2.2334 8 2.2334C8.02051 2.2334 8.02734 2.24023 8.04102 2.28125L9.13477 6.01367C9.2373 6.35547 9.42188 6.47168 9.77051 6.45801L13.6602 6.36914C13.7012 6.36914 13.7148 6.37598 13.7217 6.38965C13.7285 6.41016 13.7217 6.41699 13.6875 6.4375L10.4814 8.63867C10.167 8.85059 10.126 9.05566 10.2422 9.39062L11.541 13.0615C11.5547 13.0957 11.5547 13.1025 11.541 13.1162C11.5273 13.1367 11.5137 13.123 11.4863 13.1094L8.40332 10.7305C8.12305 10.5117 7.87695 10.5117 7.60352 10.7305L4.52051 13.1094C4.49316 13.123 4.47266 13.1367 4.45898 13.1162Z"})})},54434:(e,t,o)=>{o.d(t,{F:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("upLeftArrow",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.8457 10.5869C2.8457 11.0312 3.19434 11.373 3.59766 11.373C4.00098 11.373 4.3291 11.0176 4.3291 10.6074V8.05762L4.21973 5.22754L5.32031 6.47168L11.8418 12.9932C11.999 13.1504 12.1904 13.2256 12.3818 13.2256C12.7852 13.2256 13.1543 12.8564 13.1543 12.46C13.1543 12.2686 13.0654 12.0771 12.9082 11.9199L6.40039 5.39844L5.15625 4.30469L8.10254 4.40039H10.5361C10.9463 4.40039 11.2881 4.07227 11.2881 3.67578C11.2881 3.27246 10.9736 2.93066 10.5156 2.93066H3.64551C3.16016 2.93066 2.85254 3.25195 2.85254 3.72363L2.8457 10.5869Z"})})}}]);