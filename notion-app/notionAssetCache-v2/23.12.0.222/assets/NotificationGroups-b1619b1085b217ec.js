"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6329],{28260:(t,e,o)=>{o.r(e),o.d(e,{default:()=>M});o(57658);var i=o(67294),n=o(86628),r=o(24405),a=o(21202),s=o(63143),d=o(77907),l=o(90106),c=o(480),u=o(17693),g=o(91),f=o(5366),p=o(82990),h=o(65598),b=o(64921),y=o(31278),x=o(76798),v=o(22649),m=o(85893);const C=(0,f.defineMessages)({open:{defaultMessage:"Open",id:"toggleButton.open"},close:{defaultMessage:"Close",id:"toggleButton.close"}});function w(t){window.__c={n:"ToggleButton"};const e=(0,c.Fy)(),o=(0,f.useIntl)(),n=(0,r.yK)((()=>{const o=t.color||"inherit",i="chevron"===t.icon?`rotateZ(${t.open?-180:0}deg)`:`rotateZ(${t.open?180:90}deg)`,n="chevron"===t.icon,r=n&&e.isMobile;return{button:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:"100%",...t.style},arrow:{width:r?14:n?12:"0.6875em",height:r?14:n?12:"0.6875em",transition:"transform 200ms ease-out",transform:i,fill:o,opacity:t.fill?1:.5}}}),[e.isMobile,t.color,t.fill,t.icon,t.open,t.style]),a=(0,i.useMemo)((()=>{switch(t.icon){case"chevron":return(0,u.A)(n.arrow);case"triangle":default:return(0,g.L)(n.arrow)}}),[t.icon,n.arrow]);return(0,m.jsxs)(b.Z,{ariaLabel:t.open?o.formatMessage(C.close):o.formatMessage(C.open),"aria-describedby":t["aria-describedby"],"aria-expanded":t.open,"aria-controls":t.open?t["aria-controls"]:void 0,style:n.button,onClick:t.onClick,onMouseDown:t.onMouseDown,disabled:t.disabled,allowShiftClick:!0,hovered:!0,children:[t.tapArea&&(0,m.jsx)("div",{style:{position:"absolute",opacity:0,width:t.tapArea.size,height:t.tapArea.size,top:-(t.tapArea.size-24)/2,left:-(t.tapArea.size-24)/2}}),a]})}const k=function(t){window.__c={n:"NotificationGroupTitle"};const{titledRecordStore:e,getRecordModel:o,notifications:i,isNotificationGroupExpanded:a,toggleNotificationGroup:s}=t,d=(0,n.VK)((()=>e.getModel()),[e]),l=(0,n.VK)((()=>null==d?void 0:d.getRenderIcon({getRecordModel:o})),[d,o]),c=(0,n.VK)((()=>!!(0,h.OY)(e)&&e.isEmptyPage()),[e]),u=(0,n.VK)((()=>i.filter((t=>{let{notification:e}=t;return!e.read})).length),[i]),g=(0,r.yK)((t=>({container:{display:"flex",justifyContent:"space-between",paddingLeft:16,paddingRight:16,gap:10,position:"sticky",top:0,zIndex:10,background:t.modalBackground,boxShadow:"0px 1px 1px rgba(0, 0, 0, 0.03)"},hoveredContainer:{background:t.whiteButtonHoveredBackground},pressedContainer:{background:t.whiteButtonPressedBackground},icon:{...v.e9,verticalAlign:"unset",marginRight:4},nonToggleArea:{display:"flex",flexShrink:2,minWidth:0},pageTitleAndUpdateCount:{display:"flex",flexDirection:"column",gap:4,paddingTop:10,paddingBottom:10,minWidth:0},pageTitle:{display:"flex",alignItems:"center"},recordTitle:{fontSize:14,fontWeight:p.Z.fontWeight.semibold,display:"inline",width:"100%",...p.Z.textOverflowStyle},updateCount:{color:t.mediumTextColor,fontSize:12},statusDotContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:18,width:16,opacity:u>0?1:0},toggleContainer:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0},toggleChevron:{color:t.lightIconColor}})),[u]);return d?(0,m.jsxs)(b.Z,{onClick:s,style:g.container,hoveredStyle:g.hoveredContainer,pressedStyle:g.pressedContainer,mobileFeedback:!1,children:[(0,m.jsx)("div",{style:g.nonToggleArea,children:(0,m.jsxs)("div",{style:g.pageTitleAndUpdateCount,children:[(0,m.jsxs)("div",{style:g.pageTitle,children:[(0,m.jsx)(y.Z,{disabled:!0,icon:l,isEmptyPage:c,size:Boolean(l)?14:18,style:g.icon}),(0,m.jsx)(x.Z,{store:e,style:g.recordTitle,shouldWrap:!0})]}),(0,m.jsx)("div",{style:g.updateCount,children:(0,m.jsx)(f.FormattedMessage,{id:"inbox.groupTitle.unreadNotificationCount",defaultMessage:"{unreadNotifsCount, plural, one {{unreadNotifsCount} unread notification} other {{unreadNotifsCount} unread notifications}}",values:{unreadNotifsCount:u}})})]})}),(0,m.jsx)("div",{style:g.toggleContainer,children:(0,m.jsx)(w,{fill:!0,isSidebar:!0,icon:"chevron",open:a,onClick:s,color:g.toggleChevron.color})})]}):null};function S(t){window.__c={n:"NotificationGroup"};const{notifications:e,rootStore:o,source:s,tab:c}=t,[u,g]=(0,i.useState)(!0),f=(0,i.useCallback)((()=>g(!u)),[u]),p=(0,n.VK)((()=>e.every((t=>{let{notification:e}=t;return e.read}))),[e]),h=(0,n.VK)((()=>{const t=e[0].notification.navigable_block_id;if(t)return l.G.createChildStore(o,{table:a.iU,id:t})}),[o,e]),b=(0,r.yK)((t=>({toggle:{color:t.lightIconColor},notificationGroup:{borderBottom:`1px solid ${t.regularDividerColor}`,paddingTop:16,backgroundColor:p?t.sidebarBackground:""},notificationGroupButton:{cursor:u?"default":"inherit"},flatIndentFooter:{height:10,backgroundColor:t.sidebarBackground}})),[u,p]);if(!h){const{notification:o,activity:i}=e[0],n={source:"notifications_tab",tab:t.tab,notification:o};return(0,m.jsxs)("div",{children:[(0,m.jsx)(d.LazyActivityNotification,{activity:i,rootStore:t.rootStore,tabArgs:n,isLast:!0,useInboxRedesign:!0},i.id),(0,m.jsx)("div",{style:b.flatIndentFooter})]})}const y=e.map(((o,i)=>{let{notification:n,activity:r}=o;const a={source:"notifications_tab",tab:t.tab,notification:n};return(0,m.jsx)(d.LazyActivityNotification,{activity:r,rootStore:t.rootStore,isLast:i===e.length-1,tabArgs:a,useInboxRedesign:!0},r.id)}));return(0,m.jsxs)("div",{children:[(0,m.jsx)(k,{titledRecordStore:h,getRecordModel:o.getRecordModel,activity:e[0].activity,tabArgs:{source:s,tab:c,notification:e[0].notification},notifications:e,isNotificationGroupExpanded:u,toggleNotificationGroup:f}),(0,m.jsx)("div",{children:u&&y}),(0,m.jsx)("div",{style:b.flatIndentFooter})]})}function j(t){window.__c={n:"NotificationGroups"};const{notifications:e,rootStore:o,source:i,tab:r}=t,a=(0,n.VK)((()=>{const t=(0,s.vM)(e,(t=>{let{notification:e}=t;return e.navigable_block_id??e.id}));return t.forEach(((e,o)=>{const i=[],n=new Set;e.forEach((t=>{const{activity:e}=t;"commented"!==e.type&&i.push(t);const o=e.discussion_id;void 0===o||n.has(o)||(i.push(t),n.add(o))})),t.set(o,i)})),Array.from(t)}),[e]).map((t=>{let[e,n]=t;return(0,m.jsx)(S,{notifications:n,rootStore:o,source:i,tab:r},`group-${e}`)}));return(0,m.jsx)(m.Fragment,{children:a})}j.displayName="NotificationGroups";const M=j},22649:(t,e,o)=>{o.d(e,{OD:()=>d,TL:()=>u,_W:()=>c,b9:()=>g,c3:()=>l,e9:()=>a,lS:()=>r,nP:()=>s});var i=o(82990);const n={userSelect:"text",WebkitUserSelect:"text"},r={padding:1,...n},a={display:"inline-flex",marginRight:2,verticalAlign:"text-top"},s={fontWeight:i.Z.fontWeight.semibold};function d(t){return{padding:0,paddingLeft:l(t),paddingRight:16,paddingBottom:3,...n}}function l(t){const{source:e,isMobile:o}=t;return"notifications_tab"===e?52+(o?3:2):52}function c(t){return{height:26,paddingLeft:8,paddingRight:8,color:t.mediumTextColor}}function u(t){return{display:"inline",whiteSpace:"normal",marginRight:t?3:0,wordBreak:"break-word",...s}}function g(t){return{boxShadow:t.plainButtonBoxShadow,height:26,paddingLeft:8,paddingRight:8,fontWeight:500,color:t.regularTextColor}}}}]);