"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7983],{60652:(e,t,n)=>{n.r(t),n.d(t,{default:()=>pe});var a=n(86664),r=n(67294),s=n(480),o=n(86628),i=n(92595),l=n(3791),d=n(5366),c=(n(95477),n(43250)),u=n(38755),p=n(16100),m=n(80444),y=n(88632),g=n(45407),f=n(27242),b=n(78291),x=n(19234),v=n(68626),h=n(90850),S=n(50906),M=n(47307),j=n(92625),C=n(92083),_=n(70060),w=n(13627),I=n(33493),T=n(22616),Z=n(34583),O=n(85893);const F=(0,d.defineMessages)({cancelFailedSubscription:{id:"subscription.upgrade.cancel_failed_subscription",defaultMessage:"Cancelling subscription..."}});function A(e){const{environment:t}=e;f.Z.reset(),S.Xov(t)}async function P(e){const{environment:t,state:n,data:r,stripe:s,elements:o,intl:i,paymentOptionAvailabilityStore:l}=e,d=n.temporaryPaymentMethod;S.PNo(t,{paymentMethod:d});const c=l.state.paymentRequest;if("native_payment_platform"===d&&c)return void c.show();f.Z.update((e=>({...e,payButtonState:"disabled"})));D({environment:t,state:n,intl:i})&&await async function(e){const{environment:t,state:n,data:r,stripe:s,elements:o,intl:i}=e;if(!o||!s)return void v.log({level:"error",from:"SpaceSubscriptionUpgradeModal",type:"StripeError",error:{miscDataString:"Stripe elements not initialized when user tried to upgrade"}});if(_.rR()){let e=n.paymentData;if(!e){const{error:a}=await o.submit();if(a)return S.VQs(t,{error:"could not submit form",error_type:"payment_method"}),void f.Z.setState({...n,error:i.formatMessage({id:"spaceSubscriptionUpgradeModal.payment.genericError",defaultMessage:"Your payment could not be processed. Please try again."})});const r=await s.createPaymentMethod({elements:o});if(r.error)return S.VQs(t,{error:r.error.message,error_type:"payment_method"}),void f.Z.setState({...n,error:p.translateStripeError(t,i,r.error)});if(!r.paymentMethod)return S.VQs(t,{error:"could not create token",error_type:"payment_method"}),void f.Z.setState({...n,error:i.formatMessage({id:"spaceSubscriptionUpgradeModal.payment.genericError",defaultMessage:"Your payment could not be processed. Please try again."})});e={type:"paymentMethodId",value:r.paymentMethod.id},f.Z.setState({...n,paymentData:e})}await B({environment:t,data:r,paymentData:e,stripe:s,onComplete:void 0})}else{if("invoice"===n.temporaryPaymentMethod)return void(await B({environment:t,data:r,stripe:s,paymentData:void 0,onComplete:void 0}));const e=o.getElement(a.CardElement);if(!e)return void v.log({level:"error",from:"SpaceSubscriptionUpgradeModal",type:"StripeError",error:{miscDataString:"Stripe Card Element could not be found"}});const l=await s.createToken(e);if(!l.error&&l.token){const e={type:"stripeToken",value:l.token.id};await B({environment:t,data:r,paymentData:e,stripe:s,onComplete:void 0})}else l.error?(S.VQs(t,{error:l.error.message,error_type:"credit_card"}),f.Z.setState({...n,error:p.translateStripeError(t,i,l.error)})):(S.VQs(t,{error:"could not create token",error_type:"credit_card"}),f.Z.setState({...n,error:i.formatMessage({id:"spaceSubscriptionUpgradeModal.creditCard.genericError",defaultMessage:"Your card could not be processed. Please try again."})}))}}({environment:t,state:n,data:r,stripe:s,elements:o,intl:i});const u=f.Z.state;u.open&&f.Z.setState({...u,payButtonState:"enabled"})}async function B(e){var t,n;const{environment:a,data:r,paymentData:s,stripe:o,onComplete:i}=e,l=m.default.state.currentSpaceStore,c=f.Z.state;l&&T.Z({environment:a,spaceId:l.id});const{status:u,prices:y,selectedCurrencyCode:g}=I.Z.state;if(!c.open||!l||"ready"!==u)return void(i&&i("fail"));const b=c.temporaryPaymentMethod,x=w.GD(c.temporaryBillingInterval),v=w.Md(c,r),_=null===(t=y.find((e=>e.product===c.subscriptionTier&&e.billingInterval===x&&e.currencyCode===g)))||void 0===t?void 0:t.externalId,P=null===(n=y.find((e=>e.product===c.addOnFeature&&e.billingInterval===x&&e.currencyCode===g)))||void 0===n?void 0:n.externalId,B=c.appliedPromo,D=c.temporaryAddress;try{const e=await Z.Mg({environment:a,spaceStore:l,plan:_,paymentData:s,billingEmail:v,coupon:B&&"coupon"===B.source?B.code:void 0,customerName:D.name,businessName:D.businessName,addressLine1:D.addressLine1,addressCity:D.city,addressZip:D.zipCode,addressState:D.state,addressCountry:D.country,vatId:c.vatApplicable?c.temporaryVatCode:void 0,promoCodeId:B&&"promo_code"===B.source?B.code:void 0,from:"subscription_upgrade_modal",addOns:P?[{priceId:P,isCancellation:!1}]:[],useTestClock:c.useTestClock,sessionId:c.sessionId,inAppOffer:"ai"===c.addOnFeature?c.coupon:void 0,isTrial:c.isTrial});S.fZH(a,{paymentMethod:b});const t=e.paymentIntentClientSecret;let n=e.paymentIntentStatus;if(t&&"requires_action"===n){const{paymentIntent:e,error:a}=await o.handleNextAction({clientSecret:t});e?n=e.status:null!=a&&a.payment_intent&&(n=a.payment_intent.status)}if(p.paymentIntentRequiresPaymentMethod({status:n})){const t=async()=>{j.j({message:F.cancelFailedSubscription}),await Z.EO({environment:a,spaceStore:l,planType:l.getPlanType()??"personal",from:"subscription_upgrade_modal-failed_payment"}),j.x()};M.showDialog({message:(0,O.jsx)(d.FormattedMessage,{id:"subscription.upgrade.payment_failed",defaultMessage:"Your payment could not be processed. Please provide an alternate payment method or you will lose access to Notion."}),showCancel:!1,keepFocus:!1,items:[{label:(0,O.jsx)(d.FormattedMessage,{id:"subscription.upgrade.payment_failed.pay_invoice",defaultMessage:"Complete payment"}),onAccept:()=>{window.open(e.invoiceUrl,"_blank")},color:"red"},{label:(0,O.jsx)(d.FormattedMessage,{id:"subscription.upgrade.payment_failed.cancel",defaultMessage:"Cancel upgrade"}),onAccept:()=>t()}]}),null==i||i("fail")}i&&i("success"),B&&(0,h.$r)(a.currentUser.id),A({environment:a}),C.Z.setState({...C.Z.state,currentTab:"billing",defaultSubtab:void 0})}catch{S.cYL(a),i&&i("fail")}}function D(e){const{environment:t,intl:n,state:a}=e;if(!_.vi())return!0;let r;return a.temporaryAddress.country?"address_resolution_failed"!==a.taxCalculationError&&(0,x.A)(a.temporaryAddress)||(r=n.formatMessage({id:"spaceSubscriptionUpgradeModal.billingAddress.invalidError",defaultMessage:"Your address is invalid. Please update your address so we can process your payment."})):r=n.formatMessage({id:"spaceSubscriptionUpgradeModal.billingAddress.missingCountryError",defaultMessage:"Invalid country. Please select the country from the dropdown menu."}),r&&(f.Z.setState({...a,error:r}),S.VQs(t,{error:void 0,error_type:"address"})),void 0===r}var V=n(859),U=n(43131),k=n(97765),E=n(91624),z=n(51133),L=n(29497),W=n(7184),K=n(4550),Y=n(10644),N=n(24405),q=n(97880),Q=n(82990),H=n(38461),X=n(27533),R=n(91493),G=n(59148),$=n(42329),J=n(92041),ee=n(61519),te=n(68785),ne=n(1063);function ae(e){window.__c={n:"SpaceSubscriptionOrderSummary"};const{state:t,data:n,promo:a}=e,{coupon:r,isTrial:i}=t,l=(0,s.O7)(),c=(0,N.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16},header:{alignItems:"center",color:e.regularTextColor,display:"flex",fontSize:16,fontWeight:Q.Z.fontWeight.semibold,gap:8,marginBottom:11,lineHeight:"22px"},couponLink:{fontSize:12}})),[]),{availableCurrencyCodes:u,selectedCurrencyCode:p}=(0,o.VK)((()=>({availableCurrencyCodes:I.Z.availableCurrencyCodes,selectedCurrencyCode:I.Z.selectedCurrencyCode})),[]),m=t.temporaryBillingInterval??"month",y=z.Zr(a),g=z.Lp(t),f=(0,o.VK)((()=>g.map((e=>I.Z.getPrice(l,(t=>t.product===e&&t.billingInterval===m))))),[m,l,g]);if(f.some((e=>!e.isLoaded)))return(0,O.jsx)(te.Z,{});const b=f.map((e=>e.result)).filter(Boolean),x=w.su(n),v=b[0].unitAmount.currencyValue,h=z.cv({prices:b,quantity:x,coupon:r}),S=z.VT({calculatingTax:t.calculatingTax,taxAmount:t.taxAmount,currencyValue:v}),M=z.rF({prices:b,quantity:x,promo:y}),j=z.Et(n,v),C=h.plus(S).minus(M).minus(j),_=C.amount<0?C.withMultipliedAmount(0):C;return(0,O.jsxs)("div",{style:c.container,children:[i?null:(0,O.jsxs)("label",{style:c.header,children:[(0,O.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.header",defaultMessage:"Order summary"}),(0,O.jsx)(H.V,{availableCurrencyCodes:u,from:"upgrade_modal",onSelectCurrency:T.y,selectedCurrencyCode:p})]}),(0,O.jsx)(oe,{prices:b,coupon:t.coupon,data:n,isTrial:i}),w.Fu(t.subscriptionTier)&&(0,O.jsx)(ne.X,{tier:t.subscriptionTier}),(0,O.jsx)(ee.Z,{size:1}),i?null:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(se,{subtotal:h,tax:S,discount:M,accountBalance:j,promo:y,state:t,style:{marginBottom:8}}),(0,O.jsx)(re,{total:_})]})]})}function re(e){const t=z.hr();return(0,O.jsxs)("div",{style:t.itemContainer,children:[(0,O.jsx)("div",{style:t.captionContainer,children:(0,O.jsx)("span",{style:t.totalName,children:(0,O.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeOrderSummary.totalForToday",defaultMessage:"Total for today"})})}),(0,O.jsx)("span",{style:t.totalPrice,children:(0,O.jsx)(X.W,{cost:e.total.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}function se(e){const{subtotal:t,tax:n,discount:a,accountBalance:r,style:s,promo:o}=e,{calculatingTax:i,coupon:l}=e.state;return(0,O.jsxs)("div",{style:s,children:[(0,O.jsx)($.r,{subtotal:t}),(0,O.jsx)(J.u,{tax:n,calculatingTax:i}),o&&!l?(0,O.jsx)(G.T,{discount:a,promo:o}):void 0,(0,O.jsx)(R.G,{accountBalance:r})]})}function oe(e){const{coupon:t,data:n,prices:a,isTrial:r}=e;return(0,O.jsx)(O.Fragment,{children:a.map((e=>(0,O.jsx)(ie,{price:e,data:n,coupon:t,isTrial:r},e.externalId)))})}function ie(e){window.__c={n:"SpaceSubscriptionGrossOrderItem"};const{price:t,data:n,coupon:a,isTrial:r}=e,s=(0,N.yK)((e=>({container:{display:"flex",justifyContent:"space-between"},item:{},title:{fontSize:14,fontWeight:Q.Z.fontWeight.medium,marginBottom:4},subtitle:{color:e.mediumTextColor,fontSize:12},price:{fontSize:14}})),[]),o=w.su(n),i=t.getCostPerBillingInterval({quantity:o,coupon:a}),l=(0,O.jsx)(X.W,{cost:i.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"});return(0,O.jsxs)("div",{style:s.container,children:[(0,O.jsxs)("div",{style:s.item,children:[(0,O.jsx)("div",{style:s.title,children:(0,O.jsx)(le,{price:t})}),(0,O.jsx)("div",{style:s.subtitle,children:(0,O.jsx)(de,{price:t,data:n,coupon:a,isTrial:r})})]}),r?null:(0,O.jsx)("div",{style:s.price,children:l})]})}function le(e){const{price:t}=e;switch(t.product){case"free":case"student":return null;case"ai":return(0,O.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.ai.addOn",defaultMessage:"Notion AI"});case"personal":return(0,O.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.singlePlayerPlusPlan",defaultMessage:"Plus plan with a 1-member limit"});case"plus":return(0,O.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.plusPlan",defaultMessage:"Plus plan"});case"business":return(0,O.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.businessPlan",defaultMessage:"Business plan"});case"enterprise":return(0,O.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.enterprisePlan",defaultMessage:"Enterprise plan"});default:(0,q.t1)(t.product)}}function de(e){const{price:t,data:n,coupon:a,isTrial:r}=e,s=w.su(n),o=t.getMonthlyUnitCost(a),i=(0,O.jsx)(X.W,{cost:o.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"});if(r)return(0,O.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.trial.billedYearly",defaultMessage:"{price} / member / month",values:{br:(0,O.jsx)("br",{}),price:i}});switch(t.billingInterval){case"year":return(0,O.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.billedYearly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed yearly",values:{br:(0,O.jsx)("br",{}),price:i,numberOfMembers:s}});case"month":return(0,O.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.billedMonthly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed monthly",values:{br:(0,O.jsx)("br",{}),price:i,numberOfMembers:s}});default:(0,q.t1)(t.billingInterval)}}function ce(e){window.__c={n:"ModalContentWrapper"};const{state:t,data:n,paymentOptionAvailabilityStore:r,spaceStore:s}=e,{subscriptionTier:i,onlyShowAddOn:l,calculatingTax:d,temporaryBillingInterval:c,taxAmount:u,addOnFeature:m,coupon:y}=t,g=w.XX(n),f=(0,o.VK)((()=>(null==g?void 0:g.currencyCode)??I.Z.selectedCurrencyCode),[g]),{payAmount:b}=w.uN({subscriptionTier:i,currencyCode:f,promo:t.appliedPromo,data:n,onlyShowAddOn:l,calculatingTax:d,billingInterval:c??"year",taxAmount:u,addOnFeature:m,coupon:y}),x=(0,p.useElementsOptions)({type:"subscription",amount:b.amount,currency:b.currencyCode});return(0,O.jsx)(a.Elements,{stripe:(0,p.getStripe)(),options:x,children:(0,O.jsx)(ue,{state:t,data:n,paymentOptionAvailabilityStore:r,spaceStore:s})})}function ue(e){window.__c={n:"ModalContent"};const{state:t,data:n,paymentOptionAvailabilityStore:i,spaceStore:c}=e,p=(0,s.O7)(),m=(0,d.useIntl)(),{isMobile:g}=(0,s.Fy)(),x=(0,a.useStripe)(),v=(0,a.useElements)();!function(e){const{data:t,paymentOptionAvailabilityStore:n}=e,o=(0,s.O7)(),i=(0,a.useStripe)(),l=(0,d.useIntl)(),[c,u]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(!i||c)return;const e=i.paymentRequest({country:"US",currency:"usd",total:{label:l.formatMessage({id:"spaceSubscriptionUpgradeModal.applePay.total.label",defaultMessage:"Notion - You will be charged on a recurring basis"}),amount:0}});e.canMakePayment().then((t=>{t&&(n.update((n=>({...n,supportsApplePay:t.applePay,paymentRequest:e}))),n.addPaymentOption("native_payment_platform"))})),e.on("paymentmethod",(e=>{const n=f.Z.state;if(n.open)if(D({environment:o,state:n,intl:l})){const n={type:"paymentMethodId",value:e.paymentMethod.id};B({environment:o,data:t,paymentData:n,stripe:i,onComplete:e.complete})}else e.complete("fail")})),u(!0)}),[i,c,t,o,l,n])}({data:n,paymentOptionAvailabilityStore:i});const h=(0,o.VK)((()=>y.Z.state.online),[]),[S,M,j,C,_]=(0,o.VK)((()=>{var e;const n=(null===(e=b.default.state.data)||void 0===e?void 0:e.addOns)??[],a=(0,u.CV)(c);return[t.subscriptionTier,t.temporaryBillingInterval,t.addOnFeature,!a&&!(0,l.de)(n),t.coupon]}),[t,c]);if(!t.open)return null;if(!h)return(0,O.jsx)(Y.Z,{});const w=z.Lp(t);return(0,O.jsx)(L.CT,{showDismissButton:!0,main:(0,O.jsx)(L.T1,{width:g?"fill":450,children:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{style:{paddingBottom:24},children:(0,O.jsx)(E.Q,{subscriptionTier:t.subscriptionTier,onlyShowAddOn:t.onlyShowAddOn,addOnFeature:t.addOnFeature,type:t.type,isTrial:t.isTrial})}),t.onlyShowAddOn?null:(0,O.jsx)(K.Z,{subscriptionTier:S,billingInterval:M,addOnFeature:j,canAddAI:C,isTrial:t.isTrial,coupon:_,onChangeBillingInterval:e=>{f.Z.update((t=>({...t,temporaryBillingInterval:e})))},onChangeAddOnFeature:e=>{f.Z.update((t=>({...t,addOnFeature:e})))}}),(0,O.jsx)(k.g,{state:t,paymentOptionAvailabilityStore:i}),(0,O.jsx)(V.iQ,{})]})}),sidebar:(0,O.jsxs)(L.T6,{width:g?"fill":300,children:[(0,O.jsx)(ae,{state:t,data:n,promo:t.appliedPromo}),(0,O.jsx)(U.f,{state:t,paymentOptionAvailabilityStore:i,products:w,onClickUpgrade:()=>P({environment:p,intl:m,state:t,stripe:x,elements:v,data:n,paymentOptionAvailabilityStore:i}),onDismiss:()=>A({environment:p})})]})})}const pe=function(e){window.__c={n:"SpaceSubscriptionUpgradeModal"};const{data:t,spaceStore:n}=e,a=(0,o.VK)((()=>f.Z.state),[]),s=(0,d.useIntl)(),l=(0,r.useMemo)((()=>new g.Z),[]);return(0,r.useEffect)((()=>{const{state:e}=f.Z;if(!e.open)return;const{currentUserStore:n}=m.default.state,a=null!=n&&n.isDefined()?n.getModel():void 0;if(a){const n=a.getDisplayName(s);var r;if(f.Z.setState({...e,temporaryAddress:{...e.temporaryAddress,name:n}}),"subscribed_admin"===t.type||"unsubscribed_admin"===t.type)f.Z.setState({...e,appliedPromo:null===(r=t.customerData)||void 0===r?void 0:r.stripe.promo})}["local","development","staging"].includes("production")&&(0,i.exposeDebugValue)("useTestClock",(()=>{f.Z.setUseTestClock(!0)}))}),[]),(0,O.jsx)(W.c,{ariaLabelledBy:c.BaY,isOpen:a.open,onDismiss:()=>f.Z.setState({open:!1}),children:a.open?(0,O.jsx)(ce,{state:a,data:t,paymentOptionAvailabilityStore:l,spaceStore:n}):null})}},1063:(e,t,n)=>{n.d(t,{X:()=>c});n(67294);var a=n(480),r=n(24405),s=n(5366),o=n(50906),i=n(35057),l=n(42402),d=n(85893);function c(e){window.__c={n:"StartupCouponInlineTextLink"};const t=(0,a.O7)(),n=(0,r.yK)((()=>({couponLink:{fontSize:12}})),[]);return(0,d.jsx)(l.Z,{href:"https://notionup.typeform.com/to/qYXezfBW",external:!0,style:n.couponLink,onClick:()=>{const n=(0,i.zt)();o.sS1(t,{tier:e.tier,currentTier:n})},children:(0,d.jsx)("div",{children:(0,d.jsx)(s.FormattedMessage,{id:"startupCouponInlineLink.text",defaultMessage:"Are you a startup?"})})})}},91493:(e,t,n)=>{n.d(t,{G:()=>i});n(67294);var a=n(5366),r=n(51133),s=n(27533),o=n(85893);function i(e){window.__c={n:"OrderSummaryAccountBalanceItem"};const t=(0,r.hr)(),{accountBalance:n}=e;return 0===n.amount?null:(0,o.jsxs)("div",{style:t.itemContainer,children:[(0,o.jsx)("div",{style:t.captionContainer,children:(0,o.jsx)("span",{style:t.name,children:(0,o.jsx)(a.FormattedMessage,{id:"subscriptionHelpers.lineItems.balance",defaultMessage:"Balance"})})}),(0,o.jsx)("span",{style:t.credit,children:(0,o.jsx)(s.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}},59148:(e,t,n)=>{n.d(t,{T:()=>i});n(67294);var a=n(5366),r=n(51133),s=n(27533),o=n(85893);function i(e){window.__c={n:"OrderSummaryDiscountItem"};const t=(0,r.hr)(),{discount:n,promo:i}=e;return(0,o.jsxs)("div",{style:t.itemContainer,children:[(0,o.jsx)("div",{style:t.captionContainer,children:(0,o.jsx)("span",{style:t.name,children:(0,o.jsx)(a.FormattedMessage,{id:"subscriptionHelpers.lineItems.promo",defaultMessage:"Coupon"})})}),i.duration_in_months?(0,o.jsx)("span",{style:t.caption,children:(0,o.jsx)(a.FormattedMessage,{id:"subscriptionHelpers.lineItems.promo.subtitle",defaultMessage:"Valid for {durationInMonths} months",values:{durationInMonths:i.duration_in_months}})}):void 0,(0,o.jsx)("span",{style:t.credit,children:(0,o.jsx)(s.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}},42329:(e,t,n)=>{n.d(t,{r:()=>i});n(67294);var a=n(5366),r=n(51133),s=n(27533),o=n(85893);function i(e){window.__c={n:"OrderSummarySubtotalItem"};const t=(0,r.hr)(),{subtotal:n}=e;return(0,o.jsxs)("div",{style:t.itemContainer,children:[(0,o.jsx)("div",{style:t.captionContainer,children:(0,o.jsx)("span",{style:t.name,children:(0,o.jsx)(a.FormattedMessage,{id:"subscriptionHelpers.lineItems.subTotal",defaultMessage:"Subtotal"})})}),(0,o.jsx)("span",{style:t.price,children:(0,o.jsx)(s.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}},92041:(e,t,n)=>{n.d(t,{u:()=>l});n(67294);var a=n(5366),r=n(68785),s=n(51133),o=n(27533),i=n(85893);function l(e){window.__c={n:"OrderSummaryTaxItem"};const t=(0,s.hr)(),{tax:n,calculatingTax:l}=e;return(0,i.jsxs)("div",{style:t.itemContainer,children:[(0,i.jsx)("div",{style:t.captionContainer,children:(0,i.jsx)("span",{style:t.name,children:(0,i.jsx)(a.FormattedMessage,{id:"subscriptionHelpers.lineItems.taxIfApplicable.title",defaultMessage:"Tax if applicable"})})}),(0,i.jsx)("span",{style:t.price,children:l?(0,i.jsx)(r.Z,{}):0===n.amount?"—":(0,i.jsx)(o.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}},13586:(e,t,n)=>{n.r(t),n.d(t,{PlansModalContent:()=>p,PlansSidebarButton:()=>T,showPlans:()=>I});var a=n(67294),r=n(480),s=n(86628),o=n(32617),i=n(80444),l=n(64251),d=n(33218),c=n(38524),u=n(85893);function p(){window.__c={n:"PlansModalContent"},(0,d.h)();const{isMobile:e}=(0,r.Fy)(),t=(0,s.VK)((()=>i.default.state.currentSpaceStore),[]),n=(0,a.useMemo)((()=>new l.Z),[]),p=(0,c.f)();return p?(0,u.jsx)("div",{style:{padding:e?16:48},children:(0,u.jsx)(o.ZP,{spaceStore:t,spaceSubscriptionPlansStore:n,data:p})}):null}var m=n(24405),y=n(5517),g=n(72263),f=n(5366),b=n(64921),x=n(14694),v=n(13627);var h=n(69098),S=n(7184),M=n(45800),j=n(13460),C=n(77907);const _=(0,C.lazyComponent)(C.deps.payments,(e=>e.PlansModalContent));function w(e){const{isOpen:t,onClosed:n,onDismiss:a}=e;return(0,u.jsx)(S.c,{isOpen:t,onClosed:n,onDismiss:a,areaConstraint:{height:{scroll:!0},width:{min:1e3}},children:(0,u.jsx)(j.a5,{title:(0,u.jsx)(f.FormattedMessage,{defaultMessage:"Plans",id:"subscription.plans.title"}),children:(0,u.jsx)(_,{renderLoading:M.u})})})}async function I(){return await h.o.showAsyncModalComponent(w)}function T(){window.__c={n:"PlansSidebarButton"};const e=(0,m.yK)((e=>({icon:{fill:e.mediumIconColor,width:16}})),[]),{isMobile:t}=(0,r.Fy)(),n=function(){const e=(0,c.f)();return void 0!==e&&(0,v.YK)(e)}(),a=n?(0,y.q)(e.icon):(0,g._)(e.icon);return(0,u.jsx)(b.Z,{mobileFeedback:t,onClick:I,children:(0,u.jsx)(x.Z,{left:a,disableMobileBorder:!0,children:n?(0,u.jsx)(f.FormattedMessage,{id:"plansSidebarButton.plans.title",defaultMessage:"Plans"}):(0,u.jsx)(f.FormattedMessage,{id:"plansSidebarButton.upgrade.title",defaultMessage:"Upgrade"})})})}},72263:(e,t,n)=>{n.d(t,{_:()=>s});n(67294);var a=n(45238),r=n(85893);const s=(0,a.I)("settingsUpgrade",{viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M9.969 17.938c4.36 0 7.969-3.618 7.969-7.97C17.938 5.61 14.32 2 9.96 2 5.609 2 2 5.61 2 9.969c0 4.351 3.617 7.969 7.969 7.969zm0-1.329a6.609 6.609 0 01-6.633-6.64 6.602 6.602 0 016.625-6.64 6.627 6.627 0 016.648 6.64 6.61 6.61 0 01-6.64 6.64zm0-2.734a.562.562 0 00.586-.586V9.383l-.063-1.656.797.945.922.937a.52.52 0 00.414.172c.32 0 .57-.242.57-.562a.566.566 0 00-.164-.406L10.43 6.219c-.149-.149-.29-.227-.461-.227-.164 0-.297.07-.453.227l-2.61 2.593a.555.555 0 00-.148.407c0 .32.242.562.562.562a.572.572 0 00.414-.172l.93-.937.781-.938-.062 1.649v3.906c0 .344.25.586.586.586z"})})}}]);