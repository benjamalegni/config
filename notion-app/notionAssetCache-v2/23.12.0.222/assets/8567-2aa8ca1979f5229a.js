"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8567],{10912:(e,t,r)=>{r.d(t,{Z:()=>j});r(57658),r(67294);var i=r(83355),o=r(27531),n=r(41432),s=r(80951),a=r(95538),l=r(21202),d=r(97880),c=r(78316),p=r(17311),u=r(35328),g=r(90106),m=r(865),h=r(12981),v=r(81865),y=r(35541),f=r(85893);function x(e){return"number"==typeof e}class S extends i.Z{constructor(){super(...arguments),this.renderContentBlock=e=>{const{store:t,renderAdditionalBlocks:r}=this.props,i=g.G.createChildStore(t,{table:l.iU,id:e}),n=i.getType(),s=r&&void 0!==n?(0,y.u)(i):(0,m.h)(i);if(s)return(0,f.jsx)(o.D,{value:this.restrictedContentStore,children:(0,f.jsx)(s,{store:i,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,hideContent:(0,u.BX)(i),style:{fontSize:12,opacity:.8,pointerEvents:"none"},isQuickFind:!0,numberedListCounterStore:this.createComputedStore((()=>({depth:0,numberedListBlockIdsWithFormat:this.createNumberedListCounterStore(e)})))},e)})},this.coverStore=this.createComputedStore((()=>{const{store:e,renderAdditionalBlocks:t=!1}=this.props,r=(0,c.NU)(e,t);return r.image?r.image:r.blockIds})),this.restrictedContentStore=this.createComputedStore((()=>{const{store:e,renderAdditionalBlocks:t=!1}=this.props,r=(0,c.wK)(e,t);return r.image?void 0:r.blockIds})),this.numberedLists=this.createComputedStore((()=>{const{store:e}=this.props,t=this.coverStore.state,r=[];if(Array.isArray(t)){let i=0;for(;i<t.length;){let o=t[i],s=g.G.createChildStore(e,{table:l.iU,id:o});if(s.getType()===n.Ti.numberedList){const a=[{blockId:o,idx:1}],d=[{id:o,format:void 0,depth:a.length-1,index:a[0].idx}];for(i+=1;i<t.length&&(o=t[i],s=g.G.createChildStore(e,{table:l.iU,id:o}),s.getType()===n.Ti.numberedList);){{const e=s.getParentId();if(s.getParentId()===a[a.length-1].blockId)a.push({blockId:o,idx:1});else{let t=a[a.length-1].idx;for(;a.length>0&&a[a.length-1].blockId!==e;)t=a[a.length-1].idx,a.pop();a.push({blockId:o,idx:t+1})}d.push({id:o,format:void 0,depth:a.length-1,index:a[a.length-1].idx})}i+=1}r.push(d)}else i+=1}}return r}))}didUpdate(e){this.props.coverFormat.type!==e.coverFormat.type&&this.props.onLoadProxiedImage()}renderComponent(){const{coverFormat:e}=this.props;return"page_cover"===e.type?this.renderPageCover():"page_content"===e.type?this.renderPageContent():"property"===e.type?this.renderProperty(e.property):void 0}renderPageCover(){var e;const{store:t}=this.props,r=null===(e=t.getCover())||void 0===e?void 0:e.cover;return r?(0,f.jsxs)("div",{style:this.getImageCoverWrapStyle(),children:[(0,f.jsx)(v.Z,{url:r,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:this.getCoverWidth(),onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),render:(e,t)=>{if(t)return(0,f.jsx)(h.Z,{style:{...this.getImageStyle(),...this.getCoverStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder()]}):this.props.showEmptyGalleryCover?this.renderEmptyGalleryCover():void 0}renderPageContent(){const e=this.coverStore.state,t=this.restrictedContentStore.state;if(e){if(!Array.isArray(e))return(0,f.jsxs)("div",{style:this.getImageCoverWrapStyle(),children:[(0,f.jsx)(v.Z,{url:e.url,onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),isAuthenticated:!0,permissionRecord:e.pointer,width:this.getCoverWidth(),render:(e,t)=>{if(t)return(0,f.jsx)(h.Z,{style:{...this.getImageStyle(),...this.getPageContentImageStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder()]});if(e.length>0)return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{style:this.getContentWrapStyle(),children:[t?e.filter((e=>t.indexOf(e)>=0)).map(this.renderContentBlock):e.map(this.renderContentBlock),this.props.coverContentFadedOverlay&&(0,f.jsx)("div",{style:this.getContentFadedOverlayStyle()})]})});if(this.props.showEmptyGalleryCover)return this.renderEmptyGalleryCover()}else if(this.props.showEmptyGalleryCover)return this.renderEmptyGalleryCover()}renderProperty(e){const{store:t}=this.props,r=(0,s.g)(t.getPropertyValue(e)).find((e=>(0,a.SR)({url:e.url})));return r?(0,f.jsxs)("div",{style:this.getImageCoverWrapStyle(),children:[(0,f.jsx)(v.Z,{onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),url:r.url,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:this.getCoverWidth(),render:(e,t)=>{if(t)return(0,f.jsx)(h.Z,{style:{...this.getImageStyle(),...this.getCoverStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder()]}):this.props.showEmptyGalleryCover?this.renderEmptyGalleryCover():void 0}renderEmptyGalleryCover(){return(0,f.jsx)("div",{style:{height:this.getCoverHeight(),...this.props.emptyGalleryCoverStyle}})}renderImageBorder(){switch(this.props.variant){case"default":return null;case"gallery":return(0,f.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:0,borderBottom:`1px solid ${this.theme.regularDividerColor}`}});default:(0,d.t1)(this.props.variant)}}get imagePosition(){const{coverPosition:e,store:t}=this.props;if(x(e))return e;if(t.getFormatStore().isDefined()){const{page_cover_position:e,card_cover_position:r}=t.getFormat();if(x(r))return r;if(x(e))return e}return.5}createNumberedListCounterStore(e){const t=this.numberedLists.state;for(const r of t)if(r.find((t=>t.id===e)))return r;return[]}getImageStyle(){return this.props.style||{}}getCoverHeight(){const{coverHeight:e,coverSizeFormat:t}=this.props;if(e)return e;switch(t){case"large":return p.Z.card.desktop.large.height;case"small":return p.Z.card.desktop.small.height;case"medium":default:return p.Z.card.desktop.medium.height}}getCoverWidth(){const{coverWidth:e,coverSizeFormat:t}=this.props;return e||(0,c.rD)(t)}getImageCoverWrapStyle(){return{height:this.getCoverHeight(),position:"relative",pointerEvents:"none",overflow:"hidden",...this.props.imageCoverWrapStyle}}getContentWrapVariantStyle(){const{ThemeStore:e}=this.environment,t="dark"===e.state.mode;switch(this.props.variant){case"default":return{};case"gallery":return{background:this.theme.collectionGalleryPreviewCardCover,padding:"8px 8px 0",boxShadow:t?"transparent":`inset 0 -1px 0 0 ${this.theme.regularDividerColor}`,...this.props.contentWrapStyle};default:(0,d.t1)(this.props.variant)}}getContentWrapStyle(){return{height:this.getCoverHeight(),pointerEvents:"none",overflow:"hidden",position:this.props.coverContentFadedOverlay?"relative":"static",...this.getContentWrapVariantStyle(),...this.props.contentWrapStyle}}getContentFadedOverlayStyle(){return{width:"100%",height:40,position:"absolute",bottom:0,left:0,background:`linear-gradient(to bottom, transparent, ${this.theme.accentColors.gray[30]} 100%)`,...this.props.coverContentFadedOverlayStyle}}getCoverVariantStyle(){switch(this.props.variant){case"default":return{border:`1px solid ${this.theme.stroke.regular}`,borderRadius:4};case"gallery":return{borderRadius:0,borderTopLeftRadius:1,borderTopRightRadius:1};default:(0,d.t1)(this.props.variant)}}getCoverStyle(){return{width:"100%",height:this.getCoverHeight(),...this.getCoverVariantStyle(),objectPosition:"center"}}getCoverAspectStyle(){const{coverAspectFormat:e}=this.props;return{objectFit:void 0===e?"cover":e}}getPageContentImageStyle(){return{...this.getCoverStyle(),objectPosition:"center center"}}}S.displayName="CollectionItemCover";const j=S},69255:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});r(57658);var i=r(67294),o=r(480),n=r(86628),s=r(77657),a=r(62208),l=r(60291),d=r(77420),c=r(97880),p=r(5366),u=r(49386),g=r(39699),m=r(61202),h=r(87279),v=r(77907),y=r(30874),f=r(93405),x=r(78140),S=r(32163),j=r(72495),b=r(85893);const C=function(e){window.__c={n:"ExternalObjectInstanceBlockMenu"};const{titleForReloadMenuOption:t,store:r,parentBlockStore:C,onAccept:w,onDismiss:I,extraSecondaryItemKey:k,token:P}=e,_=(0,o.O7)(),{value:Z}=(0,v.useDependency)(v.deps.markdownLinkifyIt),{value:T}=(0,v.useDependency)(v.deps.tinyMceMicrosoftWordPasteFilter),M=(0,i.useCallback)((e=>{const t={blocks:[r],environment:_,publicEditMode:void 0,lazyDependencies:{markdownLinkifyIt:Z,tinyMceMicrosoftWordPasteFilter:T}};return{key:e.key,render:(r,i)=>e.render(r,t,{onAccept:w,onFocus:i.onFocus}),action:r=>{let{event:i}=r;return e.action(t,i)}}}),[w,_,r,Z,T]),O=[];(0,n.VK)((()=>{const e=r.getFormat().bot_id,t=y.Z.getBotsAsRecordMap();if(e&&!0===y.Z.state.loaded){const r=t.getValue({table:d.cZ,id:e});if(r&&r.integration_id&&r.integration_id===s.U9)return!1}return!0}),[r])&&O.push({key:0,render:e=>(0,b.jsx)(j.Z,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"reload external instance object",render:e=>(0,b.jsx)(f.Z,{...e,title:t,svg:l.b}),action:()=>{r&&(r.isExternalObjectInstanceBlockStore()||r.isExternalObjectInstancePageBlockStore())&&m.qK({environment:_,from:"page_more_menu",store:r,spaceId:r.getSpaceId()})}}]});const U=(0,n.VK)((()=>{switch(k){case"preview_to_mention":return[M(u.OH)];case"mention_to_preview":if(!r.isExternalObjectInstanceBlockStore())return[];return[{key:"turn preview into block",render:e=>(0,b.jsx)(f.Z,{...e,title:(0,b.jsx)(p.FormattedMessage,{id:"hoverPreviewOverlay.action.turnPreviewIntoPreview",defaultMessage:"Turn into preview"}),svg:a.z}),action:()=>{C&&P&&g.createAndCommit({userAction:"HoverPreviewOverlay.transformExternalObjectInstanceMentionIntoBlock",environment:_,perform:e=>{m.aV({block:r,parentStore:C,transaction:e,token:P}),e.postSubmitCallbacks.push((e=>{e||null==I||I()}))}})}}];default:(0,c.t1)(k)}}),[k,M,r,C,P,_,I]);return O.push({key:1,render:e=>(0,b.jsx)(j.Z,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[...U,M(u.IK)]}),(0,b.jsx)(x.Z,{menuType:h.og.Popup,children:(0,b.jsx)(S.Z,{type:S.i.Vertical,initialFocus:void 0,onAccept:w,sections:O,style:{paddingTop:3,paddingBottom:3}})})}},98567:(e,t,r)=>{r.d(t,{D5:()=>_e,E5:()=>Me,s6:()=>be});var i=r(67294),o=r(1302),n=r(480),s=r(86628),a=r(24405),l=r(15145),d=r(1800),c=r(7057),p=r(78601),u=r(66673),g=r(69651),m=r(75553),h=r(56666),v=r(40462),y=r(11751),f=r(64572),x=r(76725),S=r(72126),j=r(4615),b=r(515),C=r(21202),w=r(70279),I=r(70203),k=r(18613),P=r(82990),_=r(44876),Z=r(5366),T=r(50906),M=r(14871),O=r(45990),U=r(97444),B=r(32741),R=r(95477),F=r(60682),W=r(24990),K=r(49616),E=r(4708),V=r(73744),z=r(41232),A=r(6398),H=r(88804),L=r(75024),D=r(4023),G=r(15723),q=r(80444),N=r(77080),$=r(96049),Y=r(42653),J=r(72014),Q=r(90106),X=r(48588),ee=r(10912),te=r(18746),re=r(64921),ie=r(31945),oe=r(51077),ne=r(73063),se=r(12981),ae=r(53437),le=r(31278),de=r(76798),ce=r(94096),pe=r(27186),ue=r(19987),ge=r(69255),me=r(25735),he=r(19889),ve=r(36517),ye=r(85893);function fe(e){window.__c={n:"HoverUserPreviewOverlayRenderer"};const t=(0,s.VK)((()=>q.default.state.currentSpaceStore),[]),r=(0,s.VK)((()=>{var t;return null===(t=e.state)||void 0===t?void 0:t.annotation}),[e.state]),i=(0,u.Rm)(r,void 0,600,Object.is),o=(0,s.VK)((()=>{if(t&&i)return Q.U6.createChildStore(t,{id:i[1],table:he.KJ})}),[t,i]),n=(0,s.VK)((()=>!!o&&o.isDefined()),[o]);return o&&n&&t?(0,ye.jsx)(ve.Z,{targetUserStore:o}):null}var xe=r(29551),Se=r(74169);const je=(0,Z.defineMessages)({aiSummary:{defaultMessage:"Summary",id:"hoverPreviewOverlay.aiSummary.label"}});function be(e){window.__c={n:"HoverPreviewOverlay"};const t=(0,s.Kw)($.Z,{debugName:"HoverPreviewOverlay"}),{state:r,pinPopup:o,unpinPopup:a,hasBeenHovering:l,isPinned:d}=function(){const[e]=(0,s.AF)(X.Z),t=(0,u.Kt)(e,400,Object.is),[r,o]=(0,i.useState)(void 0),n=r||t,a=(0,i.useCallback)((()=>o(n)),[n]),l=(0,i.useCallback)((()=>{o(void 0)}),[]);return{state:n,pinPopup:a,unpinPopup:l,hasBeenHovering:e&&e===n,isPinned:Boolean(r)}}(),c=(0,s.VK)((()=>N.default.checkGate("first_party_links")),[]),p=(0,s.VK)((()=>(0,E.En)()),[]),g=function(e){const t=(0,n.O7)();return(0,s.VK)((()=>!!e&&(0,H.E)(t,e.store)),[e,t])}(r),m=(0,i.useMemo)((()=>Boolean(r&&function(e,t,r){return t&&(e.annotations.some(I.j0F)||e.annotations.some(I.nSN)||r&&e.annotations.some(I.STW))}(r,g,c))),[r,g,c]),h=!!m||Boolean(!t&&l),v=(0,i.useMemo)((()=>r&&r.token.node.getBoundingClientRect()),[r]),[,y]=(0,s.AF)(Y.Z);(0,i.useEffect)((()=>(y({isPinned:d}),()=>y({isPinned:!1}))),[d,y]);const f=!(null!=r&&r.annotations.some(I.nSN))&&c&&!(null!=r&&r.annotations.some(I.STW)),x=(p&&(null==r?void 0:r.annotations.some(I.IWo)))??!1;return(0,ye.jsx)(ae.ZP,{disableMouseCapture:!0,preventCaptureEsc:!0,preventPointerEvents:!m,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:ae.ZP.PopupType.Popup,open:h,originRect:v,originGap:8,alignmentToOrigin:x?ae.ZP.Alignment.End:ae.ZP.Alignment.Start,placementToOrigin:x?ae.ZP.Placement.Top:ae.ZP.Placement.Bottom,useLightBoxShadow:f,render:()=>r&&(0,ye.jsx)("div",{onMouseEnter:o,onMouseLeave:a,children:(0,ye.jsx)(Ce,{state:r,isHoveredTokenEditable:g,onDismiss:a})})})}function Ce(e){window.__c={n:"HoverPreviewOverlayRenderer"};const t=(0,s.VK)((()=>N.default.checkGate("first_party_links")),[]),r=(0,s.VK)((()=>(0,E.En)()),[]);(0,i.useEffect)((()=>{const e=S.P2(B.l,200,{leading:!0});return V.lj(window,"scroll",e,!0),()=>V.ZV(window,"scroll",e,!0)}),[]);const o=(0,n.Fy)(),l=(0,s.VK)((()=>{const{currentSpaceStore:e}=q.default.state;return e?e.getPermissionGroups():[]}),[]),d=(0,a.yK)((e=>({noMembersInGroupStyle:{fontSize:P.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]),c=e.state.annotations,p=c.find(I.j0F),u=c.find(I.fpG),g=c.find(I._bk),m=c.find(I.aq),h=I.frE(c),v=t?c.find(I.STW):void 0,y=r?c.find(I.IWo):void 0;if(p&&e.state.store.table!==w.x_)return(0,ye.jsx)(we,{...e,state:{...e.state,annotation:p}});if(u)return(0,ye.jsx)(Ie,{...e,state:{...e.state,annotation:u}});if(g){const e=I.kxk(g);if(e){const t=e.groupId,r=l.find((e=>e.id===t));if(r)return(0,ye.jsx)(me.Y,{group:r,limit:10,color:"white_background",trackHover:!0,noMembersMessage:(0,ye.jsx)(xe.gq,{style:d.noMembersInGroupStyle,children:(0,ye.jsx)("div",{style:P.Z.textOverflowStyle,children:(0,ye.jsx)(Z.FormattedMessage,{id:"groupPreview.noUsers",defaultMessage:"No users in this group"})})})})}}return m?(0,ye.jsx)(ke,{...e,state:{...e.state,annotation:m}}):h&&!o.isMobile?(0,ye.jsx)(_e,{...e,state:{...e.state,annotation:h},onDismiss:e.onDismiss}):t&&v&&!o.isMobile?(0,ye.jsx)(Te,{...e,state:{...e.state,annotation:v},onDismiss:e.onDismiss}):y&&!o.isMobile?(0,ye.jsx)(fe,{...e,state:{...e.state,annotation:y},onDismiss:e.onDismiss}):null}function we(e){window.__c={n:"HoverLinkPreviewOverlayRenderer"};const{onDismiss:t}=e,{annotation:r,store:c,token:p}=e.state,u=(0,n.O7)(),g=(0,a.Fg)(),h=I.zW$(r),y=(0,f.A5)({url:h,baseUrl:R.default.domainBaseUrl,publicDomainName:R.default.publicDomainName}),x=(0,i.useCallback)((async()=>{t(),U.AE({token:p,store:c,readOnly:!1}),await o.default.afterNextFlush(),O.dz({type:"focusOnly",focus:!0})}),[t,c,p]),S=(0,i.useCallback)((async()=>{t(),await o.default.afterNextFlush();const e=M.tq.copiedLinkToClipboard;let r=h;const i=(0,b.Wj)({url:h,baseUrl:R.default.domainBaseUrl,publicDomainName:R.default.publicDomainName,isMobile:u.device.isMobile,protocol:R.default.protocol,currentUrl:window.location.href});if("page"===i.name){const e=Q.G.createChildStore(c,{table:C.iU,id:i.blockId});r=(0,d.Z)({pageId:i.blockId,pageModel:e.getModel(),baseUrl:R.default.domainBaseUrl,discussionId:i.discussionId,scrollToBlockId:i.scrollToBlockId,peekViewBlockId:i.peekViewBlockId,peekMode:i.peekMode,pageVisitSource:l.tY.CopyLink})}M.RD({environment:u,stringValue:r,copiedMessage:e})}),[u,t,c,h]),j=(0,a.yK)((e=>({wrapper:{fontSize:P.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,fontWeight:P.Z.fontWeight.regular,fill:e.mediumIconColor},destination:{padding:"4px 0 4px 6px"},button:{display:"flex",alignItems:"center",padding:"2px 6px",whiteSpace:"nowrap",marginRight:2,borderRadius:3,color:e.regularTextColor},destinationText:{paddingRight:6,maxWidth:250,...P.Z.textOverflowStyle},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),w=(0,s.VK)((()=>{if(!y)return;const e=Q.G.createChildStore(c,{table:C.iU,id:y});return{pageIcon:(0,k.tp)({pageModel:e.getModel(),pageRole:e.getRole(),baseUrl:R.default.domainBaseUrl,getRecordModel:c.getRecordModel,emojiType:(0,F.e_)(u),isSafariOrIOS:u.device.isSafari||u.device.isIOS,isClient:!0,showEmojiInline:u.device.isWindows,currentUserId:u.currentUser.id,theme:g,emojiData:W.Z.state}),title:(0,ye.jsx)(de.Z,{style:j.destinationText,store:e})}}),[u,c,y,j,g])||{pageIcon:(0,v.o)(j.icon),title:(0,ye.jsx)("div",{style:j.destinationText,children:h})};return(0,ye.jsxs)(xe.gq,{style:j.wrapper,alignItems:"center",children:[(0,ye.jsxs)(xe.gq,{style:j.destination,alignItems:"center",children:[w.pageIcon,w.title]}),(0,ye.jsx)(ne.Z,{onClick:S,icon:m.U,isDarkIconColor:!0}),e.isHoveredTokenEditable&&(0,ye.jsx)(re.Z,{style:j.button,onClick:x,children:(0,ye.jsx)(Z.FormattedMessage,{defaultMessage:"Edit",id:"hoverPreviewOverlay.editButton.label"})})]})}function Ie(e){window.__c={n:"HoverDatePreviewOverlayRenderer"};const{annotation:t}=e.state,r=I.zyO(t),i=(0,a.yK)((e=>({container:{fontSize:P.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),o=(0,Z.useIntl)(),n="relative"===r.date_format?"ll":"relative",s=(0,c.ZV)({value:r,date_format:n,time_format:"h:mm A",allowRelativeDates:!0,intl:o});return s===(0,c.ZV)({value:r,date_format:r.date_format,time_format:r.time_format,allowRelativeDates:!0,intl:o})?null:(0,ye.jsxs)(xe.gq,{style:i.container,alignItems:"center",children:[(0,g.C)(i.icon),(0,ye.jsx)("div",{style:P.Z.textOverflowStyle,children:s})]})}function ke(e){window.__c={n:"HoverTemplateVariablePreviewOverlayRenderer"};const{annotation:t}=e.state,r=I.fsE(t),i=(0,Z.useIntl)(),o=I.Z08(r.type,i),n=(0,a.yK)((e=>({container:{fontSize:P.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]);return(0,ye.jsx)(xe.gq,{style:n.container,alignItems:"center",children:(0,ye.jsx)("div",{style:P.Z.textOverflowStyle,children:o})})}function Pe(e){var t;window.__c={n:"ExternalObjectInstancePreviewContent"};const{renderConfig:r,store:i}=e,o=(0,a.yK)((e=>({title:{color:e.regularTextColor,fontWeight:P.Z.fontWeight.medium,whiteSpace:"initial"},header:{color:e.mediumTextColor,fontSize:P.Z.fontSize.UISmall.desktop},dictionaryKey:{color:e.mediumTextColor,fontWeight:P.Z.fontWeight.regular,fontSize:P.Z.fontSize.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:P.Z.fontSize.UIRegular.desktop,whiteSpace:"normal",wordBreak:"break-word"}})),[]);return(0,ye.jsxs)(ye.Fragment,{children:[r.title&&(0,ye.jsx)(xe.gq,{children:(0,ye.jsx)(A.ox,{...r.title,store:i,style:o.title})}),r.headerAttributes&&r.headerAttributes.length>0&&(0,ye.jsx)(xe.gq,{alignItems:"center",style:{...o.header,marginBottom:3},children:(0,x.Z)(r.headerAttributes.map(((e,t)=>(0,ye.jsx)(A.ox,{...e,store:i,style:{...o.header,...P.Z.textOverflowStyle}},`attribute-${t}`)))||[],(e=>(0,ye.jsxs)("span",{children:[" ","·"," "]},`dot-${e}`)))}),r.dictionaryAttributes&&r.dictionaryAttributes.length>0&&(0,ye.jsx)(xe.Ht,{children:r.dictionaryAttributes.map(((e,t)=>{var n;let{key:s,value:a}=e;return(0,ye.jsxs)(xe.gq,{style:{marginBottom:t!==((null===(n=r.dictionaryAttributes)||void 0===n?void 0:n.length)??0)-1?3:0},children:[(0,ye.jsx)("div",{style:{marginRight:10,width:"30%",display:"flex",alignItems:"center"},children:(0,ye.jsx)("span",{style:o.dictionaryKey,children:(0,ye.jsx)(Z.FormattedMessage,{...s.formatter,values:{value:a.attribute.name}})})}),(0,ye.jsxs)("div",{style:{width:"70%",display:"flex",alignItems:"center"},children:[a.icon&&(0,_.li)(a.icon)&&(0,ye.jsx)(oe.Z,{type:"image_url",imageURL:a.icon.values[0],size:16,style:{marginRight:4}}),(0,ye.jsx)(A.ox,{...a,store:i,style:o.dictionaryValue,avatarStyle:{marginRight:4}})]})]},t)}))}),r.bodyAttribute&&(0,ye.jsx)(xe.gq,{style:((null===(t=r.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{},children:(0,ye.jsx)(A.hx,{attribute:r.bodyAttribute})}),r.previewImageAttribute&&(0,ye.jsx)("div",{style:{marginTop:r.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"},children:(0,ye.jsx)("div",{children:(0,ye.jsx)(se.Z,{src:r.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})})]})}function _e(e){window.__c={n:"HoverExternalObjectInstanceOverlayRenderer"};const{state:{annotation:t,store:r,token:o},onDismiss:l}=e,d=I.frW(t),c=(0,n.O7)(),u=(0,a.Fg)(),g=(0,i.useRef)(null),m=(0,s.VK)((()=>{const t=Q.G.createChildStore(r,{table:C.iU,id:d,spaceId:r.pointer.spaceId}),i=t.canEdit(),n=(0,z._F)({store:t,isInDarkMode:"dark"===u.mode,canEdit:i,currentUserId:c.currentUser.id,getRenderFn:e=>t=>{var r,i;return(null===(r=e.hover)||void 0===r?void 0:r.call(e,t))||(null===(i=p.j.hover)||void 0===i?void 0:i.call(p.j,t))},showAction:void 0});if(!n)return;const{renderConfig:s,integration:a}=n,m=Boolean(n.action),v=e.isHoveredTokenEditable,y=r.recordStoreUIParentStore&&r.recordStoreUIParentStore instanceof Q.G?r.recordStoreUIParentStore:void 0;return(0,ye.jsxs)("div",{style:{display:"flex",flexDirection:"column"},ref:g,children:[(0,ye.jsxs)(xe.gq,{alignItems:"center",style:{fontSize:12},children:[(0,ye.jsx)(oe.Z,{type:"image_url",imageURL:a.icon,size:16,style:{marginRight:"4px"}}),(0,ye.jsx)("div",{style:{flexGrow:1,fontWeight:P.Z.fontWeight.medium},children:a.name}),o&&!m&&v&&(0,ye.jsx)("div",{children:(0,ye.jsx)(ie.ZP,{popupType:ie.Z4.Popup,placementToOrigin:D.u.Right,alignmentToOrigin:D.v.Start,originGap:4,onClose:()=>{let e=!1;const t=g.current;t&&(e=(0,G.uh)(t.getBoundingClientRect(),pe.IL.x,pe.IL.y)),e||null==l||l()},renderOrigin:e=>(0,ye.jsx)(re.Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:3},...e,children:(0,h.o)({width:14})}),render:e=>(0,ye.jsx)(ge.default,{titleForReloadMenuOption:(0,ye.jsx)(Z.FormattedMessage,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:y,store:t,token:o,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]}),m&&v?(0,ye.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"6px 0"},children:(0,ye.jsx)(ue.Z,{canEdit:i,store:t,isHoverPreview:!0,postActionCallback:l})}):(0,ye.jsx)(Pe,{renderConfig:s,store:t})]})}),[d,r,c,u,o,l,e.isHoveredTokenEditable,g]);return m?(0,ye.jsx)("div",{style:{padding:"8px 16px",minWidth:300,maxWidth:350},children:m}):null}function Ze(e){window.__c={n:"HoverPagePreviewContent"};const t=(0,n.O7)(),r=(0,Z.useIntl)(),{store:o}=e,l=(0,s.VK)((()=>K.TP(o)),[o]),d=(0,a.yK)((e=>({icon:{height:16,width:16,fill:e.icon.purple,marginRight:2},title:{fontSize:12,color:e.icon.purple},summary:{...(0,L.pd)(4),fontSize:12,color:e.text.primary,marginBottom:16},contentCover:{color:e.text.primary,fontSize:12,lineHeight:1.5,marginBottom:16},contentCoverEmpty:{marginBottom:16},imageCoverWrap:{marginBottom:16},contentCoverFade:{height:45,background:`linear-gradient(to bottom, transparent, ${e.white} 100%)`}})),[]),c=l&&I.Vkf(l)>=20,p=(0,i.useMemo)((()=>(0,j.ZP)()),[]);return(0,i.useEffect)((()=>{const e=J.$g.getCurrentPageVisitId();return T.piO(t,{hover_session_id:p,mentioned_page_id:o.pointer.id,hover_content_type:c?"ai_summary":"content_preview",page_visit_id:e}),()=>{T.Yo0(t,{hover_session_id:p,hover_content_type:c?"ai_summary":"content_preview",mentioned_page_id:o.pointer.id,page_visit_id:e})}}),[t,p,c,o.pointer.id]),c?(0,ye.jsxs)("div",{children:[(0,ye.jsxs)(xe.gq,{alignItems:"center",children:[(0,y.t)(d.icon),(0,ye.jsx)("div",{style:d.title,children:r.formatMessage(je.aiSummary)})]}),(0,ye.jsx)("div",{style:d.summary,children:(0,ye.jsx)(te.A,{textValue:l,parentStore:o})})]}):(0,ye.jsx)(ee.Z,{variant:"default",store:o,coverFormat:{type:"page_content"},coverContentFadedOverlay:!0,coverContentFadedOverlayStyle:d.contentCoverFade,coverHeight:120,contentWrapStyle:d.contentCover,imageCoverWrapStyle:d.imageCoverWrap,emptyGalleryCoverStyle:d.contentCoverEmpty,showEmptyGalleryCover:!0,onLoadProxiedImage:()=>{}})}function Te(e){window.__c={n:"HoverPagePreviewOverlayRenderer"};const t=(0,s.VK)((()=>{const t=q.default.state.currentSpaceStore;if(!t)return;const r=Q.G.createChildStore(t,{id:e.state.annotation[1],table:"block"});return r.isNavigableBlock()&&r.isDefined()?r:void 0}),[e.state.annotation]);return(0,ye.jsx)(Me,{store:t})}function Me(e){let{store:t,events:r}=e;window.__c={n:"HoverPagePreview"};const i=(0,a.yK)((e=>({wrapper:{width:320},coverContainer:{height:60,background:e.accentColors.gray[30]},content:{padding:"16px 16px 0"},breadcrumb:{color:e.text.secondary},pageTitle:{display:"inline",fontWeight:P.Z.fontWeight.semibold,color:e.text.primary},pageTitleIcon:{position:"relative",marginLeft:16,marginTop:-15},pageTitleContainer:{...(0,L.pd)(2),verticalAlign:"top",fontSize:16,lineHeight:1.25},description:{fontSize:P.Z.fontSize.UISmall.desktop,color:e.icon.primary,paddingBottom:2},empty:{height:16}})),[]),[o,n,l]=(0,s.VK)((()=>{if(!t)return[void 0,!1,null,null];const e=t.isEmptyPage(),r=e?(0,ye.jsx)("div",{className:"empty"}):(0,ye.jsx)(Ze,{store:t});return[t.getIcon(),e,r]}),[t]);return t?(0,ye.jsxs)("div",{style:i.wrapper,...r,children:[(0,ye.jsx)("div",{style:i.coverContainer,children:(0,ye.jsx)(Se.Z,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:60,proxyWidth:320})}),(0,ye.jsx)(le.Z,{disabled:!0,icon:o,isEmptyPage:n,isLarge:!0,disableShrinking:!0,size:30,emojiSize:30,largeIcon:!0,style:i.pageTitleIcon}),(0,ye.jsxs)(xe.Ht,{gap:16,style:i.content,children:[(0,ye.jsxs)(xe.Ht,{gap:2,children:[(0,ye.jsx)(ce.Z,{store:t,style:i.breadcrumb}),(0,ye.jsx)("div",{style:i.pageTitleContainer,children:(0,ye.jsx)(de.Z,{shouldWrap:!0,maxLines:2,store:t,style:i.pageTitle})})]}),l]})]}):null}},36517:(e,t,r)=>{r.d(t,{Z:()=>M});r(57658);var i=r(67294),o=r(480),n=r(86628),s=r(24405),a=r(6695),l=r(72126),d=r(4615),c=r(21202),p=r(19889),u=r(82990),g=r(5366),m=(r(95477),r(66890)),h=r(80444),v=r(886),y=r(88632),f=r(77080),x=r(19671),S=r(90106),j=r(78291),b=r(13627),C=r(97039),w=r(78030),I=r(45653),k=r(29551),P=r(49778),_=r(85893);const Z=["Title","Pronoun","Teams (via Teams DB)","Office","Manager","Languages (Fluency)","Tenure"],T={"Teams (via Teams DB)":"Teams","Languages (Fluency)":"Languages"};function M(e){let{targetUserStore:t}=e;window.__c={n:"PeopleProfilePopup"};const r=(0,s.yK)((e=>({wrapper:{minWidth:100,maxWidth:300},profile:{padding:"10px 12px 12px 10px"},content:{padding:"8px 10px 10px"},breadcrumb:{color:e.text.secondary},profileTitle:{paddingLeft:20,fontSize:18,lineHeight:1.25,fontWeight:u.Z.fontWeight.semibold,color:e.text.primary},profileSubtitle:{paddingLeft:20,paddingTop:2,fontSize:u.Z.fontSize.UISmall.desktop,color:e.icon.primary,paddingBottom:1},profileKeyRow:{minWidth:80},profileKeyText:{textTransform:"capitalize",fontWeight:500},description:{padding:"6px 8px 12px 20px",fontSize:u.Z.fontSize.UISmall.desktop,color:e.icon.primary,borderTop:`1px solid ${e.regularDividerColor}`}})),[]),l=(0,n.VK)((()=>h.default.state.currentSpaceStore),[]),p=(0,n.VK)((()=>h.default.state.currentUserStore),[]),g=(0,n.VK)((()=>!!t&&t.isDefined()),[t]),y=(0,n.VK)((()=>{if(!t)return;const e=t.getEmail();if(!e)return;const r=f.default.getConfigKey("notion_people_block_id","data")[e];if(!r)return;return S.G.createChildStore(t,{table:c.iU,id:(0,d.Mt)(r)})}),[t]),{collectionStore:j,schema:b,format:I}=(0,P.d)(y),T=function(e){let{collectionStore:t,format:r,schema:i,userPeopleCollectionPage:o}=e;return(0,n.VK)((()=>{var e;if(!(t&&r&&i&&o))return;const n=a.iB(r,i,void 0,a.j5.Collection),s=null==n||null===(e=n.collection_page_properties)||void 0===e?void 0:e.filter((e=>{var t;const r=null===(t=i[e.property])||void 0===t?void 0:t.name;return void 0!==r&&Z.includes(r)}));if(!s)return;const l={};return s.forEach((e=>{var r;l[(null===(r=i[e.property])||void 0===r?void 0:r.name)||""]=(0,_.jsx)(C.Z,{store:o,property:e.property,locked:!0,disabled:!0,format:w.C.Page,onTab:()=>{},onUntab:()=>{},tableWrap:!1,blockPropertyValueOverlayStore:x.Z,showRelationTooltip:!1,collectionStore:t})})),l}),[t,i,r,o])}({collectionStore:j,format:I,schema:b,userPeopleCollectionPage:y}),M=(0,o.O7)(),R=(0,i.useMemo)((()=>new v.Z(M)),[M]);(0,i.useEffect)((()=>{j&&R.setContext({type:"collectionPage",collectionStore:j})}),[R,j]);const F=(0,n.VK)((()=>!!(t&&p&&g)&&t.id===p.id),[t,p,g]);return t&&g&&l?y&&R&&T?(0,_.jsx)("div",{style:r.wrapper,children:(0,_.jsx)(m.L1,{value:R,children:(0,_.jsxs)(k.Ht,{children:[(0,_.jsx)(k.gq,{gap:3,alignItems:"center",style:r.profile,children:(0,_.jsx)(O,{userStore:t,styles:r})}),(0,_.jsxs)("div",{style:r.description,children:[(0,_.jsx)(U,{userProfile:T,styles:r}),F?(0,_.jsx)(k.gq,{gap:1,alignItems:"center",children:(0,_.jsx)(B,{spaceStore:l,limit:5,styles:r})}):void 0]})]})})}):(0,_.jsx)("div",{style:r.wrapper,children:(0,_.jsxs)(k.Ht,{children:[(0,_.jsx)(k.gq,{gap:3,alignItems:"center",style:r.profile,children:(0,_.jsx)(O,{userStore:t,styles:r})}),F?(0,_.jsx)("div",{style:r.description,children:(0,_.jsx)(k.gq,{gap:1,alignItems:"center",children:(0,_.jsx)(B,{spaceStore:l,limit:5,styles:r})})}):void 0]})}):null}function O(e){let{userStore:t,styles:r}=e;window.__c={n:"UserContactCard"};const i=(0,g.useIntl)(),{name:o,email:s}=(0,n.VK)((()=>({name:t.getFullName(i),email:t.getEmail()})),[t,i]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(I.Z,{userStore:t,size:70,borderStyle:"none"}),(0,_.jsxs)(k.Ht,{gap:1,children:[(0,_.jsx)("div",{style:r.profileTitle,children:o}),(0,_.jsx)("div",{style:r.profileSubtitle,children:s})]})]})}function U(e){let{userProfile:t,styles:r}=e;return t?(0,_.jsx)(_.Fragment,{children:Z.filter((e=>t[e])).map((e=>(0,_.jsxs)(k.gq,{gap:1,alignItems:"center",children:[(0,_.jsx)(k.Ht,{children:(0,_.jsx)(k.gq,{style:r.profileKeyRow,children:(0,_.jsx)("div",{style:r.profileKeyText,children:T[e]?T[e]:e})})}),(0,_.jsx)(k.Ht,{style:{transform:"scale(0.9)",transformOrigin:"center left"},children:t[e]})]},e)))}):null}function B(e){let{spaceStore:t,limit:r,styles:i}=e;window.__c={n:"UserSimilarity"};const{userSimilarityList:o}=(0,n.VK)((()=>{var e,i;const o=null===(e=j.default.state)||void 0===e?void 0:e.data,n=o?b.CM(o):[],s=(null==o?void 0:o.userSimilarity)||{},a=n.map((e=>{const t=s[e.userId];return{id:e.userId,similarity:t||0}})).sort(((e,t)=>t.similarity-e.similarity)).slice(0,r),d=[],c=l.yW(a.map((e=>{const r=S.U6.createChildStore(t,{table:p.KJ,id:e.id});return d.push({id:e.id,similarity:e.similarity,userStore:r}),r.isReady()})));return{isOnline:y.Z.state.online,subscriptionDataStoreData:o,userSimilarityData:(null===(i=j.default.state.data)||void 0===i?void 0:i.userSimilarity)||{},visibleUsersLoaded:c,visibleUsers:n,userSimilarityList:d}}),[t,r]);return t&&o&&0!==o.length?(0,_.jsxs)(k.gq,{gap:1,alignItems:"center",style:{paddingTop:4},children:[(0,_.jsx)(k.Ht,{children:(0,_.jsx)(k.gq,{style:i.profileKeyRow,children:(0,_.jsx)("div",{style:i.profileKeyText,children:"Coworkers"})})}),(0,_.jsx)(k.Ht,{children:(0,_.jsx)(k.gq,{gap:5,children:(0,_.jsx)("div",{children:(0,_.jsx)("div",{style:{display:"flex",position:"relative",float:"right"},children:o.map((e=>(0,_.jsx)("div",{style:{marginLeft:1.5},children:(0,_.jsx)(I.Z,{userStore:e.userStore,size:18})},e.id)))})})})})]}):null}},25735:(e,t,r)=>{r.d(t,{Y:()=>g});r(67294);var i=r(480),o=r(86628),n=r(24405),s=r(5366),a=r(82990),l=r(50906),d=r(16639),c=r(80444),p=r(29302),u=r(85893);function g(e){window.__c={n:"GroupMembersListTooltip"};const{group:t,limit:r,noMembersMessage:g,color:m,trackHover:h}=e,v=(0,n.yK)((e=>({container:{marginBottom:4,..."white_background"===m?{fontSize:a.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}:{}},userContainer:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},user:{flexGrow:1},moreMessage:{marginLeft:2,marginTop:4,..."white_background"===m?{fontSize:a.Z.fontSize.UISmall.desktop,color:e.mediumTextColor}:{color:e.mediumInvertedTextColor}}})),[m]),y=(0,o.VK)((()=>c.default.state.currentSpaceStore),[]),f=(0,i.O7)();(0,o.VK)((()=>{h&&l.iHH(f,{group_id:t.id})}),[h,t.id,f]);const{countRemainingUsers:x,limitedUserStores:S}=(0,o.VK)((()=>(0,d.rm)({group:t,spaceStore:y,limit:r})),[t,y,r]);return 0===S.length?(0,u.jsx)(u.Fragment,{children:g}):(0,u.jsxs)("div",{style:v.container,children:[S.map((e=>(0,u.jsx)("div",{style:v.userContainer,children:(0,u.jsx)(p.Z,{style:v.user,userStore:e,avatarSize:18})},e.id))),x>0&&(0,u.jsx)("div",{style:v.moreMessage,children:(0,u.jsx)(s.FormattedMessage,{id:"blockPermissionsSettings.groupPermissionUsers.tooltip",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:x}})})]})}},88804:(e,t,r)=>{r.d(t,{E:()=>l,N:()=>a});var i=r(83212),o=r(90106),n=r(98165),s=r(67669);function a(e,t){const r=t.getRecordStoreUIRoot(),a=r instanceof o.G&&r.isPageBlock()&&r.isLocked(),l=(0,n.n3)(r)&&i.Z.getMode(e,r),d=Boolean((0,s.YF)(l));return!t.canEdit()||a||d}function l(e,t){return!a(e,t)}}}]);