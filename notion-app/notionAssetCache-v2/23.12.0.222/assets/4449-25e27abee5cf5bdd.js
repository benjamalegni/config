"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4449],{7512:(e,t,s)=>{s.d(t,{A:()=>p,t:()=>h});var i=s(5366),n=s(33929),r=s(80444),a=s(11646),o=s(50906),d=s(54642),l=s(47307),c=s(92625),u=s(97977),m=s(9953);const g=(0,i.defineMessages)({deletingAccount:{id:"accountActions.deletingAccount.loadingMessage",defaultMessage:"Deleting your account…"},noUserError:{id:"accountActions.deletingAccount.noUserToDeleteMessage",defaultMessage:"No account to delete."}}),p=function(e){const{userStore:t,data:s,transaction:i}=e,n={};"name"in s&&s.name&&(n.name=s.name),"profilePhoto"in s&&(n.profile_photo=s.profilePhoto),0!==Object.keys(n).length&&m.sW({store:t,data:n,transaction:i})};async function h(e){c.j({message:g.deletingAccount});const t=e.currentUser.id,{currentUserRootStore:s,currentUserStore:i}=r.default.state;if(!s||!i||!t)return c.x(),void l.showErrorMessage(n.default.formatMessage(g.noUserError));o.xti(e),await d.deleteUser(e,{}),await a.transactionQueue.clearForUser(t),u.logoutSingleAccount({environment:e,userId:t}),c.x()}},61652:(e,t,s)=>{s.d(t,{y1:()=>X,BO:()=>ee,Qr:()=>te,gJ:()=>ce,PN:()=>re,ZO:()=>G,hN:()=>le,g:()=>ae,Mj:()=>$,$G:()=>H,AW:()=>N,Tp:()=>de,zh:()=>ue,GI:()=>ne,q$:()=>z});s(67294);var i=s(68626),n=s(42875),r=s(59730),a=s(15157),o=s(72126),d=s(29477),l=s(21202),c=s(19889),u=s(5366),m=s(27617),g=s(83355),p=s(82990),h=s(19306),f=s(61519),S=s(68785),v=s(85893);const y={fontWeight:p.Z.fontWeight.semibold};class x extends g.Z{renderComponent(){return(0,v.jsxs)("div",{style:this.getMessageStyle(),children:[(0,v.jsx)("div",{style:this.getSpinnerContainerStyle(),children:(0,v.jsx)(S.Z,{})}),this.renderProgress(),this.renderEmail(),this.renderDisabledTeamsWarning()]})}renderDisabledTeamsWarning(){const e=this.props.disabledExportTeamNames;if(e.length>0)return(0,v.jsxs)("span",{children:[(0,v.jsx)(f.Z,{size:10}),(0,v.jsx)("p",{children:(0,v.jsx)(u.FormattedMessage,{id:"exportActions.exportDisabledTeams.message",defaultMessage:"Export is disabled for the following teamspaces: <b>{teamNames}</b>",values:{teamNames:(0,h.W)(e),b:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,v.jsx)("span",{style:y,children:t})}}})})]})}renderEmail(){const{targetEmailAddress:e}=this.props.exportProgressStore.state;if(e)return(0,v.jsx)("p",{children:(0,v.jsx)(u.FormattedMessage,{id:"exportProgressDialog.emailMessage",defaultMessage:"We'll also send you an email with the download link."})})}renderProgress(){const{pagesExported:e}=this.props.exportProgressStore.state;return e>0?(0,v.jsx)("p",{children:(0,v.jsx)(u.FormattedMessage,{id:"exportProgressDialog.exportedPagesMessage",defaultMessage:"{pagesExported, plural, one {{pagesExported} page exported} other {{pagesExported} pages exported}}",values:{pagesExported:e}})}):(0,v.jsx)("p",{children:(0,v.jsx)(u.FormattedMessage,{id:"exportProgressDialog.exportStartedMessage",defaultMessage:"Exporting…"})})}getMessageStyle(){return{fontSize:14,color:this.theme.mediumTextColor,textAlign:"center"}}getSpinnerContainerStyle(){return{marginTop:24,marginBottom:24,display:"flex",justifyContent:"center"}}}x.displayName="ExportProgress";const M=x;var b=s(19037),w=s(33954),j=s(33929),C=s(37034),k=s(13630),I=s(80444),T=s(886),P=s(71071),F=s(49085);class _ extends F.default{getInitialState(){return{pagesExported:0}}}const Z=_;var A=s(90106),R=s(20454),B=s(13627),E=s(50906),D=s(54642),L=s(47307),V=s(92625),O=s(34602);const U=(0,u.defineMessages)({exporting:{id:"exportActions.exporting.loadingMessage",defaultMessage:"Exporting"},exportAuditLogEmail:{id:"exportActions.auditLog.exporting.EmailMessage",defaultMessage:"Your CSV export is currently being generated. The generated CSV has a 2-hour delay from the real time audit log. Once it is ready, an email will be sent to you with the download link."},exportCSVEmail:{id:"exportActions.exportingCSV.EmailMessage",defaultMessage:"Your CSV export is currently being generated. Once it is ready, an email will be sent to you with the download link."},exportFailed:{id:"exportActions.exportFailedError.message",defaultMessage:"Export failed."},adminMessage:{defaultMessage:"Admin",id:"export.userPermissionsRole.admin.message"},workspaceOwnerMessage:{defaultMessage:"Workspace owner",id:"export.userPermissionsRole.workspaceOwner.message"},memberMessage:{defaultMessage:"Member",id:"export.userPermissionsRole.member.message"},membershipAdminMessage:{defaultMessage:"Membership admin",id:"export.userPermissionsRole.membershipAdmin.message"},guestMessage:{defaultMessage:"Guest",id:"export.userPermissionsRole.guest.message"},idMessage:{defaultMessage:"ID",id:"export.csvHeader.id"},emailMessage:{defaultMessage:"Email",id:"export.csvHeader.email"},nameMessage:{defaultMessage:"Name",id:"export.csvHeader.name"},roleMessage:{defaultMessage:"Role",id:"export.csvHeader.role"},permissionGroupsMessage:{defaultMessage:"Permission groups",id:"export.csvHeader.permissionGroups"},pagesMessage:{defaultMessage:"Pages",id:"export.csvHeader.pages"},partitionMessage:{defaultMessage:"Export is still in progress due to file size. We will send you an email about its progress.",id:"export.exportPartitioned.message"},privatePageMessage:{defaultMessage:"Private page",id:"export.privatePageTitle.message"},pageTitleAndIdMessage:{defaultMessage:"{pageTitle} ({pageId})",id:"export.pageTitleAndId.message"},pageSeparatorMessage:{defaultMessage:", ",id:"export.pageSeparator.message"}});async function G(e,t){if(!J({environment:e,...t}))return void E.y4(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});const{currentUserStore:s}=I.default.state;if(!s)return void E.y4(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});const i=s.getEmail();if(!i)return void E.y4(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});E.Md8(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive}),"currentView"===t.exportOptions.collectionViewExportType&&(t.exportOptions.preferredViewMap=W(s.id));const n=D.exportBlock(e,t);await q(e,n,t.recursive,i)}async function N(e,t){if(!J({environment:e,recursive:!0,exportOptions:t.exportOptions}))return void E.y4(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});const{currentUserStore:s}=I.default.state;if(!s)return void E.y4(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});const i=s.getEmail();if(!i)return void E.y4(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});E.Md8(e,{target:"space",format:t.exportOptions.exportType,recursive:!0}),"currentView"===t.exportOptions.collectionViewExportType&&(t.exportOptions.preferredViewMap=W(s.id));const n=D.exportSpace(e,t);await q(e,n,!0,i)}async function q(e,t,s,i){const{currentSpaceViewStore:n,currentSpaceStore:r}=I.default.state;if(!n)return;const a=new Z;a.setState({pagesExported:0,targetEmailAddress:i});let o,l=!1;const c=n.getTeamsStores().filter((e=>e.getSetting("disable_export"))).flatMap((e=>e.getName()||[]));if(s){const t=c.length>0?6e3:1250;o=(0,d.Vs)(t);const s={exportProgressStore:a,disabledExportTeamNames:c};L.showDialog({message:(0,v.jsx)(M,{...s}),showCancel:!1,keepFocus:!0,disableBackgroundDismiss:!0,items:[{label:(0,v.jsx)(u.FormattedMessage,{id:"exportProgressDialog.closeButton.label",defaultMessage:"Close"}),onAccept:()=>{ue({environment:e,spaceId:null==r?void 0:r.id}),l=!0}}]})}else o=Promise.resolve(),V.j({message:U.exporting});for await(const d of t){if(l)return;if(d.error)return V.x(),void L.showErrorMessage(j.default.formatMessage(U.exportFailed));{const{value:t}=d;if("complete"===t.type||"partition"===t.type)return await o,V.x(),void("complete"===t.type?(L.dismissDialog(),!l&&t.exportURL&&O.downloadUrl({environment:e,url:t.exportURL})):L.showMessage({message:j.default.formatMessage(U.partitionMessage)}));a.setState({...a.state,pagesExported:t.pagesExported})}}}function W(e){const t={};return a.Z.scan(((s,i)=>{if(s.includes(T.Z.PREFERENCE_KEY_PREFIX)&&s.includes(e)){const e=s.split(T.Z.PREFERENCE_KEY_PREFIX)[1];e&&i&&(t[e]=i)}})),t}function z(e){const{root:t,environment:s,isCollectionViewExportTypeSupported:i}=e,r=s.currentUser.id,a=ie(r),o=a&&a.exportType||"markdown",d=i?"currentView":void 0,l="pdf"===o?{exportType:"pdf",timeZone:(0,n.r)(),pdfFormat:ne(r),locale:"en",collectionViewExportType:d}:{exportType:o,timeZone:(0,n.r)(),locale:"en",collectionViewExportType:d};ee(s,{open:!0,root:t,recursive:"space"===t.table,exportOptions:l})}const K=(e,t)=>{switch(t){case"editor":return e.formatMessage(U.workspaceOwnerMessage);case"membership_admin":return e.formatMessage(U.membershipAdminMessage);case"read_and_write":return e.formatMessage(U.memberMessage);case"none":return e.formatMessage(U.guestMessage);default:return i.log({level:"error",from:"exportActions",type:"roleNotFound",data:{miscDataToConvertToString:{role:t}}}),""}};async function H(e,t){const{spaceStore:s,subscriptionData:i,intl:n}=t,r=s.getPermissionGroups();await D.exportSpaceMembers(e,{spaceId:s.getSpaceId()});const a=o.oA(await Promise.all(i.users.map((async e=>{const t=R.U.createChildStore(s,{table:c.KJ,id:e.userId});await t.load();const i=t.getEmail(),a=t.getFullName(n),d=o.oA(r.filter((t=>(t.user_ids||[]).includes(e.userId))).map((e=>e.name)).sort());if(i||a)return[i||"",a||"",K(n,e.role),d.join(","),t.id]}))));Q(Y([[U.emailMessage,U.nameMessage,U.roleMessage,U.permissionGroupsMessage,U.idMessage].map((e=>n.formatMessage(e))),...a]),"members.csv")}function Q(e,t){const s=document.createElement("a");s.setAttribute("href",`data:text/csv;charset=utf-8,${encodeURIComponent(e)}`),s.setAttribute("download",t),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}function Y(e){return e.map((e=>e.map((e=>((e=e.replace(/"/g,'""')).search(/("|,|\n)/g)>=0&&(e=`"${e}"`),e))).join(","))).join("\n")}async function $(e,t){let{guests:s,intl:i,spaceStore:n}=t;await D.exportSpaceGuests(e,{spaceId:n.getSpaceId()});const r=i.formatMessage(U.pageSeparatorMessage),a=o.oA(await Promise.all(s.map((async t=>{const s=R.U.createChildStore(n,{table:c.KJ,id:t.userId});async function a(t){const s=A.G.createChildStore(n.getPagesStore(),{table:l.iU,id:t});return await s.load(),(0,C.V)(s,i,e)??i.formatMessage(U.privatePageMessage)}const[,...o]=await Promise.all([s.load(),...t.guestPageIds.map((e=>async function(e){return i.formatMessage(U.pageTitleAndIdMessage,{pageId:e,pageTitle:await a(e)})}(e)))]),d=s.getEmail(),u=s.getFullName(i);if(d||u)return[d||"",u||"",o.join(r),s.id]}))));Q(Y([[U.emailMessage,U.nameMessage,U.pagesMessage,U.idMessage].map((e=>i.formatMessage(e))),...a]),"guests.csv")}function J(e){return!("pdf"===e.exportOptions.exportType&&e.recursive)||X(e.environment)}function X(e){return(0,B.qb)(e,"enterprise")||(0,B.qb)(e,"business")||b._T()}function ee(e,t){const s=P.ZP.state,i=e.currentUser.id;let n=t;if(P.Sw(n)&&!X(e))if("space"===n.root.table){const e=s.open&&!P.Sw(s)?s.exportOptions.exportType:"html";n={...n,exportOptions:{...n.exportOptions,exportType:e}}}else n={...n,recursive:!1};if(!J({environment:e,...n}))throw new r.D3("Invalid export options",{data:n});P.ZP.setState(n),function(e){const t=P.ZP.state;if(t.open){const s={...ie(e),exportType:t.exportOptions.exportType};"pdf"===t.exportOptions.exportType&&(s.pdfFormat=t.exportOptions.pdfFormat),a.Z.set({userId:e,key:se,value:s})}}(i)}function te(){P.ZP.setState({open:!1})}const se="ExportSettings";function ie(e){return a.Z.get({userId:e,key:se})}function ne(e){const t=ie(e);return t&&t.pdfFormat||P.jR()}async function re(e,t){const{currentUserStore:s}=I.default.state,{spaceId:n}=t;if(!s)return i.log({level:"error",from:"exportActions",type:"exportAuditLogCSV-currentUserStoreNotFound",data:{miscDataToConvertToString:{spaceId:n}}}),L.showMessage({message:j.default.formatMessage(U.exportFailed)}),void E.y4(e,{target:"auditLog",format:"csv",recursive:!1});if(!s.isDefined())return i.log({level:"error",from:"exportActions",type:"exportAuditLogCSV-currentUserValueNotFound",data:{miscDataToConvertToString:{spaceId:n}}}),L.showMessage({message:j.default.formatMessage(U.exportFailed)}),void E.y4(e,{target:"auditLog",format:"csv",recursive:!1});E.Md8(e,{target:"auditLog",format:"csv",recursive:!1});const r=D.exportAuditLog(e,t);await oe(r,U.exportAuditLogEmail)}async function ae(e){const{environment:t,data:s}=e;E.Md8(t,{target:"domainClaimableSpaces",format:"csv",recursive:!1});const i=D.exportDomainClaimableSpaces(t,s);await oe(i,U.exportCSVEmail)}async function oe(e,t){const s=await e.next();if(s.value.error){const e=(0,w.HV)(j.default.getIntl(),s.value.error);L.showErrorMessage(e)}else L.showMessage({message:j.default.formatMessage(t)})}async function de(e,t){E.Md8(e,{target:"userAnalytics",format:"csv",recursive:!1});const s=D.exportUserAnalytics(e,t);await oe(s,U.exportCSVEmail)}async function le(e,t){E.Md8(e,{target:"contentAnalytics",format:"csv",recursive:!1});const s=D.exportContentAnalytics(e,t);await oe(s,U.exportCSVEmail)}async function ce(e,t){E.Md8(e,{target:"adminContentSearchAnalytics",format:"csv",recursive:!1});const s=D.exportAdminContentSearch(e,{spaceId:t.spaceId,sort:{field:"relevance",direction:"desc"},query:t.filters.query,audience:t.filters.audience,lastEditedTime:(0,m.Hq)(t.filters.lastEditedTime),createdTime:(0,m.Hq)(t.filters.createdTime),createdBy:t.filters.createdBy,sharedWith:t.filters.sharedWith,teamspaceIds:t.filters.teamIds});await oe(s,U.exportCSVEmail)}async function ue(e){let{environment:t,spaceId:s}=e;if(!s)return;const i=await D.getActiveExportTasks(t,{spaceId:s});"success"===i.type&&k.Z.setState({count:i.data.length})}},95209:(e,t,s)=>{s.d(t,{M5:()=>F,Mr:()=>j,PV:()=>T,Vu:()=>P,XC:()=>Z,eH:()=>C,jC:()=>_,jL:()=>A,kL:()=>I,qg:()=>k,zK:()=>w});s(21703),s(57658),s(30541);var i=s(33728),n=s(72126),r=s(27006),a=s(29477),o=s(21202),d=s(75246),l=s(97880),c=s(76464),u=s(2985),m=s(79817),g=s(45101),p=s(65598),h=s(95697),f=s(80444),S=s(85834),v=s(29677),y=s(73466),x=s(50906),M=s(54642),b=s(1865);const w=async e=>{const{environment:t,store:s,sudoModeStore:n,permissionsInviteStore:a,onInviteStart:u,contextualInviteStore:m,inviteOrigin:h}=e,{tokenQuery:f}=a.state;if((0,i.oH)(f.trim())&&(a.state.isInviteTargetsEmpty||!(0,v.ow)(a.state))){const e={type:"newUser",value:{email:f.trim()},source:"email"};g.Nd({target:e,permissionsInviteStore:a})||a.setState({...a.state,inviteTargets:[...a.state.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:""})}if(!a.state.isInviteTargetsEmpty&&a.state.inviteTargets.length>0){null==u||u();const e=a.state;if((0,v.ow)(e)){if(e.table===o.iU){if(!(0,p.OY)(s))throw new Error("Table mismatch.");const{inviteTargets:i,flowId:r,emailMessage:o}=e;a.reset();return(await c.n_({environment:t,store:s,sudoModeStore:n,inviteTargets:i,inviteRole:void 0,isOnboarding:!1,invite:{inviteFlowId:r,inviteMessage:o,inviteOrigin:h}})).success}if(e.table===d.bx){if(!(0,p.Mm)(s))throw new Error("Table mismatch.");const{inviteTargets:i,inviteRole:r,flowId:o}=e;a.reset();return(await c.n_({environment:t,store:s,sudoModeStore:n,inviteTargets:i,inviteRole:r,isOnboarding:!1,invite:{inviteFlowId:o,inviteOrigin:h}})).success}(0,l.t1)(e)}else{const{inviteRole:i,flowId:o,emailMessage:d}=e;a.reset();const l=function(e,t){const s=new Set;var i;(0,p.Y)(e)?null===(i=e.getPermissionItems())||void 0===i||i.forEach((e=>{(0,r.jg)(e)&&s.add(e.user_id)})):e.getPermissionItems().forEach((e=>{(0,r.jg)(e)&&s.add(e.user_id)}));return t.filter((e=>"existingUser"!==e.type||!s.has(e.value.id)))}(s,e.inviteTargets);if((0,r.iC)(i)){const e=await c.n_({environment:t,store:s,sudoModeStore:n,inviteTargets:l,inviteRole:i,isOnboarding:!1,invite:{inviteFlowId:o,inviteMessage:d,inviteOrigin:h}});return e.success&&(null==m||m.setState({...null==m?void 0:m.state,invitedEmailToUserIdMap:e.invitedUsers})),e.success}if((0,p.Y)(s)&&(0,v.Db)(e))return await c.GQ({environment:t,store:s,inviteTargets:e.inviteTargets,inviteRole:i,createNewTeamFlowId:o})}}return!0};const j=e=>{e.permissionsInviteStore.setState({...e.permissionsInviteStore.state,modalOpen:!1,flowId:void 0})},C=e=>{const{permissionsInviteStore:t,contextualInviteStore:s}=e;if(!s)return;const i=[];t.state.inviteTargets.forEach((e=>{if("newUser"===e.type)i.push({email:e.value.email,isGuest:!0});else if("existingUser"===e.type){const t={...e.value,email:e.value.email,isGuest:"none"===e.spaceRole||"not_in_space"===e.spaceRole};i.push(t)}})),s.setState({...s.state,invitedUsers:i})},k=async e=>{const{environment:t,store:s,sudoModeStore:i,permissionsInviteStore:n,contextualInviteStore:r,onInviteClick:a,onInviteComplete:o,inviteOrigin:d,intl:l}=e,{currentSpaceStore:c}=f.default.state;if((0,h.$)(t)&&(null==r?void 0:r.state.selection)===S.uq.workspace_member&&c){if(!(await y.HD({environment:t,flowId:n.state.flowId||"",trackCreateTeamComplete:!1})))return;C({permissionsInviteStore:n,contextualInviteStore:r}),await(0,m.j_)({environment:t,spaceStore:c,contextualInviteStore:r,from:"share_menu",intl:l})}else C({permissionsInviteStore:n,contextualInviteStore:r});let u=!1;try{u=await w({environment:t,store:s,sudoModeStore:i,permissionsInviteStore:n,contextualInviteStore:r,onInviteStart:()=>{null==a||a()},inviteOrigin:d})}catch(g){}finally{null==o||o(u)}},I=async e=>{const{environment:t,permissionsInviteStore:s,from:i}=e;await g.Aw({environment:t,permissionsInviteStoreState:s.state,from:i})||s.reset()},T=e=>{const{permissionsInviteStore:t,targetToRemove:s,defaultRoleForNonBot:i}=e;if(!t.state.isInviteTargetsEmpty)if((0,v.ow)(t.state))if((0,v.ow)(t.state)){const e=t.state.inviteTargets.filter((e=>e!==s));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:i,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}else(0,l.t1)(t.state);else{const e=t.state.inviteTargets.filter((e=>e!==s));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:i,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}},P=e=>{const{environment:t,onUpgradeButtonClick:s,upgradeButtonName:i}=e;b.y(t,{from:i,for:"plus"}),null==s||s()};async function F(e,t){const s=new Set(t),i=Array.from(s).map((async t=>{const s=await M.findUser(e,{email:t});if("success"===s.type){const e=s.data;if(e.value){return{type:"existingUser",value:e.value.value}}}return{type:"newUser",value:{email:t},source:"email"}}));return await Promise.all(i)}const _=async e=>{const t="invitee",{environment:s,permissionsInviteStore:n,event:r}=e;if(!n.state.isInviteTargetsEmpty&&(0,v.ow)(n.state)){const e=r.target.value;n.setState({...n.state,inputFocus:t,tokenQuery:e})}else{const e=r.target.value,{extractedEmails:a,newInputValue:o}=(0,i.zI)(e),d=(await F(s,a)).filter((e=>!g.Nd({target:e,permissionsInviteStore:n}))),l=[...n.state.inviteTargets,...d];l.length>0?n.setState({...n.state,inviteTargets:l,isInviteTargetsEmpty:!1,inputFocus:t,tokenQuery:o}):n.setState({...n.state,inviteTargets:[],isInviteTargetsEmpty:!0,inputFocus:t,tokenQuery:o})}},Z=e=>{const{environment:t,newRole:s,permissionsInviteStore:i}=e,{state:n}=i;x.TCs(t,{...g.a_(t,n),invite_updated_role:s}),!n.isInviteTargetsEmpty&&(0,v.ow)(n)||i.setState({...n,inviteRole:s})},A=async e=>{const{query:t,environment:s,sectionLimit:i,intl:r,membersOnly:o}=e,{currentSpaceStore:d}=f.default.state;if(!d)return{inviteUsers:[],inviteBots:[],inviteGroups:[]};const{userLimit:l,botLimit:c,groupLimit:m,importContactLimit:g}=i,[p,h,S,{user:v,email:y},x]=await Promise.all([l>0?u.Yu({environment:s,query:t,membersOnly:o}):[],c>0?u.RF({environment:s,query:t}):[],m>0?u.$w({query:t,intl:r}):[],u.yy(s,t),g>0?Promise.race([M.searchContacts(s,{spaceId:d.id,limit:g,query:t}),(0,a.Xb)(1500,void 0)]):void 0]),b=p.slice(0,l).map((e=>({type:"existingUser",value:e}))),w=h.slice(0,c).map((e=>({type:"bot",value:e}))),j=S.slice(0,m).map((e=>({type:"group",value:e})));v&&b.unshift({type:"existingUser",value:v}),y&&b.unshift({type:"newUser",value:{email:y},source:"email"});let C=[];return x&&"success"===x.type&&(C=x.data.contacts.map((e=>({type:"newUser",value:{email:e.email,name:e.name,avatar_url:e.profile_photo},source:e.type})))),{inviteUsers:n.mN(b,(e=>e.value.email)),inviteBots:w,inviteGroups:j,importedContacts:C}}},27617:(e,t,s)=>{s.d(t,{Hq:()=>p,Ij:()=>g,KN:()=>o,PM:()=>l,Qb:()=>u,Zy:()=>c,dd:()=>a,eW:()=>m,mK:()=>h,o0:()=>d});var i=s(7057),n=s(53877),r=s(42875);function a(e,t){return(0,i.ZW)(n.OQ.notionDateTimeToLuxon(e,t.locale),"short")}function o(e,t){return(0,i.ZW)(n.OQ.notionDateTimeToLuxon(e,t.locale),"time")}function d(e,t){return n.OQ.notionDateTimeToLuxon(e,t.locale).toFormat(n._F)}function l(e,t){let s={starting:void 0,ending:void 0};var i,n,a,o;if(t.starting&&t.ending)s={starting:{type:"datetime",start_time:"",start_date:t.starting.start_date,time_zone:""},ending:{type:"datetime",start_time:"",start_date:t.ending.start_date,time_zone:""}},null!==(i=e.starting)&&void 0!==i&&i.start_time&&null!==(n=e.starting)&&void 0!==n&&n.time_zone&&(s.starting={...s.starting,start_time:e.starting.start_time,time_zone:e.starting.time_zone}),null!==(a=e.ending)&&void 0!==a&&a.start_time&&null!==(o=e.ending)&&void 0!==o&&o.time_zone?s.ending={...s.ending,start_time:e.ending.start_time,time_zone:e.ending.time_zone}:s={starting:{...s.starting,start_time:"00:00",time_zone:(0,r.r)()},ending:{...s.ending,start_time:"23:59",time_zone:(0,r.r)()}};else if(t.starting){var d,l;s=null!==(d=e.starting)&&void 0!==d&&d.start_time&&null!==(l=e.starting)&&void 0!==l&&l.time_zone?{starting:{type:"datetime",start_date:t.starting.start_date,start_time:e.starting.start_time,time_zone:e.starting.time_zone},ending:e.ending}:{starting:{type:"datetime",start_date:t.starting.start_date,start_time:"00:00",time_zone:(0,r.r)()},ending:e.ending}}else if(t.ending){var c,u;s=null!==(c=e.ending)&&void 0!==c&&c.start_time&&null!==(u=e.ending)&&void 0!==u&&u.time_zone?{ending:{type:"datetime",start_date:t.ending.start_date,start_time:e.ending.start_time,time_zone:e.ending.time_zone},starting:e.starting}:{ending:{type:"datetime",start_date:t.ending.start_date,start_time:"23:59",time_zone:(0,r.r)()},starting:e.starting}}else s={starting:e.starting,ending:e.ending};return s}function c(e){return e.starting&&e.ending?{starting:{type:"date",start_date:e.starting.start_date},ending:{type:"date",start_date:e.ending.start_date}}:e.starting?{starting:{type:"date",start_date:e.starting.start_date}}:e.ending?{ending:{type:"date",start_date:e.ending.start_date}}:{}}function u(e){if(e)return{type:"date",start_date:e.start_date}}function m(e){return`${e.actorType}:${e.actorId}`}function g(e){const t=e.split(":");if(2===t.length)return"bot"===t[0]?{actorId:t[1],actorType:"bot"}:"notion_user"===t[0]?{actorId:t[1],actorType:"notion_user"}:void 0}function p(e){return{starting:e.starting?{type:"date",start_date:e.starting.start_date}:void 0,ending:e.ending?{type:"date",start_date:e.ending.start_date}:void 0}}function h(e){return void 0===e.starting&&void 0===e.ending}},97832:(e,t,s)=>{s.d(t,{Z:()=>b});s(67294);var i=s(480),n=s(24405),r=s(8848),a=s(10020),o=s(72126),d=s(90965),l=s(82990),c=s(5366),u=s(7512),m=s(50906),g=s(86080),p=s(38755),h=s(80444),f=s(92083),S=s(11066),v=s(63296),y=s(44071),x=s(55422),M=s(85893);const b=function(e){var t;window.__c={n:"AccountDeletion"};const s=(0,i.O7)(),{device:b}=s,w=(0,n.yK)((e=>({icon:{width:20,height:20,fill:e.lightIconColor}})),[]),j=Boolean(null===(t=e.userEmailDomainSettings)||void 0===t?void 0:t.isDomainVerified),C=j?(0,M.jsx)(c.FormattedMessage,{defaultMessage:"Your organization has disabled account deletion.",id:"profileSettings.accountDeleteButton.disabledForManagedUser.tooltip"}):null,k=async()=>{const{currentUserStore:e,currentUserRootStore:t}=h.default.state;if(!e||!t)return;if(!e.isDefined())return;const i=o.oA(t.getSpaceViewStores().map((e=>e.getSpaceStore()))).filter((t=>!(0,d.XO)(e.id,t.getModel(),t.getRole()))),n=o.oA(i.map((e=>({id:e.id,name:(0,p.rn)(s,e)}))));m.qPY(s);await g.b({width:420,message:(0,M.jsxs)("div",{children:[(0,M.jsxs)("div",{children:[(0,M.jsx)(c.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.warning",defaultMessage:"This action cannot be undone. This will permanently delete your entire account. All private workspaces will be deleted, and you will be removed from all shared workspaces."}),n.length>0&&(0,M.jsx)("ul",{style:{padding:0},children:n.map((e=>{let{id:t,name:s}=e;return(0,M.jsx)("li",{style:{marginTop:6,color:r.ZP.red,fontWeight:l.Z.fontWeight.medium,listStyle:"none"},children:s},t)}))})," ",(0,M.jsx)(c.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.prompt",defaultMessage:"Please type in your email to confirm."})]}),(0,M.jsx)(y.Z,{style:{marginTop:16},translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente su cuenta completa. Se eliminarán todas las áreas de trabajo privadas y se eliminará de todas las áreas de trabajo compartidas. Por favor, escriba su correo electrónico para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит всю вашу учетную запись. Все частные рабочие области будут удалены, и вы будете удалены из всех общих рабочих областей. Пожалуйста, введите ваш адрес электронной почты для подтверждения.",zh:"此操作无法撤消。 这将永久删除您的整个帐户。 将删除所有私有工作空间，您将从所有共享工作空间中删除。 请输入您的电子邮箱进行确认。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird Ihr gesamtes Konto dauerhaft gelöscht. Alle privaten Arbeitsbereiche werden gelöscht und Sie werden aus allen freigegebenen Arbeitsbereichen entfernt. Bitte geben Sie Ihre E-Mail-Adresse zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement votre compte en entier. Tous les espaces de travail privés seront supprimés et vous serez supprimé de tous les espaces de travail partagés. Veuillez taper votre email pour confirmer.",ja:"この操作を元に戻すことはできません。 これによりアカウント全体が完全に削除されます。 すべてのプライベートワークスペースが削除され、あなたはすべての共有ワークスペースから削除されます。 確認のためにメールアドレスを入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'intero account. Tutti gli spazi di lavoro privati verranno eliminati e verranno rimossi da tutti gli spazi di lavoro condivisi. Inserisci la tua email per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente sua conta inteira. Todos os espaços de trabalho privados serão excluídos e você será removido de todos os espaços de trabalho compartilhados. Por favor, digite o seu email para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt uw gehele account permanent verwijderd. Alle privéwerkruimten worden verwijderd en u wordt verwijderd uit alle gedeelde werkruimten. Voer je e-mailadres in om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie całego konta. Wszystkie prywatne obszary robocze zostaną usunięte, a użytkownik zostanie usunięty ze wszystkich współużytkowanych obszarów roboczych. Wpisz swój e-mail, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort hela ditt konto permanent. Alla privata arbetsytor kommer att raderas, och du kommer att tas bort från alla delade arbetsytor. Vänligen skriv in din email för att bekräfta.",uk:"Цю дію не можна скасувати. Таким чином буде видалено весь обліковий запис назавжди. Всі приватні робочі області будуть видалені, і ви будете видалені з усіх спільних робочих областей. Будь ласка, введіть електронний лист для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette hele kontoen din. Alle private arbeidsområder blir slettet, og du vil bli fjernet fra alle delte arbeidsområder. Vennligst skriv inn din epost for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu işlem hesabınızın tamamını kalıcı olarak siler. Tüm özel çalışma alanları silinecek ve paylaşılan tüm çalışma alanlarından kaldırılacaksınız. Lütfen onaylamak için e-postanızı yazın.",cs:"Tuto akci nelze vrátit zpět. Tím bude trvale smazán celý váš účet. Všechny soukromé pracovní prostory budou smazány a budete ze všech sdílených pracovních prostor odstraněni. Pro potvrzení zadejte svůj e-mail.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn toàn bộ tài khoản của bạn. Tất cả các không gian làm việc riêng tư sẽ bị xóa và bạn sẽ bị xóa khỏi tất cả các không gian làm việc chung. Vui lòng nhập email của bạn để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette hele din konto. Alle private arbejdsområder slettes, og du vil blive fjernet fra alle delte arbejdsområder. Indtast venligst din email for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a teljes fiókot. Minden privát munkaterület törlődik, és eltávolításra kerül minden megosztott munkaterületről. Kérjük, írja be e-mail címét, hogy megerősítse.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي الإجراء إلى حذف حسابك بالكامل. سيتم أيضا حذف جميع مساحات العمل الخاصة ، وستتم إزالتك من جميع مساحات العمل المشتركة. يرجى كتابة البريد الإلكتروني الخاص بك للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบบัญชีทั้งหมดของคุณอย่างถาวร พื้นที่ทำงานส่วนตัวทั้งหมดจะถูกลบและคุณจะถูกลบออกจากพื้นที่ทำงานที่ใช้ร่วมกันทั้งหมด กรุณาพิมพ์อีเมลของคุณเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את כל החשבון שלך. כל סביבות העבודה הפרטיות יימחקו, ותוסר מכל סביבות העבודה המשותפות. הקלד את האימייל שלך כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa koko tilin pysyvästi. Kaikki yksityiset työtilat poistetaan ja poistetaan kaikista jaetuista työtiloista. Vahvistaaksesi kirjoita sähköpostiosoitteesi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus seluruh akun Anda. Semua ruang kerja pribadi akan dihapus, dan Anda akan dihapus dari semua ruang kerja bersama. Ketikkan email Anda untuk mengonfirmasi."}})]}),acceptLabel:0===n.length?(0,M.jsx)(c.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountButton.label",defaultMessage:"Permanently delete account"}):s.device.isMobile?(0,M.jsx)(c.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButtonMobile.label",defaultMessage:"{numberOfWorkspaces, plural, one {Delete account & 1 workspace} other {Delete account & {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:n.length}}):(0,M.jsx)(c.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButton.label",defaultMessage:"{numberOfWorkspaces, plural, one {Permanently delete account and 1 workspace} other {Permanently delete account and {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:n.length}}),requiredInputValue:e.getEmail()})&&(m.psf(s),f.Z.reset(),u.t(s))};return(0,M.jsx)(x.Z,{type:"custom",useFlexboxStyle:!0,isMobile:b.isMobile,title:(0,M.jsx)(c.FormattedMessage,{id:"profileSettings.accountDeletionSetting.title",defaultMessage:"Delete my account"}),caption:(0,M.jsx)(c.FormattedMessage,{id:"manageActiveSessions.accountDeletionSetting.label",defaultMessage:"Permanently delete the account and remove access from all workspaces."}),isCritical:!0,customButton:b.isMobile?(0,M.jsx)("div",{style:{marginTop:12},children:(0,M.jsx)(v.Z,{isLarge:!0,isRed:!0,onClick:k,disabled:j,disabledFeedback:j,children:(0,M.jsx)(c.FormattedMessage,{id:"profileSettings.deleteMyAccount.button.label",defaultMessage:"Delete my account"})})}):(0,M.jsx)(S.Z,{style:{borderRadius:"0.25em"},onClick:k,disabled:j,disabledFeedback:j,children:(0,a.C)(w.icon)}),disabled:j,tooltipLabel:C})}},86125:(e,t,s)=>{s.d(t,{Z:()=>a});s(67294);var i=s(5366),n=s(74136),r=s(85893);function a(e){return(0,r.jsx)(n.Z,{...e,children:"membership_admin"===e.role?(0,r.jsx)(i.FormattedMessage,{id:"spacePermissionsSettings.user.membershipAdmin",defaultMessage:"Membership admin"}):(0,r.jsx)(i.FormattedMessage,{id:"spacePermissionsSettings.user.workspaceOwner",defaultMessage:"Workspace owner"})})}},79092:(e,t,s)=>{s.d(t,{Z:()=>c});s(67294);var i=s(83355),n=s(5366),r=s(37181),a=s(80444),o=s(55422),d=s(85893);class l extends i.Z{constructor(){super(...arguments),this.handleStartOfWeekToggle=()=>{1===this.getStartDayOfWeek()?r.rx(this.environment):r.Zf(this.environment)}}renderComponent(){const{device:e}=this.environment;return(0,d.jsx)(o.Z,{isMobile:e.isMobile,title:(0,d.jsx)(n.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"}),caption:(0,d.jsx)(n.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}),type:"toggle",isOn:1===this.getStartDayOfWeek(),onToggle:this.handleStartOfWeekToggle})}getStartDayOfWeek(){const{currentUserSettingsStore:e}=a.default.state;if(e){const t=e.getSettings();if(t)return t.start_day_of_week}}}l.displayName="CalendarSettings";const c=l},21752:(e,t,s)=>{s.d(t,{K:()=>f,Z:()=>S});s(67294);var i=s(86628),n=s(54368),r=s(77420),a=s(19889),o=s(97880),d=s(5366),l=s(86125),c=s(88198),u=s(70301),m=s(64369),g=s(45653),p=s(85893);function h(e){const{actorStore:t,avatar:s,isLarge:i}=e,d=i?32:28;return t?t.table===r.cZ?(0,p.jsx)(u.Z,{botStore:t,size:d}):t.table===a.KJ?(0,p.jsx)(g.Z,{userStore:t,size:d}):t.table===n.y?(0,p.jsx)(g.Z,{userStore:void 0,size:d}):void(0,o.t1)(t):s?(0,p.jsx)(g.Z,{avatar:s,size:d}):(0,p.jsx)(g.Z,{userStore:void 0,size:d})}function f(e){return"membership_admin"===e?"membership_admin":"editor"===e||"admin"===e?"admin":"none"===e||"guest"===e?"guest":"team_level_guest"===e?"team_level_guest":void("member"!==e&&"read_and_write"!==e&&"no_access"!==e&&"not_in_space"!==e&&e&&(0,o.t1)(e))}const S=function(e){window.__c={n:"CellMemberAvatar"};const t=(0,d.useIntl)(),{actorStore:s,avatar:n,containerStyle:r,id:a,spaceRole:o,avatarBadge:u,caption:g,isLarge:f}=e,S="admin"===o||"membership_admin"===o,v="guest"===o||"team_level_guest"===o,y=(0,i.VK)((()=>s?s.getDisplayName(t):null==n?void 0:n.name),[s,n,t]),x=(0,i.VK)((()=>Boolean(g)?g:s?s.getDetail():null==n?void 0:n.email),[g,s,n]);return(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",maxWidth:f?"unset":300,marginLeft:f?2:0,...r},children:[(0,p.jsxs)("div",{style:{position:"relative",...!f&&{height:28,width:28}},children:[(0,p.jsx)(h,{actorStore:s,avatar:n,isLarge:f}),u]}),(0,p.jsxs)("div",{style:{minWidth:0,marginLeft:f?10:6,marginRight:f?10:6},children:[(0,p.jsxs)("div",{id:a,style:{display:"flex",gap:4},children:[(0,p.jsx)(m.Z,{className:"notranslate",children:y}),S&&(0,p.jsx)(l.Z,{role:o}),v&&(0,p.jsx)(c.b,{labelType:o})]}),(0,p.jsx)(m.Z,{isSmall:!0,style:{display:"flex"},children:(0,p.jsx)(m.Z,{isSmall:!0,children:x})})]})]})}},67729:(e,t,s)=>{s.d(t,{Z:()=>f,h:()=>p});s(67294);var i=s(480),n=s(24405),r=s(86658),a=s(42853),o=s(5366),d=s(50950),l=s(12955),c=s(10182),u=s(89728),m=s(55422),g=s(85893);function p(e){return(0,l.canSetCookie)(e)&&(0,l.canShowCookieUi)(e)}function h(){window.__c={n:"CookieSettingsButton"};const e=(0,n.Fg)();return(0,g.jsx)(c.Z,{hasDismissButton:!1,renderOrigin:t=>(0,g.jsxs)(u.Z,{style:{paddingLeft:8,paddingRight:8,height:32},...t,children:[(0,g.jsx)(o.FormattedMessage,{id:"cookieSelector.label.customize",defaultMessage:"Customize"}),(0,a.i)({width:10,marginLeft:4,fill:e.lightIconColor})]})})}const f=function(e){let{isMobile:t}=e;return window.__c={n:"CookieSettings"},p((0,i.O7)())?(0,g.jsx)(m.Z,{isMobile:t,title:(0,g.jsx)(o.FormattedMessage,{...r.ze.cookieSettingsLabel}),caption:(0,r.Fd)(d.Tz,"settings"),type:"custom",customButton:(0,g.jsx)(h,{})}):null}},79603:(e,t,s)=>{s.d(t,{Pp:()=>O,Ub:()=>V,mS:()=>D});var i=s(67294),n=s(480),r=s(86628),a=s(24405),o=s(8848),d=s(33728),l=s(12174),c=s(36591),u=s(42853),m=s(72126),g=s(82990),p=s(5366),h=s(57400),f=(s(95477),s(87279)),S=s(80444),v=s(77080),y=s(7339),x=s(52275),M=s(31945),b=s(36488),w=s(74194),j=s(68785),C=s(78140),k=s(32163),I=s(63296),T=s(74136),P=s(89728),F=s(72495),_=s(64369),Z=s(27386),A=s(23189),R=s(40235),B=s(85893);const E="janus";function D(){var e;const t=null===(e=S.default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return"makenotion.com"===(0,d.Gd)(t??"")||"on"===v.default.getGroup(E)}function L(e){return[...v.default.getExperiments(),...e?m.jj(l.l4).map((e=>({experimentId:e,experimentVersion:1,group:v.default.getEligibleGroup({experimentId:e,defaultGroup:l.nb,disableExposureLogging:!0}),groups:[...(0,l._n)(e),"control",l.nb],fromStatsig:!0,statsigOption:"EXPERIMENT"}))):[],...e?m.jj(l.b2).map((e=>({experimentId:e,experimentVersion:1,group:v.default.checkGate(e,!0).toString(),groups:["true","false"],fromStatsig:!0,statsigOption:"FEATUREGATE"}))):[]]}function V(e){window.__c={n:"ExperimentSettings"};const t=(0,n.O7)(),[s,d]=(0,i.useState)(""),[S,b]=(0,i.useState)(void 0),Z=v.default.isStatsigEnabled(),D=(0,r.VK)((()=>S?[]:L(Z).filter((e=>e.experimentId!==E&&(!s||0===s.length||e.experimentId.includes(s)))).sort(((e,t)=>e.experimentId>t.experimentId?1:-1))),[s,Z,S]),{device:V}=t,O=V.isMobile,U=(0,a.yK)((e=>({containerStyle:{width:"100%"},headerContainerStyle:{display:"flex",alignItems:"flex-start",cursor:"pointer",width:"100%",flexWrap:"wrap"},headerLabelStyle:{marginTop:2,marginBottom:12,padding:2,flex:1},filterContainerStyle:{paddingBottom:"12px"},resetButtonContainerStyle:{paddingBottom:"12px"},tableExperimentIDHeaderStyle:{width:"auto"},tableExperimentGroupHeaderStyle:{width:"auto",textAlign:"right"},experimentInfo:{display:"flex",flexDirection:O?"column":"row"},experimentId:{marginRight:5,maxWidth:O?215:300,...g.Z.textOverflowStyle},experimentGroupContainerStyle:{width:"100%",display:"flex",justifyContent:"flex-end"},experimentGroupButtonStyle:{overflowX:"hidden",justifyContent:"left"},experimentGroup:{maxWidth:O?90:300,...g.Z.textOverflowStyle},experimentGroupButtonChevronStyle:{width:10,marginLeft:4,fill:e.lightIconColor},experimentGroupButtonCheckContainerStyle:{width:O?16:14}})),[O]);return(0,B.jsxs)("div",{style:U.containerStyle,children:[(0,B.jsx)(A.Z,{large:!0,style:{fontSize:16,fontWeight:500},children:"Experiments"}),(0,B.jsxs)("div",{style:U.headerContainerStyle,children:[(0,B.jsx)(_.Z,{isSmall:!0,isMultiline:!0,style:U.headerLabelStyle,children:"Toggle experiments for yourself. This only works for experiments that are based on userId or deviceId. For debugging statsig experiments in production, or statsig experiments on the server-side, you should go to console.statsig.com."}),(0,B.jsx)("div",{style:U.resetButtonContainerStyle,children:(0,B.jsx)(I.Z,{isSmall:!0,onClick:()=>{b({reset:!0}),y.C.removeAllLocalOverrides(),h.Of(t).then((()=>{b(void 0)}))},children:null!=S&&S.reset?(0,B.jsx)(j.Z,{}):"Reset to defaults"})})]}),(0,B.jsx)("div",{style:U.filterContainerStyle,children:(0,B.jsx)(w.Z,{placeholder:"Filter by experiment ID or Feature Gate Name...",value:s,showClearButton:!0,autoCapitalize:"off",autoComplete:"off",onChange:e=>{d(e.target.value)}})}),(0,B.jsx)(R.Z,{columns:[{key:"name",header:"Experiment ID or Feature Gate Name",style:U.tableExperimentIDHeaderStyle},{key:"group",header:"Group",style:U.tableExperimentGroupHeaderStyle}],rows:D.map((e=>{const s=e.group,n=Z&&"fromStatsig"in e&&e.fromStatsig,r=n&&"FEATUREGATE"===e.statsigOption,a=n&&"EXPERIMENT"===e.statsigOption,d=n?`statsig:${e.experimentId}`:e.experimentId;return{key:d,columns:[(0,B.jsxs)("div",{style:U.experimentInfo,children:[(0,B.jsx)("span",{style:U.experimentId,children:e.experimentId}),n&&(0,B.jsx)(T.Z,{children:`Statsig ${e.statsigOption}`})]},`${d}-title`),(0,B.jsx)("div",{style:U.experimentGroupContainerStyle,children:(0,B.jsx)(M.ZP,{popupType:V.isMobile?M.Z4.SlideUp:M.Z4.Popup,renderOrigin:t=>(0,i.createElement)(P.Z,{...t,key:e.experimentId,style:U.experimentGroupButtonStyle},(0,B.jsx)("span",{style:U.experimentGroup,children:s??"unknown"}),(0,u.i)(U.experimentGroupButtonChevronStyle)),render:i=>{let d;d=V.isMobile?{menuType:f.og.Modal,title:e.experimentId,right:(0,B.jsx)(p.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:i.close}:{menuType:f.og.Popup,width:250};const u=e.groups.map((d=>({key:d,action:s=>{let n;n=a?new Promise((t=>{y.C.updateLocalOverrideConfig(e.experimentId,d),t(d)})):r?new Promise((t=>{y.C.updateLocalOverrideGate(e.experimentId,d),t(d)})):h.BX(t,e.experimentId,d),b({experimentId:e.experimentId,group:d}),n.then((()=>{b(void 0),m.gw((()=>{i.close()}),1e3)}))},render:(t,i)=>{const r=n&&d===l.nb;return(0,B.jsx)(x.Z,{...t,title:d,right:S&&S.experimentId===e.experimentId&&S.group===d?(0,B.jsx)("div",{style:U.experimentGroupButtonCheckContainerStyle,children:(0,B.jsx)(j.Z,{})}):d!==s||S?void 0:(0,B.jsx)("div",{style:U.experimentGroupButtonCheckContainerStyle,children:(0,c.e)()}),disabled:r,style:{...r&&{color:o.ZP.mediumTextColor}}})}})));return(0,B.jsx)(C.Z,{...d,children:(0,B.jsx)(k.Z,{type:k.i.Vertical,initialFocus:void 0,sections:[{key:e.experimentId,render:e=>(0,B.jsx)(F.Z,{...e}),items:u}]})})}})},`${d}-options`)]}}))})]})}function O(e){window.__c={n:"ExperimentSettingsSection"};const t=(0,a.yK)((e=>({headerLabelStyle:{marginTop:2,width:"80%"},PlainButtonStyle:{marginTop:12,marginBottom:4}})),[]);return(0,B.jsxs)("div",{children:[(0,B.jsx)(A.Z,{children:"Experiments"}),(0,B.jsx)(_.Z,{isSmall:!0,isMultiline:!0,style:t.headerLabelStyle,children:"Locally toggle experiments."}),(0,B.jsx)(M.ZP,{popupType:M.Z4.SlideUp,renderOrigin:e=>(0,B.jsx)(I.Z,{...e,isLarge:!0,style:t.PlainButtonStyle,children:"View Experiments"}),render:e=>{const t={menuType:f.og.Modal,whiteBackground:!0,title:"Experiments",right:(0,B.jsx)(p.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:e.close};return(0,B.jsx)(b.Z,{capture:!0,allowEsc:!0,render:()=>(0,B.jsx)(C.Z,{...t,children:(0,B.jsx)(Z.Z,{disableScroller:!0,children:(0,B.jsx)(V,{})})})})}})]})}},85215:(e,t,s)=>{s.d(t,{l:()=>u});s(67294);var i=s(86628),n=s(5366),r=s(16639),a=s(80444),o=s(52275),d=s(12793),l=s(31278),c=s(85893);function u(e){window.__c={n:"GroupMenuItem"};const{group:t,menuListItemProps:s}=e,u=(0,i.VK)((()=>{const e=a.default.state.currentSpaceStore;if(e&&t.icon)return{pointer:{table:e.table,id:e.id},icon:t.icon}}),[t]),m=(0,n.useIntl)(),g=(0,r.kF)({intl:m,group:t});return(0,c.jsx)(o.Z,{...s,icon:u?(0,c.jsx)(l.Z,{disabled:!0,size:22,icon:u,isEmptyPage:!1,title:g}):(0,c.jsx)(d.Z,{size:22}),title:g})}},46247:(e,t,s)=>{s.d(t,{Z:()=>c});s(67294);var i=s(83355),n=s(84169),r=s(50906),a=s(64921),o=s(16354),d=s(85893);class l extends i.Z{renderComponent(){return(0,d.jsx)(o.Z,{style:{display:"flex",alignSelf:"stretch",width:36,...this.props.isRight?{marginRight:-8}:{marginLeft:-8}},external:!0,href:this.props.href,onClick:()=>r.Fsx(this.environment,{from:this.props.analyticsFrom}),children:(0,d.jsx)(a.Z,{mobileFeedback:!0,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,n.m)({width:18,marginTop:1,fill:this.theme.lightIconColor})})})}}l.displayName="HelpIconButtonMobile";const c=l},44071:(e,t,s)=>{s.d(t,{Z:()=>d});s(67294);var i=s(83355);function n(){return(navigator.languages?navigator.languages.map((e=>e.toLowerCase())):navigator.language?[navigator.language.toLowerCase()]:navigator.userLanguage?[navigator.userLanguage.toLowerCase()]:[]).map((e=>e.split("-")[0]))}const r=["ar","az","he","fa","ur"];var a=s(85893);class o extends i.Z{renderComponent(){return this.renderTranslatedText()}renderTranslatedText(){const{translations:e}=this.props,t=n();for(const s of t){const t=e[s];if(t)return(0,a.jsx)("div",{style:this.getTextStyle(s),children:t})}}getTextStyle(e){return r.includes(e)?{direction:"rtl",...this.props.style}:{...this.props.style}}}o.displayName="LocaleText";const d=o},905:(e,t,s)=>{s.d(t,{Z:()=>a});s(67294);var i=s(5366),n=s(97880),r=s(85893);function a(e){let{target:t,isProductNotifEmailImprovementsEnabled:s}=e;switch(t){case"notify_mobile":return(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app"});case"notify_desktop":return(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately on your desktop app"});case"notify_email":return s?(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.emailNotificationSettings.improvedDescription",defaultMessage:"Receive emails when you get comments, mentions, page invites, reminders, access requests, and property changes"}):(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.emailNotificationSettings.description2",defaultMessage:"Receive email updates, including mentions and comment replies"});case"notify_email_always":return s?(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.emailAlwaysNotificationSettings.improvedDescription",defaultMessage:"Receive emails about activity in your workspace, even when you're active on the app"}):(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.emailAlwaysNotificationSettings.description",defaultMessage:"Receive updates by email, even when you're active on the app"});case"notify_slack":return(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.slackNotificationsSettings.default.description",defaultMessage:"Receive notifications in your Slack workspace when you're mentioned in a page, database property, or comment"});case"notify_email_digest":return(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.emailDigestNotificationsSettings.default.description",defaultMessage:"Receive email digests every 8 hours for changes to pages you’re subscribed to"});case"marketing_emails":return(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.marketingEmails.description",defaultMessage:"Receive occasional emails about product launches and new features from Notion"});default:(0,n.t1)(t)}}},79080:(e,t,s)=>{s.d(t,{Z:()=>a});s(67294);var i=s(5366),n=s(97880),r=s(85893);function a(e){let{target:t,isProductNotifEmailImprovementsEnabled:s}=e;switch(t){case"notify_mobile":return(0,r.jsx)(i.FormattedMessage,{defaultMessage:"Mobile push notifications",id:"notificationSettings.mobilePushNotificationSettings.title"});case"notify_desktop":return(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.desktopNotificationSettings.title",defaultMessage:"Desktop push notifications"});case"notify_email":return s?(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.productNotifEmails.title",defaultMessage:"Activity in your workspace"}):(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.emailNotificationSettings.title",defaultMessage:"Email notifications"});case"notify_email_always":return(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"});case"notify_slack":return(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.slackNotificationSettings.title",defaultMessage:"Slack notifications"});case"notify_email_digest":return(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.emailDigestNotificationSettings.title",defaultMessage:"Email digests"});case"marketing_emails":return(0,r.jsx)(i.FormattedMessage,{id:"notificationSettings.marketingEmails.title",defaultMessage:"Announcements and update emails"});default:(0,n.t1)(t)}}},15311:(e,t,s)=>{s.d(t,{Z:()=>I});var i=s(67294),n=s(480),r=s(86628),a=s(5366),o=s(97880),d=s(98104),l=s(3924),c=s(17652),u=s(18514),m=s(28187),g=s(39675),p=s(80444),h=s(88632),f=s(67729),S=s(61519),v=s(64369),y=s(74523),x=s(21291),M=s(27386),b=s(23189),w=s(51124),j=s(97876),C=s(16347),k=s(85893);const I=(0,l.M)((function(e){let{isMobile:t,passwordRequestStore:s,userEmailDomainSettings:l}=e;window.__c={n:"NotificationsAndPersonalSettings"};const{isElectron:I,isPhone:T,isIOS:P}=(0,n.Fy)(),F=(0,n.O7)(),_=(0,r.VK)((()=>h.Z.state.online),[]),Z=(0,r.VK)((()=>{var e;const s=(null===(e=p.default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1,i=(0,m.kC)(),n=(0,c.r)();return function(e){const{isMobile:t,isElectron:s,showNotifyEmailAlwaysSetting:i,showSlackNotificationSetting:n,emailImprovementsExperimentEnabled:r}=e;return[{key:"notify_mobile",renderSettingsItem:()=>(0,k.jsx)(x.A,{target:"notify_mobile"})},!t&&s?{key:"notify_desktop",renderSettingsItem:()=>(0,k.jsx)(x.A,{target:"notify_desktop"})}:void 0,{key:"notify_email",renderSettingsItem:()=>(0,k.jsx)(x.A,{target:"notify_email"})},i?{key:"notify_email_always",renderSettingsItem:()=>(0,k.jsx)(x.A,{target:"notify_email_always"})}:void 0,r?{key:"notify_email_digest",renderSettingsItem:()=>(0,k.jsx)(x.A,{target:"notify_email_digest"})}:void 0,n?{key:"notify_slack",renderSettingsItem:()=>(0,k.jsx)(j.O,{target:"notify_slack"})}:void 0,r?{key:"marketing_emails",renderSettingsItem:()=>(0,k.jsx)(x.A,{target:"marketing_emails"})}:void 0].filter(o.$K)}({isMobile:t,isElectron:I,showNotifyEmailAlwaysSetting:s,showSlackNotificationSetting:i,emailImprovementsExperimentEnabled:n})}),[t,I]),A=(0,r.VK)((()=>t?(0,g.E)({isPhone:T,isIOS:P,passwordRequestStore:s,userEmailDomainSettings:l}):(0,g.Z)({environment:F})),[F,t,T,P,s,l]),R=(0,r.VK)((()=>[(0,f.h)(F)?{key:"cookies",renderSettingsItem:()=>(0,k.jsx)(f.Z,{isMobile:t})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,k.jsx)(C.H,{isMobile:t})}].filter(o.$K)),[F,t]),{paddingBottomCSS:B}=(0,r.VK)((()=>F.WindowSizeStore.state),[F]);return(0,i.useEffect)((()=>{d.ZH(F)}),[F]),_?(0,k.jsxs)(M.Z,{disableScroller:t,children:[(0,k.jsx)(b.Z,{large:!t,divider:"full",children:(0,k.jsx)(a.FormattedMessage,{id:"notificationAndPersonalSettings.notificationSection.title",defaultMessage:"My notifications"})}),(0,k.jsx)(w.O,{items:Z}),(0,k.jsx)(S.Z,{size:48,isHidden:!0}),(0,k.jsx)(b.Z,{large:!t,divider:"full",children:(0,k.jsx)(a.FormattedMessage,{id:"notificationAndPersonalSettings.settingsSection.title",defaultMessage:"My settings"})}),(0,k.jsx)(w.O,{items:A}),(0,k.jsx)(S.Z,{size:48,isHidden:!0}),(0,k.jsx)(b.Z,{large:!t,divider:"full",children:(0,k.jsx)(a.FormattedMessage,{id:"notificationAndPersonalSettings.privacySection.title",defaultMessage:"Privacy"})}),(0,k.jsx)(w.O,{items:R}),(0,k.jsx)(S.Z,{size:48,isHidden:!1}),(0,k.jsx)("div",{style:{marginTop:4,marginBottom:t?B:void 0},children:(0,k.jsx)(y.Z,{title:(0,k.jsx)(a.FormattedMessage,{id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about notifications & settings"}),href:(0,u.UY)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]}):(0,k.jsx)(M.Z,{children:(0,k.jsx)(v.Z,{isSmall:!0,style:{textAlign:"center"},children:(0,k.jsx)(a.FormattedMessage,{defaultMessage:"Please go online to manage settings.",id:"notificationSettingsButton.goOnline.prompt"})})})}))},1548:(e,t,s)=>{s.d(t,{Z:()=>F});var i=s(67294),n=s(83355),r=s(8848),a=s(63874),o=s(29851),d=s(98519),l=s(96068),c=s(82990),u=s(5366),m=s(50906),g=s(54642),p=s(43250),h=s(33954),f=s(69503),S=s(61519),v=s(36488),y=s(74194),x=s(50506),M=s(64369),b=s(88175),w=s(75752),j=s(64898),C=s(24173),k=s(13490),I=s(55422),T=s(85893);class P extends n.Z{constructor(){super(...arguments),this.settingsStateMachine=void 0,this.handleChangePasswordClick=()=>{const{mfaStatus:e}=this.props;"on"===e?f.Z.setState({open:!0,verifyIdentity:!0,onCancel:()=>{var e;return null===(e=this.settingsStateMachine)||void 0===e?void 0:e.exit()}}):(m.Wbl(this.environment),f.Z.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}))},this.handleOldPasswordChange=e=>{(f.Z.isSetNewPasswordModal()||f.Z.isRemovePasswordModal())&&f.Z.setState({...f.Z.state,oldPassword:e.target.value,alert:void 0})},this.handleClearOldPassword=()=>{(f.Z.isSetNewPasswordModal()||f.Z.isRemovePasswordModal())&&f.Z.setState({...f.Z.state,oldPassword:"",alert:void 0})},this.handlePasswordChange=e=>{f.Z.isSetNewPasswordModal()&&f.Z.setState({...f.Z.state,password:e.target.value,alert:void 0})},this.handleClosePasswordModal=()=>{const{onCancel:e}=f.Z.state;f.Z.reset(),e&&e()},this.handleClearPassword=()=>{f.Z.isSetNewPasswordModal()&&f.Z.setState({...f.Z.state,password:"",repeatPassword:"",alert:void 0})},this.handleRepeatPasswordChange=e=>{f.Z.isSetNewPasswordModal()&&f.Z.setState({...f.Z.state,repeatPassword:e.target.value,alert:void 0})},this.handleClearRepeatPassword=()=>{f.Z.isSetNewPasswordModal()&&f.Z.setState({...f.Z.state,repeatPassword:"",alert:void 0})},this.handlePasswordBlur=()=>{if(f.Z.isSetNewPasswordModal()){const{password:e,repeatPassword:t}=f.Z.state;e&&t&&e!==t&&f.Z.setState({...f.Z.state,alert:this.props.intl.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})})}},this.handleSubmit=async()=>{if(!f.Z.isSetNewPasswordModal())return;const{oldPassword:e,password:t,repeatPassword:s}=f.Z.state,{hasPassword:i}=this.props,{intl:n}=this.props;let r;if(i&&!e)r=n.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(t){const e=(0,l.I)(t);e.success?s?t!==s&&(r=n.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):r=n.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):r=this.getPasswordErrorMessage(e.reason)}else r=n.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(r)return void f.Z.setState({...f.Z.state,alert:r});const a=await g.setPassword(this.environment,{oldPassword:e,newPassword:t});if("success"===a.type)this.props.onReloadSettings(),f.Z.setState({...f.Z.state,isSet:!0});else{const e=(0,h.wf)(this.props.intl,a);f.Z.setState({...f.Z.state,alert:e})}},this.handleShowRemovePasswordModalClick=()=>{f.Z.setState({open:!0,removePassword:!0,isSuccess:!1,oldPassword:""})},this.handleRemovePasswordClick=async()=>{if(!f.Z.isRemovePasswordModal())return;const{oldPassword:e}=f.Z.state;if(m.wrY(this.environment),!e)return void f.Z.setState({...f.Z.state,alert:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password."})});const t=await g.setPassword(this.environment,{oldPassword:e,clearPassword:!0});if("success"===t.type)this.props.onReloadSettings(),this.removePasswordSuccess();else{const e=(0,h.wf)(this.props.intl,t);f.Z.setState({...f.Z.state,alert:e||this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})})}},this.defaultErrorMessage=this.props.intl.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."})}willMountOrUpdate(e){if(super.willMountOrUpdate(e),"on"===e.mfaStatus&&void 0===this.settingsStateMachine){const e=new w.r(this.environment),t=new C.c;this.settingsStateMachine=new C.W(t,e)}}renderComponent(){const{device:e}=this.environment;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(I.Z,{type:"toggleToButton",isMobile:e.isMobile,title:(0,T.jsx)(u.FormattedMessage,{id:"profileSettings.accountSecuritySection.passwordSetting.label",defaultMessage:"Password"}),caption:this.renderPasswordDetails(),isOn:this.props.hasPassword,buttonLabel:(0,T.jsx)(u.FormattedMessage,{id:"passwordSetting.changePasswordButton.label",defaultMessage:"Change password"}),onClick:this.handleChangePasswordClick}),this.renderPasswordModal()]})}renderPasswordDetails(){return this.props.isError?(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}):this.props.samlEnforced?(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML Single Sign-on Provider."}):this.props.isEducationPlan?this.renderEducationPlanInfo():(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.setPassword.message",defaultMessage:"Set a permanent password to login to your account."})}renderPasswordModal(){const{open:e}=f.Z.state;return(0,T.jsx)(x.Z,{open:e,onDismiss:this.handleClosePasswordModal,className:p.BKn,preventHideChildrenWhileOpening:!0,render:()=>(0,T.jsx)(v.Z,{capture:!0,allowEsc:!0,render:()=>(0,T.jsxs)(i.Fragment,{children:[this.renderPasswordEdit(),this.renderPasswordUpdateComplete(),this.renderRemovePassword(),this.renderVerifyIdentity(),this.renderPasswordRemoved()]})})})}renderVerifyIdentity(){if(f.Z.isVerifyIdentityWithMfaModal()&&void 0!==this.settingsStateMachine)return this.settingsStateMachine.settingsConfirmIdentityForPasswordSetting(),(0,T.jsx)(j.Z,{settingsStateMachine:this.settingsStateMachine,onDismiss:this.handleClosePasswordModal,onStartSMS:()=>{},onStartTOTP:()=>{},onStartBackupCodes:()=>{}})}renderPasswordEdit(){const{isEducationPlan:e}=this.props;if(!f.Z.isSetNewPasswordModal())return;const{password:t,repeatPassword:s,oldPassword:i,alert:n}=f.Z.state,{hasPassword:r,email:a}=this.props,d=r?(0,T.jsx)(u.FormattedMessage,{id:"profileSettings.changePasswordModal.title",defaultMessage:"Change password"}):(0,T.jsx)(u.FormattedMessage,{id:"profileSettings.setPasswordModal.title",defaultMessage:"Set a password"}),l=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."}),e&&(0,T.jsxs)(T.Fragment,{children:[" ",this.renderEducationPlanInfo()]})]}),c=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(k.Z,{children:(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.newPasswordInput.label",defaultMessage:"Enter a new password"})}),(0,T.jsx)(y.Z,{type:"password",value:t,onChange:this.handlePasswordChange,showClearButton:!0,onClearButtonClick:this.handleClearPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.passwordModal.newPasswordInput.placeholder",defaultMessage:"New password"}),focusInitial:!r,onBlur:this.handlePasswordBlur,autoComplete:"new-password"}),(0,T.jsx)(S.Z,{size:10,isHidden:!0}),(0,T.jsx)(k.Z,{children:(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.changePasswordModal.confirmPasswordInput.label",defaultMessage:"Confirm your new password"})}),(0,T.jsx)(y.Z,{type:"password",value:s,onChange:this.handleRepeatPasswordChange,showClearButton:!0,onClearButtonClick:this.handleClearRepeatPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.passwordModal.confirmPasswordInput.placeholder",defaultMessage:"Confirm password"}),onBlur:this.handlePasswordBlur,autoComplete:"new-password"})]}),m=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(y.Z,{style:{display:"none"},type:"text",value:a,autoComplete:"username",disabled:!0}),(0,T.jsx)(k.Z,{children:(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.currentPasswordInput.label",defaultMessage:"Enter your current password"})}),(0,T.jsx)(y.Z,{type:"password",value:i,onChange:this.handleOldPasswordChange,showClearButton:!0,onClearButtonClick:this.handleClearOldPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.passwordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,T.jsx)(S.Z,{size:10,isHidden:!0}),c]}),g={text:r?(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.changePasswordButton.label",defaultMessage:"Change password"}):(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.setPasswordButton.label",defaultMessage:"Set a password"}),onClick:this.handleSubmit},p=[{text:(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.removePasswordButton.label",defaultMessage:"Remove password"}),onClick:this.handleShowRemovePasswordModalClick,type:"button",view:"plain"}];return(0,T.jsxs)(b.Z,{title:d,header:l,icon:(0,o.z)(this.getIconStyle()),onDismiss:this.handleClosePasswordModal,primaryAction:g,secondaryActions:this.canRemovePassword()?p:void 0,containerStyles:{width:350,padding:24},children:[r?m:c,(0,T.jsx)(M.Z,{isMultiline:!0,style:this.getAlertStyle(n),children:n})]})}renderPasswordUpdateComplete(){if(!f.Z.isPasswordSetModal())return;const{isEducationPlan:e}=this.props,{oldPassword:t}=f.Z.state,s=void 0===t?(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordUpdatedModal.passwordSetSuccessModal.title",defaultMessage:"Your password has been set"}):(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordUpdatedModal.passwordUpdatedModal.title",defaultMessage:"Your password has been saved"}),i=e?(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordUpdateSuccessModal.educationPlan.header",defaultMessage:"You'll be able to log in, even if you lose access to your school email address."}):(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordUpdateSuccessModal.header",defaultMessage:"We'll ask for this password when you log in to your account."});return(0,T.jsx)(b.Z,{title:s,header:i,icon:(0,d.k)(this.getIconStyle()),onDismiss:this.handleClosePasswordModal})}renderRemovePassword(){const{isEducationPlan:e,mfaStatus:t}=this.props;if(!f.Z.isRemovePasswordModal())return;const{oldPassword:s,alert:i}=f.Z.state,n=(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.title",defaultMessage:"Remove password for temporary login codes?"}),r=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.header",defaultMessage:"You'll receive a link and login code via email when you try to login."}),e&&(0,T.jsxs)(T.Fragment,{children:[" ",(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.educationPlanWarning.message",defaultMessage:"If you lose access to your school email, you'll be unable to log back into Notion."})]}),"on"===t&&(0,T.jsxs)(T.Fragment,{children:[" ",(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.removeMfaWarning.message",defaultMessage:"<boldtext>2-step verification will also be removed if you continue.</boldtext>",values:{boldtext:e=>(0,T.jsx)("span",{style:{fontWeight:c.Z.fontWeight.semibold},children:e})}})]})]}),o={text:(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.continueButton.label",defaultMessage:"Continue"}),onClick:this.handleRemovePasswordClick,isRed:!0},d=[{text:(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.keepUsingPasswordButton.label",defaultMessage:"Keep using password"}),onClick:this.handleClosePasswordModal,type:"button",view:"plain"}];return(0,T.jsxs)(b.Z,{title:n,header:r,icon:(0,a.L)(this.getIconStyle()),onDismiss:this.handleClosePasswordModal,primaryAction:o,secondaryActions:d,containerStyles:{width:350,padding:24},children:[(0,T.jsx)(k.Z,{hasMarginTop:!0,children:(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.passwordInput.label",defaultMessage:"Enter your current password"})}),(0,T.jsx)(y.Z,{type:"password",value:s,onChange:this.handleOldPasswordChange,showClearButton:!0,onClearButtonClick:this.handleClearOldPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,T.jsx)(M.Z,{isMultiline:!0,style:this.getAlertStyle(i),children:i})]})}renderPasswordRemoved(){if(!f.Z.isRemovePasswordSuccessModal())return;const e=(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordSuccessModal.title",defaultMessage:"Password removed"}),t=(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordSuccessModal.header",defaultMessage:"To log into your account, we’ll send you a temporary login code to your email."});return(0,T.jsx)(b.Z,{title:e,header:t,icon:(0,d.k)(this.getIconStyle()),onDismiss:this.handleClosePasswordModal})}renderEducationPlanInfo(){return(0,T.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you'll be able to log in using your password."})}getIconStyle(){return{width:27,height:27,fill:this.theme.regularIconColor}}getAlertStyle(e){return{display:e?"inherit":"none",marginTop:10,textAlign:"center",color:r.ZP.red,fontSize:c.Z.fontSize.UISmall.desktop}}removePasswordSuccess(){f.Z.isRemovePasswordModal()&&f.Z.setState({...f.Z.state,isSuccess:!0,oldPassword:"",alert:void 0})}getPasswordErrorMessage(e){const t=h.Ql[e.type];return t?this.props.intl.formatMessage(t):this.defaultErrorMessage}canRemovePassword(){const{isEducationPlan:e}=this.props,{hasPassword:t}=this.props;return!e&&t}}P.displayName="PasswordSettings";const F=(0,u.injectIntl)(P)},24145:(e,t,s)=>{s.d(t,{Z:()=>h});var i=s(67294),n=s(480),r=s(86628),a=s(5366),o=s(45101),d=s(65598),l=s(26781),c=s(4023),u=s(26388),m=s(91487),g=s(47082),p=s(85893);const h=function(e){window.__c={n:"PermissionsInviteInput"};const{origin:t,permissionsInviteStore:s,store:h,handleClickRemoveToken:f,handleInputChange:S,handleInputSubmit:v,defaultRoleForNonBot:y,isTeamsEnabled:x,right:M,focus:b,handleFocus:w}=e,j="share_menu"===t||"add_members"===t,C="add_members"===t,[k,I]=(0,r.AF)(s),T=(0,n.O7)(),{device:P}=T,F=(0,a.useIntl)(),{tokenQuery:_}=k,Z=(0,l.i)(h),A=k.inviteTargets.map((e=>{const t="newUser"===e.type?e.value.email:`${e.type}-${e.value.id}`,s=(0,o.OA)(e),n="newUser"===e.type||"existingUser"===e.type?e.value.email:void 0,r=s?Z:void 0,d={key:t,target:e,onClickRemove:f,role:k.inviteRole,shouldWrap:j,showInfoIcon:Boolean(r)};return j&&n?(0,p.jsx)(u.Z,{placement:c.u.Top,disableTooltip:C,renderTooltip:()=>s?r||(0,p.jsx)(a.FormattedMessage,{defaultMessage:"{email} will be invited as a guest",id:"ContextualInvite.permissions_invites.guest.tooltip",values:{email:n}}):n,render:s=>(0,i.createElement)("span",{...s,key:t},(0,p.jsx)(m.Z,{...d,backgroundColor:(0,o.gQ)(e)}))},t):(0,i.createElement)(m.Z,{...d,key:t})}));return(0,p.jsx)(g.Z,{focus:P.isMobile?void 0:b,focusInitial:P.isMobile,focusAfterAnimation:!0,onClick:()=>{P.isMobile||null==w||w()},format:g.Z.Format.Share,value:_,onChange:S,type:"email",tokens:A,disabled:!1,autoComplete:"off",placeholder:j?x?F.formatMessage({defaultMessage:"Add people, groups, or emails…",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithTeams"}):F.formatMessage({defaultMessage:"Add emails or people",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithoutBots"}):(0,d.Mm)(h)?F.formatMessage({id:"inviteUserModal.searchInput.placeholder",defaultMessage:"Search name or emails"}):F.formatMessage({id:"permissionsInvite.searchInput.placeholder",defaultMessage:"Search emails, names, or groups"}),onRemoveLastToken:()=>{const e={...k};e.inviteTargets=e.inviteTargets.slice(0,-1),0===e.inviteTargets.length&&(e.isInviteTargetsEmpty=!0,e.inviteRole=y),I(k)},right:M,inputFullWidth:!0,inputAndTokenWrapRightStyle:{paddingTop:T.device.isMobile?0:k.isInviteTargetsEmpty?5:6,paddingBottom:T.device.isMobile||j?0:4},onEmptySubmit:()=>v(),dontShowBorderBottom:P.isAndroid,showBorder:j,...j&&{style:{borderRadius:3,paddingTop:k.isInviteTargetsEmpty?3:0,paddingBottom:0,...b&&{background:"none"}}}})}},43579:(e,t,s)=>{s.d(t,{Z:()=>Z});s(57658);var i=s(67294),n=s(480),r=s(86628),a=s(24405),o=s(66897),d=s(33728),l=s(8843),c=s(5366),u=s(82990),m=s(7928),g=s(50906),p=s(95209),h=s(4708),f=s(45101),S=s(65598),v=s(29677),y=s(35057),x=s(52275),M=s(32163),b=s(43765),w=s(77137),j=s(72495),C=s(26388),k=s(85215),I=s(12276),T=s(97680),P=s(85893);const F=(0,c.defineMessages)({invited_page:{id:"PermissionsInviteSearchRequest.userTooltip.invited_page",defaultMessage:"{userNameAndEmail} is invited to this page already"},invited_space:{id:"PermissionsInviteSearchRequest.userTooltip.invited_space",defaultMessage:"{userNameAndEmail} is invited to this workspace already"},invited_team:{id:"PermissionsInviteSearchRequest.userTooltip.invited_team",defaultMessage:"{userNameAndEmail} is invited to this team already"},not_in_space:{id:"PermissionsInviteSearchRequest.userTooltip.admin",defaultMessage:"Click to invite {userNameAndEmail}"}});function _(e,t){return e.filter(((e,s)=>s<t))}const Z=function(e){window.__c={n:"PermissionsInviteSearchRequest"};const{store:t,shouldShowBots:s,shouldShowGroups:Z,sectionRenderLimit:A,membersOnly:R,hideUserTypeToken:B,disableInvitedUsers:E}=e,[D,L,V]=(0,r.AF)(e.permissionsInviteStore),O=(0,n.O7)(),{device:U}=O,G=(0,c.useIntl)(),{tokenQuery:N}=D,q=(0,i.useMemo)((()=>f.ZK({environment:{device:U}})),[U]),W=(0,a.yK)((e=>({roleBadge:{...q},invitedBadge:{...q,backgroundColor:e.defaultBadgeBackground}})),[q]),z=(0,r.VK)((()=>(0,h._6)(O)?"invitee-popup-closed":"invitee"),[O]),K={request:N,performRequest:e=>p.jL({query:e,sectionLimit:{userLimit:10,botLimit:s?10:0,groupLimit:Z?10:0,importContactLimit:0},membersOnly:R,environment:O,intl:G}),render:(e,s,i)=>{if(e)return(0,P.jsx)(I.l,{loading:!i,children:(0,P.jsx)(b.Z,{title:(0,P.jsx)(c.FormattedMessage,{id:"inviteUserModal.searchInput.errorMessage",defaultMessage:"Something went wrong"})})});const n=s&&{...s,importedContacts:(0,f.Bu)(s.inviteUsers,s.importedContacts)},r=n&&(null==N?void 0:N.length)>0,{inviteUsers:a,inviteGroups:p,importedContacts:h=[]}=r?n:(0,f.NN)({currentInviteActors:n,permissionsInviteStore:V,targetStore:t}),w=[..._(a,A),..._(h,10)].map(((e,s)=>{const i="newUser"===e.type?e.value.email:e.value.id,n=(0,f.fR)(e),a=Boolean(r&&(0,f.cm)({permissionsInviteStore:V,userTarget:e,targetStore:t}));return{key:i,render:s=>{const{tooltip:i,userTypeToken:r}=function(e){const{userTarget:t,targetStore:s,isInvited:i,userSpaceRole:n,styles:r,intl:a}=e,o="newUser"!==t.type&&t.value.name?`${t.value.name} (${t.value.email})`:t.value.email,d=n&&"not_in_space"!==n;if(i)return{tooltip:(0,S.Mm)(s)?a.formatMessage(F.invited_space,{userNameAndEmail:o}):(0,S.OY)(s)?a.formatMessage(F.invited_page,{userNameAndEmail:o}):a.formatMessage(F.invited_team,{userNameAndEmail:o}),userTypeToken:(0,P.jsx)("div",{style:{...r.invitedBadge},children:(0,P.jsx)(c.FormattedMessage,{id:"inviteUserModal.userRole.invitedBadge.label",defaultMessage:"Invited"})})};if(d){const e=f.Ji({role:n,intl:a,nameOrEmail:o});return{tooltip:e.tooltip,userTypeToken:(0,P.jsx)("div",{style:{...r.roleBadge},children:e.userRoleBadge})}}return{tooltip:a.formatMessage(F.not_in_space,{userNameAndEmail:o}),userTypeToken:void 0}}({userTarget:e,targetStore:t,userSpaceRole:n,isInvited:a,styles:W,intl:G});return"existingUser"===e.type?(0,P.jsx)(T.Z,{...s,actor:(0,o.dp)(e.value),right:B?void 0:r,tooltip:i,tooltipPlacement:C.Z.Placement.Left,disabled:E&&a}):(0,P.jsx)(C.Z,{placement:C.Z.Placement.Left,alignment:C.Z.Alignment.Start,textWrap:!0,render:t=>(0,P.jsx)(x.Z,{...s,...t,icon:(0,l.h)({width:24,height:24}),right:r,title:e.value.email.trim(),disabled:E&&a}),disableTooltip:!i,renderTooltip:()=>i})},action:()=>{if(a)return;if(!D.isInviteTargetsEmpty&&(0,v.ow)(D))return;const t={...e,..."existingUser"===e.type&&{spaceRole:n}};g.hEo(O,{subscription_tier:(0,y.zt)(),invite_token_query:N,selected_user_token:e,selected_user_token_rank:s,from:"permission_invite"}),V.setState({...D,inviteTargets:[...D.inviteTargets,t],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:z})}}})),R=_(p,A).map((e=>{const{value:t}=e;return{key:t.id,render:e=>(0,P.jsx)(k.l,{group:t,menuListItemProps:e}),action:()=>{!D.isInviteTargetsEmpty&&(0,v.ow)(D)||V.setState({...D,inviteTargets:[...D.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:z})}}})),L=[],U=D.isInviteTargetsEmpty||!(0,v.ow)(D);if(w.length>0&&U&&L.push({key:"user results",render:e=>(0,P.jsx)(I.l,{...e,loading:!i}),items:w}),Z&&R.length>0&&U&&L.push({key:"group results",render:e=>(0,P.jsx)(j.Z,{...e,title:(0,P.jsx)(c.FormattedMessage,{id:"inviteUserModal.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!i}),items:R}),0===L.length&&U){const e=(0,d.H3)(D.tokenQuery);if((0,d.oH)(e)){const n={type:"newUser",value:{email:e},source:"email"},r=(0,f.Nd)({target:n,permissionsInviteStore:V});if(!r)return;if(r)return(0,P.jsx)(I.l,{loading:!i,children:(0,P.jsx)(b.Z,{title:(0,P.jsx)(c.FormattedMessage,{id:"inviteUserModal.userAlreadyInvitedMessage",defaultMessage:"Already inviting {user}.",values:{user:(0,P.jsx)("span",{style:{fontWeight:u.Z.fontWeight.bold},children:(0,f.DF)({intl:G,target:r})})}})})});const a=(s&&s.inviteUsers||[]).find((t=>"existingUser"===t.type&&t.value.email===e));if(a&&"existingUser"===a.type&&(0,f.Zp)({store:t,target:a}))return(0,P.jsx)(I.l,{loading:!i,children:(0,P.jsx)(b.Z,{title:(0,P.jsx)(c.FormattedMessage,{id:"inviteUserModal.userAlreadyHasPermissionMessage",defaultMessage:"{user} already has permission.",values:{user:(0,P.jsx)("span",{style:{fontWeight:u.Z.fontWeight.bold},children:(0,m.Nz)(G,a.value)})}})})})}else{if(!D.tokenQuery)return(0,P.jsx)(I.l,{loading:!i,children:(0,P.jsx)(b.Z,{title:(0,P.jsx)(c.FormattedMessage,{id:"inviteUserModal.searchPersonDropdown.noSearchResultsMessage",defaultMessage:"Type or paste in emails above, separated by commas."})})});L.push({key:"user results",render:e=>(0,P.jsx)(I.l,{...e,loading:!i,title:(0,P.jsx)(c.FormattedMessage,{id:"inviteUserModal.searchDropdown.addPeople",defaultMessage:"Keep typing to invite email"})}),items:[{key:D.tokenQuery,render:e=>(0,P.jsx)(x.Z,{icon:(0,l.h)({width:24,height:24}),title:D.tokenQuery,...e}),action:()=>{}}]})}}return(0,P.jsx)(M.Z,{type:M.i.Vertical,initialFocus:N.length>0?0:void 0,sections:L})}};return(0,P.jsx)(w.Z,{...K})}},91487:(e,t,s)=>{s.d(t,{Z:()=>h});s(67294);var i=s(83355),n=s(15070),r=s(84619),a=s(44495),o=s(97880),d=s(7928),l=s(5366),c=s(16639),u=s(26388),m=s(85567),g=s(85893);class p extends i.Z{constructor(){super(...arguments),this.handleClickRemove=e=>{e.stopPropagation(),this.props.onClickRemove(this.props.target)}}renderComponent(){const{device:e}=this.environment;return(0,g.jsx)(m.Z,{showRemoveButton:!0,isSingle:!1,isStrikedThrough:this.props.isStrikedThrough,backgroundColor:this.props.backgroundColor,format:e.isMobile?r.l.Large:r.l.Medium,onClickRemove:this.handleClickRemove,disabled:this.props.disabled,disabledFeedback:!0,value:this.getTokenContent(),style:this.props.style,shouldWrap:this.props.shouldWrap})}withInfoIcon(e){return(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,a.D)({marginRight:4,width:14,height:14}),e]})}getTokenContent(){const{target:e,intl:t,role:s}=this.props;if("group"===e.type&&"owner"===s)return(0,g.jsx)(u.Z,{renderTooltip:()=>(0,g.jsx)(l.FormattedMessage,{id:"permissionInviteToken.groupRole.ownerAlert.tooltip",defaultMessage:"Groups cannot be added as teamspace owners."}),render:t=>(0,g.jsx)("div",{...t,children:this.withInfoIcon((0,c.kF)({intl:this.props.intl,group:e.value}))})});let i;switch(e.type){case"newUser":i=e.value.email.trim();break;case"existingUser":i=(0,d.Nz)(t,e.value);break;case"bot":i=(0,n.Mh)(e.value);break;case"group":i=(0,c.kF)({intl:this.props.intl,group:e.value});break;default:(0,o.t1)(e)}return this.props.showInfoIcon?this.withInfoIcon(i):i}}p.displayName="PermissionsInviteToken";const h=(0,l.injectIntl)(p)},21291:(e,t,s)=>{s.d(t,{A:()=>j});var i=s(67294),n=s(480),r=s(86628),a=s(33728),o=s(9999),d=s(5366),l=s(97880),c=s(50906),u=s(54642),m=s(9953),g=s(34602),p=s(97627),h=s(39699),f=s(17652),S=s(10929),v=s(80444),y=s(63296),x=s(905),M=s(79080),b=s(55422),w=s(85893);function j(e){let{target:t}=e;window.__c={n:"PushAndEmailNotificationSetting"};const s=(0,n.O7)(),j=(0,r.VK)((()=>v.default.state.currentSpaceViewStore),[]),C=(0,r.VK)((()=>(0,f.r)()),[]),k=(0,r.VK)((()=>{var e,s;switch(t){case"notify_mobile":case"notify_desktop":case"notify_email":case"notify_email_always":return(null==j||null===(e=j.getKeyStore(t))||void 0===e?void 0:e.getValue())||!1;case"notify_email_digest":return(null==j||null===(s=j.getSettingsStore())||void 0===s||null===(s=s.getKeyStore(t))||void 0===s?void 0:s.getValue())||!1;case"marketing_emails":case"notify_slack":return!1;default:(0,l.t1)(t)}}),[j,t]),I=(0,i.useCallback)((()=>{if(j){const e=!k;"notify_email_digest"===t?p.MA(s,e):h.createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,perform:s=>{m.sW({store:j,data:{[t]:e},transaction:s})}}),"notify_slack"!==t&&"marketing_emails"!==t&&c.Zh2(s,{is_on:e,target:t})}}),[s,j,k,t]),T=async()=>{const e=await u.getAuthorizedEmailPreferenceCenterLink(s,{});if(e&&"success"===e.type&&e.data.preferenceCenterLink)return c.MdY(s),g.navigateToExternalURL({environment:s,url:e.data.preferenceCenterLink});{const e=await(0,S.iF)(s),t=(0,a.t_)(e);return c.MdY(s),g.navigateToExternalURL({environment:s,url:t})}};return"marketing_emails"===t?(0,w.jsx)(b.Z,{type:"custom",isMobile:!0,title:(0,w.jsx)(M.Z,{target:t,isProductNotifEmailImprovementsEnabled:C}),caption:(0,w.jsx)(x.Z,{target:t,isProductNotifEmailImprovementsEnabled:C}),customButton:(0,w.jsx)(y.Z,{isLarge:!0,onClick:T,icon:o.J,children:(0,w.jsx)(d.FormattedMessage,{id:"notificationSettings.marketingEmails.manageSettingsButton",defaultMessage:"Manage settings"})}),disableSettingsItemClick:!0}):(0,w.jsx)(b.Z,{isMobile:!0,title:(0,w.jsx)(M.Z,{target:t,isProductNotifEmailImprovementsEnabled:C}),caption:(0,w.jsx)(x.Z,{target:t,isProductNotifEmailImprovementsEnabled:C}),type:"toggle",isOn:k,onToggle:I})}},51124:(e,t,s)=>{s.d(t,{O:()=>l});var i=s(67294),n=s(480),r=s(76725),a=s(23570),o=s(61519),d=s(85893);function l(e){window.__c={n:"SettingsItems"};const{items:t}=e,{isMobile:s}=(0,n.Fy)();return(0,d.jsx)(d.Fragment,{children:(0,r.Z)(t.map((e=>{let{key:t,renderSettingsItem:s}=e;return(0,d.jsx)(i.Fragment,{children:s()},t)})),(e=>(0,d.jsx)(o.Z,{size:(0,a.f)(s),isHidden:!s},e)))})}},97876:(e,t,s)=>{s.d(t,{O:()=>L});var i=s(67294),n=s(480),r=s(86628),a=s(24405),o=s(5366),d=s(32161),l=s(82990),c=s(17652),u=s(18441),m=s(80444),g=s(30874),p=s(90106),h=s(905),f=s(79080),S=s(77657),v=s(36591),y=s(42853),x=s(47453),M=s(149),b=s(50906),w=s(42631),j=s(9953),C=s(39699),k=s(87279),I=s(64921),T=s(52275),P=s(31945),F=s(78140),_=s(32163),Z=s(72495),A=s(85893);function R(e){window.__c={n:"PersonalSlackNotificationsAccountDropdownButton"};const{currentExternalAuthentication:t,externalAuthentications:s,spaceId:d,spaceViewStore:l}=e,c=(0,n.O7)(),m=(0,n.Fy)(),p=(0,r.VK)((()=>g.Z.integrations.state.find((e=>e.id===S.nO))),[]),h=(0,a.yK)((e=>({popupContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:14,marginTop:12},dropdownButtonContainer:{display:"flex",alignItems:"center",minWidth:0,padding:"0px 8px",borderRadius:3,marginLeft:8},currentValueLabel:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flex:1},icon:{marginLeft:8,width:12,height:12,color:e.lightTextColor}})),[]);let f;f=m.isPhone?{menuType:k.og.ActionSheet}:{menuType:k.og.Popup,width:280,maxHeight:"50vh"};const R=i.useCallback((e=>Object.entries((0,u.YJ)(s)).map(((s,i)=>{let[n,r]=s;return{key:n,items:r.map((s=>{let{externalAuthentication:i,workspaceName:n}=s;return{key:i.id,action:()=>{e.close(),B({environment:c,spaceViewStore:l,currentExternalBotId:null==t?void 0:t.parent_id,selectedExternalBotId:i.parent_id})},render:e=>(0,A.jsx)(T.Z,{...e,title:n,right:i.id===(null==t?void 0:t.id)&&(0,v.e)({width:12,height:12})})}})),render:e=>(0,A.jsx)(Z.Z,{...e,title:n,topBorder:0!==i})}}))),[null==t?void 0:t.id,null==t?void 0:t.parent_id,c,s,l]),D=i.useCallback((e=>p?[{key:"disable-notification",items:[{key:"disable-slack-notification",action:()=>{e.close(),function(e){const{environment:t,spaceViewStore:s}=e;C.createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,perform:e=>{j.sW({store:s.getSettingsStore(),data:{notify_slack:null},transaction:e})}}),b.xim(t,{type:"personal",source:"notifications_and_settings"})}({environment:c,spaceViewStore:l})},render:e=>(0,A.jsx)(T.Z,{...e,title:(0,A.jsx)(o.FormattedMessage,{id:"personalSlackNotificationsAccountDropdownButton.disableNotification.label",defaultMessage:"Off"}),right:void 0===t&&(0,v.e)({width:12,height:12})})}],render:e=>(0,A.jsx)(Z.Z,{...e,topBorder:R.length>0})},{key:"create-new-auth",items:[{key:"connect",render:e=>(0,A.jsx)(T.Z,{...e,icon:(0,x.R)({width:12,height:12}),title:(0,A.jsx)(o.FormattedMessage,{id:"database.viewSettings.notificationsTab.slack.addNewAccount.label",defaultMessage:"Add new account"})}),action:async()=>{var e;const t=await w.hM({environment:c,integration:p,spaceId:d,from:"notifications_and_settings"});if(M.x.isFail(t))return;const s=null===(e=t.value.externalAuthentication)||void 0===e?void 0:e.parent_id;s&&B({environment:c,spaceViewStore:l,currentExternalBotId:void 0,selectedExternalBotId:s})}}],render:e=>(0,A.jsx)(Z.Z,{...e,topBorder:!0})}]:[]),[t,c,R.length,d,l,p]);return(0,A.jsx)("div",{style:h.popupContainer,children:(0,A.jsx)(P.ZP,{popupType:P.Z4.Popup,alignmentToOrigin:P.vR.End,render:e=>(0,A.jsx)(F.Z,{...f,children:(0,A.jsx)(_.Z,{type:_.i.Vertical,initialFocus:0,sections:[...R(e),...D(e)]})}),renderOrigin:t=>(0,A.jsxs)(I.Z,{...t,style:h.dropdownButtonContainer,children:[(0,A.jsx)("div",{style:h.currentValueLabel,children:(0,A.jsx)(E,{...e})}),(0,y.i)(h.icon)]})})})}function B(e){const{environment:t,spaceViewStore:s,selectedExternalBotId:i,currentExternalBotId:n}=e;n!==i&&(C.createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,perform:e=>{j.sW({store:s.getSettingsStore(),data:{notify_slack:{external_bot_id:i}},transaction:e})}}),void 0===n?b.XCt(t,{type:"personal",source:"notifications_and_settings"}):b.OSl(t,{type:"personal",source:"notifications_and_settings"}))}function E(e){const{currentExternalAuthentication:t}=e;if(!t)return(0,A.jsx)(o.FormattedMessage,{id:"SlackNotificationsPersonalSettingsAccountPicker.accountDropdown.selectPlaceholder",defaultMessage:"Off"});const s=(0,u.jg)(t).organizationName;return(0,A.jsx)(A.Fragment,{children:s})}var D=s(55422);function L(e){window.__c={n:"SlackNotificationsSetting"};const{target:t}=e,{isMobile:s}=(0,n.Fy)(),i=(0,r.VK)((()=>m.default.state.currentSpaceViewStore),[]),S=(0,r.VK)((()=>(0,c.r)()),[]),v=(0,r.VK)((()=>m.default.state.currentSpaceStore),[]),y=(0,r.VK)((()=>g.Z.completeSlackAuthentications.state),[]),x=(0,r.VK)((()=>{var e;const s=null==i||null===(e=i.getSettings())||void 0===e||null===(e=e[t])||void 0===e?void 0:e.external_bot_id;if(!s)return;const n=y.find((e=>e.parent_id===s));if(n)return n;if(!i)return;return(0,p.Kv)(i,{id:s,table:d.P}).getValue()}),[i,y,t]),M=(0,a.yK)((e=>({notifySlackSelectedWorkspaceName:{fontWeight:l.Z.fontWeight.bold,color:e.darkTextColor},titleWithBadgeContainer:{display:"flex",alignItems:"center"},betaBadgeContainer:{marginTop:-3},betaBadge:{display:"inline",marginLeft:6}})),[]);return i&&v?(0,A.jsx)(D.Z,{type:"custom",isMobile:s,title:(0,A.jsx)(f.Z,{target:t,isProductNotifEmailImprovementsEnabled:S}),caption:(0,A.jsx)(A.Fragment,{children:x?(0,A.jsx)(o.FormattedMessage,{id:"notificationSettings.slackNotificationsSettings.workspaceSelected.description",defaultMessage:"Receive notifications in {slackWorkspaceName} when you're mentioned in a page, database property, or comment.",values:{slackWorkspaceName:(0,A.jsx)("span",{style:M.notifySlackSelectedWorkspaceName,children:(0,u.jg)(x).organizationName})}}):(0,A.jsx)(h.Z,{target:t,isProductNotifEmailImprovementsEnabled:S})}),customButton:(0,A.jsx)(R,{currentExternalAuthentication:x,externalAuthentications:y,spaceId:v.id,spaceViewStore:i})}):null}},44335:(e,t,s)=>{s.d(t,{Z:()=>Ws});s(57658);var i=s(67294),n=s(83355),r=s(49085),a=s(8848),o=s(58573),d=s(7189),l=s(56666),c=s(76781),u=s(19981),m=s(35840),g=s(72263),p=s(72126),h=s(27006),f=s(4615),S=s(75246),v=s(19889),y=s(2438),x=s(97880),M=s(82990),b=s(7928),w=s(5366),j=s(48298),C=s(50906),k=s(54642),I=s(14871),T=s(47307),P=s(61652),F=s(92625),_=s(76464),Z=s(29974),A=(s(21703),s(15010)),R=s(34583),B=s(64964),E=s(39699),D=s(85893);const L=(0,w.defineMessages)({removingGuest:{id:"convertGuestToMember.removeGuest.updatingMessage",defaultMessage:"Updating…"},convertingGuest:{id:"convertGuestToMember.convertingGuest.updatingMessage",defaultMessage:"Updating…"}});async function V(e){const{environment:t,store:s,role:i,guestUserStore:n}=e,r=n.id,a=n.getEmail();try{F.j({message:L.convertingGuest});const e=[{type:"user_permission",role:i,user_id:r}],{serverCommitResult:n}=E.createAndCommit({userAction:"spacePerimssionGuestActions.convertGuestToMember",environment:t,perform:i=>{_.ep({environment:t,store:s,permissionItems:e,transaction:i,from:"convert_to_member"})}});await n,C.Rbv(t,{member_user_id:r}),C.jBu(t,{role:i,is_space:!0,invite_targets:[{type:"existingUser",value:{id:r,version:0,email:""},spaceRole:"none"}],is_onboarding:!1,invite_origin:"convert_to_member",permission_items:e,invite_message_length:0,domainType:(0,A.JF)()})}catch(o){B.oV({label:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.snackbar.failure",defaultMessage:"Failed to convert {email} to workspace member",values:{email:a}})})}finally{await R.bi(t),F.x()}}async function O(e){const{environment:t,store:s,guestUserStore:i}=e,n=i.id,r=i.getEmail();try{F.j({message:L.removingGuest});if("success"!==(await k.removeUsersFromSpace(t,{userIds:[n],spaceId:s.id,removePagePermissions:!0,revokeUserTokens:!1})).type)throw new Error("Failed to remove guest");C.bwR(t)}catch(a){B.oV({label:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.snackbar.failure",defaultMessage:"Failed to remove {email} from workspace",values:{email:r}})})}finally{await R.bi(t),F.x()}}var U=s(4708),G=s(87279),N=s(67669),q=s(18514),W=s(38755),z=s(95697),K=s(77907),H=s(80444),Q=s(88632),Y=s(77080),$=s(90106),J=s(72087),X=s(64404),ee=s(92083),te=s(78291),se=s(98905),ie=s(37181);var ne=s(86628),re=s(24405),ae=s(45653),oe=s(12309),de=s(64921);function le(e){window.__c={n:"ButtonStack"};const{items:t,clickHandlerContext:s}=e,n=ce(),r=function(){const e=ce();return(0,i.useMemo)((()=>({destructive:{default:e.destructiveButtonDefault,hovered:e.destructiveButtonHovered,pressed:e.destructiveButtonPressed},primary:{default:e.primaryButtonDefault,hovered:e.primaryButtonHovered,pressed:e.primaryButtonPressed},secondary:{default:e.secondaryButtonDefault}})),[e.destructiveButtonDefault,e.destructiveButtonHovered,e.destructiveButtonPressed,e.primaryButtonDefault,e.primaryButtonHovered,e.primaryButtonPressed,e.secondaryButtonDefault])}();return(0,D.jsx)("div",{style:n.wrapper,children:t.map((e=>{const t=e.combinedStyles??r[e.buttonType];return(0,D.jsx)(de.Z,{style:null==t?void 0:t.default,hoveredStyle:null==t?void 0:t.hovered,pressedStyle:null==t?void 0:t.pressed,onClick:()=>e.onClick(e,s),children:e.label},e.key)}))})}function ce(){return(0,re.yK)((e=>{const t={alignItems:"center",borderRadius:3,boxShadow:void 0,display:"inline-flex",flexShrink:0,fontSize:14,fontWeight:M.Z.fontWeight.medium,height:28,justifyContent:"center",lineHeight:1.2,paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",width:"100%"};return{destructiveButtonDefault:{...t,background:e.redBadgeBackground,color:a.ZP.white,fill:a.ZP.lightTextColor},destructiveButtonHovered:{background:a.ZP.redWithAlpha(.8)},destructiveButtonPressed:{background:a.ZP.red},primaryButtonDefault:{...t,background:a.ZP.blue,color:a.ZP.white,fill:a.ZP.lightTextColor,height:32},primaryButtonHovered:{background:e.blueButtonHoveredBackground},primaryButtonPressed:{background:e.blueButtonPressedBackground},secondaryButtonDefault:{...t,background:e.whiteButtonBackground,color:e.mediumTextColor,fill:a.ZP.lightTextColor},wrapper:{display:"flex",flexDirection:"column",gap:4}}}),[])}function ue(e){window.__c={n:"BillingModalStackLayout"};const t=(0,re.yK)((()=>({wrapper:{display:"flex",flexDirection:"column",gap:24,marginTop:20}})),[]);return(0,D.jsx)("div",{style:{...t.wrapper,...e.styles},children:e.children})}function me(e){window.__c={n:"SmallModalHeader"};const{icon:t,title:s,description:i,customIcon:n}=e,r=(0,re.yK)((e=>({description:{color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:-.154,textAlign:"center"},icon:{display:"inline",height:34,fill:"#8E8B87"},title:{color:e.text.primary,textAlign:"center",fontSize:16,lineHeight:"1.3",fontWeight:M.Z.fontWeight.medium,letterSpacing:-.32,textWrap:"balance"},wrapper:{display:"flex",flexDirection:"column",gap:8}})),[]);return(0,D.jsxs)("div",{style:r.wrapper,children:[t?t(r.icon):n||null,(0,D.jsx)("div",{style:r.title,children:s}),i?(0,D.jsx)("div",{style:r.description,children:i}):null]})}function ge(e){window.__c={n:"ContractionConfirmation"};const{onFinished:t,userId:s,userContractionMessages:n}=e,r=(0,re.yK)((e=>({highlights:{color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:-.154,textAlign:"left",marginTop:-28,marginBottom:-20,marginLeft:-16},customIcon:{alignSelf:"center"},wrapper:{marginTop:4}})),[]),a=(0,w.useIntl)(),o=(0,i.useCallback)((e=>{"submit"!==e.key?t(!1):t(!0)}),[t]),d=(0,ne.VK)((()=>H.default.state.currentSpaceStore),[]),l=(0,ne.VK)((()=>{if(!d)return;const e=$.U6.createChildStore(d,{id:s,table:v.KJ});return e.isDefined()&&!e.getIsDeleted()?e:void 0}),[d,s]),c=(0,ne.VK)((()=>null==l?void 0:l.getDisplayName(a)),[l,a]);return(0,D.jsxs)(ue,{styles:r.wrapper,children:[(0,D.jsx)(me,{customIcon:(0,D.jsx)(ae.Z,{userStore:l,size:34,style:r.customIcon}),title:Se(c),description:he(n)}),(0,D.jsx)("div",{style:r.highlights,children:(0,D.jsx)("ul",{children:n.map(((e,t)=>(0,D.jsx)("li",{children:e},`contraction_highlight_${t}`)))})}),(0,D.jsx)(le,{items:[{key:"submit",buttonType:"destructive",label:fe(c),onClick:o},{key:"cancel",buttonType:"secondary",label:(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.cancel",defaultMessage:"Cancel"}),onClick:o}]})]})}function pe(e){return e>2e3?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.amount.2000",defaultMessage:"2000+"}):e>1500?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.amount.1500",defaultMessage:"1500+"}):e>1e3?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.amount.1000",defaultMessage:"1000+"}):e>500?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.amount.500",defaultMessage:"500+"}):e>250?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.amount.250",defaultMessage:"250+"}):e>100?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.amount.100",defaultMessage:"100+"}):e>75?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.amount.75",defaultMessage:"75+"}):e>50?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.amount.50",defaultMessage:"50+"}):e>25?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.amount.25",defaultMessage:"25+"}):e>10?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.amount.10",defaultMessage:"10+"}):e>5?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.amount.5",defaultMessage:"5+"}):(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.amount.2",defaultMessage:"2+"})}function he(e){return e.length>0?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.description.withName",defaultMessage:"They have been an active Notion member. Removing them may cause permanent loss of their private pages."}):(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.description",defaultMessage:"They will immediately lose access to this workspace and no one will be able to access their private pages."})}function fe(e){return e&&e.length<16?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.remove.withName",defaultMessage:"Remove {name}",values:{name:e}}):(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.remove",defaultMessage:"Remove member"})}function Se(e){return e?(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.title.withName",defaultMessage:"Are you sure you want to remove {name}?",values:{name:e}}):(0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.title",defaultMessage:"Are you sure you want to remove this member?"})}async function ve(e,t,s){let i=[],n={};if(s){const r=await k.getUserContractionData(e,{userId:t,spaceId:s,clientVersion:e.device.version});"success"===r.type&&(n=r.data,i=function(e){const t=[];if(!("l28_active"in e))return t;const s=Number(e.l28_active);s>1&&t.push((0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.activity",defaultMessage:"Visited <bold>{activeDays} days</bold> in the past month",values:{activeDays:pe(s),bold:e=>(0,D.jsx)("b",{children:e})}}));const i=Number(e.num_comments);i>1&&t.push((0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.numberOfComments",defaultMessage:"Made <bold>{numberOfComments} comments</bold> in their lifetime",values:{numberOfComments:pe(i),bold:e=>(0,D.jsx)("b",{children:e})}}));const n=Number(e.num_pages_created);return n>1&&t.push((0,D.jsx)(w.FormattedMessage,{id:"contractionConfirmation.numberOfPages",defaultMessage:"Created <bold>{numberOfPages} pages</bold> in their lifetime",values:{numberOfPages:pe(n),bold:e=>(0,D.jsx)("b",{children:e})}})),t}(n))}return C.b9E({environment:e,userContractionData:n}),await oe.Z.showModal((s=>{const r=t=>{t?C.oIe({environment:e,userContractionData:n}):C.vwI({environment:e,userContractionData:n}),s(t)};return{dismissUsing:"onlyEscape",onDismiss:()=>r(!1),content:(0,D.jsx)(ge,{onFinished:r,userId:t,userContractionMessages:i})}}))}var ye=s(53877);var xe=s(70060),Me=s(13627),be=s(35057),we=s(25651);const je={noLongerNeedAccess:{optionName:"no_longer_need_access",type:"checkbox",label:(0,D.jsx)(w.FormattedMessage,{id:"survey.options.noLongerNeedAccess",defaultMessage:"No longer need access to Notion"})},noLongerWorkTogether:{optionName:"no_longer_work_together",type:"checkbox",label:(0,D.jsx)(w.FormattedMessage,{id:"survey.options.noLongerWorksHere",defaultMessage:"No longer works here"})},notUsingEnough:{optionName:"not_using_enough",type:"checkbox",label:(0,D.jsx)(w.FormattedMessage,{id:"survey.options.notUsingEnough",defaultMessage:"Not using it enough"})},other:{optionName:"other",type:"checkboxAndInput",label:(0,D.jsx)(w.FormattedMessage,{id:"survey.options.other",defaultMessage:"Other"})},switching:{optionName:"switching",type:"checkbox",label:(0,D.jsx)(w.FormattedMessage,{id:"survey.options.switching",defaultMessage:"Switching to another tool"})},switchingToAnotherWorkspace:{optionName:"switching_to_another_workspace",type:"checkbox",label:(0,D.jsx)(w.FormattedMessage,{id:"survey.options.switchingToAnotherWorkspace",defaultMessage:"Switching to another Notion workspace"})},tooExpensive:{optionName:"too_expensive",type:"checkbox",label:(0,D.jsx)(w.FormattedMessage,{id:"survey.options.tooExpensive",defaultMessage:"Too expensive"})}};var Ce=s(44342),ke=s(7184),Ie=s(69098),Te=s(60458);function Pe(e){window.__c={n:"SurveyCheckbox"};const{isChecked:t,label:s,onClickToggle:i}=e,n=(0,re.yK)((()=>({checkbox:{marginTop:4},row:{alignItems:"flex-start",cursor:"pointer",display:"flex",fontSize:14,gap:10,padding:"4px 20px 4px 0"}})),[]);return(0,D.jsxs)("div",{style:n.row,onClick:i,children:[(0,D.jsx)("div",{style:n.checkbox,children:(0,D.jsx)(Te.Z,{checked:t,size:14})}),(0,D.jsx)("div",{children:s})]})}var Fe=s(74194);function _e(e){window.__c={n:"SurveyCheckboxAndInput"};const{inputText:t,isChecked:s,label:i,onClickToggle:n,placeholderText:r,setInputText:a}=e,o=(0,re.yK)((()=>({inlineInput:{margin:"0 12px 12px 12px",width:"calc(100% - 24px)"}})),[]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Pe,{label:i,isChecked:s,onClickToggle:n}),s?(0,D.jsx)(Fe.Z,{style:o.inlineInput,autoFocus:!0,value:t,placeholder:r,onChange:e=>a(e.target.value)}):null]})}function Ze(e){window.__c={n:"Survey"};const{store:t}=e,s=(0,ne.VK)((()=>t.state.options),[t]),{selectedIndexes:i,customTextByIndex:n}=(0,ne.VK)((()=>t.state),[t]);return(0,D.jsx)("div",{children:s.map(((e,s)=>{const{type:r}=e,a=i.has(s);switch(r){case"checkbox":return(0,D.jsx)(Pe,{isChecked:a,label:e.label,onClickToggle:()=>t.toggleIndex(s)},s);case"checkboxAndInput":return(0,D.jsx)(_e,{inputText:n[s]??"",isChecked:a,label:e.label,onClickToggle:()=>t.toggleIndex(s),placeholderText:e.placeholderText,setInputText:e=>t.setCustomTextByIndex(s,e)},s);default:(0,x.t1)(r)}}))})}class Ae extends r.default{getInitialState(){return{options:[],customTextByIndex:{},selectedIndexes:new Set}}setOptions(e){this.setState({customTextByIndex:{},options:e,selectedIndexes:new Set})}setCustomTextByIndex(e,t){this.update((s=>({...s,customTextByIndex:{...s.customTextByIndex,[e]:t}})))}toggleIndex(e){this.update((t=>{const s=new Set(t.selectedIndexes);return s.has(e)?s.delete(e):s.add(e),{...t,selectedIndexes:s}}))}toSurveyResult(){const{customTextByIndex:e,options:t,selectedIndexes:s}=this.state,i=[],n=[],r={};return s.forEach((s=>{const a=t[s];i.push(a.optionName),n.push(s),"checkboxAndInput"===a.type&&e[s]&&(r[a.optionName]=e[s])})),{reasons:i,reasonIndexes:n,customTextByReason:r}}}async function Re(e){const{environment:t,contractionSurveyId:s}=e;C.wjW({environment:t,contractionSurveyId:s});const i=await async function(e){const{icon:t,options:s,title:i,description:n}=e;return await Ie.o.showAsyncModal((e=>{const r=new Ae;return r.setOptions(s),(0,D.jsx)(ke.c,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{min:299,max:299},height:{scroll:!0}},children:(0,D.jsx)(Ce.sR,{header:(0,D.jsx)(Ce.vI,{iconAndTitle:(0,D.jsx)(Ce.kC,{icon:t,title:i}),description:n}),footer:(0,D.jsx)(Ce.a6,{layout:"vertical",primaryButton:{buttonType:"primary",label:(0,D.jsx)(w.FormattedMessage,{id:"contractionSurvey.continue",defaultMessage:"Continue"}),onClick:()=>e.resolve(r.toSurveyResult())},secondaryButton:{buttonType:"dismiss"}}),children:(0,D.jsx)(Ze,{store:r})})})}))}({icon:we.R,title:(0,D.jsx)(w.FormattedMessage,{id:"contractionSurvey.title",defaultMessage:"Why are you removing this member from your workspace?"}),description:(0,D.jsx)(w.FormattedMessage,{id:"contractionSurvey.description",defaultMessage:"We'd love your input to make Notion better"}),options:Be()});return i?C.OK8({environment:t,contractionSurveyId:s,reasons:i.reasons,reasonIndexes:i.reasonIndexes,reasonOther:i.customTextByReason.other}):C.Wr9({environment:t,contractionSurveyId:s}),i}function Be(){return[...(0,p.TV)([je.noLongerNeedAccess,je.noLongerWorkTogether,je.notUsingEnough,je.switching,je.switchingToAnotherWorkspace,je.tooExpensive]),je.other]}var Ee=s(21752),De=s(42922),Le=s(52275),Ve=s(31945),Oe=s(61519),Ue=s(73063),Ge=s(68785),Ne=s(78140),qe=s(32163),We=s(63296),ze=s(77137),Ke=s(72495),He=s(62385),Qe=s(24006),Ye=s(26388),$e=s(64369),Je=s(26774),Xe=s(16639),et=s(31278),tt=s(53695);function st(e){let{spaceStore:t,groups:s,onGroupClick:i}=e;window.__c={n:"GroupsDowndownForMember"};const n=(0,w.useIntl)(),r=s.length,a=(0,re.yK)((e=>({title:{marginRight:8,color:0===r?e.lightTextColor:void 0},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},untitled:{color:e.lightTextColor}})),[r]),o=s.map((e=>({key:e.id,render:s=>{var i;const r=Xe.kF({intl:n,group:e});return(0,D.jsx)(Le.Z,{icon:(0,D.jsx)(et.Z,{disabled:!0,icon:e.icon&&t?{pointer:t.pointer,icon:e.icon}:void 0,size:18,isEmptyPage:!1,title:r,defaultIcon:(0,Je.O)(a.defaultGroupIconPill)}),title:(0,D.jsx)($e.Z,{style:e.name?void 0:a.untitled,children:r}),caption:(0,D.jsx)(w.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"groupsDropdownForMember.numMembers",values:{numMembers:(null===(i=e.user_ids)||void 0===i?void 0:i.length)||0}}),inline:!0,...s})},action:i})));return(0,D.jsx)(tt.N,{title:(0,D.jsx)($e.Z,{style:a.title,children:0===r?(0,D.jsx)(w.FormattedMessage,{id:"groupsDropdownForMember.groupsCountNone.label",defaultMessage:"None"}):(0,D.jsx)(w.FormattedMessage,{id:"groupsDropdownForMember.groupsCount.label",defaultMessage:"{numberOfGroups, plural, one {{numberOfGroups} group} other {{numberOfGroups} groups}}",values:{numberOfGroups:r}})}),items:o,disabled:0===r})}var it=s(15145),nt=s(42853),rt=s(21202),at=s(34602),ot=s(84210),dt=s(61766),lt=s(28992),ct=s(43765),ut=s(89728),mt=s(11470);class gt extends n.Z{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:dt.Z},this.renderPopup=()=>{const{device:e}=this.environment,{store:t,guest:s,hideActionButtons:i}=this.props,n=t.canEditMembership(),r=s.guestPageIds.map((e=>{const s=$.G.createChildStore(t,{table:rt.iU,id:e});return{key:e,render:e=>(0,D.jsx)(mt.Z,{...e,store:s,placeholder:(0,D.jsx)(w.FormattedMessage,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const s=$.G.createChildStore(t,{table:rt.iU,id:e}),i=(0,ot.ZP)({store:s,fullyQualified:!1,pageVisitSource:it.tY.LinkInPage});at.navigate({environment:this.environment,url:i,openInNew:"tab"})}}}));let a,o;a=e.isMobile?{menuType:G.og.ActionSheet}:{menuType:G.og.Popup,width:300},(0,Me.qF)(this.environment)&&(o=(0,D.jsx)(Ye.Z,{renderTooltip:()=>this.isSubscribed()?(0,D.jsx)(w.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",defaultMessage:"This guest will become a member of this workspace."}):(0,D.jsx)(w.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",defaultMessage:"This guest will become an admin of this workspace."}),render:e=>(0,D.jsx)(We.Z,{isLarge:!0,onClick:this.handleConvertToMemberClick,...e,children:this.isSubscribed()?(0,D.jsx)(w.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.label",defaultMessage:"Convert to member"}):(0,D.jsx)(w.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.label",defaultMessage:"Convert to admin"})})}));const d=!i&&n;return(0,D.jsxs)(Ne.Z,{...a,children:[d&&(0,D.jsx)(lt.Z,{title:(0,D.jsxs)("div",{style:{paddingTop:12,paddingBottom:8,display:"flex",alignItems:"flex-start"},children:[o,(0,D.jsx)(Ye.Z,{renderTooltip:()=>(0,D.jsx)(w.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.tooltip",defaultMessage:"This guest will be removed from all pages in this Workspace."}),render:e=>(0,D.jsx)(We.Z,{isLarge:!0,isRed:!0,style:{marginLeft:o?8:0},onClick:this.handleRemoveClick,...e,children:(0,D.jsx)(w.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.label",defaultMessage:"Remove"})})})]})}),d&&(0,D.jsx)(ct.Z,{title:1===r.length?(0,D.jsx)(w.FormattedMessage,{id:"guestPagesPopup.guestHasAccessToSinglePageCaption",defaultMessage:"This guest can access this page:"}):(0,D.jsx)(w.FormattedMessage,{id:"guestPagesPopup.guestHasAccessToMultiplePagesCaption",defaultMessage:"This guest can access these pages:"})}),(0,D.jsx)(qe.Z,{type:qe.i.Vertical,initialFocus:0,sections:[{key:"pages",render:e=>(0,D.jsx)(Ke.Z,{...e}),items:r}]})]})},this.handleRemoveClick=()=>{T.showDialog({showCancel:!0,keepFocus:!1,message:(0,D.jsx)(w.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:(0,D.jsx)(w.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.removeButton.label",defaultMessage:"Remove"}),color:"red",onAccept:async()=>{const{store:e,guestStore:t}=this.props;this.stores.buttonPopupStore.setState({...this.stores.buttonPopupStore.state,open:!1}),await O({environment:this.environment,guestUserStore:t,store:e})}}]})},this.handleConvertToMemberClick=async()=>{const{store:e,guestStore:t,isSubscribed:s}=this.props,i=s?"read_and_write":"editor";this.stores.buttonPopupStore.setState({...this.stores.buttonPopupStore.state,open:!1}),await V({environment:this.environment,guestUserStore:t,role:i,store:e})}}renderComponent(){const{device:e}=this.environment,{buttonPopupStore:t}=this.stores,{store:s,guest:i}=this.props;return i.guestPageIds.map((e=>{$.G.createChildStore(s,{table:rt.iU,id:e}).load()})),0===i.guestPageIds.length?(0,D.jsx)(ut.Z,{disabled:!0,children:(0,D.jsx)(w.FormattedMessage,{id:"guestPagesPopup.permissionsForUserGuest.label",defaultMessage:"Guest"})}):(0,D.jsx)(Ve.ZP,{popupType:e.isMobile?Ve.Z4.SlideUp:Ve.Z4.Popup,renderOrigin:e=>(0,D.jsxs)(ut.Z,{...e,children:[(0,D.jsx)(w.FormattedMessage,{id:"guestPagesButton.label",defaultMessage:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:i.guestPageIds.length}}),(0,nt.i)({width:10,marginLeft:4,fill:this.theme.lightIconColor})]}),buttonPopupStore:t,render:this.renderPopup})}isSubscribed(){const{data:e}=te.default.state;return Boolean(e&&(0,Me.YK)(e))}}gt.displayName="GuestPagesPopup";const pt=(0,w.injectIntl)(gt);var ht=s(74523),ft=s(42402),St=s(7567),vt=s(480),yt=s(5851),xt=s(53680),Mt=s(8843),bt=s(93963),wt=s(40235),jt=s(7057),Ct=s(42875),kt=s(29302);function It(e){window.__c={n:"SpaceSettingsRequestRow"};const{store:t,request:s}=e,{forActor:n,accessRequestStore:r}=s,a=(0,vt.O7)(),[o,d]=(0,i.useState)(!1),l=(0,re.yK)((e=>({actionButtons:{display:"flex",alignItems:"center",gap:12},email:{display:"flex",gap:4},requestMetadata:{minWidth:0,marginLeft:6,marginRight:6},tooltip:{marginBottom:2},tooltipHeader:{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em",marginBottom:2},viewReasonsButton:{marginLeft:28,marginTop:2,border:"none"},tooltipUserRow:{display:"flex",justifyContent:"space-between",marginBottom:4},tooltipUserRowEmail:{marginLeft:5}})),[]),c=(0,w.useIntl)(),u=(0,ne.VK)((()=>{var e;const t=[],i=new Set;return null===(e=s.createdByActorsWithReason)||void 0===e||e.forEach((e=>{i.has(e.actor.id)||t.push(e.actor),i.add(e.actor.id)})),t}),[s.createdByActorsWithReason]);if(!s||!s.forActor||!s.createdByActorsWithReason.length)return null;const m=ye.CQ(s.latestRequestTime,(0,Ct.r)()),g=(0,jt.ZV)({value:m,date_format:"relative",userTimeZone:(0,Ct.r)(),intl:c,allowRelativeDates:!0}),p={environment:a,store:t,accessRequestStore:r,forActor:n},h=u.filter((e=>e.email!==s.forActor.email)),f=h.length!==u.length,S=()=>1===u.length?f?(0,D.jsx)(w.FormattedMessage,{defaultMessage:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}):(0,D.jsx)(w.FormattedMessage,{defaultMessage:"From {actorName}",id:"spaceSettingsRequests.requestRowAction.requestedBySingular",values:{actorName:u[0].name}}):f?(0,D.jsx)(w.FormattedMessage,{defaultMessage:"{numberOfOtherActors, plural, one {Guest self request and from {secondActorName}} other {Guest self request and from {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest",values:{secondActorName:h[0].name,numberOfOtherActors:h.length}}):(0,D.jsx)(w.FormattedMessage,{defaultMessage:"{numberOfOtherActors, plural, one {From {firstActorName} and {secondActorName}} other {From {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural",values:{firstActorName:u[0].name,secondActorName:u[1].name,numberOfOtherActors:u.length-1}});return(0,D.jsxs)("div",{style:{width:"100%"},children:[(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,D.jsx)("div",{children:(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,D.jsx)(ae.Z,{userValue:s.forActor,size:28,borderStyle:"dashed"}),(0,D.jsxs)("div",{style:l.requestMetadata,children:[(0,D.jsx)("div",{style:l.email,children:(0,D.jsx)($e.Z,{className:"notranslate",children:s.forActor.email})}),(0,D.jsxs)($e.Z,{isSmall:!0,children:[(0,D.jsx)(Ye.Z,{renderTooltip:()=>(0,D.jsxs)("div",{style:l.tooltip,children:[(0,D.jsx)($e.Z,{style:l.tooltipHeader,children:(0,D.jsx)(w.FormattedMessage,{defaultMessage:"Requested by",id:"spaceSettingsRequests.requestRowAction.requestedByMoreThanTwo.tooltip"})}),u.map((e=>(0,D.jsxs)("div",{style:l.tooltipUserRow,children:[(0,D.jsx)(kt.Z,{avatarSize:18,userValue:e}),(0,D.jsx)("div",{style:l.tooltipUserRowEmail,children:e.email})]},e.id)))]}),render:e=>(0,D.jsx)("span",{...e,children:(0,D.jsx)(S,{})})})," · ",g]})]})]})}),(0,D.jsxs)("div",{style:l.actionButtons,children:[(0,D.jsx)(ut.Z,{isGray:!0,onClick:async()=>{await j.kn({...p,status:"rejected",from:"requests_center"})},children:(0,D.jsx)(w.FormattedMessage,{defaultMessage:"Decline",id:"spaceSettingsRequests.requestRowAction.declineButton.label"})}),(0,D.jsx)(We.Z,{isBlue:!0,onClick:async()=>{await j.kn({...p,status:"approved",from:"requests_center"})},children:(0,D.jsx)(w.FormattedMessage,{defaultMessage:"Approve",id:"spaceSettingsRequests.requestRowAction.acceptButton.label"})})]})]}),s.createdByActorsWithReason.some((e=>{let{reason:t}=e;return Boolean(t)}))&&(0,D.jsx)(We.Z,{isSmall:!0,isBlue:!0,style:l.viewReasonsButton,onClick:()=>d(!o),children:o?(0,D.jsx)(w.FormattedMessage,{id:"spaceSettingsRequests.requestRowAction.closeReasonsButton.label",defaultMessage:"Close reasons"}):(0,D.jsx)(w.FormattedMessage,{id:"spaceSettingsRequests.requestRowAction.viewReasonsButton.label",defaultMessage:"View reasons"})}),o&&(0,D.jsx)("div",{style:{marginLeft:34,marginTop:2,fontSize:M.Z.fontSize.UIRegular.desktop},children:s.createdByActorsWithReason.filter((e=>{let{reason:t}=e;return Boolean(t)})).map(((e,t)=>(0,D.jsxs)("div",{children:[e.actor.name," · ",e.reason]},t)))})]})}function Tt(e){window.__c={n:"SpaceSettingsRequestsTable"};const{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:i}=e,n=(0,ne.VK)((()=>s.filter((e=>"pending"===e.accessRequestStore.getKeyStore("status").getValue())).sort(((e,t)=>t.latestRequestTime-e.latestRequestTime))),[s]),r=(0,re.yK)((e=>({requestColumn:{width:"100%"},zeroStateContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor,borderStyle:"solid",borderColor:e.regularDividerColor,borderWidth:1,borderRadius:3},mailIcon:{height:12,width:17,color:e.mediumIconColor,marginRight:6}})),[]),a={key:"request",header:void 0,style:r.requestColumn};return 0===n.length?(0,D.jsxs)("div",{style:r.zeroStateContainer,children:[(0,Mt.h)(r.mailIcon),(0,D.jsx)(w.FormattedMessage,{id:"spaceSettingsRequests.emptyRequests.message",defaultMessage:"No invite requests yet"})]}):(0,D.jsx)(wt.Z,{hideHeader:!0,columns:[a],rows:n.map(((e,s)=>({key:`request${s.toString()}`,columns:[(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[i<e.accessRequest.created_time&&(0,D.jsx)("div",{style:{marginLeft:-18,marginRight:10},children:(0,D.jsx)(bt.z,{size:8})}),(0,D.jsx)(It,{store:t,request:e})]},e.accessRequest.id)]})))})}function Pt(e){window.__c={n:"SpaceSettingsRequests"};const{spaceStore:t,accessRequestsStore:s}=e,n=(0,vt.O7)(),[r,a]=(0,i.useState)(Date.now()),[,,o]=(0,ne.AF)(void 0,xt.Z),d=(0,ne.VK)((()=>o.getValueForSpace(t)),[t,o]),l=Boolean(null==d?void 0:d.disableMembershipRequests),c=Boolean(null==d?void 0:d.disableExternalMembershipRequests),u=Boolean(null==d?void 0:d.disableGuestMembershipRequests),m=(0,ne.VK)((()=>t.getKeyStore("settings").getKeyStore("seen_guest_membership_requests").getValue()&&(0,U.Ye)(n)),[n,t]),g=(0,ne.VK)((()=>(0,U.Or)()),[]),[p,,]=(0,ne.AF)(s),h=(0,re.yK)((e=>({errorContainer:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor}})),[]);(0,i.useEffect)((()=>{const{currentSpaceViewStore:e}=H.default.state;if(!e)return;const t=e.getKeyStore("settings").getKeyStore("last_opened_request_center").getValue();t&&a(t),E.createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:n,perform:t=>{E.applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_request_center"],command:"set",args:Date.now()},transaction:t})}})}),[]);return f=p.error,S=p.result,p.ready?f||!S?(0,D.jsx)("div",{style:h.errorContainer,children:(0,D.jsx)(w.FormattedMessage,{defaultMessage:"Something went wrong.",id:"notificationUpdates.unknownErrorMessage"})}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ft,{spaceStore:t,securitySettingsStoreState:d,disabled:l}),g&&(0,D.jsx)(_t,{spaceStore:t,securitySettingsStoreState:d,disabled:c}),m&&(0,D.jsx)(Zt,{spaceStore:t,securitySettingsStoreState:d,disabled:u}),(0,D.jsx)(Tt,{spaceStore:t,accessRequestRenderValues:S,lastOpenedRequestCenterTime:r})]}):(0,D.jsx)("div",{style:h.errorContainer,children:(0,D.jsx)(Ge.Z,{})});var f,S}function Ft(e){window.__c={n:"AllowMembershipRequestsToggle"};const t=(0,vt.O7)(),{spaceStore:s,securitySettingsStoreState:i,disabled:n}=e,r=(0,re.yK)((()=>({toggleContainer:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:14},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},description:{marginTop:2,width:"80%"}})),[]);return(0,D.jsxs)("div",{style:r.toggleContainer,onClick:function(){i&&yt.n(t,{securitySettingsState:{...i,disableMembershipRequests:!i.disableMembershipRequests},spaceStore:s})},children:[(0,D.jsxs)("div",{style:r.titleDescription,children:[(0,D.jsx)(w.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.title",defaultMessage:"Allow members to request adding other members"}),(0,D.jsx)($e.Z,{isSmall:!0,isMultiline:!0,style:r.description,children:(0,D.jsx)(w.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.description",defaultMessage:"Members can submit requests to admins to add more members"})})]}),(0,D.jsx)(Qe.Z,{on:!n})]})}function _t(e){window.__c={n:"AllowExternalMembershipRequestsToggle"};const t=(0,vt.O7)(),{spaceStore:s,securitySettingsStoreState:i,disabled:n}=e,r=(0,re.yK)((()=>({toggleContainer:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:14},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},description:{marginTop:2,width:"80%"}})),[]);return(0,D.jsxs)("div",{style:r.toggleContainer,onClick:function(){i&&yt.n(t,{securitySettingsState:{...i,disableExternalMembershipRequests:!i.disableExternalMembershipRequests},spaceStore:s})},children:[(0,D.jsxs)("div",{style:r.titleDescription,children:[(0,D.jsx)(w.FormattedMessage,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.title",defaultMessage:"Allow any user to request to be added as a member of the workspace"}),(0,D.jsx)($e.Z,{isSmall:!0,isMultiline:!0,style:r.description,children:(0,D.jsx)(w.FormattedMessage,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.description",defaultMessage:"If enabled, users with teamspace invite links can submit requests to admins to be added as members"})})]}),(0,D.jsx)(Qe.Z,{on:!n})]})}function Zt(e){window.__c={n:"AllowGuestMembershipRequestsToggle"};const t=(0,vt.O7)(),{spaceStore:s,securitySettingsStoreState:i,disabled:n}=e,r=(0,re.yK)((()=>({toggleContainer:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:14},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},description:{marginTop:2,width:"80%"}})),[]);return(0,D.jsxs)("div",{style:r.toggleContainer,onClick:function(){i&&yt.n(t,{securitySettingsState:{...i,disableGuestMembershipRequests:!i.disableGuestMembershipRequests},spaceStore:s})},children:[(0,D.jsxs)("div",{style:r.titleDescription,children:[(0,D.jsx)(w.FormattedMessage,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.title",defaultMessage:"Allow page guests to request to be added as members to the workspace"}),(0,D.jsx)($e.Z,{isSmall:!0,isMultiline:!0,style:r.description,children:(0,D.jsx)(w.FormattedMessage,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.description",defaultMessage:"Guests of the workspace can submit requests to admins to be added as members"})})]}),(0,D.jsx)(Qe.Z,{on:!n})]})}var At=s(95209),Rt=s(79817),Bt=s(45101),Et=s(52878),Dt=s(1743),Lt=s(9019),Vt=s(53437),Ot=s(24145),Ut=s(43579);const Gt=(0,w.defineMessages)({reason_placeholder:{id:"RequestMembersModal.reason.placeholder",defaultMessage:"Add a reason (optional)"}});const Nt=function(e){window.__c={n:"RequestMembersModal"};const t=(0,vt.O7)(),{store:s,origin:n,analyticsFrom:r}=e,[o,d]=(0,i.useState)(!1),[l,c]=(0,i.useState)("none"),u=(0,ne.qz)(void 0,Et.Z),m=(0,w.useIntl)(),g=(0,re.yK)((()=>({modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:420},container:{padding:20},title:{fontWeight:M.Z.fontWeight.medium,marginBottom:10},reasonTitle:{color:a.ZP.mediumTextColor,marginTop:10,marginBottom:5},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20}})),[]),p=e=>{e.currentTarget===e.target&&c("none")},h=async()=>{C.cir(t,{...Rt.Oh(t,u.state.contextualInviteStore),from:r}),At.eH({permissionsInviteStore:u.state.permissionsInviteStore,contextualInviteStore:u.state.contextualInviteStore}),u.state.contextualInviteStore.startRequestMembership();const e=u.state.contextualInviteStore.state.invitedUsers;d(!1);const i=await Rt.fC({environment:t,spaceStore:s,originId:void 0,originType:r,reasonMessage:u.state.permissionsInviteStore.state.emailMessage,contextualInviteStore:u.state.contextualInviteStore,intl:m});f({success:i,intl:m,users:e}),u.reset()},f=e=>{const{success:t,intl:s,users:i}=e;0!==i.length&&(t?B.oV({label:s.formatMessage({id:"requestMembersModal.requestSuccess.toast",defaultMessage:"Successfully requested membership for {users} to your workspace admins."},{users:Rt.uJ(i,s)})}):B.oV({label:s.formatMessage({id:"requestMembersModal.requestFail.toast",defaultMessage:"Failed to invite {users} to the workspace."},{users:Rt.uJ(i,s)})}))};return(0,D.jsx)(Lt.Z,{modalStyle:g.modalStyle,open:o,onDismiss:async()=>{await(0,Bt.Aw)({environment:t,permissionsInviteStoreState:u.state.permissionsInviteStore.state,from:"space_settings_add_members"})||(d(!1),u.reset()),c("none")},renderContent:()=>(0,D.jsxs)("div",{style:g.container,onClick:p,children:[(0,D.jsx)("div",{style:g.title,onClick:p,children:(0,D.jsx)(w.FormattedMessage,{id:"requestMembersModal.title",defaultMessage:"Request to invite members"})}),(0,D.jsx)(Vt.ZP,{popupType:Vt.kQ.Popup,alignmentToOrigin:Vt.ZP.Alignment.Start,placementToOrigin:Vt.ZP.Placement.Bottom,open:"invites"===l,sameWidthAsOrigin:!0,originGap:10,disableMouseCapture:!0,origin:(0,D.jsx)(Ot.Z,{permissionsInviteStore:u.state.permissionsInviteStore,store:s,handleClickRemoveToken:e=>{At.PV({targetToRemove:e,permissionsInviteStore:u.state.permissionsInviteStore,defaultRoleForNonBot:"read_and_write"})},handleInputChange:async e=>{c("invites"),await At.jC({environment:t,event:e,permissionsInviteStore:u.state.permissionsInviteStore})},handleInputSubmit:async()=>{},origin:"add_members",defaultRoleForNonBot:"read_and_write",isTeamsEnabled:!1,right:(0,D.jsx)("div",{}),focus:"invites"===l,handleFocus:()=>c("invites")}),onDismiss:()=>c("none"),render:()=>{const e=(0,D.jsx)(Ut.Z,{permissionsInviteStore:u.state.permissionsInviteStore,store:s,defaultRoleForSpaceBot:"editor",shouldShowBots:!1,shouldShowGroups:!1,sectionRenderLimit:10,membersOnly:!1}),t={menuType:G.og.Popup,disableScroller:!1};return(0,D.jsx)("div",{children:(0,D.jsx)(Ne.Z,{...t,width:380,children:e})})},style:{width:"100%"}}),(0,D.jsx)("div",{style:g.reasonTitle,onClick:p,children:(0,D.jsx)(w.FormattedMessage,{id:"requestMembersModal.reasonForRequest.title",defaultMessage:"Reason for request"})}),(0,D.jsx)(Dt.Z,{capture:!0,allowEsc:!0,children:(0,D.jsx)(Fe.Z,{textarea:!0,style:{padding:8},value:u.state.permissionsInviteStore.state.emailMessage,focus:"reason"===l,onFocus:()=>c("reason"),onChange:e=>{u.state.permissionsInviteStore.setState({...u.state.permissionsInviteStore.state,emailMessage:e.target.value})},placeholder:m.formatMessage(Gt.reason_placeholder)})}),(0,D.jsxs)("div",{style:g.footer,onClick:p,children:[(0,D.jsx)($e.Z,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,D.jsx)(w.FormattedMessage,{id:"RequestMembersModal.caption",defaultMessage:"Your admins will approve or decline your request."})}),(0,D.jsx)(De.Z,{isLarge:!0,style:g.requestInvitesButton,onClick:h,children:(0,D.jsx)(w.FormattedMessage,{id:"requestMembersModal.requestInvitesButton.label",defaultMessage:"Request invites"})})]})]}),origin:(0,D.jsx)("div",{onClick:()=>{d(!0)},children:n})})};var qt=s(83890),Wt=s(8319),zt=s(27386),Kt=s(23189),Ht=s(40394),Qt=s(33929),Yt=s(55838),$t=s(33846),Jt=s(31194),Xt=s(30397),es=s(35817),ts=s(48019),ss=s(68894),is=s(93686);const ns=(0,w.defineMessages)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForGroupMenu.filterForTeams.placeholder"}});function rs(e){window.__c={n:"TeamsPopup"};const t=(0,vt.O7)(),s=(0,re.yK)((()=>({teamMenuItem:{fontWeight:400}})),[]),[n,r]=(0,ne.AF)(void 0,$t.Z),a=(0,i.useCallback)((e=>es.RF({environment:t,teamId:e,tab:Yt.a.Members,from:"teams_dropdown_for_group"})),[t]),o=(0,ne.VK)((()=>[{key:"teams for group",render:e=>(0,D.jsx)(Ke.Z,{...e}),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>(0,D.jsx)(Le.Z,{icon:(0,D.jsx)(is.p,{disabled:!0,store:e}),title:(0,D.jsx)($e.Z,{style:s.teamMenuItem,children:e.getName()}),right:(0,D.jsx)(w.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsInGroupMenu.filterForTeams.numMembers",values:{numMembers:e.getUserIdsInTeam().length}}),...t}),action:()=>{a(e.id)},closeParentMenu:!0})))}]),[s,e.teamStores,a]),d=n.inputValue,l=(0,D.jsx)(ts.Z,{filter:d,context:{blocks:[],environment:t,publicEditMode:void 0},sections:o,initialFocus:0}),c=(0,D.jsx)(Ke.Z,{isInput:!0,children:(0,D.jsx)(ss.ZP,{value:d,onChange:(0,i.useCallback)((e=>{r({inputValue:e.target.value,focus:!1})}),[r]),focus:!0,focusAfterAnimation:!0,placeholder:Qt.default.formatMessage(ns.filterTeams)})}),u={menuType:G.og.Popup,width:280,maxHeight:"50vh",header:e.teamStores.length>5?c:void 0};return(0,D.jsx)(Ne.Z,{...u,children:l})}const as=function(e){window.__c={n:"TeamsDropdownForGroup"};const t=(0,ne.qz)(void 0,dt.Z),[s]=(0,ne.AF)(Xt.Z),n=(0,re.yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),r=(0,ne.VK)((()=>s.teams.filter((t=>t.getMembers().some((t=>"group"===t.entity_type&&t.group_id===e.group.id))))),[s,e.group]);return(0,D.jsx)(Ve.ZP,{popupType:Ve.Z4.Popup,renderOrigin:e=>(0,D.jsxs)(ut.Z,{disabled:0===r.length,style:0===r.length?n.noTeams:n.button,...e,children:[0===r.length?(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCountNone",defaultMessage:"None"}):(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCount",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:r.length}}),r.length>0&&(0,nt.i)(n.chevron)]}),buttonPopupStore:t,placementToOrigin:Jt.Iw.Bottom,render:e=>(0,D.jsx)(rs,{parent:e,teamStores:r}),onClose:(0,i.useCallback)((()=>{t.reset()}),[t])})};var os=s(68418),ds=s(93405);function ls(e){window.__c={n:"GroupActionMenu"};const{group:t,spaceStore:s,settingsStore:i}=e,n=(0,ne.qz)(void 0,dt.Z);return(0,D.jsx)(Ve.ZP,{popupType:Vt.kQ.Popup,render:()=>(0,D.jsx)(cs,{group:t,spaceStore:s,popupStore:n,settingsStore:i}),buttonPopupStore:n,renderOrigin:e=>(0,D.jsx)(Ue.Z,{icon:l.o,...e})})}function cs(e){window.__c={n:"ActionMenu"};const{group:t,spaceStore:s,popupStore:n,settingsStore:r}=e,a=(0,z.Gc)(),o=(0,ne.VK)((()=>s.canAdmin()),[s]),d=(0,vt.O7)(),l=(0,re.yK)((e=>({deleteButton:{color:e.redBadgeBackground}})),[]),c=(0,i.useCallback)((async()=>{n.setState({open:!1});await T.confirmUserAction({message:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group? Any pages that are private to this group will be transferred to you."}),acceptLabel:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})})&&(await E.createAndCommitAsync({environment:d,userAction:"SpacePermissionGroup.handleDelete",waitForServerCommit:!1,perform:async e=>{await Z.Xv({environment:d,spaceStore:s,group:t,transaction:e})}}),C.dan(d))}),[t,d,s,n]),u=(0,i.useCallback)((()=>{r.setState({...r.state,editingNameGroupId:t.id,groupNameInputValue:t.name||""}),n.setState({open:!1}),C.XbW(d)}),[t,d,n,r]),m=(0,i.useCallback)((()=>{os.Z.setState({...os.Z.state,name:t.name||"",defaultInviteTargets:[{type:"group",value:t}]}),es.lo("group_settings")}),[t]),g={key:"action_menu",render:e=>(0,D.jsx)(Ke.Z,{...e}),items:p.oA([{key:"rename",render:e=>(0,D.jsx)(ds.Z,{...e,title:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})}),action:u},a?{key:"create_team_from_group",render:e=>(0,D.jsx)(ds.Z,{...e,title:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.createTeamFromGroup",defaultMessage:"Create teamspace from group"})}),action:m}:void 0,o&&{key:"delete",render:e=>(0,D.jsx)(ds.Z,{...e,title:(0,D.jsx)("div",{style:l.deleteButton,children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"})})}),action:c}])};return(0,D.jsx)(Ne.Z,{menuType:G.og.Popup,children:(0,D.jsx)(qe.Z,{type:qe.i.Vertical,initialFocus:0,sections:[g],onAccept:()=>{n.setState({open:!1})}})})}class us extends r.default{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}const ms=us;var gs=s(86125),ps=s(66897),hs=s(33728),fs=s(47453),Ss=s(2985),vs=s(92864),ys=s(47082),xs=s(97680);function Ms(e){window.__c={n:"GroupAddMembersButton"};const{group:t,spaceStore:s,groupStore:i}=e,n=(0,ne.qz)(void 0,dt.Z),r=(0,re.yK)((()=>({popup:{width:400},button:{marginTop:4}})),[]);return(0,D.jsx)(Ve.ZP,{popupType:Vt.kQ.Popup,render:()=>(0,D.jsx)(bs,{spaceStore:s,group:t,popupStore:n,groupStore:i}),buttonPopupStore:n,onClose:()=>i.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),style:r.popup,renderOrigin:e=>(0,D.jsx)("div",{children:(0,D.jsx)(ut.Z,{isGray:!0,icon:fs.R,style:r.button,...e,children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})})})})}function bs(e){window.__c={n:"AddMemberMenu"};const t=(0,vt.O7)(),s=(0,w.useIntl)(),{group:n,spaceStore:r,popupStore:a,groupStore:o}=e,d=(0,ne.VK)((()=>o.state.temporaryUserIds.map((e=>{const t=r.getRecordValue({table:v.KJ,id:e});return(0,D.jsx)(vs.vw,{userValue:t,format:vs.vw.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const t=o.state.temporaryUserIds.filter((t=>t!==e));o.setState({...o.state,temporaryUserIds:t})},shouldShrink:!0,isSingle:!1},e)}))),[r,o]),l=(0,ne.VK)((()=>()=>{const{temporaryUserIds:e}=o.state,s=n.user_ids||[],i=p.G0(s,e),d={...n,user_ids:i,last_edited_time:Date.now()};E.createAndCommit({userAction:"SpacePermissionGroup.handleAddDoneClick",environment:t,perform:e=>{Z.jF({spaceStore:r,group:d,transaction:e})}}),o.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),a.setState({open:!1}),C.Kf$(t,{add_member_count:e.length})}),[n,t,o,a,r]),c=(0,i.useCallback)((()=>{const{temporaryUserIds:e}=o.state,t=e.slice(0,e.length-1);o.setState({...o.state,temporaryUserIds:t})}),[o]),u=(0,i.useCallback)((e=>{const t=e.target.value,{extractedEmails:s,newInputValue:i}=(0,hs.zI)(t),{currentSpaceStore:n}=H.default.state,{data:r}=te.default.state;if(!r||!n)return;const a=(0,Me.CM)(r).map((e=>e.userId)),d=p.oA(a.map((e=>$.U6.createChildStore(n,{table:v.KJ,id:e}).getValue()))).filter((e=>s.includes(e.email)&&!o.state.temporaryUserIds.includes(e.id)));o.setState({...o.state,temporaryUserIds:[...o.state.temporaryUserIds,...d.map((e=>e.id))],userInputValue:i})}),[o]),m=(0,ne.VK)((()=>o.state.userInputValue),[o]),g=(0,ne.VK)((()=>o.state.temporaryUserIds),[o]);return(0,D.jsx)(Ne.Z,{menuType:G.og.Popup,tokenInputHeader:!0,header:(0,D.jsx)(ys.Z,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:ys.Z.Format.Group,tokens:d,placeholder:s.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:c,value:m,onChange:u,inputAndTokenWrapRightStyle:{paddingTop:t.device.isMobile?0:6,paddingBottom:t.device.isMobile?0:6},right:(0,D.jsx)(De.Z,{isLarge:!0,onClick:l,children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"})})}),children:(0,D.jsx)(ze.Z,{request:{query:m,temporaryUserIds:g},performRequest:async s=>{let{query:i,temporaryUserIds:n}=s;const r=e.group.user_ids||[];return(await Ss.Yu({environment:t,query:i,membersOnly:!0})).filter((e=>r.indexOf(e.id)<0&&n.indexOf(e.id)<0)).slice(0,20)},render:(e,t)=>(0,D.jsx)(ws,{results:t,spaceStore:r,groupStore:o})})})}function ws(e){window.__c={n:"AddMemberResults"};const{spaceStore:t,groupStore:s}=e,[i,n]=(0,ne.AF)(s,ms),r=(e.results||[]).map((e=>{let{id:t}=e;return t})),a=(0,ne.VK)((()=>r.map((e=>{const s=$.U6.createChildStore(t,{table:v.KJ,id:e}).getValue();return{key:e,render:e=>(0,D.jsx)(xs.Z,{...e,actor:(0,ps.m3)(s),useEmailAsTooltip:!0}),action:()=>{const t=[...i.temporaryUserIds,e];n({...i,temporaryUserIds:t,userInputValue:""})}}}))),[t,n,i,r]);if(0===r.length)return(0,D.jsx)(Ke.Z,{children:(0,D.jsx)(ct.Z,{title:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})})});{const e={key:"user_menu",render:e=>(0,D.jsx)(Ke.Z,{...e}),items:a};return(0,D.jsx)(qe.Z,{type:qe.i.Vertical,initialFocus:0,sections:[e]})}}function js(e){window.__c={n:"GroupMembers"};const{group:t,canEdit:s,spaceStore:i,settingsStore:n}=e,r=(0,w.useIntl)(),a=(0,ne.qz)(void 0,ms),{groupMembers:o,remainingMembers:d}=(0,ne.VK)((()=>{const{countRemainingUsers:e,totalNumberMembers:s,limitedUserStores:o}=(0,Xe.rm)({group:t,spaceStore:i,limit:a.state.limitUsers&&!n.state.groupsFilter?10:void 0});return{groupMembers:(0,Xe.N5)({userStores:o,spaceStore:i,intl:r}),remainingMembers:e,totalMembers:s}}),[t,i,n,a,r]);return(0,D.jsxs)("div",{style:{padding:"4px 42px 8px"},children:[o.map((t=>(0,D.jsx)(Cs,{userStore:t,...e},t.id))),d>0&&(0,D.jsx)(ut.Z,{isGray:!0,style:{marginTop:4},onClick:()=>{a.setState({...a.state,limitUsers:!1})},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:d}})}),s?(0,D.jsx)(Ms,{group:t,spaceStore:i,groupStore:a}):o.length<1&&(0,D.jsx)(ut.Z,{disabled:!0,isGray:!0,children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.noMembersInside",defaultMessage:"No members inside"})})]})}function Cs(e){window.__c={n:"GroupMember"};const{spaceStore:t,userStore:s,group:i,canEdit:n}=e,r=(0,vt.O7)(),o=(0,ne.VK)((()=>t.isDefined()?(0,N.su)(t.getPermissionItems(),s.id):"none"),[t,s]);return(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,D.jsxs)("div",{style:{display:"flex"},children:[(0,D.jsx)(kt.Z,{userStore:s,style:{fontSize:14,fontWeight:400,lineHeight:"17px",paddingRight:6,minHeight:34,width:"100%"},avatarSize:22}),(0,h.Bc)(o)&&(0,D.jsx)(gs.Z,{role:"membership_admin"===o?"membership_admin":"admin"})]}),n&&(0,D.jsx)(ut.Z,{isGray:!0,hoveredStyle:{color:a.ZP.red},onClick:async()=>{if(await T.confirmUserAction({message:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})})){const e=(i.user_ids||[]).filter((e=>e!==s.id)),n={...i,user_ids:e,last_edited_time:Date.now()};E.createAndCommit({userAction:"SpacePermissionGroup.renderUser",environment:r,perform:e=>{Z.jF({spaceStore:t,group:n,transaction:e})}}),C.xtf(r)}},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})})]},s.id)}var ks=s(13991),Is=s(75071),Ts=s(44295),Ps=s(22808),Fs=s(69015),_s=s(12793),Zs=s(3386),As=s(5210);function Rs(e){window.__c={n:"GroupNameToggle"};const{row:t,canEdit:s,open:n,toggleOpenState:r,spaceStore:a,settingsStore:o}=e,d=t.group,l=(0,w.useIntl)(),c=(0,re.Fg)(),u=(0,vt.O7)(),m=Xe.kF({intl:l,group:d}),g=(0,re.yK)((e=>({container:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%"},toggle:{flexShrink:0,marginRight:2},chevron:{width:12,height:12,transition:"transform 200ms ease-out",transform:`rotateZ(${n?0:-90}deg)`,fill:"inherit",opacity:.5,marginRight:4},name:{fontFamily:M.Z.getCompositeFontFamily(ks.SP).sans,fontSize:14,lineHeight:"17px",marginRight:4},input:{fontWeight:M.Z.fontWeight.medium,padding:"4px 6px",background:e.contentBackgroundTransparent},icon:{marginRight:9}})),[n]),p=(0,i.useCallback)((e=>{const t={...d,icon:e,last_edited_time:Date.now()};E.createAndCommit({userAction:"SpacePermissionGroup.handleIconChange",environment:u,perform:e=>{Z.jF({spaceStore:a,group:t,transaction:e})}}),C.zUE(u,{is_emoji:(0,Ps.Z)(e)})}),[d,a,u]),h=(0,i.useCallback)((()=>{o.setState({...o.state,editingNameGroupId:void 0,groupNameInputValue:""})}),[o]),f=(0,i.useCallback)((e=>{o.setState({...o.state,groupNameInputValue:e.target.value})}),[o]),S=(0,i.useCallback)((()=>{const{editingNameGroupId:e,groupNameInputValue:t}=o.state,s=t.trim();if(e===d.id){if(s!==d.name){const e={...d,name:s,last_edited_time:Date.now()};E.createAndCommit({userAction:"SpacePermissionGroup.handleNameAccept",environment:u,perform:t=>{Z.jF({spaceStore:a,group:e,transaction:t})}})}o.setState({...o.state,editingNameGroupId:void 0,groupNameInputValue:""})}}),[d,u,a,o]),v=(0,ne.VK)((()=>o.state.editingNameGroupId===d.id),[d,o]),y=(0,ne.VK)((()=>o.state.groupNameInputValue),[o]);function x(e){const t={width:e-4,height:e-4,fill:c.mediumIconColor},s={width:12,height:12,fill:c.mediumIconColor};return(0,D.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,Ts.I)(t),(0,Is.f)(s)]})}return(0,D.jsxs)("div",{style:g.container,children:[(0,D.jsx)(As.Z,{isSidebar:!1,fill:!0,icon:"chevron",open:n,color:c.mediumIconColor,onClick:()=>r(d.id),style:g.toggle}),(0,D.jsx)(_s.Z,{size:28,style:g.icon}),v?(0,D.jsx)(Zs.Z,{capture:!0,onEsc:h,children:(0,D.jsx)(Fe.Z,{disabled:!s,type:Fs.Z.Type.Inline,style:g.input,placeholder:l.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:y,onChange:f,onBlur:S,onSubmit:S})}):(0,D.jsx)($e.Z,{style:g.name,showTooltipWhenTruncated:!0,children:m}),(b=t.isRowHovered,d.icon?s?(0,D.jsx)(et.Z,{disabled:!1,bucket:"public",icon:d.icon?{pointer:a.pointer,icon:d.icon}:void 0,size:18,isEmptyPage:!1,title:m,onChange:p,style:g.icon}):(0,D.jsx)(et.Z,{disabled:!0,bucket:"public",icon:d.icon?{pointer:a.pointer,icon:d.icon}:void 0,size:18,isEmptyPage:!1,title:m,style:g.icon}):b&&s?(0,D.jsx)(Ye.Z,{renderTooltip:()=>(0,D.jsx)(w.FormattedMessage,{defaultMessage:"Add icon",id:"spacePermissionsSettings.groupsTab.userGroup.groupIcon.tooltip"}),render:e=>(0,D.jsx)(et.Z,{disabled:!1,bucket:"public",icon:d.icon?{pointer:a.pointer,icon:d.icon}:void 0,size:18,isEmptyPage:!1,title:m,onChange:p,style:{...g.icon,width:30},defaultIcon:x(18),...e})}):void 0)]});var b}function Bs(e){let{groups:t,canEdit:s,spaceStore:n,permissionsSettingsStore:r}=e;window.__c={n:"SpaceGroupsTable"};const[a,d]=(0,i.useState)([]),l=(0,re.Fg)(),c=(0,z.Gc)(),u=(0,ne.VK)((()=>(0,o.ZP)(r.state.groupsFilter,t,(e=>e.name||""))),[r,t]),m=(0,i.useCallback)((e=>{d((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat(e)))}),[d]),g=(0,i.useMemo)((()=>function(e){return e.map((e=>({id:e.id,group:e,isClickable:!1})))}(u)),[u]),p=(0,i.useMemo)((()=>function(e){let{openRowIds:t,toggleOpenRowId:s,canEdit:i,spaceStore:n,settingsStore:r,isTeamEnabled:a}=e;const o={id:"title",headerTitle:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.groups",defaultMessage:"Group"}),renderCell:e=>(0,D.jsx)(Rs,{row:e,open:t.includes(e.id),toggleOpenState:s,canEdit:i,spaceStore:n,settingsStore:r}),widthData:{width:120},hasClickableContents:!1,sortable:!1},d={id:"teams",headerTitle:(0,D.jsx)("div",{style:{paddingLeft:8},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.teams",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,D.jsx)("div",{style:M.Z.textOverflowStyle,children:(0,D.jsx)(as,{group:e.group})}),widthData:{width:40},hasClickableContents:!1,sortable:!1},l={id:"members",headerTitle:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.member",defaultMessage:"Members"}),renderCell:e=>(0,D.jsx)(Es,{spaceStore:n,row:e}),widthData:{width:40},hasClickableContents:!1,sortable:!1},c={id:"menu",headerTitle:null,renderCell:e=>(0,D.jsx)(ls,{group:e.group,spaceStore:n,settingsStore:r}),widthData:{width:20},hasClickableContents:!0,sortable:!1};return[o,...a?[d]:[],l,...i?[c]:[]]}({openRowIds:a,toggleOpenRowId:m,canEdit:s,spaceStore:n,settingsStore:r,isTeamEnabled:c})),[a,m,s,n,r,c]),h=(0,Ht.b)({columnRenderInfo:p,theme:l});return(0,D.jsx)(Ht.D,{showRowBorders:!0,hideHeaderRowPadding:!0,columnRenderInfo:p,rows:g,styles:h,renderNoRowsComponent:()=>(0,D.jsx)($e.Z,{isSmall:!0,style:{marginLeft:5,marginTop:10,marginBottom:20},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroupsFound",defaultMessage:"No groups found."})}),renderRowChild:e=>a.includes(e.id)?(0,D.jsx)(js,{group:e.group,canEdit:s,spaceStore:n,settingsStore:r}):void 0})}function Es(e){window.__c={n:"MembersCountCell"};const{spaceStore:t,row:s}=e,i=(0,ne.VK)((()=>(0,Xe.kQ)({group:s.group,spaceStore:t}).length),[t,s.group]);return(0,D.jsx)("div",{style:M.Z.textOverflowStyle,children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:i}})})}var Ds=s(66957);const Ls=(0,w.defineMessages)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function Vs(e){window.__c={n:"TeamGuestPageContent"};const{teamGuest:t}=e,s=(0,vt.O7)(),i=(0,ne.VK)((()=>H.default.state.currentSpaceStore),[]);if(!i)return null;if(0===t.guestPageIds.length)return null;const n=[{key:"pages",render:e=>(0,D.jsx)(Ke.Z,{...e}),items:t.guestPageIds.map((e=>{const t=$.G.createChildStore(i,{table:rt.iU,id:e});return{key:e,render:e=>(0,D.jsx)(mt.Z,{...e,store:t,placeholder:(0,D.jsx)(w.FormattedMessage,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const t=$.G.createChildStore(i,{table:rt.iU,id:e}),n=(0,ot.ZP)({store:t,fullyQualified:!1,pageVisitSource:it.tY.LinkInPage});at.navigate({environment:s,url:n,openInNew:"tab"})}}}))}],r={menuType:G.og.Popup,minWidth:300,maxWidth:350,maxHeight:300,header:t.guestPageIds.length>0&&(0,D.jsx)($e.Z,{isSmall:!0,style:{color:a.ZP.regularTextColor,marginLeft:15,marginRight:15,paddingTop:6},children:(0,D.jsx)(w.FormattedMessage,{id:"guestpagesforteamguest.header",defaultMessage:"Pages"})})};return(0,D.jsx)(Ne.Z,{...r,children:(0,D.jsx)(qe.Z,{type:qe.i.Vertical,initialFocus:void 0,sections:n})})}function Os(e){window.__c={n:"TeamGuestTeamContent"};const t=(0,vt.O7)(),s=(0,ne.qz)(void 0,$t.Z),n=(0,ne.VK)((()=>s.state.inputValue),[s]),r=(0,i.useCallback)((e=>es.RF({environment:t,teamId:e,tab:Yt.a.Members,from:"teams_dropdown_for_team_guest"})),[t]),a=(0,re.yK)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),o=(0,ne.VK)((()=>[{key:"teams for team guest",render:e=>(0,D.jsx)(Ke.Z,{...e}),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>(0,D.jsx)(Le.Z,{icon:(0,D.jsx)(is.p,{disabled:!0,store:e}),title:(0,D.jsx)($e.Z,{style:a.teamMenuItem,children:e.getName()}),caption:(0,D.jsx)(w.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:e.getUserIdsInTeam().length}}),inline:!0,...t}),action:()=>{r(e.id)},closeParentMenu:!1})))}]),[e.teamStores,a.teamMenuItem,r]),d=(0,D.jsx)(Ke.Z,{isInput:!0,children:(0,D.jsx)(ss.ZP,{value:n,onChange:(0,i.useCallback)((e=>{s.setState({inputValue:e.target.value,focus:!1})}),[s]),focus:!0,focusAfterAnimation:!0,placeholder:Qt.default.formatMessage(Ls.filterTeams)})}),l={menuType:G.og.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?d:void 0};return(0,D.jsx)(Ne.Z,{...l,children:(0,D.jsx)(ts.Z,{filter:n,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:0,sections:o})})}const Us=function(e){window.__c={n:"TeamsAndPagesDropdownForTeamGuest"};const{teamGuest:t}=e,s=(0,ne.VK)((()=>Xt.Z.state.teams),[]),i=(0,ne.VK)((()=>s.filter((e=>e.getMembers().some((e=>"user"===e.entity_type&&e.user_id===t.userId))))),[s,t]),n=(0,re.yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),r=i.length??0;return(0,D.jsx)(Ve.ZP,{popupType:Ve.Z4.Popup,renderOrigin:e=>(0,D.jsx)(ut.Z,{disabled:0===r,style:0===r?n.noTeams:n.button,...e,children:0===r?(0,D.jsx)(w.FormattedMessage,{id:"teamsDropdownForTeamGuest.teamsCountNone.label",defaultMessage:"No access"}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(w.FormattedMessage,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:r}}),(0,nt.i)(n.chevron)]})}),render:()=>(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Os,{teamGuest:t,teamStores:i}),(0,D.jsx)(Oe.Z,{size:"100%"}),(0,D.jsx)(Vs,{teamGuest:t})]})})};var Gs=s(88775),Ns=s(69435);class qs extends n.Z{constructor(){super(...arguments),this.storeTypes={spacePermissionsSettingsStore:X.Z,getRecoverableSpaceUserContentRequestStore:J.Z,accessRequestsStore:J.Z,isPageGuestsOpen:r.default.createClass(!0),isTeamGuestsOpen:r.default.createClass(!0)},this.userIdsWithContentBeingReprovisioned=r.default.createValue([]),this.isTeamGuestsEnabled=this.createComputedStore((()=>(0,U.F$)())),this.renderReprovisioningData=(e,t,s)=>t?(0,D.jsx)(wt.Z,{columns:[{key:"user",header:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"50%"}},{key:"count",header:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.pageCountColumn.header",defaultMessage:"Private pages"}),style:{width:"25%"}},{key:"action",header:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.actionLevelColumn.header",defaultMessage:"Action"}),style:{width:"25%"}}],rows:this.getSpaceRecoverRows(t.recentSpaceRecoverPages)}):!s&&(0,D.jsx)(Ge.Z,{}),this.handleUpdateClick=()=>{const e=(0,w.defineMessages)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});F.j({message:e.updatingPermissions})},this.handleUpdateComplete=()=>{F.x()},this.handleTabClick=(e,t)=>{const s=this.getCurrentTabs(t)[e];switch(s){case X.Q.Members:C.qTS(this.environment,{tab:"members"});break;case X.Q.Groups:C.qTS(this.environment,{tab:"groups"});break;case X.Q.Guests:C.qTS(this.environment,{tab:"guests"});break;case X.Q.Reprovisioning:C.qTS(this.environment,{tab:"reprovisioning"});break;case X.Q.Requests:C.qTS(this.environment,{tab:"requests"});break;default:(0,x.t1)(s)}this.stores.spacePermissionsSettingsStore.state.currentTab===X.Q.Requests&&s!==X.Q.Requests&&se.Z.reset(),this.navigateToTab(s)},this.navigateToTab=e=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,currentTab:e})},this.handleCreateGroupClick=()=>{E.createAndCommit({userAction:"SpacePermissionsSettings.handleCreateGroupClick",environment:this.environment,perform:e=>{const t=Z.mo({environment:this.environment,spaceStore:this.props.store,transaction:e});t&&this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,editingNameGroupId:t.id,groupNameInputValue:""})}}),C.O8v(this.environment)},this.handleFilterChange=e=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,groupsFilter:e.target.value})},this.handleMembersShowMoreClick=()=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,limitMembers:!1})},this.handleGuestsShowMoreClick=()=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,limitGuests:!1})},this.handleTeamGuestsShowMoreClick=()=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,limitTeamGuests:!1})},this.handleInviteLinkClick=()=>{const e=!this.getInviteLinkEnabled();C.eoz(this.environment,{enabled:e}),E.createAndCommit({userAction:"SpacePermissionsSettings.handleInviteLinkClick",environment:this.environment,perform:t=>{Z.ys({transaction:t,spaceStore:this.props.store,inviteLinkEnabled:Boolean(e)})}})},this.handleSortClick=(e,t)=>{const s=this.stores.spacePermissionsSettingsStore.state.sorts[e];let i;i=!(!s||s.by!==t)&&s.asc,this.stores.spacePermissionsSettingsStore.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!i}}})))},this.handleMemberPermissionRoleChange=async(e,t,s)=>{const{store:i}=this.props,n=this.environment.currentUser.id;if(e.userId!==n||"none"!==t)this.handleUpdateClick(),"none"===t?(await k.removeUsersFromSpace(this.environment,{userIds:[e.userId],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!0}),await R.bi(this.environment)):E.createAndCommit({userAction:"SpacePermissionsSettings.handleMemberPermissionRoleChange",environment:this.environment,perform:s=>_.ep({environment:this.environment,store:i,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s,from:"space_permission_setting_table"})}),this.handleUpdateComplete();else{await Z.bf({environment:this.environment,spaceId:i.id,userSettingsStore:s})&&(C.JkE(this.environment,{is_space:!0,invite_origin:"workspace_remove_member",domainType:(0,A.JF)(),new_workspace_member_count:-1}),ee.Z.setState({...ee.Z.state,open:!1}))}},this.handleReprovisionToUserChange=async(e,t)=>{if(!(await T.confirmUserAction({message:(0,D.jsx)("span",{children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Are you sure you want to transfer their private pages? This action cannot be undone."})}),acceptLabel:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})})))return;this.userIdsWithContentBeingReprovisioned.setState([...this.userIdsWithContentBeingReprovisioned.state,e]);const s=await k.transferSpaceUserContent(this.environment,{spaceId:this.props.store.id,fromUserId:e,toUserId:t});"failed"===s.type&&T.showError(s),await this.stores.getRecoverableSpaceUserContentRequestStore.refresh(),this.userIdsWithContentBeingReprovisioned.setState(this.userIdsWithContentBeingReprovisioned.state.filter((t=>t!==e)))}}willMount(){this.setInitialSubtabOnMount()}renderComponent(){const{store:e,isMobile:t}=this.props;if(!Q.Z.state.online)return this.renderOfflineMessage();const{data:s}=te.default.state;if(!s)return this.renderLoadingSpinner();const n=Me.CM(s);if(!p.yW(n.map((t=>$.U6.createChildStore(e,{table:v.KJ,id:t.userId}).isReady()))))return this.renderLoadingSpinner();const r=n.filter(y.CF),a=n.filter(y.du),o=this.isTeamGuestsEnabled.state?a.length:a.filter((e=>!e.isTeamGuest&&e.isPageGuest)).length,{currentTab:d}=this.stores.spacePermissionsSettingsStore.state;if(t)return(0,D.jsxs)(i.Fragment,{children:[this.canEditMembership()&&(0,D.jsxs)(Ke.Z,{shouldShowBottomDivider:!0,children:[this.renderMobileInviteButton(),(0,D.jsx)("div",{style:this.mobileMenuItemStyle(),children:this.renderInviteLink()})]}),(0,D.jsx)(Ke.Z,{children:this.renderSpaceMembers(r)})]});const l={[X.Q.Members]:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"}),(0,D.jsx)("span",{children:" "}),(0,D.jsx)("span",{style:{color:this.theme.lightTextColor},children:r.length})]}),[X.Q.Groups]:(0,D.jsx)(w.FormattedMessage,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),[X.Q.Guests]:(0,D.jsxs)(D.Fragment,{children:[this.isTeamGuestsEnabled.state?(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.title",defaultMessage:"External"}):(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),(0,D.jsx)("span",{children:" "}),(0,D.jsx)("span",{style:{color:this.theme.lightTextColor},children:o})]}),[X.Q.Reprovisioning]:(0,D.jsx)(w.FormattedMessage,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"}),[X.Q.Requests]:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(w.FormattedMessage,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"}),(0,D.jsx)("span",{children:" "}),(0,D.jsx)("span",{style:{color:this.theme.lightTextColor},children:this.renderNumberOfRequests()}),this.renderUnreadRequestDot()]})},c=this.getCurrentTabs(a),u=c.map((e=>l[e]));return(0,D.jsxs)(zt.Z,{children:[this.isTeamGuestsEnabled.state&&(0,D.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,marginBottom:20},children:[(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:7},children:[(0,D.jsx)($e.Z,{style:{fontWeight:M.Z.fontWeight.medium,fontSize:17},children:(0,D.jsx)(w.FormattedMessage,{id:"spaceBasicSettings.people.title",defaultMessage:"People"})}),(0,D.jsx)(ht.Z,{href:(0,q.UY)("guides.members"),analyticsFrom:"members_settings"})]}),(0,D.jsx)($e.Z,{isSecondaryColor:!0,style:{fontSize:15},children:(0,D.jsx)(w.FormattedMessage,{id:"spaceBasicSettings.people.subtitle",defaultMessage:"Manage members, external guests, groups and permissions."})})]}),(0,D.jsx)(Ds.Z,{tabs:u,selectedIndex:c.indexOf(d),onChange:e=>this.handleTabClick(e,a),style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitleStyle:{fontSize:16}}),this.renderTab(d,r,a)]})}renderLoadingSpinner(){return(0,D.jsx)(Ge.Z,{style:{margin:"calc(50% - 1em) auto"}})}renderOfflineMessage(){return(0,D.jsx)(zt.Z,{children:(0,D.jsx)($e.Z,{isSmall:!0,style:{textAlign:"center"},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})})})}renderHelp(){return(0,D.jsx)("div",{style:{marginTop:24,marginBottom:24},children:(0,D.jsx)(ht.Z,{title:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.helpButton.caption",defaultMessage:"Learn about adding members to your workspace"}),href:(0,q.UY)("guides.members"),analyticsFrom:"members_settings"})})}renderTab(e,t,s){return e===X.Q.Members?(0,D.jsx)(i.Fragment,{children:this.renderSpaceMembers(t)}):e===X.Q.Guests?(0,D.jsx)(D.Fragment,{children:this.isTeamGuestsEnabled.state?this.renderExternalTab(s):this.renderSpaceGuests(s)}):e===X.Q.Groups?this.renderGroupsTab():e===X.Q.Reprovisioning?this.renderReprovisioning():e===X.Q.Requests?this.renderRequestsTab():void(0,x.t1)(e)}renderExternalTab(e){const{store:t}=this.props,s=!Boolean(t.getSettingsStore().getKeyStore("disable_team_guests").getValue());return(0,D.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[s&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{style:{display:"flex"},children:[(0,D.jsx)(As.Z,{open:this.stores.isTeamGuestsOpen.state,onClick:()=>this.stores.isTeamGuestsOpen.setState(!this.stores.isTeamGuestsOpen.state),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,D.jsxs)("div",{style:{marginLeft:3},children:[(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,D.jsx)($e.Z,{style:{fontSize:15},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionSettings.teamGuests.title",defaultMessage:"Teamspace guests"})}),(0,D.jsx)("span",{children:" "}),(0,D.jsx)($e.Z,{isSecondaryColor:!0,style:{fontSize:15},children:e.filter((e=>e.isTeamGuest)).length})]}),(0,D.jsx)($e.Z,{isSecondaryColor:!0,style:{fontSize:15},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionSettings.teamGuests.subtitle",defaultMessage:"Teamspace guests are billed as members and can access all pages in teamspaces they've been invited to."})})]})]}),this.stores.isTeamGuestsOpen.state&&this.renderTeamGuests(e)]}),(0,D.jsxs)("div",{style:{display:"flex"},children:[(0,D.jsx)(As.Z,{open:this.stores.isPageGuestsOpen.state,onClick:()=>this.stores.isPageGuestsOpen.setState(!this.stores.isPageGuestsOpen.state),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,D.jsxs)("div",{style:{marginLeft:3},children:[(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,D.jsx)($e.Z,{style:{fontSize:15},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionSettings.pageGuests.title",defaultMessage:"Page guests"})}),(0,D.jsx)("span",{children:" "}),(0,D.jsx)($e.Z,{isSecondaryColor:!0,style:{fontSize:15},children:e.filter((e=>e.isPageGuest&&!e.isTeamGuest)).length})]}),(0,D.jsx)($e.Z,{isSecondaryColor:!0,style:{fontSize:15},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionSettings.pageGuests.subtitle",defaultMessage:"Page guests are free but can only access pages they've been invited to."})})]})]}),this.stores.isPageGuestsOpen.state&&this.renderSpaceGuests(e)]})}renderUnreadRequestDot(){if(this.props.unreadAccessRequests&&this.props.unreadAccessRequests>0)return(0,D.jsx)(bt.z,{color:this.theme.redBadgeBackground,style:{marginLeft:6}})}renderGroupsTab(){const{store:e}=this.props,{groupsFilter:t}=this.stores.spacePermissionsSettingsStore.state,s=this.canUseGroups(),i=this.canEditMembership(),n=(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."});if(e.isDefined()){const r=e.getPermissionGroups();return(0,D.jsxs)("div",{children:[s?(0,D.jsx)($e.Z,{isMultiline:!0,style:{width:"80%"},children:(0,z.bq)()?(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}):(0,D.jsx)(Ns.Z,{for:"plus",from:"permission_groups",icon:c.x,title:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),(0,D.jsx)(Oe.Z,{size:24,isHidden:!0}),(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s&&(0,D.jsx)(Ye.Z,{renderTooltip:()=>!i&&n,render:e=>(0,D.jsx)(De.Z,{isLarge:!0,onClick:this.handleCreateGroupClick,disabled:!i,...i?void 0:e,children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}),r.length>0&&(0,D.jsx)(Fe.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupNamesInput.placeholder",defaultMessage:"Filter by group name…"}),left:(0,m.R)(this.getSearchIconStyle()),showClearButton:!0,format:Fe.Z.Format.Small,value:t,style:{...qs.filterStyle,marginRight:0},onChange:this.handleFilterChange})]}),r.length>0&&(0,D.jsx)(Bs,{spaceStore:e,permissionsSettingsStore:this.stores.spacePermissionsSettingsStore,groups:r,canEdit:this.canEditGroups()})]})}}renderSpaceMembers(e){return this.props.isMobile?this.renderMobileMemberList(e):(0,D.jsxs)("div",{children:[this.renderHelp(),this.renderInviteLink(),this.renderDesktopMemberList(e)]})}renderInviteLink(){if(!this.canUseInviteLink())return;const e=this.getInviteLink(),t=this.getInviteLinkEnabled();if(!e)return;const{spacePermissionsSettingsStore:s}=this.stores;return(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"},children:[(0,D.jsxs)("div",{style:{marginRight:8,flexGrow:1},children:[(0,D.jsx)(Kt.Z,{children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})}),(0,D.jsxs)($e.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:[(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only users who can invite members can see this."})," ",!this.props.isMobile&&this.renderInviteLinkReset()]})]}),(0,D.jsx)("div",{style:{marginTop:5},children:(0,D.jsx)(Qe.Z,{on:t,onClick:this.handleInviteLinkClick})})]}),s&&t&&e&&this.renderInviteLinkUrl(e),(0,D.jsx)(Oe.Z,{size:40})]})}renderInviteLinkReset(){const{store:e}=this.props;if(e.isDefined())return(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> for all space members to generate a new invite link.",values:{resetlink:t=>(0,D.jsx)(ft.Z,{onClick:()=>{T.showDialog({message:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:T.dismissDialog,items:[{label:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await k.refreshInviteLink(this.environment,{spaceId:e.id}),R.bi(this.environment)}}]})},children:t})}})}renderInviteLinkUrl(e){const{mobileNative:t}=this.environment,s=(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),i=()=>{I.RD({environment:this.environment,stringValue:e,copiedMessage:I.tq.copiedLinkToClipboard}),C.nlj(this.environment)},n=()=>{t&&t.share(e),C.nlj(this.environment)};return this.props.isMobile?(0,D.jsxs)("div",{children:[(0,D.jsx)(Fe.Z,{type:"text",format:Fe.B.Default,value:e,disabled:!0}),t?(0,D.jsx)(We.Z,{onClick:n,style:{marginTop:10,width:"100%"},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})}):(0,D.jsx)(We.Z,{onClick:i,style:{marginTop:10,width:"100%"},children:s})]}):(0,D.jsx)("div",{children:(0,D.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12},children:[(0,D.jsx)(Fe.Z,{type:"text",format:Fe.B.Default,value:e,disabled:!0,style:{borderTopRightRadius:0,borderBottomRightRadius:0,width:"calc(100% - 90px)",height:32}}),(0,D.jsx)(De.Z,{onClick:i,style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},isLarge:!0,children:s})]})})}renderMobileMemberList(e){const{store:t}=this.props;return(0,D.jsx)(i.Fragment,{children:e.map((e=>{const s=$.U6.createChildStore(t,{table:v.KJ,id:e.userId});return(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:10,borderBottom:`1px solid ${this.theme.lightDividerColor}`,background:this.theme.cardContentBackground},children:[this.renderMember(s),(0,D.jsx)("div",{style:{textAlign:"center",marginLeft:"auto"},children:this.renderUserPermission("members",e,s)})]},e.userId)}))})}renderDesktopMemberList(e){const{spacePermissionsSettingsStore:t}=this.stores,{membersFilter:s,limitMembers:n}=t.state,r=this.getFilteredMembers(e,s),a=this.sortUsers("members",r),o=n?a.slice(0,qs.defaultLimit):a;return(0,D.jsxs)(i.Fragment,{children:[(0,D.jsx)("div",{style:{marginRight:8,flexGrow:1},children:(0,D.jsx)(Kt.Z,{children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),this.renderInviteViaDomainCaption(),(0,D.jsx)(Oe.Z,{size:16,isHidden:!0}),(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[this.renderInviteButton(),(0,D.jsx)(Fe.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,m.R)(this.getSearchIconStyle()),showClearButton:!0,format:Fe.Z.Format.Small,value:s,style:qs.filterStyle,onChange:e=>{t.setState({...t.state,membersFilter:e.target.value,limitMembers:!0})}})]}),this.renderUserTable("members",o),a.length>qs.defaultLimit&&n&&(0,D.jsx)(He.Z,{style:qs.showMoreButtonStyle,onClick:this.handleMembersShowMoreClick,children:(0,D.jsx)(w.FormattedMessage,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:a.length-qs.defaultLimit}})})]})]})}renderTeamGuests(e){const{spacePermissionsSettingsStore:t}=this.stores,{teamGuestsFilter:s,limitTeamGuests:i}=t.state,n=e.filter((e=>e.isTeamGuest)),r=this.getFilteredMembers(n,s),a=this.sortUsers("team_guests",r),o=i?a.slice(0,5):a;return(0,D.jsx)("div",{style:{marginBottom:5},children:(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:(0,D.jsx)(Fe.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterTeamGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,m.R)(this.getSearchIconStyle()),showClearButton:!0,format:Fe.Z.Format.Small,value:s,style:qs.filterStyle,onChange:e=>{t.setState({...t.state,teamGuestsFilter:e.target.value,limitTeamGuests:!0})}})}),this.renderUserTable("team_guests",o),a.length>5&&i&&(0,D.jsx)(He.Z,{style:qs.showMoreButtonStyle,onClick:this.handleTeamGuestsShowMoreClick,children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:a.length-5}})})]})})}handleExportGuestsClick(e){const{currentSpaceStore:t}=H.default.state,{data:s}=te.default.state;t&&s&&"subscribed_admin"===s.type&&P.Mj(this.environment,{intl:this.props.intl,spaceStore:t,guests:e})}renderSpaceGuests(e){const{spacePermissionsSettingsStore:t}=this.stores,{guestsFilter:s,limitGuests:i}=t.state,n=e.filter((e=>!e.isTeamGuest&&e.isPageGuest)),r=this.getFilteredMembers(n,s),a=this.sortUsers("guests",r),o=this.isTeamGuestsEnabled.state?5:qs.defaultLimit,d=i?a.slice(0,o):a,{currentSpaceStore:l}=H.default.state,{data:c}=te.default.state,u=Boolean(l&&c&&"subscribed_admin"===c.type&&Y.default.checkGate("enable_guest_export"));return(0,D.jsx)("div",{children:(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,D.jsx)(Fe.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,m.R)(this.getSearchIconStyle()),showClearButton:!0,format:Fe.Z.Format.Small,value:s,style:qs.filterStyle,onChange:e=>{t.setState({...t.state,guestsFilter:e.target.value,limitGuests:!0})}}),u&&(0,D.jsx)(We.Z,{isLarge:!1,disabled:!1,isBlue:!0,onClick:()=>this.handleExportGuestsClick(a),disabledFeedback:!0,children:(0,D.jsx)(w.FormattedMessage,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})})]}),this.renderUserTable("guests",d),a.length>o&&i&&(0,D.jsx)(He.Z,{style:qs.showMoreButtonStyle,onClick:this.handleGuestsShowMoreClick,children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:a.length-o}})})]})})}renderMobileInviteButton(){return(0,D.jsxs)(i.Fragment,{children:[(0,D.jsx)("div",{style:this.mobileMenuItemStyle(),children:this.renderInviteButton({flex:1})}),(0,D.jsx)("div",{style:{borderBottom:`1px solid ${this.theme.regularDividerColor}`}})]})}renderInviteButton(e){const{store:t}=this.props;return t.canEditMembership()||t.getDisableMembershipRequests()||!(0,U.p1)()?(0,D.jsx)(K.LazyPermissionsInviteWithModal,{disabled:!this.canEditMembership(),store:t,onInviteClick:this.handleUpdateClick,onInviteComplete:this.handleUpdateComplete,isSubscribed:this.isSubscribed(),membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:e}):(0,D.jsx)(Nt,{store:t,analyticsFrom:"space_settings_add_members",origin:(0,D.jsx)(De.Z,{isLarge:!0,children:(0,D.jsx)(w.FormattedMessage,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})})}renderInviteViaDomainCaption(){const{store:e}=this.props;return Z.LV(e)?(0,D.jsx)($e.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,D.jsx)(w.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})}):(0,D.jsxs)("div",{children:[(0,D.jsx)($e.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:6},children:(0,D.jsx)(w.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace automatically.",values:{setupdomainlink:e=>(0,D.jsx)(ft.Z,{onClick:()=>{ee.Z.setState({...ee.Z.state,currentTab:"settings",defaultSubtab:void 0})},children:e})}})}),(0,D.jsx)($e.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,D.jsx)(w.FormattedMessage,{id:"spaceBasicSettings.membersTab.payPerMemberCaption",defaultMessage:"You will be charged for each member added. Visit <billingguidelink>our guide</billingguidelink> for more information on how we bill.",values:{billingguidelink:e=>(0,D.jsx)(ft.Z,{href:(0,q.UY)("guides.billingGuide"),children:e})}})})]})}getFilteredMembers(e,t){const{store:s,intl:i}=this.props;return t&&t.length>0?(0,o.ZP)(t,e,(e=>{const t=$.U6.createChildStore(s,{table:v.KJ,id:e.userId});return t.isDefined()?t.getSearchName(i):""})):e}sortUsers(e,t){const s=this.stores.spacePermissionsSettingsStore.state.sorts[e];if(!s)return t;const{store:i}=this.props;switch(s.by){case"role":return t.sort(((e,t)=>(h.xm[t.role]-h.xm[e.role])*(s.asc?-1:1)));case"name":return t.map((e=>({user:e,store:$.U6.createChildStore(i,{table:v.KJ,id:e.userId})}))).sort(((e,t)=>{const i=e.store.getValue(),n=t.store.getValue(),r=(0,b.Nz)(this.props.intl,i),a=(0,b.Nz)(this.props.intl,n);return r.localeCompare(a)*(s.asc?1:-1)})).map((e=>e.user))}}renderSmallArrow(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?(0,d.K)({...s,transform:"rotate(180deg)"}):(0,d.K)(s)}renderUserTable(e,t){const{store:s}=this.props,n=this.stores.spacePermissionsSettingsStore.state.sorts[e],r=s.getPermissionGroups().reduce(((e,t)=>{const s=t.user_ids||[];for(const i of s)e[i]=e[i]?e[i].concat(t):[t];return e}),{}),a={key:"user",header:(0,D.jsxs)(de.Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{this.handleSortClick(e,"name")},style:{display:"flex",alignItems:"center"},children:[(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),n&&"name"===n.by&&this.renderSmallArrow({up:n.asc})]}),style:{width:"45%"}},o={key:"groups",header:(0,D.jsx)(de.Z,{disabled:!0,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),style:{width:"15%"}},d={key:"teams",header:(0,D.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"})}),style:{width:"20%",textAlign:"center"}},l={key:"access_level",header:(0,D.jsxs)(de.Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{this.handleSortClick(e,"role")},style:{display:"flex",alignItems:"center",paddingLeft:8},children:[(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),n&&"role"===n.by&&this.renderSmallArrow({up:n.asc})]}),style:{width:"20%",textAlign:"center"}},c={key:"pages",header:(0,D.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})}),style:{width:"20%",textAlign:"center"}},u={key:"three_dot",header:(0,D.jsx)(de.Z,{disabled:!0,ignoreLocalHoverState:!0})},m=this.canUseGroups()&&"team_guests"!==e&&"guests"!==e,g=("team_guests"===e||"guests"===e)&&this.isTeamGuestsEnabled.state&&this.canEditMembership();let p="members"===e&&(0,z.bq)()?[a,d,l]:g?[a,c,u]:[a,c];return m&&(p=[...p.slice(0,1),o,...p.slice(1)]),(0,D.jsx)(wt.Z,{columns:p,rows:t.map((e=>({member:e,store:$.U6.createChildStore(s,{table:v.KJ,id:e.userId})}))).filter((e=>void 0!==e.store.getValue())).map((t=>{const{member:s,store:n}=t,a=r[s.userId]?r[s.userId]:[],o=[(0,D.jsx)(i.Fragment,{children:this.renderMember(n)},"member")];return m&&o.push((0,D.jsx)(i.Fragment,{children:this.renderGroups(a)},"groups")),"members"===e&&(0,z.bq)()&&o.push((0,D.jsx)(i.Fragment,{children:this.renderTeams(s)},"teams")),o.push((0,D.jsx)(i.Fragment,{children:this.renderUserPermission(e,s,n)},"user-permission")),g&&o.push((0,D.jsx)(i.Fragment,{children:this.renderPageGuestOrTeamGuestThreeDotMenu(e,s,n)},"three-dot")),{key:s.userId,columns:o}}))})}renderMember(e){return(0,D.jsx)(Ee.Z,{actorStore:e})}renderGroups(e){return(0,D.jsx)(st,{spaceStore:this.props.store,groups:e,onGroupClick:()=>{this.navigateToTab(X.Q.Groups)}})}renderTeams(e){if("none"!==e.role)return(0,D.jsx)(Gs.Z,{member:e})}renderUserPermission(e,t,s){return"none"===t.role?this.isTeamGuestsEnabled.state&&"team_guests"===e?(0,D.jsx)(Us,{teamGuest:t}):(0,D.jsx)(pt,{store:this.props.store,guest:t,guestStore:s,isSubscribed:this.isSubscribed(),hideActionButtons:this.isTeamGuestsEnabled.state}):this.renderMemberRoleSelect(t)}renderPageGuestOrTeamGuestThreeDotMenu(e,t,s){return(0,D.jsx)(Ve.ZP,{popupType:Ve.Z4.Popup,renderOrigin:e=>(0,D.jsx)(Ue.Z,{...e,icon:l.o,iconStyle:{height:14,width:14}}),render:i=>{const n=[{key:"team section",render:e=>(0,D.jsx)(Ke.Z,{...e}),items:[{key:"convertToMember",render:t=>(0,D.jsx)(Le.Z,{...t,icon:(0,g._)({height:17,width:17}),title:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===e&&(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})}),action:()=>this.handleConvertGuestToMember({user:t,userStore:s,parent:i})},{key:"removeFromWorkspace",render:e=>(0,D.jsx)(Le.Z,{...e,icon:(0,u.V)({height:17,width:17,color:a.ZP.red}),title:(0,D.jsx)("span",{style:{color:a.ZP.red},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"})})}),action:()=>this.handleRemoveGuestFromWorkspace({user:t,userStore:s,parent:i})}]}];return(0,D.jsx)(Ne.Z,{menuType:G.og.Popup,children:(0,D.jsx)(qe.Z,{type:qe.i.Vertical,sections:n,initialFocus:void 0,style:{minWidth:265}})})}})}renderMemberRoleSelect(e){const t=this.environment.currentUser.id,{currentUserSettingsStore:s,currentSpaceStore:i}=H.default.state;if(!s)return;const n=this.getAvailableRoleItems();let r=!0;return(this.canAdmin()||this.canEditMembership()&&(h.RN(e.role)||e.userId===t))&&(r=!1),(0,D.jsx)(St.ZP,{role:e.role,table:S.bx,type:"user_permission",disabled:r,isUserPermission:e.userId===t,upgradeButtonName:"space_permission_item",availableRoleItems:n,onChange:async t=>{await this.handleMemberPermissionRoleChange(e,t,s)},onRemoveMemberClick:async()=>{const t=async()=>(0,xe.Mk)()?await ve(this.environment,e.userId,null==i?void 0:i.id):await(0,St.jV)({message:(0,St.QH)(!0)}),n=async t=>{await this.handleMemberPermissionRoleChange(e,"none",s),C.SwX(this.environment,{member_user_id:e.userId,member_role:e.role,contraction_survey_id:t,is_space:!0,invite_origin:"workspace_remove_member",domainType:(0,A.JF)(),new_workspace_member_count:-1})};if(xe.YE()){let e,s;if(function(){const e=H.default.state.currentUserSettingsStore;if(!e)return!1;const t=e.getSettings();return!!t&&(!t.seen_contraction_survey_at||Date.now()>(0,ye.Xz)({date:t.seen_contraction_survey_at,daysToAdd:1}))}()&&(s=(0,f.c9)(),e=await Re({environment:this.environment,contractionSurveyId:s}),!e))return;await t()&&(await n(s),e&&function(e){const t=H.default.state.currentUserSettingsStore;t&&E.createAndCommit({userAction:"saveContractionSurveySeenDate",environment:e,perform:e=>{ie.d2({userSettingsStore:t,transaction:e,data:{seen_contraction_survey_at:(new Date).getTime()}})}})}(this.environment))}else{await t()&&await n()}}})}renderReprovisioning(){return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)($e.Z,{isMultiline:!0,style:{width:"80%"},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption",defaultMessage:"View users that were previously part of the workspace in the past 30 days. Only workspace owners can see this."})}),(0,D.jsx)($e.Z,{isMultiline:!0,style:{width:"80%"},children:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption.disclaimer",defaultMessage:"Only users who had private pages will appear here."})}),(0,D.jsx)(Oe.Z,{size:24,isHidden:!0}),(0,D.jsx)(ze.Z,{requestStore:this.stores.getRecoverableSpaceUserContentRequestStore,request:{spaceId:this.props.store.id},performRequest:async e=>{const t=await k.getRecoverableSpaceUserContent(this.environment,{spaceId:e.spaceId});if("failed"===t.type)throw T.showError(t),t;return t.data},render:this.renderReprovisioningData})]})}renderRequestsTab(){return(0,D.jsx)(Pt,{spaceStore:this.props.store,accessRequestsStore:this.stores.accessRequestsStore})}renderNumberOfRequests(){return(0,D.jsx)(ze.Z,{throttle:1e3,request:{parentTable:"space",parentId:this.props.store.id,size:100,status:"pending"},requestStore:this.stores.accessRequestsStore,performRequest:async e=>{const t=await k.getAccessRequests(this.environment,e);if("failed"===t.type)throw t.error;const s=t.data.accessRequestIds;return j.Tr(this.props.store,s)},render:(e,t,s)=>e||!t?(0,D.jsx)("span",{}):t?(0,D.jsx)("span",{children:t.filter((e=>"pending"===e.accessRequestStore.getKeyStore("status").getValue())).length}):void 0})}handleConvertGuestToMember(e){const{userStore:t,parent:s}=e,{store:i}=this.props,n=this.isSubscribed()?"read_and_write":"editor";T.showDialog({message:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{T.dismissDialog(),s.close()},items:[{label:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{s.close(),await V({environment:this.environment,guestUserStore:t,role:n,store:i})}}]})}handleRemoveGuestFromWorkspace(e){const{userStore:t,parent:s}=e;T.showDialog({message:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{T.dismissDialog(),s.close()},items:[{label:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{s.close(),await O({environment:this.environment,guestUserStore:t,store:this.props.store})}}]})}getSpaceRecoverRows(e){const t=[];for(const{userId:s,privatePagesCount:i}of e){if(i<1)continue;const e=$.U6.createChildStore(this.props.store,{table:v.KJ,id:s});t.push({key:s,columns:[this.renderMember(e),i,this.userIdsWithContentBeingReprovisioned.state.includes(s)?(0,D.jsx)(Ge.Z,{}):(0,D.jsx)("div",{style:{marginLeft:-4},children:(0,D.jsx)(qt.Z,{mode:Wt.z.Button,focused:!1,title:(0,D.jsx)(w.FormattedMessage,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:this.props.store,userIds:this.userIdsWithContentBeingReprovisioned.state,onChange:e=>{let[t]=e;this.handleReprovisionToUserChange(s,t)}})})]})}return t}setInitialSubtabOnMount(){ee.Z.state.open&&"members"===ee.Z.state.currentTab&&ee.Z.state.defaultSubtab&&(this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,currentTab:ee.Z.state.defaultSubtab}),ee.Z.setState({...ee.Z.state,defaultSubtab:void 0}))}getAvailableRoleItems(){const e=this.props.intl.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),t=(0,N.U7)();return p.oA(h.an.map((s=>{if(t||"membership_admin"!==s)return{role:s,disabledInfo:!this.canAdmin()&&h.Bc(s)?{isDisabled:!0,disabledMessage:e}:void 0}})))}getCurrentTabs(e){return[X.Q.Members,X.Q.Groups,...e.length>0?[X.Q.Guests]:[],...this.canReprovisionContent()?[X.Q.Reprovisioning]:[],...this.shouldShowRequestsTab()?[X.Q.Requests]:[]]}isSubscribed(){const{data:e}=te.default.state;return Boolean(e&&Me.YK(e))}canAdmin(){return this.props.store.canAdmin()}canEditMembership(){return this.props.store.canEditMembership()}canUseGroups(){return Me.qF(this.environment)&&this.isSubscribed()}canEditGroups(){return this.canUseGroups()&&this.canEditMembership()}canUseInviteLink(){return this.canEditMembership()&&Me.qF(this.environment)}canReprovisionContent(){return this.canAdmin()&&be.wP()}shouldShowRequestsTab(){return this.canEditMembership()&&(0,U.p1)()}getInviteLinkEnabled(){return Boolean(this.props.store.getKeyStore("invite_link_enabled").getValue())}getInviteLink(){if(!this.canEditMembership())return;const e=te.default.state.data,t=this.props.store.id,s=e&&("subscribed_admin"===e.type||"unsubscribed_admin"===e.type||"subscribed_membership_admin"===e.type)&&e.inviteLinkCode;return s?(0,W.cJ)(this.environment,t,s):void 0}getSearchIconStyle(){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:this.theme.mediumIconColor}}mobileMenuItemStyle(){const{WindowSizeStore:e}=this.environment;return{display:"flex",paddingTop:14,paddingBottom:14,paddingLeft:14,paddingRight:e.getSafePaddingRightCSS(14),background:this.theme.cardContentBackground}}}qs.displayName="SpacePermissionsSettings",qs.defaultLimit=50,qs.filterStyle={maxWidth:275,borderRadius:30},qs.showMoreButtonStyle={marginTop:8};const Ws=(0,w.injectIntl)(qs)},42982:(e,t,s)=>{s.d(t,{Z:()=>u});s(67294);var i=s(83355),n=s(5366),r=s(16354),a=s(63296),o=s(64369),d=s(23189),l=s(85893);class c extends i.Z{renderComponent(){return(0,l.jsxs)("div",{children:[this.renderHeader(),(0,l.jsxs)("div",{style:this.getSettingsOptionStyle(),children:[(0,l.jsx)(o.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:this.renderMessage()}),this.renderManageSubscriptionButton()]})]})}renderHeader(){const{device:e}=this.environment;return(0,l.jsx)(d.Z,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full",children:(0,l.jsx)(n.FormattedMessage,{id:"subscriptionSettings.title",defaultMessage:"Subscription"})})}renderMessage(){const{device:e}=this.environment;return e.isMobile?(0,l.jsx)(n.FormattedMessage,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your Personal Pro subscription though the App Store."}):(0,l.jsx)(n.FormattedMessage,{id:"subscriptionSettings.description",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple's subscription settings."})}renderManageSubscriptionButton(){return(0,l.jsx)(r.Z,{href:"https://apps.apple.com/account/subscriptions",children:(0,l.jsx)(a.Z,{isLarge:!0,style:{marginTop:12,marginBottom:4},children:(0,l.jsx)(n.FormattedMessage,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"})})})}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}c.displayName="SubscriptionSettings";const u=c},88775:(e,t,s)=>{s.d(t,{Z:()=>I});var i=s(67294),n=s(480),r=s(86628),a=s(24405),o=s(42853),d=s(5366),l=s(33929),c=s(87279),u=s(55838),m=s(33846),g=s(30397),p=s(35817),h=s(48019),f=s(52275),S=s(31945),v=s(68894),y=s(78140),x=s(89728),M=s(72495),b=s(64369),w=s(93686),j=s(85893);const C=(0,d.defineMessages)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function k(e){window.__c={n:"MemberTeamContent"};const t=(0,n.O7)(),s=(0,a.yK)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),[o,g]=(0,r.AF)(void 0,m.Z),S=(0,i.useCallback)((e=>p.RF({environment:t,teamId:e,tab:u.a.Members,from:"teams_dropdown_for_team_member"})),[t]),x=(0,r.VK)((()=>[{key:"teams for member",render:e=>(0,j.jsx)(M.Z,{...e}),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>(0,j.jsx)(f.Z,{icon:(0,j.jsx)(w.p,{disabled:!0,store:e}),title:(0,j.jsx)(b.Z,{style:s.teamMenuItem,children:e.getName()}),caption:(0,j.jsx)(d.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:e.getUserIdsInTeam().length}}),inline:!0,...t}),action:()=>{S(e.id)},closeParentMenu:!1})))}]),[e.teamStores,s.teamMenuItem,S]),k=o.inputValue,I=(0,j.jsx)(M.Z,{isInput:!0,children:(0,j.jsx)(v.ZP,{value:k,onChange:(0,i.useCallback)((e=>{g({inputValue:e.target.value,focus:!1})}),[g]),focus:!0,focusAfterAnimation:!0,placeholder:l.default.formatMessage(C.filterTeams)})}),T={menuType:c.og.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?I:void 0};return(0,j.jsx)(y.Z,{...T,children:(0,j.jsx)(h.Z,{filter:k,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:0,sections:x})})}const I=function(e){window.__c={n:"TeamsDropdownForMember"};const[t]=(0,r.AF)(g.Z),s=(0,a.yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),i=(0,r.VK)((()=>t.teams.filter((t=>t.getMembers().some((t=>"user"===t.entity_type&&t.user_id===e.member.userId))))),[t,e.member]),n=i.length;return(0,j.jsx)(S.ZP,{popupType:S.Z4.Popup,renderOrigin:e=>(0,j.jsx)(x.Z,{disabled:0===n,style:0===n?s.noTeams:s.button,...e,children:0===n?(0,j.jsx)(d.FormattedMessage,{id:"teamsDropdownForMember.teamsCountNone.label",defaultMessage:"No access"}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.FormattedMessage,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:n}}),(0,o.i)(s.chevron)]})}),render:()=>(0,j.jsx)(k,{member:e.member,teamStores:i})})}},69435:(e,t,s)=>{s.d(t,{Z:()=>p});s(67294);var i=s(83355),n=s(82990),r=s(5366),a=s(50906),o=s(34602),d=s(1865),l=s(18514),c=s(42922),u=s(63296),m=s(85893);class g extends i.Z{constructor(){super(...arguments),this.handleUpgradeClick=e=>{const{from:t,for:s,onUpgradeClick:i}=this.props;d.y(this.environment,{from:t,for:s}),i&&i(e)},this.handleLearnMoreClick=()=>{const{from:e,learnMoreRoute:t}=this.props;o.navigateToExternalURL({environment:this.environment,url:(0,l.UY)(t)}),a.Fsx(this.environment,{from:e})}}renderComponent(){return(0,m.jsxs)("section",{style:this.getWrapStyle(),children:[this.renderIcon(),this.renderTitle(),this.renderCaption(),this.renderActions()]})}renderIcon(){const{icon:e}=this.props;if(e)return e(this.getIconStyle())}renderTitle(){const{title:e}=this.props;return(0,m.jsx)("header",{style:this.getTitleStyle(),children:e})}renderCaption(){const{caption:e}=this.props;return(0,m.jsx)("p",{style:this.getCaptionStyle(),children:e})}renderActions(){return(0,m.jsxs)("footer",{style:this.getFooterStyle(),children:[this.renderUpgradeButton(),this.renderLearnMoreButton()]})}renderUpgradeButton(){const{upgradeMessage:e}=this.props;return(0,m.jsx)(c.Z,{onClick:this.handleUpgradeClick,isLarge:!0,children:e||(0,m.jsx)(r.FormattedMessage,{defaultMessage:"Upgrade",id:"upsellCallout.upgradeButton.text"})})}renderLearnMoreButton(){return(0,m.jsx)(u.Z,{onClick:this.handleLearnMoreClick,children:(0,m.jsx)(r.FormattedMessage,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"})})}getWrapStyle(){const{device:e}=this.environment;return{...this.props.style,fontSize:14,...!e.isMobile&&{maxWidth:340}}}getIconStyle(){return{width:32,height:"auto",fill:this.theme.mediumIconColor,marginBottom:8}}getTitleStyle(){return{fontWeight:n.Z.fontWeight.semibold}}getCaptionStyle(){return{color:this.theme.mediumTextColor,marginTop:4,marginBottom:16}}getFooterStyle(){return{display:"flex",flexWrap:"wrap",gap:"8px 12px"}}}g.displayName="UpsellCallout";const p=g},30045:(e,t,s)=>{s.d(t,{Z:()=>S});s(67294);var i=s(83355),n=s(13991),r=s(7057),a=s(50501),o=s(5366),d=s(54642),l=s(80444),c=s(72087),u=s(25777),m=s(77137),g=s(26388),p=s(55422),h=s(85893);class f extends i.Z{constructor(){super(...arguments),this.storeTypes={requestStore:c.Z},this.renderResult=(e,t,s)=>(0,h.jsx)(u.Z,{loaded:s,spinnerSize:16,showSpinnerTimeout:600,children:e||!t?(0,h.jsx)("div",{children:this.props.intl.formatMessage({id:"userDataConsent.render.error",defaultMessage:"Something went wrong"})}):this.renderOutput(t)}),this.renderOutput=e=>{const t=Boolean(e.expiryTime&&Number(e.expiryTime)>Date.now()),s=t?this.revokeDataAccess:this.grantDataAccess;return this.renderUserDataConsentSettingsWithTooltip({accessGranted:t,onClick:s,output:e})},this.fetchUserDataConsentSettings=async e=>{const t=await d.getDataAccessConsent(this.environment,{});if("failed"===t.type)throw t.error;return t.data},this.grantDataAccess=async()=>{this.isDisabledByEmailDomainSettings()||await this.setDataAccessExpiryTime({expiryTime:Date.now()+a.g})},this.revokeDataAccess=async()=>{this.isDisabledByEmailDomainSettings()||await this.setDataAccessExpiryTime({})},this.setDataAccessExpiryTime=async e=>{const t=await d.setDataAccessConsent(this.environment,e);if("success"===t.type&&t.data){const e=this.stores.requestStore.state;this.stores.requestStore.setState({...e,result:t.data})}}}renderComponent(){const{currentUserStore:e}=l.default.state;return e&&(0,h.jsx)(m.Z,{requestStore:this.stores.requestStore,request:{userId:e.id,expiryTime:Date.now()+a.g},performRequest:this.fetchUserDataConsentSettings,render:this.renderResult})}renderUserDataConsentSettingsWithTooltip(e){var t;const{accessGranted:s,onClick:i,output:n}=e,r=null===(t=l.default.state.currentUserStore)||void 0===t?void 0:t.getEmail();return(0,h.jsx)(g.Z,{disableTooltip:!this.isDisabledByEmailDomainSettings(),renderTooltip:()=>(0,h.jsx)(o.FormattedMessage,{id:"userDataConsentSetting.disabledByOrganization",defaultMessage:"Granting support access has been disabled by your organization, {emailDomain}",values:{emailDomain:r}}),placement:g.Z.Placement.Bottom,alignment:g.Z.Alignment.Center,render:e=>(0,h.jsx)("div",{...e,children:this.renderUserDataConsentSettings({accessGranted:s,onClick:i,output:n})})})}renderUserDataConsentSettings(e){const{accessGranted:t,onClick:s,output:i}=e,{device:a}=this.environment;return(0,h.jsx)(p.Z,{disabled:this.isDisabledByEmailDomainSettings(),isMobile:a.isMobile,title:(0,h.jsx)(o.FormattedMessage,{id:"personalSettings.supportSection.userDataConsentSettings.label",defaultMessage:"Support access"}),caption:t&&i.expiryTime?(0,h.jsx)(o.FormattedMessage,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:(0,r.Yx)(i.expiryTime,"medium_with_time",n.SP)}}):(0,h.jsx)(o.FormattedMessage,{id:"personalSettings.supportSection.userDataConsentSettings.message",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."}),type:"toggle",isOn:t,onToggle:s})}isDisabledByEmailDomainSettings(){return Boolean(this.props.emailDomainSettings.prevent_granting_support_access)}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}f.displayName="UserDataConsentSettings";const S=(0,o.injectIntl)(f)},97680:(e,t,s)=>{s.d(t,{Z:()=>h});s(67294);var i=s(83355),n=s(66897),r=s(97880),a=s(33929),o=s(87279),d=s(98742),l=s(52275),c=s(26388),u=s(70301),m=s(45653),g=s(85893);class p extends i.Z{renderComponent(){const{actor:e,userTitle:t,useEmailAsTooltip:s,tooltip:i,tooltipPlacement:o}=this.props,p=a.default.getIntl(),h=e.asActor&&e.isUser()?e.email:void 0,f=s&&h?h:i,S=this.environment.device.isMobile?24:20;let v;return(0,n.YU)(e)?v=(0,g.jsx)(u.Z,{botValue:null==e?void 0:e.asActor,size:S}):(0,n.$S)(e)?v=(0,g.jsx)(m.Z,{userValue:null==e?void 0:e.asActor,size:S}):(0,n.Iq)(e)?v=(0,g.jsx)(m.Z,{userValue:void 0,size:S}):(0,r.t1)(e),(0,g.jsx)(c.Z,{placement:o??c.Z.Placement.Bottom,alignment:c.Z.Alignment.Start,textWrap:!0,render:s=>(0,g.jsx)(l.Z,{...(0,d.Z)(s,this.props),icon:v,title:t??(0,n.$4)(p,e),className:"notranslate"}),disableTooltip:!f,renderTooltip:()=>f})}}p.displayName="UserMenuItem",p.contextTypes={...o.mw,...i.w};const h=p},16347:(e,t,s)=>{s.d(t,{H:()=>p});s(67294);var i=s(480),n=s(86628),r=s(5366),a=s(39699),o=s(37181),d=s(24215),l=s(18514),c=s(80444),u=s(42402),m=s(55422),g=s(85893);function p(e){let{isMobile:t}=e;window.__c={n:"ViewHistorySettings"};const s=(0,i.O7)(),p=(0,n.VK)((()=>c.default.state.currentUserSettingsStore),[]),h=(0,n.VK)((()=>{var e;return!0===(null==p||null===(e=p.getSettings())||void 0===e?void 0:e.disable_page_analytics)?"do_not_record":"record"}),[p]);return(0,g.jsx)(m.Z,{isMobile:t,title:(0,g.jsx)(r.FormattedMessage,{id:"viewHistorySettings.title",defaultMessage:"Show my view history"}),caption:(0,g.jsx)(r.FormattedMessage,{id:"viewHistorySettings.description.message",defaultMessage:"People with edit or full access will be able to see when you’ve viewed a page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,g.jsx)(u.Z,{external:!0,href:(0,l.UY)("guides.pageAnalytics"),children:e})}}),type:"dropdown",currentOption:h,options:[{key:"record",label:(0,g.jsx)(r.FormattedMessage,{id:"viewHistorySettings.record.label",defaultMessage:"Record"})},{key:"do_not_record",label:(0,g.jsx)(r.FormattedMessage,{id:"viewHistorySettings.do_not_record.label",defaultMessage:"Don't record"})}],onSelectOption:e=>{const t="do_not_record"===e;a.createAndCommit({userAction:"ViewHistorySettings.onSelectOption",environment:s,perform:e=>{p&&o.d2({userSettingsStore:p,data:{disable_page_analytics:t},transaction:e})}}),d.j(s,t?"page_analytics_account_opt_out":"page_analytics_account_opt_in")}})}},75752:(e,t,s)=>{s.d(t,{r:()=>r});var i=s(63143),n=s(54642);class r{constructor(e){this.environment=void 0,this.environment=e}async confirmIdentity(){const{settings:e,sessionVerificationExpirationInSeconds:t}=await this.loadSettings();return t&&t>2*i.hw?{status:"ready"}:e.length>0?{status:"mfa",settings:e}:{status:"password"}}async loadSettings(){const e=await n.authGetLoginConfiguration(this.environment,{});if("success"===e.type){const{data:t}=e;return"required"===t.samlSignIn?{settings:[],sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}:{settings:t.mfaOptions,sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}}throw e}async sendTemporaryPassword(e){const{email:t}=e,s=await n.sendTemporaryPassword(this.environment,{passwordReset:!0,email:t});if("success"===s.type)return{status:"ok"};throw s}async verifyBackupCode(e){var t;const{code:s}=e,i=s.split("-").join(""),r=await n.authVerifyBackupCodesLogin(this.environment,{code:i});if("success"===r.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=r.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw r}async verifyIdentityWithPassword(e){var t;const{password:s}=e,i=await n.authVerifyPassword(this.environment,{password:s});if("success"===i.type)return{status:"match"};if("incorrect_password"===(null===(t=i.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw i}async disableMFA(){const e=await n.authUpdateMfa(this.environment,{action:"disable_all"});if("success"===e.type)return{status:"ok"};throw e}async verifyIdentityWithTOTP(e){var t;const{mfaSettingId:s,code:i}=e,r=await n.authVerifyTotpLogin(this.environment,{mfaSettingId:s,code:i});if("success"===r.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=r.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw r}async verifyIdentityWithSMS(e){var t;const{mfaSettingId:s,code:i}=e,r=await n.authVerifySmsLogin(this.environment,{mfaSettingId:s,code:i});if("success"===r.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=r.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw r}async renameSettings(e){var t,s,i;const{mfaSettingId:r,friendlyName:a}=e,o=await n.authUpdateMfa(this.environment,{action:"rename",mfaSettingId:r,friendlyName:a});if("success"===o.type)return{status:"saved",settings:o.data.mfaOptions};if("mfa_duplicate_friendly_name"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"duplicate"};if("mfa_empty_friendly_name"===(null===(s=o.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"empty"};if("mfa_bad_friendly_name"===(null===(i=o.body)||void 0===i||null===(i=i.clientData)||void 0===i?void 0:i.type))return{status:"bad_friendly_name"};throw o}async deleteSettings(e){const t=await n.authUpdateMfa(this.environment,{action:"delete",mfaSettingId:e});if("success"===t.type)return{settings:t.data.mfaOptions};throw t}async createTOTP(){const e=await n.authCreateTotp(this.environment,{});if("success"===e.type)return{mfaSettingId:e.data.mfaSettingId,secret:e.data.authCode,qrCode:e.data.qrCode};throw e}async verifyTOTP(e){var t;const{mfaSettingId:s,code:i}=e,r=await n.authVerifyTotpEnroll(this.environment,{mfaSettingId:s,code:i});if("success"===r.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=r.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw r}async createSMS(e,t){var s,i,r;const a=await n.authCreateSms(this.environment,{countryCode:e,phoneNumber:t});if("success"===a.type)return{status:"created",mfaSettingId:a.data.mfaSettingId};if("already_verified_phone_number"===(null===(s=a.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"already_verified_phone_number"};if("invalid_country_code"===(null===(i=a.body)||void 0===i||null===(i=i.clientData)||void 0===i?void 0:i.type))return{status:"invalid_country_code"};if("invalid_phone_number"===(null===(r=a.body)||void 0===r||null===(r=r.clientData)||void 0===r?void 0:r.type))return{status:"invalid_phone_number"};throw a}async verifySMS(e){var t;const{mfaSettingId:s,code:i}=e,r=await n.authVerifySmsEnroll(this.environment,{mfaSettingId:s,code:i});if("success"===r.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=r.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw r}async sendSMS(e){const{mfaSettingId:t}=e,s=await n.authSendSms(this.environment,{mfaSettingId:t});if("success"===s.type)return{status:"ok"};throw s}async createBackupCodes(e){if(!e){const{settings:e}=await this.loadSettings();if(e.find((e=>"backup_code"===e.mfaMethod)))return{status:"already-exists"}}const t=await n.authCreateBackupCodes(this.environment,{});if("success"===t.type)return{status:"new",mfaSettingId:t.data.mfaSettingId,backupCodes:t.data.codes};throw t}}},64898:(e,t,s)=>{s.d(t,{Z:()=>fe});var i=s(67294),n=s(480),r=s(86628),a=s(97880),o=s(28020),d=s(24405),l=s(33679),c=s(5366),u=s(82990),m=s(15679),g=s(88175),p=s(85893);function h(e){window.__c={n:"MFAPromptAddMethod"};const{errorMessage:t,onStartTOTP:s,onStartSMS:n,onDismiss:r}=e,a=(0,d.yK)(f,[]),o=(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOnSettings.title",defaultMessage:"Turn on 2-step verification"}),u=(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOnSettings.message",defaultMessage:"Confirm it's you after using a password with a verification code from an authenticator app or text message."}),h=(0,i.useMemo)((()=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(m.Z,{type:"totp",title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOnSettings.setupAuthenticator.button.title",defaultMessage:"Code from authenticator"}),caption:(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOnSettings.setupAuthenticator.button.message",defaultMessage:"Generate a one-time code in your authenticator app"}),onClick:s,style:a.button}),(0,p.jsx)(m.Z,{type:"sms",title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOnSettings.setupSMS.button.title",defaultMessage:"Text me a code"}),caption:(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOnSettings.setupSMS.button.message",defaultMessage:"Add and verify your phone number"}),onClick:n,style:a.button})]})),[a,n,s]);return(0,p.jsx)(g.Z,{title:o,header:u,children:h,icon:(0,l.j)(a.icon),errorMessage:t,onDismiss:r})}function f(e){return(0,d.EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:u.Z.fontWeight.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}var S=s(37612),v=s(68785);function y(e){window.__c={n:"MFAPromptDeleteMethodConfirmation"};const{isLoading:t,mfaSetting:s,errorMessage:i,onDismiss:n,onCancel:r,onDeleteMethod:o}=e,l=(0,d.yK)(x,[]),u={text:t?(0,p.jsx)(v.Z,{}):(0,p.jsx)(c.FormattedMessage,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>o(s),isRed:!0},m=[{text:(0,p.jsx)(c.FormattedMessage,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:r,type:"button",view:"outline"}];return(0,p.jsx)(g.Z,{title:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,p.jsx)(c.FormattedMessage,{id:"mfa.deleteSetting.sms.title",defaultMessage:"Delete {phoneHint}",values:{phoneHint:s.phoneNumber}});case"totp":return(0,p.jsx)(c.FormattedMessage,{id:"mfa.deleteSetting.totp.title",defaultMessage:"Delete {friendlyName}",values:{friendlyName:s.friendlyName}});default:return(0,a.t1)(e)}})(),header:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,p.jsx)(c.FormattedMessage,{id:"mfa.deleteSetting.sms.header",defaultMessage:"Once deleted, you will no longer receive codes sent to {phoneHint}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{phoneHint:s.phoneNumber,boldtext:e=>(0,p.jsx)("span",{style:l.boldText,children:e})}});case"totp":return(0,p.jsx)(c.FormattedMessage,{id:"mfa.deleteSetting.totp.header",defaultMessage:"Once deleted, you will no longer be able to use codes generated from {friendlyName}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:s.friendlyName,boldtext:e=>(0,p.jsx)("span",{style:l.boldText,children:e})}});default:return(0,a.t1)(e)}})(),icon:(0,S.y)(l.crossIcon),primaryAction:u,secondaryActions:m,errorMessage:i,onDismiss:n})}function x(e){return(0,d.EM)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:u.Z.fontWeight.semibold}})}var M=s(71119),b=s(18514);const w=(0,s(45238).I)("lockedFilledRedOutlinedWhite",{viewBox:"0 0 11 15",svg:(0,p.jsx)("path",{d:"M2.48352 14.5H8.51649C9.08993 14.5 9.61159 14.3415 9.98454 13.9481C10.3531 13.5594 10.5 13.0215 10.5 12.423V7.8578C10.5 7.33161 10.3876 6.85321 10.1075 6.47956C9.90863 6.21422 9.64758 6.03138 9.34616 5.92009V4.70387C9.34616 3.34493 8.90074 2.28402 8.17081 1.56217C7.44518 0.844569 6.47639 0.5 5.49671 0.5C4.51986 0.5 3.55273 0.844872 2.82813 1.5624C2.09925 2.28417 1.65385 3.34494 1.65385 4.70387V5.9209C1.35431 6.03229 1.09426 6.21478 0.895574 6.47875C0.614816 6.85174 0.5 7.32992 0.5 7.8578V12.423C0.5 13.0215 0.646934 13.5594 1.01546 13.9481C1.38841 14.3415 1.91008 14.5 2.48352 14.5ZM3.7022 4.5581C3.7022 3.8322 3.93059 3.32509 4.24526 3.00203C4.56164 2.67723 5.00162 2.50051 5.49671 2.50051C5.99216 2.50051 6.43618 2.67753 6.75611 3.00343C7.07385 3.3271 7.30439 3.83398 7.30439 4.5581V5.78746H3.7022V4.5581Z",fill:"#E12D2D",stroke:"white"})});var j=s(45653);function C(e){window.__c={n:"MFAUserAvatarIcon"};const{userStore:t}=e,s=(0,d.yK)(k,[]);return(0,p.jsxs)("div",{style:s.iconContainer,children:[(0,p.jsx)(j.Z,{userStore:t,size:36,avatarShouldShowShadow:!0,style:s.userIcon}),(0,p.jsx)("span",{children:w(s.lockIcon)})]})}function k(){return(0,d.EM)({iconContainer:{position:"relative"},userIcon:{position:"relative"},lockIcon:{position:"absolute",width:9,height:20,right:0,left:26,top:21}})}function I(e){window.__c={n:"MFAPromptMethodChooser"};const{mfaSettings:t,isSMSLoading:s,chosenMfaSettingId:n,userStore:r,errorMessage:o,onClick:l,onDismiss:u}=e,h=(0,d.yK)(T,[]),f=(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.header",defaultMessage:"Select a method to verify your identity."}),v=[{text:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.needHelp.button",defaultMessage:"Need help?"}),href:(0,b.UY)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],y=(0,i.useMemo)((()=>(0,M.UG)(t).map((e=>{const t=e.mfaMethod;switch(t){case"totp":return(0,p.jsx)(m.Z,{type:t,title:e.friendlyName,caption:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useAuthenticator.button.message",defaultMessage:"Use code from authenticator"}),onClick:()=>l(e),style:h.actionButton,isActive:!0,disabled:s});case"sms":return(0,p.jsx)(m.Z,{type:t,title:e.phoneNumber,caption:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useSMS.button.message",defaultMessage:"Text me a code"}),onClick:()=>l(e),style:h.actionButton,isActive:!0,isLoading:s&&n===e.mfaSettingId,disabled:s&&n!==e.mfaSettingId});case"backup_code":return(0,p.jsx)(m.Z,{type:t,title:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.title",defaultMessage:"Use a backup code"}),caption:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.message",defaultMessage:"Use a one-time backup code"}),onClick:()=>l(e),style:h.actionButton,isActive:!0,disabled:s});default:return(0,a.t1)(t)}}))),[t,l,s,n,h.actionButton]);return(0,p.jsx)(g.Z,{title:f,header:S,errorMessage:o,icon:(0,p.jsx)(C,{userStore:r}),secondaryActions:v,onDismiss:u,children:y})}function T(e){return(0,d.EM)({resendLink:{fontWeight:u.Z.fontWeight.medium,color:e.blueColor},actionButton:{marginBottom:5}})}var P=s(3338);function F(e){window.__c={n:"MFAPromptTurnOffMFAComplete"};const t=(0,d.yK)(_,[]),{errorMessage:s,onDismiss:i}=e,n=(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFAComplete.title",defaultMessage:"2-step verification is turned off"}),r=(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFAComplete.header",defaultMessage:"2-step verification has been removed from your account. Notion will only ask for your password during log in."}),a=[{text:(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFAComplete.button.message",defaultMessage:"Complete"}),onClick:i,type:"button",view:"outline"}];return(0,p.jsx)(g.Z,{title:n,header:r,errorMessage:s,icon:(0,P.p)(t.confirmationIcon),secondaryActions:a,onDismiss:i})}function _(e){return(0,d.EM)({confirmationIcon:{width:30,fill:"green"}})}var Z=s(87586);function A(e){window.__c={n:"MFAPromptTurnOffMFAConfirmation"};const{isLoading:t,lastMFASetting:s,errorMessage:i,onDismiss:n,onTurnOffMFA:r,onCancel:a}=e,o=(0,d.yK)(R,[]),l=(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFA.title",defaultMessage:"Turn off 2-step verification"}),m={text:t?(0,p.jsx)(v.Z,{}):(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFA.disableMFA.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:r,isRed:!0},h=[{text:(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFA.cancel.button.message",defaultMessage:"Cancel"}),onClick:a,type:"button",view:"outline"}];return(0,p.jsx)(g.Z,{title:l,header:s?(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFA.lastMFASettingDeleted.header",defaultMessage:"Deleting {mfaSettingName} will turn off 2-step verification and remove the additional layer of security on your account. Notion will only ask for your password during log in.",values:{mfaSettingName:"sms"===s.mfaMethod?`${s.phoneNumber}`:s.friendlyName,boldtext:e=>(0,p.jsx)("span",{style:{fontWeight:u.Z.fontWeight.semibold},children:e})}}):(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFA.header",defaultMessage:"Turning off 2-step verification will remove the additional layer of security on your account. Notion will only ask for your password during log in. "}),icon:(0,Z.B)(o.crossIcon),primaryAction:m,secondaryActions:h,errorMessage:i,onDismiss:n})}function R(e){return(0,d.EM)({crossIcon:{width:30,fill:"red"}})}var B=s(13991),E=s(7057),D=s(61519),L=s(64369),V=s(81864),O=s(56666),U=s(25651),G=s(94900),N=s(64921),q=s(52275),W=s(31945),z=s(74194);function K(e){window.__c={n:"MFAActiveActionInputTitle"};const{setting:t,setIsEditing:s,isEditing:n,onUpdateMethod:r}=e,a=(0,d.yK)(H,[]),[o,l]=(0,i.useState)(""),c=t.friendlyName,u=""===o?c:o,m=(0,i.useCallback)((e=>""!==e&&e!==c),[c]),g=(0,i.useCallback)((()=>{m(u)?(r({mfaMethod:t.mfaMethod,mfaSettingId:t.mfaSettingId,action:"rename",friendlyName:u}),l(o)):l(c),s(!n)}),[u,n,s,r,o,c,m,t.mfaMethod,t.mfaSettingId]),h=(0,i.useCallback)((e=>{"Enter"!==e.key&&"Escape"!==e.key||g()}),[g]),f=(0,i.useCallback)((e=>{m(e.target.value)&&l(e.target.value)}),[m]);return n?(0,p.jsx)(z.Z,{value:u,maxlength:30,onChange:f,onKeyDown:h,onBlur:g,focus:n,style:a.inputField,inputStyle:a.input}):(0,p.jsx)(L.Z,{children:u})}function H(){return(0,d.EM)({inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14,...u.Z.textOverflowStyle}})}var Q=s(87279),Y=s(78140),$=s(32163),J=s(72495);function X(e){const{activeMenuActions:t}=e;return(0,p.jsx)(Y.Z,{menuType:Q.og.Popup,children:(0,p.jsx)($.Z,{type:$.i.Vertical,sections:[{key:"mfaMethodActions",render:e=>(0,p.jsx)(J.Z,{...e}),items:t}],initialFocus:void 0})})}function ee(e){window.__c={n:"MFAActiveAction"};const{type:t,title:s,caption:n,setting:r,onDeleteMethod:o,onUpdateMethod:l}=e,u=(0,d.yK)(te,[]),m={totp:(0,V.X)(u.icon),sms:(0,G.u)(u.icon)},[g,h]=(0,i.useState)(!1),f=e=>({key:"deleteMFAMethod",render:e=>(0,p.jsx)(q.Z,{...e,title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,S.y)(u.menuItemIcon)}),action:()=>{o(r),e.close()}}),v=e=>({key:"editMFAMethod",render:e=>(0,p.jsx)(q.Z,{...e,title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Edit title"}),icon:(0,U.R)(u.menuItemIcon)}),action:()=>{h(!0),e.close()}});return(0,p.jsxs)("div",{style:u.activeMethodContainer,children:[(0,p.jsxs)("div",{style:u.activeMethodLeftContainer,children:[(0,p.jsx)("div",{style:u.icon,children:m[t]}),(0,p.jsxs)("div",{style:u.activeMethodText,children:[(()=>{switch(t){case"sms":return(0,p.jsx)(L.Z,{children:s});case"totp":return(0,p.jsx)(K,{setting:r,setIsEditing:h,isEditing:g,onUpdateMethod:l});default:return(0,a.t1)(t)}})(),(0,p.jsx)("span",{style:u.activeMethodCaption,children:n})]})]}),(0,p.jsx)(W.ZP,{render:e=>{switch(t){case"sms":return(0,p.jsx)(X,{activeMenuActions:[f(e)]});case"totp":return(0,p.jsx)(X,{activeMenuActions:[v(e),f(e)]});default:(0,a.t1)(t)}},alignmentToOrigin:W.vR.Start,renderOrigin:e=>(0,p.jsx)(N.Z,{style:u.menuButton,disabled:g,...e,children:(0,O.o)(u.menuIcon)}),popupType:W.Z4.Popup})]})}function te(e){return(0,d.EM)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:u.Z.fontSize.UISmall.desktop,lineHeight:u.Z.lineHeight.UISmall.desktop,color:e.mediumTextColor,whiteSpace:"normal"},icon:{width:20,height:20,marginRight:10,fill:e.blueColor},menuIcon:{fill:e.lightIconColor,width:15,height:15},menuButton:{borderRadius:3,padding:3},menuItemIcon:{width:17,height:17},inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14}})}function se(e){window.__c={n:"MFAPromptUpdateMethod"};const{mfaSettings:t,errorMessage:s,onStartTOTP:n,onStartSMS:r,onTurnOffMFA:o,onStartBackupCodes:u,onDismiss:h,onDeleteMethod:f,onUpdateMethod:S}=e,v=(0,d.yK)(ie,[]),y=(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.title",defaultMessage:"2-step verification"}),x=(0,p.jsx)(c.FormattedMessage,{id:"mfa.settingModal.message",defaultMessage:"Confirm it's you after using a password by providing a verification code."}),b=(0,i.useMemo)((()=>(0,M.UG)(t).map((e=>{const{mfaMethod:t}=e,s=(0,E.tv)(e.createdAt,B.SP);switch(t){case"totp":return(0,p.jsx)(ee,{type:t,title:e.friendlyName,caption:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:f,onUpdateMethod:S});case"sms":return(0,p.jsx)(ee,{type:t,title:`${e.phoneNumber}`,caption:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.useSMS.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:f,onUpdateMethod:S});case"backup_code":return;default:(0,a.t1)(t)}}))),[t,f,S]),w=t.filter((e=>"totp"===e.mfaMethod)).length,j=t.filter((e=>"sms"===e.mfaMethod)).length,C=(0,i.useMemo)((()=>[{type:"totp",title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.title",defaultMessage:"Add authenticator"}),caption:w>=2?(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.disabled.button.message",defaultMessage:"2 of 2 authenticators added"}):(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.message",defaultMessage:"{numOfTotpSettings} of 2 authenticators added",values:{numOfTotpSettings:w}}),onClick:n,style:v.button,disabled:w>=2},{type:"sms",title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.title",defaultMessage:"Add phone number"}),caption:j>=2?(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.disabled.button.message",defaultMessage:"2 of 2 phones added"}):(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.message",defaultMessage:"{numOfSmsSettings} of 2 phones added",values:{numOfSmsSettings:j}}),onClick:r,style:v.button,disabled:j>=2},{type:"backup_code",title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.title",defaultMessage:"Regenerate backup codes"}),caption:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.message",defaultMessage:"Use for account recovery when other methods don't work"}),onClick:u,style:v.button,disabled:!1}].sort(((e,t)=>(e.disabled?1:0)-(t.disabled?1:0)))),[n,r,u,w,j,v]),k=(0,i.useMemo)((()=>C.map(((e,t)=>(0,i.createElement)(m.Z,{...e,key:t})))),[C]),I=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L.Z,{style:v.settingsTitle,isSmall:!0,children:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.title",defaultMessage:"Active"})}),b,(0,p.jsx)(D.Z,{size:15,isHidden:!0}),(0,p.jsx)(L.Z,{style:v.settingsTitle,isSmall:!0,children:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreMethodsSection.title",defaultMessage:"Add more methods"})}),k]}),T=[{text:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.turnOffVerification.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:o,type:"button",view:"plain",isRed:!0}];return(0,p.jsx)(g.Z,{title:y,header:x,errorMessage:s,icon:(0,l.j)(v.icon),onDismiss:h,secondaryActions:T,children:I})}function ie(e){return(0,d.EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:u.Z.fontWeight.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}var ne=s(8848),re=s(1799);function ae(e){window.__c={n:"MFAPromptVerifyWithBackupCode"};const{isLoading:t,userStore:s,errorMessage:n,onDismiss:r,onVerifyBackupCode:a,onTryAnotherMethod:o}=e,l=(0,d.yK)(oe,[]),[u,m]=(0,i.useState)(""),h=(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.title",defaultMessage:"To continue, we need to verify your identity"}),f=(0,p.jsx)(c.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withBackupCode.header",defaultMessage:"Enter an unused one-time backup code."}),S={text:t?(0,p.jsx)(v.Z,{}):(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.button.message",defaultMessage:"Continue"}),onClick:()=>a(u.replace(/[^0-9a-zA-Z]/g,"")),disabled:t||""===u},y=[{text:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>o(),disabled:t}];return(0,p.jsx)(g.Z,{title:h,header:f,icon:(0,p.jsx)(C,{userStore:s}),primaryAction:S,secondaryActions:y,errorMessage:n,onDismiss:r,children:(0,p.jsx)(z.Z,{type:"text",value:u,onChange:e=>{m((0,re.K)(e.target.value))},placeholder:"0000-0000",style:l.backupCodeInput,disabled:t,autoFocus:!0})})}function oe(e){return(0,d.EM)({backupCodeInput:{width:"100%",background:"light"===e.mode?ne.ZP.transparent:e.inputBackground}})}function de(e){window.__c={n:"MFAPromptVerifyWithPassword"};const{isLoading:t,isForgotPasswordLoading:s,userStore:n,errorMessage:a,alertMessage:o,onDismiss:l,onVerifyPassword:u,onForgotPassword:m}=e,h=(0,d.yK)(le,[]),[f,S]=(0,i.useState)(""),y=(0,r.VK)((()=>null==n?void 0:n.getEmail()),[n]),x=(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.title",defaultMessage:"To continue, we need to verify your identity"}),M={text:t?(0,p.jsx)(v.Z,{}):(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.button.message",defaultMessage:"Continue"}),onClick:()=>u(f),disabled:t||""===f},b=[{text:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.secondaryButton.message",defaultMessage:"Forgot password?"}),view:"plain",type:"button",disabled:s,onClick:()=>m(y)}];return(0,p.jsx)(g.Z,{title:x,header:y,icon:(0,p.jsx)(C,{userStore:n}),primaryAction:M,secondaryActions:b,errorMessage:a,alertMessage:o,onDismiss:l,children:(0,p.jsx)(z.Z,{type:"password",value:f,onChange:e=>S(e.target.value),placeholder:"Your password",style:h.passwordInput,disabled:t,autoComplete:"current-password",autoFocus:!0})})}function le(){return(0,d.EM)({passwordInput:{width:"100%"}})}var ce=s(72126),ue=s(73602),me=s(11898);function ge(e){window.__c={n:"MFAPromptVerifyWithSMS"};const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:r,resentStatus:a,resentAt:o,onDismiss:d,onVerifySMS:l,onResendLink:u,onTryAnotherMethod:m}=e,[h,f]=(0,i.useState)([]),S=(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.title",defaultMessage:"To continue, we need to verify your identity"}),y=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withSMS.header",defaultMessage:"Enter the code sent to {phoneHint}.",values:{phoneHint:`${t.phoneNumber}`}})," ",(0,p.jsx)(ue.y,{resentAt:o,resentStatus:a,onResendLink:u})]}),x={text:s?(0,p.jsx)(v.Z,{}):(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.button.message",defaultMessage:"Continue"}),onClick:()=>l(t.mfaSettingId,h.join("")),disabled:s||"resending"===a||6!==(0,ce.oA)(h).length},M=[{text:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>m(),disabled:s}];return(0,p.jsx)(g.Z,{title:S,header:y,icon:(0,p.jsx)(C,{userStore:n}),primaryAction:x,secondaryActions:M,errorMessage:r,onDismiss:d,children:(0,p.jsx)("div",{children:(0,p.jsx)(me.ZP,{numInputs:6,value:h,format:"settings",disabled:!1,onChange:f,autoFocus:!0,isValidKey:me.rN})})})}function pe(e){window.__c={n:"MFAPromptVerifyWithTOTP"};const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:r,onDismiss:a,onVerifyTOTP:o,onTryAnotherMethod:l}=e,u=(0,d.yK)(he,[]),[m,h]=(0,i.useState)([]),f=(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,p.jsx)(c.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withTOTP.header",defaultMessage:"Enter code from authenticator <boldtext>{friendlyName}</boldtext>.",values:{friendlyName:t.friendlyName,boldtext:e=>(0,p.jsx)("span",{style:u.boldText,children:e})}}),y={text:s?(0,p.jsx)(v.Z,{}):(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.button.message",defaultMessage:"Continue"}),onClick:()=>o({mfaSettingId:t.mfaSettingId,code:m.join("")}),disabled:s||6!==(0,ce.oA)(m).length},x=[{text:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>l(),disabled:s}];return(0,p.jsx)(g.Z,{title:f,header:S,icon:(0,p.jsx)(C,{userStore:n}),primaryAction:y,secondaryActions:x,errorMessage:r,onDismiss:a,children:(0,p.jsx)("div",{children:(0,p.jsx)(me.ZP,{numInputs:6,value:m,format:"settings",disabled:!1,onChange:h,autoFocus:!0,isValidKey:me.rN})})})}function he(e){return(0,d.EM)({boldText:{fontWeight:u.Z.fontWeight.semibold}})}function fe(e){window.__c={n:"SettingsRouter"};const{settingsStateMachine:t,onDismiss:s,onStartTOTP:i,onStartSMS:d,onStartBackupCodes:l}=e,c=(0,n.O7)(),u=(0,r.VK)((()=>(0,o.B7)(c)),[c]),m=t.useCurrentStep();switch(m.step){case"settingsUninitialized":return null;case"settingsVerifyWithPassword":return(0,p.jsx)(de,{isLoading:m.isLoading,isForgotPasswordLoading:m.isForgotPasswordLoading,userStore:u,errorMessage:m.error,alertMessage:m.alert,onVerifyPassword:e=>t.settingsVerifyPassword(e),onForgotPassword:e=>t.settingsForgotPassword(e),onDismiss:s});case"settingsVerifyChooseMFAMethod":return(0,p.jsx)(I,{isSMSLoading:m.isSMSLoading,chosenMfaSettingId:m.chosenMfaSettingId,mfaSettings:m.mfaSettings,userStore:u,errorMessage:m.error,onClick:e=>t.settingsChooseVerifyMethod(e),onDismiss:s});case"settingsVerifyWithTOTP":return(0,p.jsx)(pe,{isLoading:m.isLoading,mfaSetting:m.mfaSetting,userStore:u,errorMessage:m.error,onDismiss:s,onVerifyTOTP:e=>t.settingsVerifyTOTP(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithSMS":return(0,p.jsx)(ge,{isLoading:m.isLoading,mfaSetting:m.mfaSetting,userStore:u,errorMessage:m.error,resentAt:m.resentAt,resentStatus:m.resentStatus,onDismiss:s,onVerifySMS:(e,s)=>t.settingsVerifySMS({mfaSettingId:e,code:s}),onResendLink:()=>t.settingsVerifyResendSMS(m.mfaSetting.mfaSettingId),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithBackupCode":return(0,p.jsx)(ae,{isLoading:m.isLoading,userStore:u,errorMessage:m.error,onDismiss:s,onVerifyBackupCode:e=>t.settingsVerifyBackupCode(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsLoadSettings":return null;case"settingsInitialSetup":return(0,p.jsx)(h,{errorMessage:m.error,onStartTOTP:i,onStartSMS:d,onDismiss:s});case"settingsShowSettings":const e=m.mfaSettings;return(0,p.jsx)(se,{mfaSettings:e,errorMessage:m.error,onStartTOTP:i,onStartSMS:d,onStartBackupCodes:l,onTurnOffMFA:()=>t.settingsConfirmDisableMFA(),onDismiss:s,onDeleteMethod:e=>t.settingsConfirmDelete(e),onUpdateMethod:e=>t.settingsUpdate(e)});case"settingsDeleteSettings":return(0,p.jsx)(y,{isLoading:m.isLoading,mfaSetting:m.mfaSettingToDelete,errorMessage:m.error,onDismiss:s,onCancel:()=>t.settingsConfirmIdentityForSettings(),onDeleteMethod:()=>t.settingsDelete()});case"settingsConfirmIdentity":case"settingsDisableMFA":const n="settingsConfirmIdentity"===m.step&&"disableMFA"===m.source;return"settingsDisableMFA"===m.step||n?(0,p.jsx)(A,{isLoading:n,lastMFASetting:m.lastMFASetting,errorMessage:m.error,onDismiss:s,onTurnOffMFA:()=>t.settingsDisableMFA(),onCancel:()=>t.settingsConfirmIdentityForSettings()}):null;case"settingsIdentityConfirmed":return"disableMFA"===m.source?(0,p.jsx)(F,{errorMessage:m.error,onDismiss:s}):null;default:return(0,a.t1)(m)}}},24173:(e,t,s)=>{s.d(t,{W:()=>u,c:()=>c});var i=s(49085),n=s(62965),r=s(97880),a=s(69503),o=s(49682),d=s(16010);const l={settingsVerifyWithPassword:o.Qj.incorrectPassword,settingsVerifyWithSMS:o.Qj.smsIncorrectCode,settingsVerifyWithTOTP:o.Qj.totpIncorrectCode,settingsVerifyWithBackupCode:o.Qj.backupCodeIncorrectCode};class c extends i.default{getInitialState(){return{step:"settingsUninitialized"}}}class u extends d.o{constructor(e,t){super(e,"settings"),this.service=void 0,this.service=t}settingsConfirmIdentityForPasswordSetting(){this.checkStep("settingsUninitialized")&&(this.store.setState({step:"settingsConfirmIdentity",source:"passwordSetting"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsConfirmIdentityForSettings(){this.checkStep(["settingsUninitialized","settingsDeleteSettings","settingsDisableMFA"])&&(this.store.setState({step:"settingsConfirmIdentity",source:"settings"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsVerifyPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithPassword(e).catch(this.handleUnexpectedError))}settingsForgotPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isForgotPasswordLoading:!0}),this.doForgotPassword(e).catch(this.handleUnexpectedError))}settingsChooseVerifyMethod(e){const t=this.checkStep("settingsVerifyChooseMFAMethod");if(!t)return;const s=e.mfaMethod;switch(s){case"sms":this.store.setState({...t,isSMSLoading:!0,chosenMfaSettingId:e.mfaSettingId}),this.doVerifyIdentitySendSMS({mfaSetting:e});break;case"totp":this.store.setState({mfaSetting:e,step:"settingsVerifyWithTOTP",isLoading:!1,source:t.source});break;case"backup_code":this.store.setState({step:"settingsVerifyWithBackupCode",isLoading:!1,source:t.source});break;default:(0,r.t1)(s)}}settingsTryAnotherMethod(){this.checkStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"])&&this.doTryAnotherMethod().catch(this.handleUnexpectedError)}settingsVerifyTOTP(e){const t=this.checkStep("settingsVerifyWithTOTP");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithTOTP(e).catch(this.handleUnexpectedError))}settingsVerifySMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithSMS(e).catch(this.handleUnexpectedError))}settingsVerifyResendSMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,resentStatus:"resending"}),this.doVerifyIdentityResendSMS(e).catch(this.handleUnexpectedError))}settingsVerifyBackupCode(e){const t=this.checkStep("settingsVerifyWithBackupCode");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithBackupCode({code:e}).catch(this.handleUnexpectedError))}settingsShow(e){const{refresh:t}=e,s=this.getCurrentStep();if("settingsUninitialized"===s.step)return this.settingsConfirmIdentityForSettings();t&&("settingsShowSettings"===s.step||"settingsInitialSetup"===s.step)&&(this.store.setState({step:"settingsLoadSettings"}),this.doLoadSettings().catch(this.handleUnexpectedError))}settingsUpdate(e){this.checkStep("settingsShowSettings")&&this.doUpdateSettings(e).catch(this.handleUnexpectedError)}settingsConfirmDelete(e){const t=this.checkStep("settingsShowSettings");if(!t)return;t.mfaSettings.find((t=>t.mfaSettingId===e.mfaSettingId));1===t.mfaSettings.filter((e=>"totp"===e.mfaMethod||"sms"===e.mfaMethod)).length?this.store.setState({step:"settingsDisableMFA",lastMFASetting:e}):this.store.setState({step:"settingsDeleteSettings",mfaSettings:t.mfaSettings,mfaSettingToDelete:e,isLoading:!1})}settingsDelete(){const e=this.checkStep("settingsDeleteSettings");e&&(this.store.setState({...e,isLoading:!0}),this.doDeleteSettings(e.mfaSettingToDelete.mfaSettingId).catch(this.handleUnexpectedError))}settingsConfirmDisableMFA(){this.checkStep("settingsShowSettings")&&this.store.setState({step:"settingsDisableMFA"})}settingsDisableMFA(){const e=this.checkStep("settingsDisableMFA");e&&(this.store.setState({step:"settingsConfirmIdentity",source:"disableMFA",lastMFASetting:e.lastMFASetting}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"settingsUninitialized"})}async doConfirmIdentity(){const e=await this.withStep("settingsConfirmIdentity",(()=>this.service.confirmIdentity()));if(!e)return;const{result:t,state:s}=e,i=t.status;switch(i){case"ready":this.store.setState({step:"settingsIdentityConfirmed",source:s.source});const e=s.source;"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(a.Z.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,r.t1)(e);break;case"mfa":this.store.setState({step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings,source:s.source});break;case"password":this.store.setState({step:"settingsVerifyWithPassword",isLoading:!1,isForgotPasswordLoading:!1,source:"settings"});break;default:throw(0,r.t1)(i)}}async doForgotPassword(e){if(!e)return void this.store.setState({step:"settingsVerifyWithPassword",source:"settings",isLoading:!1,isForgotPasswordLoading:!1,error:o.Qj.unexpectedError});const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.sendTemporaryPassword({email:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isForgotPasswordLoading:!1,alert:o.to.passwordResentLinkSent(e)});break;case"error":this.store.setState({...i,isForgotPasswordLoading:!1,error:o.Qj.unexpectedError});break;default:return(0,r.t1)(s.status)}}async doVerifyIdentityWithPassword(e){const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.verifyIdentityWithPassword({password:e})));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithTOTP(e){const t=await this.withStep("settingsVerifyWithTOTP",(()=>this.service.verifyIdentityWithTOTP(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.verifyIdentityWithSMS(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityResendSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.sendSMS({mfaSettingId:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isLoading:!1,resentStatus:"resent",resentAt:Date.now()});break;case"error":this.store.setState({...i,resentStatus:"not-resent",error:o.Qj.unexpectedError});break;default:return(0,r.t1)(s.status)}}async doVerifyIdentityWithBackupCode(e){const t=await this.withStep("settingsVerifyWithBackupCode",(()=>this.service.verifyBackupCode(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async handleVerifyIdentityResponse(e){const{status:t,state:s}=e;switch(t){case"match":const e=s.source;this.store.setState({step:"settingsIdentityConfirmed",source:s.source}),"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(a.Z.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,r.t1)(e);break;case"incorrect":this.store.setState({...s,isLoading:!1,error:l[s.step]});break;case"error":this.store.setState({...s,isLoading:!1,error:o.Qj.unexpectedError});break;default:return(0,r.t1)(t)}}async doTryAnotherMethod(){const e=await this.withStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e;t.settings.length>0?this.store.setState({...s,step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings}):this.store.setState({...s,error:o.Qj.unexpectedError})}async doLoadSettings(){const e=await this.withStep(["settingsLoadSettings","settingsIdentityConfirmed"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e,i=s.step;switch(i){case"settingsIdentityConfirmed":case"settingsLoadSettings":t.settings.length>0?this.store.setState({step:"settingsShowSettings",mfaSettings:t.settings}):this.store.setState({step:"settingsInitialSetup"});break;default:return(0,r.t1)(i)}}async doVerifyIdentitySendSMS(e){const{mfaSetting:t}=e,s=await this.withStep("settingsVerifyChooseMFAMethod",(()=>this.service.sendSMS({mfaSettingId:t.mfaSettingId})));if(!s)return;const{result:i,state:n}=s;switch(i.status){case"ok":this.store.setState({mfaSetting:t,step:"settingsVerifyWithSMS",isLoading:!1,resentAt:0,resentStatus:"not-resent",source:n.source});break;case"error":break;default:return(0,r.t1)(i.status)}}async doUpdateSettings(e){const{mfaMethod:t,mfaSettingId:s}=e;if("totp"!==t)return;const i=await this.withStep("settingsShowSettings",(()=>this.service.renameSettings({mfaSettingId:s,friendlyName:e.friendlyName})));if(!i)return;const{result:r,state:a}=i;"saved"===r.status?r.settings.length>0&&!(0,n.Z)(r,a.mfaSettings)?this.store.setState({step:"settingsShowSettings",mfaSettings:r.settings}):this.store.setState({...a,error:void 0}):this.store.setState({...a,error:"duplicate"===r.status?o.Qj.totpDuplicateFriendlyName:"bad_friendly_name"===r.status?o.Qj.totpBadFriendlyName:o.Qj.totpEmptyFriendlyName})}async doDisableMFA(){const e=await this.withStep("settingsIdentityConfirmed",(()=>this.service.disableMFA()));if(!e)return;const{result:t}=e;switch(t.status){case"ok":case"error":break;default:return(0,r.t1)(t.status)}}async doDeleteSettings(e){const t=await this.withStep("settingsDeleteSettings",(()=>this.service.deleteSettings(e)));if(!t)return;const{result:s}=t;this.store.setState({step:"settingsShowSettings",mfaSettings:s.settings})}}},83890:(e,t,s)=>{s.d(t,{Z:()=>y});var i=s(67294),n=s(83355),r=s(66897),a=s(22686),o=s(19889),d=s(7928),l=s(5366),c=s(2985),u=s(90106),m=s(92864),g=s(93044),p=s(255),h=s(97680),f=s(8319),S=s(85893);class v extends n.Z{constructor(){super(...arguments),this.renderFilterListItem=(e,t)=>{let{disabled:s,onRemove:i,onClick:n}=t;const a=this.styles,o=this.getUserValue(e),d=(0,S.jsx)(p.Z,{disabled:s,onClick:i});return(0,S.jsx)(h.Z,{disabled:s,focused:!1,actor:(0,r.m3)(o),right:d,style:a.menuItem,desktopTitleStyle:a.menuItemTitle,onClick:n},e)},this.renderItemForSummary=e=>(0,d.Nz)(this.props.intl,this.getUserValue(e)),this.renderToken=(e,t)=>{const{userIds:s}=this.props,i=1===s.length,n=this.getUserValue(e);if(n)return(0,S.jsx)(m.ZP,{format:this.environment.device.isMobile?g.lP.Large:g.lP.Small,showRemoveButton:!0,isSingle:i,onClickRemove:t.onRemove,actor:(0,r.m3)(n),shouldShrink:!0,style:{background:"transparent"}},e)},this.renderResultMenuItem=(e,t)=>{const s=this.getUserValue(e);return(0,i.createElement)(h.Z,{...t,key:e,actor:(0,r.m3)(s)})},this.performRequest=async e=>{let{query:t,current:s}=e;const i=new Set(s);return(await c.Yu({environment:this.environment,query:t,membersOnly:!1})).filter((e=>!i.has(e.id))).slice(0,20).map((e=>e.id))},this.getUserValue=e=>this.createUserStore(e).getValue(),this.createUserStore=e=>{const{parentStore:t}=this.props;return u.U6.createChildStore(t,{table:o.KJ,id:e})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:2,fill:"currentColor"}}}renderComponent(){const{mode:e,title:t,userIds:s,onChange:i,disabled:n,focused:r,onMenuDismiss:o,intl:d}=this.props;return(0,S.jsx)(f.Z,{mode:e,title:t,icon:a.f,iconStyles:this.styles.recordIcon,items:s,onChange:i,disabled:n,focused:r,renderFilter:this.renderFilterListItem,renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:(0,S.jsx)(l.FormattedMessage,{defaultMessage:"Add a person",id:"search.filterMenu.addAPersonButton.label"}),labelText:{title:t,tokenInputPlaceholder:d.formatMessage({defaultMessage:"Search people",id:"search.filterMenu.searchPeople.placeholder"}),componentDebugName:"SearchPersonFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,onMenuDismiss:o,hasItemsSelected:(null==s?void 0:s.length)>0})}}v.displayName="SearchPersonFilter";const y=(0,l.injectIntl)(v)},12276:(e,t,s)=>{s.d(t,{l:()=>o});s(67294);var i=s(83355),n=s(5366),r=s(72495),a=s(85893);class o extends i.Z{renderComponent(){return(0,a.jsx)(r.Z,{title:(0,a.jsx)(n.FormattedMessage,{id:"inviteUserModal.searchDropdown.selectPersonTitle",defaultMessage:"Select a person"}),...this.props})}}o.displayName="SearchPersonDropdown"},79817:(e,t,s)=>{s.d(t,{$s:()=>F,Oh:()=>T,Si:()=>P,ch:()=>y,fC:()=>b,fr:()=>S,j_:()=>M,uJ:()=>I,x5:()=>x});s(57658);var i=s(33728),n=s(68626),r=s(24211),a=s(27006),o=s(97880),d=s(54642),l=s(76464),c=s(64964),u=s(33929),m=s(85834),g=s(13627),p=s(35057),h=s(4708),f=s(19306);const S=e=>{const{environment:t,spaceStore:s,contextualInviteStore:i}=e;v({environment:t,spaceStore:s,contextualInviteStore:i})?i.startRequestMembership():y({environment:t,spaceStore:s,contextualInviteStore:i})?i.startWorkspaceInvite():i.setState({...i.state,inviteStage:m.TG.closed})},v=e=>{const{spaceStore:t,contextualInviteStore:s}=e,i=t.getRole();return!(!i||!(0,a.RN)(i))&&(!!s.hasGuests()&&(!t.getDisableMembershipRequests()&&(0,h.p1)()))},y=e=>{const{spaceStore:t,contextualInviteStore:s}=e,i=t.getRole();return!(!i||!(0,a.dy)(i))&&(!!s.hasGuests()&&(0,p.Mk)())},x=e=>{const{success:t,intl:s,contextualInviteStore:i}=e,n=i.state.invitedUsers;0!==n.length&&(t?c.oV({label:s.formatMessage({id:"contextual_invite.permission_invite_success3",defaultMessage:"Successfully sent invites to {users}"},{users:I(n,s)})}):(c.oV({label:s.formatMessage({id:"contextual_invite.permission_invite_failure",defaultMessage:"Failed to send invites to {users}"},{users:I(n,s)})}),i.reset()))},M=async e=>{const{environment:t,spaceStore:s,contextualInviteStore:i,from:r,intl:a}=e,{selection:o,flowId:d}=i.state;if("page_guest"===o||!i.hasGuests())return i.reset(),!1;const{inviteTargets:c,unknownEmails:u}=await w({environment:t,contextualInviteStore:i}),m={...i.state};i.reset();const h=(0,p.zt)(),f=h&&(0,g.o9)(h)?"editor":e.inviteRole??"read_and_write";try{await l.n_({environment:t,store:s,inviteTargets:c,inviteRole:f,isOnboarding:!1,invite:{inviteOrigin:r,inviteFlowId:d}})}catch(S){return k(a,m.invitedUsers),n.log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.inviteTargets",data:{miscDataToConvertToString:{...m,inviteTargets:c}}}),!1}finally{u.length&&n.log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.unknownUserId",data:{miscDataToConvertToString:{...m,unknownEmails:u}}})}return!0},b=async e=>{const{environment:t,spaceStore:s,originId:i,originType:r,reasonMessage:a,contextualInviteStore:o,intl:l}=e,{selection:c}=o.state;if("page_guest"===c||!o.hasGuests())return o.reset(),!1;const{inviteTargets:u,unknownEmails:m}=await w({environment:t,contextualInviteStore:o}),g={...o.state};o.reset();const p=[];try{const e=u.map((e=>d.requestAccess(t,{type:"actor-to-space",forActorId:e.value.id,spaceId:s.id,message:a,attributes:{origin_id:i,origin_type:r,origin_table:"share_menu"===r?"block":"space",add_permissions_on_approval:!1}}).catch((()=>p.push(e)))));await Promise.all(e)}catch(h){return C(l,g.invitedUsers),n.log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.inviteTargets",data:{miscDataToConvertToString:{...g,inviteTargetsWithErrors:p}}}),!1}finally{m.length&&n.log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.unknownUserId",data:{miscDataToConvertToString:{...g,unknownEmails:m}}})}return!0},w=async e=>{const{environment:t,contextualInviteStore:s}=e,{invitedEmailToUserIdMap:i}=s.state,n=[],r=[];for(const a of s.state.invitedUsers){if(!a.isGuest)continue;const e=await j(t,a,i);e?n.push({type:"existingUser",value:{id:e,email:a.email,version:1}}):r.push(a.email)}return{inviteTargets:n,unknownEmails:r}},j=async(e,t,s)=>{const i=await(async(e,t,s)=>{let i=t.id;if(i||(i=s[t.email]),!i){const s=await d.findUser(e,{email:t.email});if("failed"!==s.type){const e=s.data;e.value&&(i=e.value.value.id)}}return i})(e,t,s);if(i)return i;const n=(0,r.E2)(u.default.getIntl()),a=await d.createEmailUser(e,{email:t.email,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:n});return"failed"!==a.type?a.data.userId:void 0},C=(e,t)=>{0!==t.length&&c.oV({label:e.formatMessage({id:"contextual_invite.request_members_failure",defaultMessage:"Failed to request {users} to become members"},{users:I(t,e)})})},k=(e,t)=>{0!==t.length&&c.oV({label:e.formatMessage({id:"contextual_invite.contextual_invite_failure",defaultMessage:"Failed to invite to {users} as members"},{users:I(t,e)})})},I=(e,t)=>(0,f.W)(e.flatMap((e=>e.email||[]))),T=(e,t)=>{const{state:s}=t,i=(0,p.zt)(),n=t.getGuestEmails();return{invite_flow_id:s.flowId,user_count:n.length,user_emails:n,invite_space_role_selection:s.selection,is_bot:!1,subscription_tier:i}};function P(e){const{type:t}=e;switch(t){case"newUser":return{email:e.value.email,isGuest:!0};case"existingUser":return{...e.value,email:e.value.email,isGuest:"none"===e.spaceRole||"not_in_space"===e.spaceRole};case"group":return;default:(0,o.t1)(t)}}function F(e){const{contextualInviteUser:t,allowedDomains:s}=e,{email:n,isGuest:r}=t;if(r){const e=(0,i.Gd)(n);if(!e)return!1;if(s.has(e))return!0}return!1}},3924:(e,t,s)=>{s.d(t,{M:()=>o});var i=s(67294),n=s(480),r=s(54642),a=s(85893);function o(e){return t=>{const s=(0,n.O7)(),[o,d]=(0,i.useState)({isDomainVerified:!1,settings:{}});(0,i.useEffect)((()=>{r.getEmailDomainSettings(s,{}).then((e=>{"success"===e.type&&d(e.data)}))}),[s]);const l={...t,userEmailDomainSettings:o};return(0,a.jsx)(e,{...l})}}},18441:(e,t,s)=>{s.d(t,{P9:()=>d,YJ:()=>l,jc:()=>o,jg:()=>a});s(57658);var i=s(77657),n=s(59753),r=s(32161);function a(e){if(e.integration_id!==i.nO)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,s,n]=t;return{organizationName:s,accountName:n}}function o(e){return n.kk.fromValue(r.P,e).getSlackWorkspaceId()}function d(e,t){return t?e.filter((e=>{const s=o(e);return!!s&&t(s)})):e}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s={};for(const i of e){const{accountName:e,organizationName:n}=a(i);c({query:t,accountName:e,organizationName:n})&&(s[e]||(s[e]=[]),s[e].push({externalAuthentication:i,workspaceName:n}))}return s}function c(e){const{accountName:t,organizationName:s,query:i}=e;if(0===i.length)return!0;const n=t.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0,r=!!s&&s.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0;return n||r}},53353:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(86628),n=s(98165),r=s(65598);const a=function(e){return(0,i.VK)((()=>{if(!(0,r.OY)(e))return{isStoreInTeam:!1,spaceAllowsGuests:!0};const t=(0,n.VP)(e),s=(0,n.Pj)(e),i=!(null!=s&&s.getDisableGuests());return t?{isStoreInTeam:!0,teamAllowsGuests:!t.getDisableGuests(),spaceAllowsGuests:i}:{isStoreInTeam:!1,spaceAllowsGuests:i}}),[e])}},26781:(e,t,s)=>{s.d(t,{i:()=>a});s(67294);var i=s(5366),n=s(53353),r=s(85893);function a(e){const t=(0,n.Z)(e);return t.isStoreInTeam?t.teamAllowsGuests?void 0:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(i.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine1",defaultMessage:"This teamspace doesn't allow guests."})}),(0,r.jsx)("div",{children:(0,r.jsx)(i.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."})})]}):t.spaceAllowsGuests?void 0:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(i.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine1",defaultMessage:"This workspace doesn't allow guests."})}),(0,r.jsx)("div",{children:(0,r.jsx)(i.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."})})]})}},39675:(e,t,s)=>{s.d(t,{E:()=>V,Z:()=>O});var i=s(67294),n=s(480),r=s(86628),a=s(5366),o=s(89101),d=s(97880),l=s(50906),c=s(84908),u=s(58188),m=s(34602),g=s(22974),p=s(39699),h=s(37181),f=s(97832),S=s(79092),v=s(42922),y=s(16354),x=s(68785),M=s(79603),b=s(42402),w=s(1548),j=s(55422),C=s(42982),k=s(30045),I=s(21969),T=s(38755),P=s(5162),F=s(80444),_=s(24042),Z=s(77080),A=s(45946),R=s(92083),B=s(78291),E=s(13627),D=s(34980),L=s(85893);function V(e){let{isPhone:t,isIOS:s,passwordRequestStore:i,userEmailDomainSettings:n}=e;const{data:r}=B.default.state,a=s&&E.wY(r),o=(0,M.mS)();return[{key:"password",renderSettingsItem:()=>(0,L.jsx)(U,{passwordRequestStore:i})},{key:"appearance",renderSettingsItem:()=>(0,L.jsx)(G,{isMobile:!0})},!(t&&(0,P.Y)("supportsNativeHome"))?{key:"page-on-app-start",renderSettingsItem:()=>(0,L.jsx)(q,{isMobile:!0})}:void 0,Z.default.checkGate("block_attribution")?{key:"block-attribution",renderSettingsItem:()=>(0,L.jsx)(N,{isMobile:!0})}:void 0,a?{key:"subscription",renderSettingsItem:()=>(0,L.jsx)(C.Z,{})}:void 0,{key:"user-consent",renderSettingsItem:()=>(0,L.jsx)(k.Z,{emailDomainSettings:n.settings})},{key:"calendar",renderSettingsItem:()=>(0,L.jsx)(S.Z,{})},o?{key:"experiments",renderSettingsItem:()=>(0,L.jsx)(M.Pp,{})}:void 0,{key:"deleteAccount",renderSettingsItem:()=>(0,L.jsx)(f.Z,{userEmailDomainSettings:n})}].filter(d.$K)}function O(e){const{environment:t}=e,s=Z.default.checkGate("block_attribution");return[{key:"appearance",renderSettingsItem:()=>(0,L.jsx)(G,{isMobile:!1})},{key:"page-on-app-start",renderSettingsItem:()=>(0,L.jsx)(q,{isMobile:!1})},t.device.isDesktop&&(t.device.isMac||t.device.isWindows||!1)?{key:"open-in-desktop-app",renderSettingsItem:()=>(0,L.jsx)(z,{})}:void 0,t.device.isDesktop&&t.device.isMac?{key:"close-browser-tabs",renderSettingsItem:()=>(0,L.jsx)(W,{})}:void 0,s?{key:"block-attribution",renderSettingsItem:()=>(0,L.jsx)(N,{isMobile:!1})}:void 0].filter(d.$K)}function U(e){let{passwordRequestStore:t}=e;window.__c={n:"LoadingPasswordSettings"};const s=(0,r.VK)((()=>{const{data:e}=B.default.state;return E.wl(e)}),[]),i=(0,r.VK)((()=>{var e;return(null===(e=F.default.state.currentUserStore)||void 0===e?void 0:e.getEmail())??""}),[]),{hasPassword:n,canConfigurePassword:a,isSamlEnforced:o,mfaStatus:d,error:l,ready:c}=(0,r.VK)((()=>({...t.state.result,error:t.state.error,ready:t.state.result})),[t]);return l?(0,L.jsx)(w.Z,{hasPassword:!1,hasPasswordActions:!1,samlEnforced:!1,mfaStatus:"loading",email:i,onReloadSettings:()=>t.refresh(),isError:!0}):c?(0,L.jsx)(w.Z,{hasPassword:n,hasPasswordActions:a,samlEnforced:o,mfaStatus:d,isEducationPlan:s,email:i,onReloadSettings:()=>t.refresh(),isError:!1}):(0,L.jsx)(x.Z,{})}function G(e){let{isMobile:t}=e;window.__c={n:"AppearanceSetting"};const s=(0,n.O7)(),i=(0,r.VK)((()=>g.MH(s)),[s]);return(0,L.jsx)(j.Z,{isMobile:t,title:(0,L.jsx)(a.FormattedMessage,{id:"appearanceSettings.title",defaultMessage:"Appearance"}),caption:(0,L.jsx)(a.FormattedMessage,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."}),type:"dropdown",currentOption:i,options:[{key:"system",label:(0,L.jsx)(a.FormattedMessage,{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"})},{key:"light",label:(0,L.jsx)(a.FormattedMessage,{id:"appearanceSetting.light.label",defaultMessage:"Light"})},{key:"dark",label:(0,L.jsx)(a.FormattedMessage,{id:"appearanceSetting.dark.label",defaultMessage:"Dark"})}],onSelectOption:e=>{g.rz(e)}})}function N(e){let{isMobile:t}=e;window.__c={n:"AttributionSetting"};const s=(0,n.O7)(),{currentUserSettingsStore:o}=(0,r.VK)((()=>F.default.state),[]),d=(0,r.VK)((()=>{var e;return(null==o||null===(e=o.getSettings())||void 0===e?void 0:e.show_block_attribution)??!0}),[o]),l=(0,i.useCallback)((()=>{o&&p.createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,perform:e=>{h.d2({userSettingsStore:o,data:{show_block_attribution:!d},transaction:e})}})}),[o,d,s]);return(0,L.jsx)(j.Z,{isMobile:t,title:(0,L.jsx)(a.FormattedMessage,{id:"attributionSetting.title",defaultMessage:"Block attribution"}),caption:(0,L.jsx)(a.FormattedMessage,{id:"attributionSetting.description.message",defaultMessage:"See your teammates’ initials to the left of blocks they created or edited."}),type:"toggle",isOn:d,onToggle:l})}function q(e){let{isMobile:t}=e;window.__c={n:"PageOnAppStartSetting"};const s=(0,n.O7)(),i=(0,r.VK)((()=>F.default.state.currentSpaceViewStore),[]),o=(0,r.VK)((()=>(0,D.o)()),[]),d=(0,r.VK)((()=>T.g4(s,i)),[s,i]);return(0,L.jsx)(j.Z,{isMobile:t,title:(0,L.jsx)(a.FormattedMessage,{id:"pageOnAppStoreSetting.title",defaultMessage:"Open on start"}),caption:(0,L.jsx)(a.FormattedMessage,{id:"pageOnAppStoreSetting.description.message",defaultMessage:"Choose what to show when Notion starts or when you switch workspaces."}),type:"dropdown",currentOption:d,options:o,onSelectOption:e=>{u.N({userAction:"NotificationsAndPersonalSettings.PageOnAppStartSetting",environment:s,option:e,from:"user_settings"})}})}function W(){window.__c={n:"CloseBrowserTabsSetting"};const{isElectron:e,isMac:t}=(0,n.Fy)(),s=(0,r.VK)((()=>{var e;return null===(e=_.Z.state.preferences)||void 0===e?void 0:e.isClosingBrowserTabs}),[]),o=(0,i.useCallback)((()=>{const e=!s;c.electronAppFeatures.setPreference("isClosingBrowserTabs",e)}),[s]);if(!e||!t||void 0===s)return null;const d=(0,L.jsx)(a.FormattedMessage,{id:"openInDesktopAppSettings.closeBrowserTabs.title",defaultMessage:"Close redirecting browser tabs"}),l=(0,L.jsx)(a.FormattedMessage,{id:"openInDesktopAppSettings.closeBrowserTabs.caption",defaultMessage:'When opening links in the desktop app, close "Redirecting to your Notion app..." browser tabs.'});return(0,L.jsx)(j.Z,{isMobile:!1,title:d,caption:l,type:"toggle",isOn:s,onToggle:o})}function z(){window.__c={n:"OpenInDesktopAppSetting"};const e=(0,n.O7)(),{isElectron:t}=(0,n.Fy)(),s=(0,r.VK)((()=>A.Z.state),[]),i=(0,L.jsx)(a.FormattedMessage,{id:"openInDesktopAppSetting.title",defaultMessage:"Open links in desktop app"}),d=(0,r.VK)((()=>R.Z.state.highlightedSetting===R.R.OpenInDesktopApp),[]);if(t)return(0,L.jsx)(j.Z,{isMobile:!1,title:i,caption:(0,L.jsx)(a.FormattedMessage,{id:"openInDesktopAppSetting.desktopConfigureCaption",defaultMessage:"You can configure browser links to open in this app."}),type:"custom",customButton:(0,L.jsx)(y.Z,{href:(0,I.H)(window.location.href),external:!0,onClick:()=>{l.rZ2(e)},children:(0,L.jsx)(v.Z,{children:(0,L.jsx)(a.FormattedMessage,{id:"openInDesktopAppSetting.desktopConfigureButton",defaultMessage:"Configure"})})})});return(0,L.jsx)(j.Z,{isMobile:!1,title:i,caption:(0,L.jsx)(a.FormattedMessage,{id:"openInDesktopAppSetting.description.messageWindows",defaultMessage:"You must have the <desktopapplink>Mac or Windows app</desktopapplink> installed",values:{desktopapplink:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,L.jsx)(b.Z,{external:!0,href:o.AR.desktop,onClick:e=>{e.stopPropagation()},children:t})}}}),type:"toggle",isOn:"always"===s,onToggle:()=>{const t="always"===s?"never":"always";A.Z.setState(t),"always"===t&&m.openInNativeApp({url:(0,I.W)(window.location.href),environment:e}),l.wz6(e,{toggled_to:"always"===t?"on":"off"})},shouldHighlight:d})}},13630:(e,t,s)=>{s.d(t,{Z:()=>r});var i=s(49085);class n extends i.default{getInitialState(){return{count:0}}}const r=new n},71071:(e,t,s)=>{s.d(t,{Sw:()=>a,ZP:()=>l,jR:()=>o});var i=s(13991),n=s(49085);const r=["en","en-us","en-ca"];function a(e){return"pdf"===e.exportOptions.exportType}function o(){return r.includes(i.SP.toLowerCase())?"Letter":"A4"}class d extends n.default{getInitialState(){return{open:!1}}}const l=new d},53680:(e,t,s)=>{s.d(t,{Z:()=>r});var i=s(49085);class n extends i.default{getInitialState(){return{disablePublicAccess:!1,disableGuests:!1,disableMoveToSpace:!1,disableExport:!1,disableSpacePageEdits:!1,disablePublicAccessRequests:!1,disableTeamCreation:!1,disableMembershipRequests:!1,disableExternalMembershipRequests:!1,disableGuestMembershipRequests:!1,enableGuestInviteRequests:!1,enableAiFeature:!1,disableTeamGuests:!1,disableGuestsModalOpen:!1}}getValueForSpace(e){if(e.isDefined())return{disablePublicAccess:Boolean(e.getDisablePublicAccess()),disableGuests:Boolean(e.getDisableGuests()),disableMoveToSpace:Boolean(e.getDisableMoveToSpace()),disableExport:Boolean(e.getDisableExport()),disableSpacePageEdits:Boolean(e.getDisableSpacePageEdits()),disablePublicAccessRequests:Boolean(e.getDisablePublicAccessRequests()),disableTeamCreation:Boolean(e.getDisableTeamCreation()),disableMembershipRequests:Boolean(e.getKeyStore("settings").getKeyStore("disable_membership_requests").getValue()),disableExternalMembershipRequests:Boolean(e.getKeyStore("settings").getKeyStore("disable_external_membership_requests").getValue()),disableGuestMembershipRequests:Boolean(e.getKeyStore("settings").getKeyStore("disable_guest_membership_requests").getValue()),enableGuestInviteRequests:Boolean(e.getKeyStore("settings").getKeyStore("enable_guest_invite_requests").getValue()),enableAiFeature:Boolean(e.getKeyStore("settings").getKeyStore("enable_ai_feature").getValue()),disableTeamGuests:Boolean(e.getKeyStore("settings").getKeyStore("disable_team_guests").getValue())}}}const r=n},50501:(e,t,s)=>{s.d(t,{g:()=>i});const i=14*s(63143).A0},7189:(e,t,s)=>{s.d(t,{K:()=>r});s(67294);var i=s(45238),n=s(85893);const r=(0,i.I)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},3338:(e,t,s)=>{s.d(t,{p:()=>r});s(67294);var i=s(45238),n=s(85893);const r=(0,i.I)("circleCheck",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M6.09277 11.1855C8.88574 11.1855 11.1855 8.88574 11.1855 6.09277C11.1855 3.30469 8.88086 1 6.08789 1C3.2998 1 1 3.30469 1 6.09277C1 8.88574 3.2998 11.1855 6.09277 11.1855ZM6.09277 10.0674C3.89062 10.0674 2.12305 8.29492 2.12305 6.09277C2.12305 3.89062 3.88574 2.11816 6.08789 2.11816C8.29492 2.11816 10.0625 3.89062 10.0674 6.09277C10.0723 8.29492 8.29492 10.0674 6.09277 10.0674ZM5.57031 8.41699C5.75586 8.41699 5.92188 8.31934 6.0293 8.15332L8.17773 4.81836C8.24609 4.71094 8.2998 4.58887 8.2998 4.47656C8.2998 4.21289 8.07031 4.03711 7.82129 4.03711C7.66016 4.03711 7.51855 4.125 7.41113 4.30078L5.55566 7.2793L4.68652 6.19043C4.56934 6.03906 4.44727 5.98047 4.2959 5.98047C4.03711 5.98047 3.82715 6.18555 3.82715 6.44922C3.82715 6.57129 3.87598 6.68359 3.96387 6.7959L5.0918 8.1582C5.22852 8.3291 5.37988 8.41699 5.57031 8.41699Z"})})},87586:(e,t,s)=>{s.d(t,{B:()=>r});s(67294);var i=s(45238),n=s(85893);const r=(0,i.I)("circleCross",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M15 28.354c7.305 0 13.354-6.049 13.354-13.354 0-7.292-6.062-13.354-13.367-13.354C7.695 1.646 1.646 7.708 1.646 15c0 7.305 6.062 13.354 13.354 13.354zm0-2.226A11.075 11.075 0 013.885 15c0-6.166 4.922-11.128 11.102-11.128 6.18 0 11.128 4.962 11.141 11.128A11.078 11.078 0 0115 26.128zm-4.477-5.577a.99.99 0 00.746-.327l3.718-3.731 3.731 3.73c.197.197.445.328.747.328.576 0 1.047-.484 1.047-1.06a.979.979 0 00-.314-.747l-3.718-3.718 3.73-3.744c.223-.223.315-.445.315-.733 0-.59-.471-1.048-1.047-1.048-.275 0-.498.092-.72.315l-3.771 3.744-3.744-3.731c-.184-.21-.432-.301-.72-.301-.577 0-1.048.445-1.048 1.034a.97.97 0 00.314.733l3.719 3.731-3.719 3.732a.951.951 0 00-.314.733c0 .576.471 1.06 1.048 1.06z"})})},76781:(e,t,s)=>{s.d(t,{x:()=>r});s(67294);var i=s(45238),n=s(85893);const r=(0,i.I)("group",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M15.011 14.795c1.678 0 3.096-1.502 3.096-3.444C18.107 9.455 16.682 8 15.012 8c-1.67 0-3.096 1.478-3.088 3.367 0 1.926 1.41 3.428 3.088 3.428zm-8.872.178c1.464 0 2.697-1.316 2.697-3.003 0-1.656-1.241-2.917-2.697-2.917-1.448 0-2.697 1.284-2.69 2.933 0 1.671 1.234 2.987 2.69 2.987zm17.722 0c1.456 0 2.69-1.316 2.69-2.987.007-1.649-1.242-2.933-2.69-2.933s-2.697 1.261-2.697 2.917c0 1.687 1.241 3.003 2.697 3.003zM1.917 22h5.747c-.82-1.184.069-3.521 1.8-4.899-.842-.55-1.946-.952-3.325-.952C2.714 16.15.5 18.695.5 20.793.5 21.559.883 22 1.917 22zm26.166 0c1.034 0 1.417-.441 1.417-1.207 0-2.098-2.214-4.644-5.64-4.644-1.378 0-2.474.403-3.317.952 1.732 1.378 2.62 3.715 1.8 4.899h5.74zm-17.852-.008h9.554c1.264 0 1.7-.387 1.7-1.099 0-1.989-2.505-4.728-6.473-4.728-3.977 0-6.475 2.74-6.475 4.728 0 .712.437 1.1 1.693 1.1z"})})},33679:(e,t,s)=>{s.d(t,{j:()=>r});s(67294);var i=s(45238),n=s(85893);const r=(0,i.I)("lockShield",{viewBox:"0 0 21 25",svg:(0,n.jsx)("path",{d:"M10.418 24.75C10.6289 24.75 10.9453 24.668 11.25 24.5039C17.9766 20.8359 20.3203 19.1484 20.3203 14.8828V6.01172C20.3203 4.62891 19.7812 4.13672 18.6211 3.64453C17.3203 3.09375 12.9258 1.54688 11.6367 1.125C11.2617 0.996094 10.8164 0.914062 10.418 0.914062C10.0312 0.914062 9.58594 1.01953 9.19922 1.125C7.92188 1.47656 3.52734 3.10547 2.22656 3.64453C1.06641 4.125 0.527344 4.62891 0.527344 6.01172V14.8828C0.527344 19.1484 2.87109 20.8242 9.59766 24.5039C9.90234 24.668 10.2188 24.75 10.418 24.75ZM10.418 22.2891C10.2539 22.2891 10.0781 22.2305 9.75 22.0195C4.38281 18.7617 2.71875 17.8711 2.71875 14.4375V6.38672C2.71875 5.97656 2.8125 5.8125 3.12891 5.68359C4.86328 4.98047 8.23828 3.86719 9.80859 3.24609C10.0664 3.15234 10.2539 3.11719 10.418 3.11719C10.5938 3.11719 10.7695 3.15234 11.0273 3.24609C12.6094 3.86719 15.9492 5.05078 17.707 5.68359C18.0352 5.80078 18.1172 5.97656 18.1172 6.38672V14.4375C18.1172 17.8945 16.3945 18.832 11.0977 22.0195C10.7578 22.2305 10.5938 22.2891 10.418 22.2891ZM6.22266 16.7695C6.22266 17.6602 6.62109 18.0703 7.44141 18.0703H13.4062C14.2266 18.0703 14.625 17.6602 14.625 16.7695V12.1992C14.625 11.3906 14.2969 10.9805 13.6406 10.9219V9.58594C13.6406 7.44141 12.3398 5.98828 10.4297 5.98828C8.50781 5.98828 7.21875 7.44141 7.21875 9.58594V10.9102C6.55078 10.9805 6.22266 11.3906 6.22266 12.1992V16.7695ZM8.57812 10.8984V9.46875C8.57812 8.17969 9.31641 7.32422 10.4297 7.32422C11.5312 7.32422 12.2695 8.17969 12.2695 9.46875V10.8984H8.57812Z"})})},46392:(e,t,s)=>{s.d(t,{C:()=>r});s(67294);var i=s(45238),n=s(85893);const r=(0,i.I)("membersFilled",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M20.31 14.731c2.22 0 4.097-1.967 4.097-4.513 0-2.485-1.887-4.391-4.098-4.391-2.2 0-4.097 1.937-4.087 4.411 0 2.526 1.866 4.493 4.087 4.493zm-11.725.233c1.937 0 3.57-1.724 3.57-3.935 0-2.17-1.653-3.823-3.57-3.823-1.917 0-3.57 1.683-3.56 3.844 0 2.19 1.633 3.914 3.56 3.914zm-5.588 9.21h7.606c-1.085-1.552.082-4.615 2.374-6.42-1.116-.72-2.566-1.248-4.392-1.248-4.533 0-7.464 3.337-7.464 6.085 0 1.004.507 1.582 1.876 1.582zm10.994-.01h12.637c1.673 0 2.251-.508 2.251-1.44 0-2.607-3.316-6.198-8.57-6.198-5.263 0-8.57 3.59-8.57 6.197 0 .933.578 1.44 2.252 1.44z"})})},49364:(e,t,s)=>{s.d(t,{R:()=>r});s(67294);var i=s(45238),n=s(85893);const r=(0,i.I)("openTeam",{viewBox:"0 0 28 28",svg:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("path",{d:"M3.24121 21.4326C3.24121 22.4082 3.80371 23.0322 4.7002 23.0322H22.4629C23.3506 23.0322 23.9131 22.4082 23.9131 21.4326V10.2178C23.9131 9.24219 23.3506 8.61816 22.4629 8.61816H17.2334V5.89355C17.2334 4.91797 16.6709 4.29395 15.7832 4.29395H4.7002C3.80371 4.29395 3.24121 4.91797 3.24121 5.89355V21.4326ZM4.65625 21.1074V6.21875C4.65625 5.86719 4.81445 5.70898 5.16602 5.70898H15.3174C15.6602 5.70898 15.8184 5.86719 15.8184 6.21875V21.1074C15.8184 21.4502 15.6602 21.6172 15.3174 21.6172H13.2959V19.0244C13.2959 18.2686 12.9619 17.917 12.2412 17.917H8.2334C7.5127 17.917 7.17871 18.2686 7.17871 19.0244V21.6172H5.16602C4.81445 21.6172 4.65625 21.4502 4.65625 21.1074ZM7.31934 9.5498H9.0332C9.24414 9.5498 9.39355 9.40918 9.39355 9.18945V7.52832C9.39355 7.31738 9.24414 7.16797 9.0332 7.16797H7.31934C7.1084 7.16797 6.97656 7.31738 6.97656 7.52832V9.18945C6.97656 9.40918 7.1084 9.5498 7.31934 9.5498ZM11.4414 9.5498H13.1465C13.3574 9.5498 13.5068 9.40918 13.5068 9.18945V7.52832C13.5068 7.31738 13.3574 7.16797 13.1465 7.16797H11.4414C11.2217 7.16797 11.0898 7.31738 11.0898 7.52832V9.18945C11.0898 9.40918 11.2217 9.5498 11.4414 9.5498ZM17.2334 21.4326V10.0332H21.9971C22.3398 10.0332 22.498 10.2002 22.498 10.543V21.1074C22.498 21.4502 22.3398 21.6172 21.9971 21.6172H17.2246C17.2334 21.5557 17.2334 21.4941 17.2334 21.4326ZM7.31934 13.0303H9.0332C9.24414 13.0303 9.39355 12.8896 9.39355 12.6699V11.0088C9.39355 10.7979 9.24414 10.6484 9.0332 10.6484H7.31934C7.1084 10.6484 6.97656 10.7979 6.97656 11.0088V12.6699C6.97656 12.8896 7.1084 13.0303 7.31934 13.0303ZM11.4414 13.0303H13.1465C13.3574 13.0303 13.5068 12.8896 13.5068 12.6699V11.0088C13.5068 10.7979 13.3574 10.6484 13.1465 10.6484H11.4414C11.2217 10.6484 11.0898 10.7979 11.0898 11.0088V12.6699C11.0898 12.8896 11.2217 13.0303 11.4414 13.0303ZM19.1582 13.4521H20.5732C20.749 13.4521 20.8721 13.3291 20.8721 13.1533V11.7822C20.8721 11.6064 20.749 11.4834 20.5732 11.4834H19.1582C18.9736 11.4834 18.8682 11.6064 18.8682 11.7822V13.1533C18.8682 13.3291 18.9736 13.4521 19.1582 13.4521ZM7.31934 16.5107H9.0332C9.24414 16.5107 9.39355 16.3613 9.39355 16.1504V14.4893C9.39355 14.2695 9.24414 14.1289 9.0332 14.1289H7.31934C7.1084 14.1289 6.97656 14.2695 6.97656 14.4893V16.1504C6.97656 16.3613 7.1084 16.5107 7.31934 16.5107ZM11.4414 16.5107H13.1465C13.3574 16.5107 13.5068 16.3613 13.5068 16.1504V14.4893C13.5068 14.2695 13.3574 14.1289 13.1465 14.1289H11.4414C11.2217 14.1289 11.0898 14.2695 11.0898 14.4893V16.1504C11.0898 16.3613 11.2217 16.5107 11.4414 16.5107ZM19.1582 16.8096H20.5732C20.749 16.8096 20.8721 16.6865 20.8721 16.5107V15.1396C20.8721 14.9639 20.749 14.8408 20.5732 14.8408H19.1582C18.9736 14.8408 18.8682 14.9639 18.8682 15.1396V16.5107C18.8682 16.6865 18.9736 16.8096 19.1582 16.8096ZM19.1582 20.167H20.5732C20.749 20.167 20.8721 20.0439 20.8721 19.8682V18.4971C20.8721 18.3213 20.749 18.1982 20.5732 18.1982H19.1582C18.9736 18.1982 18.8682 18.3213 18.8682 18.4971V19.8682C18.8682 20.0439 18.9736 20.167 19.1582 20.167ZM8.33008 19.3496C8.33008 19.165 8.42676 19.0684 8.61133 19.0684H11.8633C12.0566 19.0684 12.1445 19.165 12.1445 19.3496V21.6172H8.33008V19.3496Z"})})})},63874:(e,t,s)=>{s.d(t,{L:()=>r});s(67294);var i=s(45238),n=s(85893);const r=(0,i.I)("paperAirplane",{viewBox:"0 0 34 34",svg:(0,n.jsx)("path",{d:"M19.6719 32.7188C20.6406 32.7188 21.3125 31.9375 21.8281 30.625L32.2188 3.45312C32.4375 2.875 32.5625 2.375 32.5625 1.9375C32.5625 1.07812 32.0312 0.546875 31.1719 0.546875C30.7344 0.546875 30.2344 0.671875 29.6562 0.890625L2.39062 11.3281C1.20312 11.7812 0.390625 12.4688 0.390625 13.4375C0.390625 14.625 1.26562 15.0781 2.64062 15.4844L14.2344 18.875L17.5938 30.375C18.0156 31.7969 18.4688 32.7188 19.6719 32.7188ZM14.7812 17.0469L3.51562 13.6719C3.0625 13.5469 2.95312 13.4375 2.95312 13.2812C2.95312 13.125 3.0625 13 3.4375 12.8594L26.6562 4.03125C27.6094 3.67188 28.5469 3.20312 29.375 2.82812C28.6094 3.4375 27.5156 4.29688 26.9062 4.90625L14.7812 17.0469ZM19.8281 30.1719C19.6719 30.1719 19.5625 30.0469 19.4375 29.6094L16.0625 18.3438L28.2031 6.20312C28.8125 5.60938 29.6875 4.5 30.3125 3.70312C29.9219 4.54688 29.4531 5.48438 29.0781 6.45312L20.25 29.6719C20.1094 30.0469 20 30.1719 19.8281 30.1719Z"})})},75071:(e,t,s)=>{s.d(t,{f:()=>r});s(67294);var i=s(45238),n=s(85893);const r=(0,i.I)("plusThick",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},29851:(e,t,s)=>{s.d(t,{z:()=>r});s(67294);var i=s(45238),n=s(85893);const r=(0,i.I)("setPassword",{viewBox:"0 0 31 21",svg:(0,n.jsx)("path",{d:"M29.4746 3.43945L30.1777 2.7168C30.5684 2.32617 30.5781 1.7793 30.1973 1.39844L29.9336 1.14453C29.6016 0.802734 29.0352 0.851562 28.6641 1.22266L27.9609 1.91602L29.4746 3.43945ZM18.2441 13.4883L20.3047 12.5996L28.7227 4.18164L27.209 2.6875L18.8008 11.0957L17.8633 13.0977C17.7656 13.3223 18.0195 13.5859 18.2441 13.4883ZM3.40039 20.0508H23.6543C25.5 20.0508 26.5254 19.0547 26.5254 17.2188V8.88867L24.5918 10.8223V17.0625C24.5918 17.8242 24.1621 18.2637 23.3906 18.2637H3.6543C2.88281 18.2637 2.45312 17.8242 2.45312 17.0625V8.91797C2.45312 8.14648 2.88281 7.7168 3.6543 7.7168H19.6504L21.4375 5.93945H3.40039C1.54492 5.93945 0.519531 6.92578 0.519531 8.77148V17.2188C0.519531 19.0547 1.54492 20.0508 3.40039 20.0508ZM6.06641 14.4453C6.85742 14.4453 7.51172 13.791 7.51172 12.9902C7.51172 12.1895 6.85742 11.5449 6.06641 11.5449C5.25586 11.5449 4.61133 12.1895 4.61133 12.9902C4.61133 13.791 5.25586 14.4453 6.06641 14.4453ZM10.373 14.4453C11.1738 14.4453 11.8184 13.791 11.8184 12.9902C11.8184 12.1895 11.1738 11.5449 10.373 11.5449C9.57227 11.5449 8.91797 12.1895 8.91797 12.9902C8.91797 13.791 9.57227 14.4453 10.373 14.4453ZM14.6797 14.4453C15.4805 14.4453 16.1348 13.791 16.1348 12.9902C16.1348 12.1895 15.4805 11.5449 14.6797 11.5449C13.8789 11.5449 13.2344 12.1895 13.2344 12.9902C13.2344 13.791 13.8789 14.4453 14.6797 14.4453Z"})})},72263:(e,t,s)=>{s.d(t,{_:()=>r});s(67294);var i=s(45238),n=s(85893);const r=(0,i.I)("settingsUpgrade",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M9.969 17.938c4.36 0 7.969-3.618 7.969-7.97C17.938 5.61 14.32 2 9.96 2 5.609 2 2 5.61 2 9.969c0 4.351 3.617 7.969 7.969 7.969zm0-1.329a6.609 6.609 0 01-6.633-6.64 6.602 6.602 0 016.625-6.64 6.627 6.627 0 016.648 6.64 6.61 6.61 0 01-6.64 6.64zm0-2.734a.562.562 0 00.586-.586V9.383l-.063-1.656.797.945.922.937a.52.52 0 00.414.172c.32 0 .57-.242.57-.562a.566.566 0 00-.164-.406L10.43 6.219c-.149-.149-.29-.227-.461-.227-.164 0-.297.07-.453.227l-2.61 2.593a.555.555 0 00-.148.407c0 .32.242.562.562.562a.572.572 0 00.414-.172l.93-.937.781-.938-.062 1.649v3.906c0 .344.25.586.586.586z"})})},16001:(e,t,s)=>{s.d(t,{r:()=>r});s(67294);var i=s(45238),n=s(85893);const r=(0,i.I)("sidebarSettings",{viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 11.15C10.6352 11.15 11.15 10.6352 11.15 10C11.15 9.3649 10.6352 8.85002 10 8.85002C9.3649 8.85002 8.85002 9.3649 8.85002 10C8.85002 10.6352 9.3649 11.15 10 11.15ZM10 12.35C11.2979 12.35 12.35 11.2979 12.35 10C12.35 8.70216 11.2979 7.65002 10 7.65002C8.70216 7.65002 7.65002 8.70216 7.65002 10C7.65002 11.2979 8.70216 12.35 10 12.35Z"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66313 13.92L9.29337 15.7942C9.30705 15.835 9.3452 15.8624 9.38815 15.8624H10.6119C10.6548 15.8624 10.693 15.835 10.7066 15.7942L11.3369 13.92L11.8486 13.6609C11.9847 13.592 12.1165 13.5157 12.2435 13.4325L12.7244 13.1173L14.6647 13.509C14.7068 13.5175 14.7496 13.4982 14.7711 13.461L15.3829 12.4012C15.4044 12.364 15.3997 12.3173 15.3713 12.2851L14.0625 10.8013L14.0938 10.2287C14.0979 10.1531 14.1 10.0769 14.1 10C14.1 9.92309 14.0979 9.8468 14.0938 9.77119L14.0625 9.19865L15.3713 7.71477C15.3997 7.68257 15.4044 7.63582 15.3829 7.59862L14.7711 6.53886C14.7496 6.50166 14.7068 6.48233 14.6647 6.49083L12.7243 6.8826L12.2434 6.56746C12.1164 6.48424 11.9847 6.40796 11.8487 6.33909L11.3369 6.07998L10.7066 4.20568C10.693 4.16497 10.6548 4.13755 10.6119 4.13755L9.38815 4.13755C9.3452 4.13755 9.30705 4.16497 9.29337 4.20568L8.6631 6.08L8.15134 6.33911C8.01535 6.40796 7.88361 6.48424 7.75665 6.56744L7.27577 6.88258L5.33531 6.4908C5.29321 6.4823 5.25039 6.50162 5.22891 6.53882L4.61706 7.59858C4.59558 7.63578 4.60026 7.68253 4.62867 7.71473L5.93757 9.19866L5.90625 9.77121C5.90211 9.84681 5.90001 9.92309 5.90001 10C5.90001 10.0769 5.90211 10.1531 5.90625 10.2287L5.93756 10.8012L4.62867 12.2851C4.60026 12.3173 4.59559 12.3641 4.61706 12.4013L5.22892 13.461C5.25039 13.4982 5.29322 13.5176 5.33531 13.5091L7.27565 13.1173L7.75654 13.4325C7.88354 13.5157 8.01533 13.592 8.15137 13.6609L8.66313 13.92ZM6.98912 14.6034C7.15941 14.715 7.33626 14.8174 7.51897 14.9099L7.96638 16.2405C8.1717 16.8511 8.74396 17.2624 9.38815 17.2624H10.6119C11.2561 17.2624 11.8283 16.8511 12.0336 16.2405L12.481 14.91C12.6638 14.8174 12.8406 14.715 13.0109 14.6034L14.3876 14.8813C15.0191 15.0088 15.6614 14.7189 15.9835 14.161L16.5953 13.1012C16.9174 12.5433 16.8474 11.8421 16.4212 11.359L15.4917 10.3052C15.4972 10.2041 15.5 10.1024 15.5 10C15.5 9.89756 15.4972 9.79578 15.4917 9.69472L16.4212 8.64087C16.8474 8.15776 16.9174 7.45651 16.5954 6.89862L15.9835 5.83886C15.6614 5.28097 15.0191 4.99103 14.3876 5.11852L13.0108 5.3965C12.8405 5.28493 12.6637 5.18255 12.4811 5.09007L12.0336 3.75947C11.8283 3.14887 11.2561 2.73755 10.6119 2.73755H9.38815C8.74396 2.73755 8.1717 3.14886 7.96638 3.75946L7.51894 5.09008C7.33629 5.18256 7.1595 5.28493 6.98928 5.39648L5.61238 5.11849C4.98092 4.991 4.33858 5.28093 4.01648 5.83882L3.40462 6.89858C3.08253 7.45647 3.15261 8.15772 3.57874 8.64083L4.50834 9.69474C4.50281 9.79579 4.50001 9.89757 4.50001 10C4.50001 10.1024 4.50281 10.2041 4.50833 10.3052L3.57875 11.359C3.15261 11.8421 3.08253 12.5434 3.40463 13.1013L4.01648 14.161C4.33858 14.7189 4.98092 15.0089 5.61237 14.8814L6.98912 14.6034Z"})]})})},96068:(e,t,s)=>{s.d(t,{I:()=>n});var i=s(72126);function n(e){if(i.jj(e).length<=3)return{success:!1,reason:{type:"password_too_consistent"}};if(e.length>=15)return{success:!0};if(e.length<8)return{success:!1,reason:{type:"password_too_short"}};const t=function(e){return e.match(/[a-z]/i)}(e),s=function(e){return e.match(/\d/)}(e);return t&&s?{success:!0}:t||s?s?t?{success:!1,reason:{type:"password_too_short"}}:{success:!1,reason:{type:"password_missing_letter"}}:{success:!1,reason:{type:"password_missing_number"}}:{success:!1,reason:{type:"password_missing_letter_and_number"}}}}}]);