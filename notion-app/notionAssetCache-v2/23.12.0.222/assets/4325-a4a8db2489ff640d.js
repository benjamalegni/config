"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4325],{67706:(e,t,i)=>{i.d(t,{Z:()=>d});i(67294);var o=i(24405),n=i(82990),r=i(53437),s=i(26388),a=i(85893);function d(e){let{text:t,tooltipText:i,icon:d}=e;window.__c={n:"InlineTextWithIconTooltip"};const l=(0,o.yK)((e=>({icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor,marginBottom:"0.1em"},tooltip:{background:e.contentBackground,boxShadow:e.lightBoxShadow},container:{display:"flex",alignItems:"center",fontWeight:n.Z.fontWeight.regular,color:e.mediumTextColor,fontSize:n.Z.fontSize.UISmall.desktop,textAlign:"center"},text:{display:"inline"}})),[]);return(0,a.jsx)(s.Z,{style:l.tooltip,render:e=>(0,a.jsx)("div",{style:l.text,...e,children:t}),renderTooltip:()=>(0,a.jsxs)("div",{style:l.container,children:[d(l.icon),(0,a.jsx)("div",{children:i})]}),alignment:r.ZP.Alignment.Start,placement:r.ZP.Placement.Bottom})}},13658:(e,t,i)=>{i.d(t,{Z:()=>l});i(67294);var o=i(83355),n=i(49085),r=i(5366),s=i(64921),a=i(85893);class d extends o.Z{constructor(){super(...arguments),this.storeTypes={open:n.default.createClass(!1)},this.handleOpen=()=>{this.stores.open.setState(!0)}}renderComponent(){return this.stores.open.state||this.props.items.length<=this.props.visible?(0,a.jsx)("div",{children:this.props.items}):(0,a.jsxs)("div",{children:[this.props.items.slice(0,this.props.visible),(0,a.jsx)(s.Z,{onClick:this.handleOpen,style:this.getStyle(),children:(0,a.jsx)(r.FormattedMessage,{defaultMessage:"View {moreCount} more",id:"activity.viewMoreButton.label",values:{moreCount:this.props.items.length-this.props.visible}})})]})}getStyle(){return{display:"flex",alignItems:"center",height:28,fontSize:12,color:this.theme.lightTextColor,padding:0,paddingLeft:52,paddingRight:16}}}d.displayName="ViewMore";const l=d},92559:(e,t,i)=>{i.d(t,{Z:()=>s});i(67294);var o=i(24405),n=i(8848),r=i(85893);function s(){window.__c={n:"BlockHighlighterBar"};const e=(0,o.yK)((()=>({blockContext:{flexShrink:0,display:"flex",width:3,borderRadius:3,marginLeft:2,marginRight:8,minHeight:24,background:n.DB}})),[]);return(0,r.jsx)("div",{style:e.blockContext})}},12472:(e,t,i)=>{i.d(t,{D:()=>u,Z:()=>h});i(67294);var o=i(24405),n=i(5366),r=i(19719),s=i(17659),a=i(39699),d=i(62385),l=i(22649),c=i(85893);function h(e){var t;window.__c={n:"NotificationActions"};const{isMobile:i,environment:n,rootStore:r,activity:s,tabArgs:a,useInboxRedesign:d}=e,{source:h}=a,p=Boolean(null===(t=a.notification)||void 0===t?void 0:t.visited),g=(0,o.yK)((()=>({container:{paddingLeft:d?void 0:(0,l.c3)({source:h,isMobile:i})-8,paddingTop:4}})),[i,h,d]);return p?(0,c.jsx)("div",{style:g.container,children:(0,c.jsx)(u,{tabArgs:a,environment:n,rootStore:r,activity:s})}):null}function u(e){window.__c={n:"UnarchiveButton"};const{tabArgs:t,environment:i,rootStore:h,activity:u}=e,{notification:p,tab:g}=t,m=(0,o.yK)((e=>({secondaryButton:(0,l._W)(e)})),[]);return Boolean(null==p?void 0:p.visited)?(0,c.jsx)(d.Z,{onClick:()=>{p&&(a.createAndCommit({userAction:"Activity.handleUnarchive",environment:i,perform:e=>{s.E1({notificationId:p.id,visited:!1,rootStore:h,transaction:e})}}),r.F5({environment:i,activity:u,tab:g,notificationId:p.id,alreadyRead:p.read}))},style:m.secondaryButton,children:(0,c.jsx)(n.FormattedMessage,{defaultMessage:"Unarchive",id:"activity.actions.unarchiveButton.label"})}):null}},36081:(e,t,i)=>{i.d(t,{Z:()=>h});var o=i(67294),n=i(24405),r=i(5366),s=i(97880),a=i(31278),d=i(22649),l=i(85893);function c(e){let t,i,{permissionGroup:c,spaceId:h}=e;window.__c={n:"PermissionGroupTitle"},c?(t=c.icon,i=c.name||(0,l.jsx)(r.FormattedMessage,{defaultMessage:"Untitled group",id:"activity.permissionGroupTitles.untitledGroup"})):i=(0,l.jsx)(r.FormattedMessage,{defaultMessage:"Deleted group",id:"activity.permissionGroupTitles.deletedGroup"});const u=void 0!==t,p=(0,n.yK)((()=>({title:(0,d.TL)(u)})),[u]),g=(0,o.useMemo)((()=>(0,s.$K)(t)?{icon:t,pointer:{table:"space",id:h}}:void 0),[t,h]);return(0,l.jsxs)("span",{children:[g&&(0,l.jsx)(a.Z,{disabled:!0,icon:g,isEmptyPage:!1,size:18,style:d.e9}),(0,l.jsx)("span",{style:p.title,children:i})]})}const h=o.memo(c)},78976:(e,t,i)=>{i.d(t,{Z:()=>C});var o=i(67294),n=i(480),r=i(86628),s=i(24405),a=i(15145),d=i(21202),l=i(6287),c=i(75246),h=i(29369),u=i(97880),p=i(62820),g=i(35817),m=i(84076),f=i(31278),v=i(76798),b=i(17022),x=i(22649),y=i(85893);function S(e){window.__c={n:"Title"};const{titledRecordStore:t,getRecordModel:i,activity:S,tabArgs:C}=e,M=(0,r.VK)((()=>t.getModel()),[t]),A=(0,n.O7)(),j=(0,r.VK)((()=>null==M?void 0:M.getRenderIcon({getRecordModel:i})),[M,i]),k=(0,s.yK)((()=>({container:x.lS,icon:x.e9,recordTitle:(0,x.TL)(void 0!==j)})),[j]),w=(0,o.useCallback)((()=>{const e=t.table;switch(e){case d.iU:case l.v:case c.bx:(0,b.V3)({environment:A,activity:S,...C});break;case h.e0:(0,b.dG)({environment:A,activity:S,...C}),g.hI({environment:A,teamStore:t,shouldScroll:!0}),p.Z.setState({...p.Z.state,open:!1});break;default:(0,u.t1)(e)}}),[S,A,C,t]),Z=(0,r.VK)((()=>{if(M&&M.table!==h.e0)return M.getRenderUrl({getRecordModel:i,pageVisitSource:a.tY.Notification})}),[M,i]);return M?(0,y.jsxs)(m.Z,{href:Z,onClick:w,external:!1,innerStyle:k.container,inline:!0,children:[j&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f.Z,{disabled:!0,icon:j,isEmptyPage:!1,size:18,style:k.icon}),(0,y.jsx)("span",{children:" "})]}),(0,y.jsx)(v.Z,{store:t,style:k.recordTitle})]}):null}const C=o.memo(S)},74970:(e,t,i)=>{i.d(t,{BE:()=>_,ZP:()=>V,hZ:()=>U,of:()=>N});i(67294);var o=i(83355),n=i(480),r=i(53150),s=i(49085),a=i(8848),d=i(36700),l=i(69651),c=i(94308),h=i(8504),u=i(21202),p=i(97880),g=i(17659),m=i(37834),f=i(39699),v=i(43250),b=i(12534),x=i(33929),y=i(16402),S=i(90106),C=i(4761),M=i(73063),A=i(86176),j=i(26388),k=i(70301),w=i(45653),Z=i(67706),I=i(8576),T=i(32469),B=i(93963),L=i(85893);class R extends o.Z{constructor(){super(...arguments),this.titleAriaId=(0,r.Z)(),this.storeTypes={hovered:s.default.createClass(!1),hoveredOverInboxActionsMenu:s.default.createClass(!1)},this.handleMouseOver=()=>{this.stores.hovered.setState(!0)},this.handleMouseLeave=()=>{this.stores.hovered.setState(!1)},this.handleMouseEnterInboxActions=()=>{this.stores.hoveredOverInboxActionsMenu.setState(!0)},this.handleMouseLeaveInboxActions=()=>{this.stores.hoveredOverInboxActionsMenu.setState(!1)},this.handleArchive=()=>{const{notification:e,rootStore:t,onArchiveClicked:i}=this.props;i(),e&&f.createAndCommit({userAction:"ActivityUpdateSection.handleArchive",environment:this.environment,perform:i=>{g.aZ({notification:e,rootStore:t,transaction:i})}})},this.handleMarkAsRead=e=>{const{notification:t,rootStore:i,onNotificationFrameClicked:o}=this.props;t&&!t.read&&(this.stores.hoveredOverInboxActionsMenu.state||(0,b.ZP)({event:e,context:b.Af.NotificationClick,callback:()=>{o(),f.createAndCommit({userAction:"ActivityUpdateSection.handleMarkAsRead",environment:this.environment,perform:e=>{g.$h({notification:t,rootStore:i,transaction:e,read:!0})}})}}))},this.handleOpenSnapshot=()=>{if(this.props.navigableBlockId){const e=S.G.createChildStore(this.props.rootStore,{table:u.iU,id:this.props.navigableBlockId});m.jN({environment:this.environment,blockStore:e,openSnapshotNearTimestamp:this.props.timestamp.toString(),from:"activity"})}}}renderComponent(){const{children:e}=this.props,t="mentions"===C.ZP.state.currentTab;return(0,L.jsxs)("article",{onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave,onClick:this.handleMarkAsRead,"aria-labelledby":this.titleAriaId,tabIndex:0,children:[this.renderInboxActions(),(0,L.jsxs)("div",{style:{...R.wrapStyle,paddingBottom:e?12:8,paddingLeft:this.environment.device.isMobile?this.environment.WindowSizeStore.state.paddingLeftCSS:0,paddingRight:this.environment.device.isMobile?this.environment.WindowSizeStore.state.paddingRightCSS:0,...this.shouldShowReadNotificationStyle()&&{opacity:.7}},children:[(0,L.jsxs)("div",{style:this.getHeaderAndAvatarStyle(),children:[(0,L.jsxs)("div",{className:v.FoE,style:this.avatarAndStatusDotStyle(),children:[(0,L.jsx)("div",{style:{marginRight:4},children:t&&(0,L.jsx)("div",{style:{marginRight:this.environment.device.isMobile?3:2},children:this.renderStatusDot({opacity:1})})}),this.props.icon]}),this.renderHeader(),this.renderSnapshotButton(),this.renderPrivate()]}),e&&this.renderChildren()]}),this.renderDivider()]})}renderDivider(){const{isLast:e}=this.props;if(!e)return(0,L.jsx)("div",{style:this.getBorderBottomStyle()})}renderHeader(){const{timestamp:e,header:t}=this.props,i=(0,y.IS)(e),o=(0,y.uy)(e);return(0,L.jsxs)("div",{style:R.headerStyle,children:[(0,L.jsx)("div",{id:this.titleAriaId,className:v.NFf,children:t}),(0,L.jsxs)("div",{style:{display:"flex",marginTop:4,marginBottom:this.props.children?8:4},children:[(0,L.jsx)("div",{style:this.getTimeStyle(),className:v.CZG,children:(0,L.jsx)(Z.Z,{text:i,tooltipText:o,icon:l.C})}),this.props.navigableBlockId&&this.props.rootStore&&(0,L.jsx)(A.Z,{isLink:!0,innerStyle:this.getPathStyle(),store:S.G.createChildStore(this.props.rootStore,{table:u.iU,id:this.props.navigableBlockId}),left:(0,L.jsx)("div",{style:this.getSeparatorDotStyle(),children:"·"}),onClick:this.props.onBacklinkClicked})]})]})}renderSnapshotButton(){if(!this.props.showSnapshotButton)return;if(this.props.timestamp<new Date("2018-10-26").getTime())return;const e=x.default.getIntl().formatMessage({defaultMessage:"View version for this update",id:"activitySection.viewVersionForUpdate.tooltip"});return this.props.navigableBlockId?(0,L.jsx)(j.Z,{renderTooltip:()=>e,render:t=>(0,L.jsx)(M.Z,{ariaLabel:e,onClick:this.handleOpenSnapshot,icon:h.J,...t})}):void 0}renderInboxActions(){const{notification:e,rootStore:t,onArchiveClicked:i,onMarkAsReadClicked:o,onMarkAsUnreadClicked:n}=this.props,{currentTab:r}=C.ZP.state;if("mentions"===r&&e&&!e.visited)return(0,L.jsx)("div",{style:this.getStatusLabelContainerStyle(),onMouseEnter:this.handleMouseEnterInboxActions,onMouseLeave:this.handleMouseLeaveInboxActions,children:(0,L.jsx)("div",{style:this.getInboxActionsStyle(),children:(0,L.jsx)(I.Z,{notification:e,rootStore:t,onArchiveClicked:i,onMarkAsReadClicked:o,onMarkAsUnreadClicked:n,useInboxRedesign:!1})})})}renderStatusDot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!this.isSeen()&&(0,L.jsx)(B.z,{style:{...this.getStatusDotStyle(),...e}})}renderPrivate(){if(this.props.isPrivate&&!this.props.notification)return(0,L.jsx)(T.Z,{style:{marginTop:1,marginBottom:4,marginLeft:8}})}renderChildren(){return(0,L.jsx)("div",{className:v.nU_,children:this.props.children})}isSeen(){const{notification:e}=this.props;return!e||e.read}shouldShowReadNotificationStyle(){const{currentTab:e}=C.ZP.state;return this.isSeen()&&"mentions"===e&&!this.props.showSnapshotButton&&this.props.notification}avatarAndStatusDotStyle(){return{display:"flex",alignItems:"flex-start",position:"relative"}}getHeaderAndAvatarStyle(){return{display:"flex",paddingLeft:16,paddingRight:16+("mentions"!==C.ZP.state.currentTab||this.props.showSnapshotButton?0:I.N+5)}}getBorderBottomStyle(){return{borderBottom:`1px solid ${this.theme.regularDividerColor}`}}getPathStyle(){return{fontSize:12,color:this.theme.lightTextColor}}getTimeStyle(){return{fontSize:12,color:this.theme.lightTextColor,whiteSpace:"nowrap"}}getSeparatorDotStyle(){return{fontSize:12,color:this.theme.lightTextColor,marginLeft:4,marginRight:4}}getStatusLabelContainerStyle(){return{display:"flex",alignItems:"flex-start",marginTop:1,marginBottom:4,position:"relative",marginLeft:this.environment.device.isMobile?23:8}}getStatusDotStyle(){return{position:"absolute",opacity:this.stores.hovered.state?0:1,left:-7,top:10}}getInboxActionsStyle(){const{isMobile:e}=this.environment.device;return{transition:"opacity 100ms ease-out",opacity:e||this.stores.hovered.state?1:0,position:"absolute",right:16,top:12,zIndex:1}}}R.displayName="ActivityUpdateSection",R.wrapStyle={paddingTop:12},R.headerStyle={fontSize:14,lineHeight:1.4,flexGrow:1,minWidth:0};const P={marginTop:2,marginRight:8,flexShrink:0};function O(e){let{actor:t,environment:i}=e;const o=i.currentUser.id===t.id;return Number(t.isBot())+Number(o)}function _(e){window.__c={n:"AuthorIcon"};const{authors:t,style:i,showAvatarShadow:o}=e,r=(0,n.O7)(),s=t.sort(((e,t)=>O({actor:e,environment:r})-O({actor:t,environment:r})))[0],a={...P,...i};return s?s.isBot()?(0,L.jsx)(k.Z,{botValue:s,style:a,size:24}):s.isUser()?(0,L.jsx)(w.Z,{userValue:s,style:a,size:24,avatarShouldShowShadow:o??!0}):s.isAgent()?null:void(0,p.t1)(s):null}function U(){return(0,L.jsx)("div",{style:{display:"flex",backgroundColor:a.ZP.red,height:28,width:28,borderRadius:"100%",...P},children:(0,d.m)({height:16,width:16,fill:a.ZP.white,marginLeft:6,marginTop:5})})}function N(){return(0,L.jsx)("div",{style:{height:25,width:25,...P},children:(0,c.f)({height:25,width:25})})}const V=R},17022:(e,t,i)=>{i.d(t,{BE:()=>p,ME:()=>c,V3:()=>u,dG:()=>h,h9:()=>m});var o=i(15145),n=i(82813),r=i(64002),s=i(50906),a=i(19719),d=i(24215),l=i(4761);function c(e){return(0,r.SK)(e,{[o.$X]:o.tY.Notification})}function h(e){const t=e.mightCloseTab??!0;g({target:"body",...e,mightCloseTab:t})}function u(e){const t=e.mightCloseTab??!0;g({target:"title",...e,mightCloseTab:t})}function p(e){g({target:"add_reaction",...e,mightCloseTab:!1})}function g(e){const{target:t,environment:i,activity:o,notification:r,source:c,tab:h,mightCloseTab:u}=e,p="notifications_tab"===c?l.ZP.state.sessionId:void 0,g="notifications_tab"===c?l.ZP.isFilteredToUnreadOnly():void 0;s.CgP(i,{target:t,activity_id:o.id,notification_id:null==r?void 0:r.id,sessionId:p,is_filtered:g,tab:h}),u&&a.pw({environment:i,target:t}),r&&n.e((0,d.mc)(i),{alreadyRead:r.read,notificationId:r.id,activityId:r.activity_id,from:t,sessionId:p})}function m(e){const{notification:t,activity:i,environment:o,tab:n}=e,r={environment:o,activity:i,notificationId:null==t?void 0:t.id,alreadyRead:Boolean(null==t?void 0:t.read),tab:n};return{onBacklinkClicked:e=>a.EQ({...r,backlinkPageId:e}),onArchiveClicked:()=>a._b(r),onMarkAsReadClicked:()=>a.cC(r),onMarkAsUnreadClicked:()=>a.u_(r),onNotificationFrameClicked:()=>a.ix(r)}}},90060:(e,t,i)=>{i.d(t,{uA:()=>_,XW:()=>O,P6:()=>P,cr:()=>V,jC:()=>N,N8:()=>U});var o=i(66897),n=i(67294),r=i(5366),s=(i(41892),i(8848)),a=i(7057),d=(i(94308),i(24211)),l=(i(54368),i(77420)),c=i(19889),h=(i(97880),i(82990)),u=i(15145),p=i(76725),g=i(72126),m=i(59753),f=i(63306),v=i(64002),b=i(85893);class x extends n.PureComponent{render(){const{href:e}=this.props;return(0,b.jsx)("a",{href:(0,v.Nm)({str:e,allowNoProtocol:!0}),style:this.getStyle(),className:"notion-email-button-hover",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,children:this.props.children})}getStyle(){return{display:this.props.inline?"inline":"block",color:s.ZP.inherit,textDecoration:"none",cursor:"pointer",...this.props.style}}}const y=x;class S extends n.PureComponent{render(){const e=this.getPathWithoutDomain();return e.length>0?(0,b.jsxs)("div",{children:[this.props.left,(0,p.Z)(e,(e=>(0,b.jsx)("span",{style:{paddingLeft:4,paddingRight:4},children:"/"},`slash:${e}`))),this.props.right]}):null}getPathWithoutDomain(){const{getRecordValue:e,blockId:t,intl:i}=this.props,o=f.uJ({table:"block",id:t},e),n=m.om.fromGetRecordValueFn(e);return g.nn(o.reverse()).map((e=>{const t=m.kk.fromBlock(e),o=t.getRenderTitle({getRecordModel:n,userTimeZone:this.props.userTimeZone,intl:i})||i.formatMessage({id:"recordPath.untitledBlock.placeholder",defaultMessage:"Untitled"}),r=t.getRenderUrl({getRecordModel:n,pageVisitSource:u.tY.Email});return(0,b.jsx)(y,{href:`${this.props.baseUrl}${r}`,style:{display:"inline-block",maxWidth:120,verticalAlign:"top",...h.Z.textOverflowStyle},children:o},e.id)}))}}const C=(0,r.injectIntl)(S);i(43593),i(17755),i(58102);n.PureComponent;class M extends n.PureComponent{constructor(){super(...arguments),this.theme=(0,s.gh)({theme:"light"})}render(){const{children:e}=this.props;return(0,b.jsxs)("table",{style:{paddingTop:12,paddingBottom:e?0:8,borderSpacing:0,width:"100%",borderCollapse:"separate"},children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{style:{verticalAlign:"top",width:M.avatarSize+6,minWidth:M.avatarSize+6,paddingTop:2},children:this.props.icon}),(0,b.jsx)("td",{children:this.renderHeader()})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{}),(0,b.jsx)("td",{style:{maxWidth:400},children:e&&this.renderChildren()})]}),this.renderDivider()]})}renderDivider(){const{isLast:e}=this.props;if(!e)return(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:2,children:(0,b.jsx)("div",{style:this.getBorderBottomStyle()})})})}renderHeader(){const{timestamp:e,header:t,intl:i}=this.props,o=(0,a.Yx)(Math.min(e,Date.now()),"medium_with_time",(0,d.E2)(i),this.props.userTimeZone);return(0,b.jsxs)("div",{style:M.headerStyle,children:[(0,b.jsx)("div",{children:t}),(0,b.jsx)("table",{style:{...this.getPathAndTimeStyle(),marginTop:4,marginBottom:this.props.children?8:4,borderSpacing:0},children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:o}),(0,b.jsx)("td",{children:this.props.navigableBlockId&&(0,b.jsx)(C,{getRecordValue:this.props.getRecordValue,blockId:this.props.navigableBlockId,baseUrl:this.props.baseUrl,left:(0,b.jsx)("span",{style:this.getDotStyle(),children:"·"}),userTimeZone:this.props.userTimeZone})})]})})]})}renderChildren(){return(0,b.jsx)("div",{children:this.props.children})}getBorderBottomStyle(){return{borderBottom:`1px solid ${this.props.theme.regularDividerColor}`,marginBottom:4}}getPathAndTimeStyle(){return{fontSize:12,color:this.theme.lightTextColor,whiteSpace:"nowrap"}}getDotStyle(){return{color:this.theme.lightTextColor,marginLeft:4,marginRight:4}}}M.avatarSize=28,M.headerStyle={fontSize:14,lineHeight:1.4};const A={fontWeight:h.Z.fontWeight.semibold};(0,r.injectIntl)(M);var j=i(21202),k=i(6287),w=i(33709),Z=i(75246),I=i(70203),T=i(33929),B=i(67669),L=i(80444),R=i(90106);function P(e){const{edits:t,rootStore:i}=e,o=g.sv(t.flatMap((e=>e.authors||[])),g.Xy);return g.oA(o.map((e=>_(e,i))))}function O(e,t){const{currentUserStore:i}=L.default.state,n=null==i?void 0:i.id;return function(e,t,i,n){const s=t.find((e=>e.id===i)),a=t.map((t=>(0,o.$4)(e,t))),d={...A,...n};if(1===t.length)return s?(0,b.jsx)("span",{children:(0,b.jsx)(r.FormattedMessage,{defaultMessage:"You",id:"activitySection.authorPhrase.forOneAuthorCurrentUser.label",values:{b:e=>(0,b.jsx)("span",{style:d,children:e})}})}):(0,b.jsx)("span",{children:(0,b.jsx)(r.FormattedMessage,{defaultMessage:"<b>{author}</b>",id:"activitySection.authorPhrase.forOneAuthor.label",values:{author:a[0],b:e=>(0,b.jsx)("span",{style:d,children:e})}})});if(2===t.length){if(s){const i=t.filter((e=>e!==s)).map((t=>(0,o.$4)(e,t)));return(0,b.jsx)("span",{children:(0,b.jsx)(r.FormattedMessage,{defaultMessage:"<b>{firstAuthor}</b> and you",id:"activitySection.authorPhrase.forTwoAuthorsCurrentUser.label",values:{firstAuthor:i[0],b:e=>(0,b.jsx)("span",{style:d,children:e})}})})}return(0,b.jsx)("span",{children:(0,b.jsx)(r.FormattedMessage,{defaultMessage:"<b>{firstAuthor}</b> and <b>{secondAuthor}</b>",id:"activitySection.authorPhrase.forTwoAuthors.label",values:{firstAuthor:a[0],secondAuthor:a[1],b:e=>(0,b.jsx)("span",{style:d,children:e})}})})}if(a.length>2){if(s){const i=t.filter((e=>e!==s)).map((t=>(0,o.$4)(e,t))),n=(0,b.jsx)(r.FormattedMessage,{defaultMessage:"{numberOfOtherAuthors, plural, =0 {<b>{firstAuthor}</b>, <b>{secondAuthor}</b> and you} one {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, you and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, you and {numberOfOtherAuthors} others}}",id:"activitySection.authorPhrase.forMoreThanTwoAuthorsCurrentUser.label",values:{numberOfOtherAuthors:i.length-2,firstAuthor:i[0],secondAuthor:i[1],b:e=>(0,b.jsx)("span",{style:d,children:e})}});return(0,b.jsx)("span",{children:n})}{const e=(0,b.jsx)(r.FormattedMessage,{defaultMessage:"{numberOfOtherAuthors, plural, one {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} others}}",id:"activitySection.authorPhrase.forMoreThanTwoAuthors.label",values:{numberOfOtherAuthors:a.length-2,firstAuthor:a[0],secondAuthor:a[1],b:e=>(0,b.jsx)("span",{style:d,children:e})}});return(0,b.jsx)("span",{children:e})}}return(0,b.jsx)("span",{style:d,children:(0,b.jsx)(r.FormattedMessage,{defaultMessage:"Nobody",id:"activitySection.authorPhrase.forNoAuthors.label"})})}(T.default.getIntl(),e,n,t)}function _(e,t){if(e.table===c.KJ){const i=U(e.id,t);if(i)return(0,o.dp)(i)}else{const i=function(e,t){return(0,R.Kv)(t,{table:l.cZ,id:e}).getValue()}(e.id,t);if(i)return(0,o.D$)(i)}}function U(e,t){return R.U6.createChildStore(t,{table:c.KJ,id:e}).getValue()}function N(e){const{tab:t,recordId:i,recordType:o,rootStore:n,environment:r}=e;if("all"===t){if(!i)return!1;let e;return e="block"===o?R.G.createChildStore(n,{table:j.iU,id:i}):"collection"===o?R.NW.createChildStore(n,{table:k.v,id:i}):R.H2.createChildStore(n,{table:Z.bx,id:i}),(0,B.yi)(r,e)}return!1}function V(e){const{activity:t,rootStore:i}=e;if("commented"!==t.type)return;const o=i.getRecordModel({table:w.qF,id:t.discussion_id,spaceId:t.space_id});if(!o)return;const n=o.getContext();if(!n)return;const r=(0,I.VP_)(n,(e=>!(0,I.xw5)(e)||(0,I.h19)(e)===o.id));return{id:o.id,context:r}}},22649:(e,t,i)=>{i.d(t,{OD:()=>d,TL:()=>h,_W:()=>c,b9:()=>u,c3:()=>l,e9:()=>s,lS:()=>r,nP:()=>a});var o=i(82990);const n={userSelect:"text",WebkitUserSelect:"text"},r={padding:1,...n},s={display:"inline-flex",marginRight:2,verticalAlign:"text-top"},a={fontWeight:o.Z.fontWeight.semibold};function d(e){return{padding:0,paddingLeft:l(e),paddingRight:16,paddingBottom:3,...n}}function l(e){const{source:t,isMobile:i}=e;return"notifications_tab"===t?52+(i?3:2):52}function c(e){return{height:26,paddingLeft:8,paddingRight:8,color:e.mediumTextColor}}function h(e){return{display:"inline",whiteSpace:"normal",marginRight:e?3:0,wordBreak:"break-word",...a}}function u(e){return{boxShadow:e.plainButtonBoxShadow,height:26,paddingLeft:8,paddingRight:8,fontWeight:500,color:e.regularTextColor}}},8576:(e,t,i)=>{i.d(t,{N:()=>U,Z:()=>F});var o=i(67294),n=i(480),r=i(86628),s=i(24405),a=i(52867),d=i(90334),l=i(5686),c=i(8843),h=i(45238),u=i(85893);const p=(0,h.I)("notificationRead",{viewBox:"0 0 18 18",svg:(0,u.jsx)("path",{d:"M3.066 17.998h11.846c2.05 0 3.066-1.016 3.066-3.027V3.047c0-2.012-1.015-3.027-3.066-3.027H3.066C1.026.02 0 1.025 0 3.047V14.97c0 2.021 1.025 3.027 3.066 3.027Zm.02-1.572c-.977 0-1.514-.518-1.514-1.533V3.125c0-1.016.537-1.533 1.514-1.533h11.807c.966 0 1.513.517 1.513 1.533v11.768c0 1.015-.547 1.533-1.513 1.533Zm4.844-2.793c.322 0 .595-.156.79-.46l4.464-7.02c.117-.196.234-.41.234-.626 0-.44-.39-.722-.791-.722-.254 0-.498.156-.684.44l-4.052 6.503-1.924-2.49c-.235-.313-.45-.39-.713-.39a.759.759 0 0 0-.762.77c0 .216.088.42.225.606l2.383 2.93c.244.322.507.459.83.459Z"})});var g=i(61248),m=i(55061),f=i(21202),v=i(82990),b=i(5366),x=i(62967),y=i(19719),S=i(17659),C=i(39699),M=i(12534),A=i(87279),j=i(98742),k=i(24764),w=i(57538),Z=i(77080),I=i(90106),T=i(48019),B=i(31945),L=i(73063),R=i(78140),P=i(72495),O=i(26388),_=i(64369);const U=64,N=(0,b.defineMessages)({changePageNotificationSettings:{defaultMessage:"Change page notification settings",id:"inboxActionsMenu.notificationSettings.tooltipMessage"}});function V(e){window.__c={n:"InboxActionsMenu"};const{notification:t,rootStore:i,onArchiveClicked:h,onMarkAsReadClicked:U,onMarkAsUnreadClicked:V,useInboxRedesign:F}=e,W=(0,n.O7)(),D=(0,n.Fy)(),K=(0,b.useIntl)(),H=(0,r.VK)((()=>!!t&&(0,m.$2)(t.type)),[t]),z=(0,r.VK)((()=>{const e=null==t?void 0:t.navigable_block_id;if(e)return I.G.createChildStore(i,{table:f.iU,id:e})}),[i,t]),G=(0,r.VK)((()=>null==z?void 0:z.getFollowSettingsKey()),[z]),E=(0,r.VK)((()=>{if(!G)return[];if(!z)return[];const e="inbox";return Z.default.checkGate("property_updates_notifications")?k.CA({followSettingsKey:G,environment:W,blockStore:z,from:e}):k.Zk({followSettingsKey:G,environment:W,blockStore:z,from:e})}),[G,W,z]),$=(0,r.VK)((()=>H&&E.length>0),[H,E]),J=(0,o.useCallback)((e=>{t&&(0,M.ZP)({event:e,context:M.Af.NotificationClick,callback:()=>{h(),C.createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:W,perform:e=>{S.aZ({notification:t,rootStore:i,transaction:e})}})}})}),[W,t,h,i]),Y=(0,o.useCallback)((e=>{t&&(0,M.ZP)({event:e,context:M.Af.NotificationClick,callback:()=>{t.read?V():U(),C.createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:W,perform:e=>{S.$h({notification:t,rootStore:i,transaction:e,read:!t.read})}})}})}),[W,t,U,V,i]),X=(0,o.useCallback)((()=>{G&&z&&t&&y.Z8({environment:W,notificationId:t.id,pageId:z.pointer.id,isCurrentlyFollowing:(0,w.Z)(G).following,from:"inbox"})}),[W,z,G,t]),q=(0,s.yK)((e=>({container:{...F?{display:"flex",height:"min-content",borderWidth:1,borderStyle:"solid",borderColor:e.stroke.regular,background:e.buttonGroupBackground,borderRadius:6,padding:2}:{display:"flex",height:"min-content",background:e.buttonGroupBackground,boxShadow:e.lightBoxShadow,borderRadius:4,padding:2}},button:{...F&&{height:D.isMobile?30:26,width:D.isMobile?30:26}},inboxIconBase:{fill:e.icon.secondary,stroke:e.icon.secondary,strokeOpacity:1,strokeWidth:.25},iconStyle:{fill:e.mediumIconColor,padding:2},readIcon:{width:D.isMobile?21:19,height:D.isMobile?22:20},archiveIcon:{width:D.isMobile?24:23,height:D.isMobile?24:23},ellipsisIcon:{width:D.isMobile?24:23,height:D.isMobile?24:23},headerLabel:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:v.Z.fontWeight.semibold}})),[D,F]);return t?(0,u.jsxs)("div",{style:q.container,children:[(0,u.jsx)(O.Z,{renderTooltip:()=>t.read?(0,u.jsx)(b.FormattedMessage,{defaultMessage:"Mark this notification as unread",id:"inboxActionsMenu.markNotificationAsUnread.tooltipMessage"}):(0,u.jsx)(b.FormattedMessage,{defaultMessage:"Mark this notification as read",id:"inboxActionsMenu.markNotificationAsRead.tooltipMessage"}),render:e=>(0,u.jsx)(L.Z,{style:q.button,icon:F?t.read?c.h:l.J:t.read?g.F:p,iconStyle:{...q.iconStyle,...q.readIcon,...F&&{...t.read?{height:17,width:17}:{height:16,width:16},...q.inboxIconBase}},onClick:Y,...e})}),(0,u.jsx)(O.Z,{renderTooltip:()=>(0,u.jsx)(b.FormattedMessage,{defaultMessage:"Archive this notification",id:"inboxActionsMenu.handleArchive.tooltipMessage"}),render:e=>(0,u.jsx)(L.Z,{style:q.button,icon:a.H,iconStyle:{...q.iconStyle,...q.archiveIcon,...F&&{height:18,width:18,...q.inboxIconBase}},onClick:J,...e})}),$&&(0,u.jsx)(O.Z,{renderTooltip:()=>(0,u.jsx)(b.FormattedMessage,{...N.changePageNotificationSettings}),render:e=>(0,u.jsx)(B.ZP,{popupType:D.isMobile?B.Z4.SlideUp:B.Z4.Popup,alignmentToOrigin:B.vR.Start,placementToOrigin:B.pO.Bottom,render:e=>(0,u.jsx)(R.Z,{menuType:A.og.Popup,minWidth:290,maxHeight:"50vh",maxWidth:D.isMobile?"100vw":void 0,header:(0,u.jsx)(_.Z,{style:q.headerLabel,isSmall:!0,isSecondaryColor:!0,children:(0,u.jsx)(b.FormattedMessage,{id:"UpdateSidebarTabUpdatesHeader.pageNotificationSettings.label",defaultMessage:"Page notification settings"})}),children:(0,u.jsx)(T.Z,{context:{blocks:[],environment:W,publicEditMode:void 0},sections:[(0,x.$J)({key:"in-app-notifications-section",render:e=>(0,u.jsx)(P.Z,{...e}),actions:E.map((e=>e.action))})],initialFocus:void 0,onAccept:()=>e.close()})}),renderOrigin:t=>(0,u.jsx)(L.Z,{ariaLabel:K.formatMessage(N.changePageNotificationSettings),style:q.button,icon:d.O,iconStyle:{...q.iconStyle,...q.archiveIcon,...F&&{height:18,width:18,...q.inboxIconBase}},...e,...(0,j.Z)(t,{onClick:()=>X()})})})})]}):null}const F=o.memo(V)},5686:(e,t,i)=>{i.d(t,{J:()=>r});i(67294);var o=i(45238),n=i(85893);const r=(0,o.I)("mailOpen",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.88965 15.9277C2.17415 15.9277 1.63639 15.75 1.27637 15.3945C0.920898 15.0436 0.743164 14.515 0.743164 13.8086V7.00684C0.743164 6.76074 0.756836 6.54427 0.78418 6.35742C0.816081 6.17057 0.863932 6.00423 0.927734 5.8584C0.996094 5.71257 1.08496 5.57812 1.19434 5.45508C1.30371 5.32747 1.43815 5.19987 1.59766 5.07227L6.88184 0.916016C7.12793 0.715495 7.36035 0.558268 7.5791 0.444336C7.80241 0.325846 8.03939 0.266602 8.29004 0.266602C8.54069 0.266602 8.77539 0.325846 8.99414 0.444336C9.21745 0.558268 9.45215 0.715495 9.69824 0.916016L14.9824 5.07227C15.1419 5.19987 15.2764 5.32747 15.3857 5.45508C15.4951 5.57812 15.5817 5.71257 15.6455 5.8584C15.7139 6.00423 15.7617 6.17057 15.7891 6.35742C15.821 6.54427 15.8369 6.76074 15.8369 7.00684V13.8086C15.8369 14.515 15.6569 15.0436 15.2969 15.3945C14.9414 15.75 14.4059 15.9277 13.6904 15.9277H2.88965ZM2.84863 14.8818H13.7314C14.0687 14.8818 14.3285 14.7907 14.5107 14.6084C14.6976 14.4307 14.791 14.1641 14.791 13.8086V6.82227C14.791 6.6582 14.7751 6.51921 14.7432 6.40527C14.7113 6.29134 14.6611 6.19108 14.5928 6.10449C14.529 6.01335 14.4424 5.92448 14.333 5.83789L9.11035 1.76367C8.94173 1.63607 8.80046 1.53809 8.68652 1.46973C8.57259 1.39681 8.44043 1.36035 8.29004 1.36035C8.13965 1.36035 8.00749 1.39681 7.89355 1.46973C7.77962 1.53809 7.63835 1.63607 7.46973 1.76367L2.24707 5.83789C2.1377 5.92448 2.04883 6.01335 1.98047 6.10449C1.91667 6.19108 1.86882 6.29134 1.83691 6.40527C1.80501 6.51921 1.78906 6.6582 1.78906 6.82227V13.8086C1.78906 14.1641 1.88021 14.4307 2.0625 14.6084C2.24479 14.7907 2.50684 14.8818 2.84863 14.8818ZM1.51562 14.6357L6.88184 9.37207C7.11882 9.13509 7.35352 8.96419 7.58594 8.85938C7.82292 8.75456 8.06217 8.70215 8.30371 8.70215C8.54525 8.70215 8.78223 8.75456 9.01465 8.85938C9.24707 8.96419 9.48405 9.13509 9.72559 9.37207L15.085 14.6357L14.374 15.3467L9.13086 10.1787C8.98047 10.0283 8.83691 9.92122 8.7002 9.85742C8.56803 9.78906 8.43587 9.75488 8.30371 9.75488C8.16699 9.75488 8.03027 9.78906 7.89355 9.85742C7.76139 9.92122 7.6224 10.0283 7.47656 10.1787L2.2334 15.3467L1.51562 14.6357ZM5.81543 10.6094L1.5498 6.3916L2.26074 5.68066L6.5332 9.90527L5.81543 10.6094ZM10.0742 9.90527L14.3398 5.68066L15.0508 6.3916L10.7852 10.6094L10.0742 9.90527Z"})})},61248:(e,t,i)=>{i.d(t,{F:()=>r});i(67294);var o=i(45238),n=i(85893);const r=(0,o.I)("notificationUnread",{viewBox:"0 0 20 21.5",svg:(0,n.jsx)("path",{d:"M0 14.521c0 1.67.146 3.057 1.143 4.053.996.996 2.402 1.153 4.062 1.153h7.588c1.67 0 3.076-.157 4.072-1.153s1.143-2.383 1.143-4.053v-6.65c-.43.147-.899.225-1.387.205-.068.02-.117.02-.185.03v6.68c0 1.015-.127 2.05-.723 2.646-.586.586-1.64.722-2.647.722H4.941c-1.005 0-2.06-.136-2.656-.722-.586-.596-.713-1.631-.713-2.647V6.768c0-1.026.127-2.08.713-2.666.596-.596 1.66-.723 2.686-.723h6.738c0-.068.01-.127.02-.186-.02-.488.058-.957.205-1.386H5.186c-1.641 0-3.047.156-4.043 1.152C.146 3.955 0 5.352 0 6.982Zm16.426-7.744c1.846 0 3.379-1.533 3.379-3.388C19.805 1.533 18.27 0 16.425 0a3.403 3.403 0 0 0-3.388 3.389 3.403 3.403 0 0 0 3.389 3.388Z"})})},8504:(e,t,i)=>{i.d(t,{J:()=>r});i(67294);var o=i(45238),n=i(85893);const r=(0,o.I)("versionHistoryThick",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M0 7C0 3.136 3.129 0 6.993 0C10.864 0 14 3.136 14 7C14 10.864 10.864 14 6.993 14C3.129 14 0 10.864 0 7ZM1.4 7C1.4 10.094 3.906 12.6 7 12.6C10.094 12.6 12.6 10.094 12.6 7C12.6 3.906 10.094 1.4 7 1.4C3.906 1.4 1.4 3.906 1.4 7ZM6.3 3.5H7.35V7.175L10.5 9.044L9.975 9.905L6.3 7.7V3.5Z"})})}}]);