"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5741],{46564:(e,t,n)=>{n.d(t,{xj:()=>K,lA:()=>Q,Rr:()=>B,NZ:()=>J,Hh:()=>G,F0:()=>V,xI:()=>R,LK:()=>Z,sH:()=>$,cK:()=>E,yY:()=>N,sY:()=>F});n(57658),n(67294);var o=n(480),i=n(86628),s=n(24405),r=n(41432),a=n(8848),l=n(12970),c=n(91856),d=n(56666),u=n(75e3),p=n(25651),m=n(11751),f=n(45238),g=n(85893);const v=(0,f.I)("upLeftArrow",{viewBox:"0 0 16 16",svg:(0,g.jsx)("path",{d:"M2.8457 10.5869C2.8457 11.0312 3.19434 11.373 3.59766 11.373C4.00098 11.373 4.3291 11.0176 4.3291 10.6074V8.05762L4.21973 5.22754L5.32031 6.47168L11.8418 12.9932C11.999 13.1504 12.1904 13.2256 12.3818 13.2256C12.7852 13.2256 13.1543 12.8564 13.1543 12.46C13.1543 12.2686 13.0654 12.0771 12.9082 11.9199L6.40039 5.39844L5.15625 4.30469L8.10254 4.40039H10.5361C10.9463 4.40039 11.2881 4.07227 11.2881 3.67578C11.2881 3.27246 10.9736 2.93066 10.5156 2.93066H3.64551C3.16016 2.93066 2.85254 3.25195 2.85254 3.72363L2.8457 10.5869Z"})});var h=n(5366),y=n(97880),x=n(42858),C=n(39699),k=n(84254),w=n(72495),M=n(19037),S=n(78663),b=n(91396),I=n(12921),j=n(40959),P=n(16772),A=n(27724),_=n(89941),L=n(62967);const F=(0,h.defineMessages)({notionAI:{defaultMessage:"Notion AI",id:"completions.completionActions.AIAssist"},more:{defaultMessage:"See more",id:"completions.completionActions.more"},alternativeUiString:{defaultMessage:"{text}",id:"completions.completionActions.alternativeUiString"},aiSummaryBlockDisplayName:{defaultMessage:"Summary",id:"completions.completionActions.aiSummaryBlockDisplayName"},aiActionItemsBlockDisplayName:{defaultMessage:"Action items",id:"completions.completionActions.aiActionItemsBlockDisplayName"},aiFreePromptBlockDisplayName:{defaultMessage:"Custom AI block",id:"completions.completionActions.aiFreePromptBlockDisplayName"},aiHeaderBlockDisplayName:{defaultMessage:"Custom AI header",id:"completions.completionActions.aiHeaderBlockDisplayName"}});function N(e){return function(t){return(0,g.jsx)(w.Z,{...t,title:(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,m.t)({width:16,height:16,marginRight:4}),(0,g.jsx)("div",{children:t.title})]}),right:e})}}function B(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const n=[];if(n.push(...e.slice(0,t)),e.length>t){const o=(0,L.$J)({key:"more actions",render:e=>(0,g.jsx)(w.Z,{...e}),actions:e.slice(t)});n.push((0,L.MV)({key:"more",displayName:F.more,analyticsName:"Completions - more",validators:_.v,svg:()=>(0,g.jsx)(Y,{}),subActions:()=>[o],collapseSubActionsIntoParent:!0,width:350}))}return n}function T(){return(0,g.jsx)(Q,{svg:p.R,svgFill:a.FN.light.purple[500]})}function E(e){const{key:t,name:n,analyticsName:o,textToInsert:i,onUpdatePromptState:s,right:r,renderTooltip:a,showEllipsis:l,userProvidedSearchName:c,executeImmediately:d,gtmFavoriteId:u}=e,p=n.length>1e3?`${n.slice(0,1e3)}…`:n;return(0,L.cN)({key:t,analyticsName:`Completions - insert text into prompt - ${o}`,...(m=l?`${p}…`:p,{displayName:F.alternativeUiString,displayNameInterpolatedValues:{text:m}}),validators:[],closeParentMenu:!1,svg:T,action(){s({insertText:i??n,analyticsName:o,gtmFavoriteId:u,executeImmediately:d})},right:r??W("updatePrompt"),renderTooltip:a,userProvidedSearchName:c});var m}function Z(e){const{from:t,type:n,onUpdatePromptState:o}=e;function i(e){return E({key:`completions.${e.key}`,name:(0,b.t8)(e),analyticsName:e.key,textToInsert:(0,S.$W)(e),onUpdatePromptState:o,showEllipsis:!0})}const s="cursor"===n?{selectionType:n,isPageEmpty:!M.IC()}:{selectionType:n},r=(0,b.up)(s),a=(0,b.pv)(r,s),l=[];for(const[c,d]of a){const e=[];for(const s of d)"helpMeDraft"!==s.key&&"helpMeEdit"!==s.key&&"helpMeWrite"!==s.key&&("translate"===s.key?e.push(O(s,_.v,n,t)):"changeTone"===s.key?e.push(U(s,_.v,n,t)):s.steps?e.push(i(s)):e.push(J({prompt:s,validators:_.v,type:n,from:t})));const o=(0,L.$J)({key:`completions.${c}`,title:(0,b.Mh)(c,"cursor"===n?"page":"selection"),render:e=>(0,g.jsx)(w.Z,{...e}),actions:B(e.filter(y.$K),7)});l.push(o)}return"cursor"===n&&l.push((0,L.$J)({key:"completions.aiBlocks",title:b.Dr.aiBlocks,render:e=>(0,g.jsx)(w.Z,{...e}),actions:j.O5.map((e=>function(e){const t=j.Hc[e.aiBlockType],{displayName:n,svg:o}=D[e.aiBlockType],i=e=>!t.shouldShow||t.shouldShow(e);return(0,L.cN)({key:`completions.aiBlocks.${t.key}`,analyticsName:`Completions - ${t.key}`,closeParentMenu:!0,svg:o,displayName:n,validators:[..._.v,i],action:e=>{let{environment:n}=e;C.createAndCommit({userAction:"completionActions.createAiBlockAction",environment:n,perform:e=>{x.at({environment:n,selection:A.default.state.stores,createBlockItem:t,analyticsFrom:"ai_prompt",transaction:e})}})}})}({aiBlockType:e})))})),l}const D={[r.MF.aiSummaryBlock]:{displayName:F.aiSummaryBlockDisplayName,svg:()=>(0,g.jsx)(X,{svg:c.Y})},[r.MF.aiActionItemsBlock]:{displayName:F.aiActionItemsBlockDisplayName,svg:()=>(0,g.jsx)(X,{svg:l.O})},[r.MF.aiFreePromptBlock]:{displayName:F.aiFreePromptBlockDisplayName,svg:()=>(0,g.jsx)(X,{svg:m.t})},[r.MF.aiHeaderBlock]:{displayName:F.aiHeaderBlockDisplayName,svg:()=>(0,g.jsx)(X,{svg:m.t})}};function R(e){return(0,L.$J)({key:"completions",title:F.notionAI,render:N(),actions:H(e)})}function H(e){const{store:t,from:n}=e,o=[];for(const i of(0,I.G9)()){if("helpMeWrite"===i.key)continue;const e=J({prompt:i,validators:_.v,type:"aiBlock",from:n,store:t});e&&o.push(e)}return o}function V(e){const{environment:t,inputValue:n,store:o}=e,i=(0,I.qB)({customPrompt:n,isPageEmpty:!1});k.triggerCompletionForAiBlock({environment:t,store:o,prompt:i,additionalContext:{prompt:n}})}function O(e,t,n,o){const{key:i,name:s,svg:r,svgFill:a,steps:l}=e;if("translate"!==i||!l||1!==l.length||"language"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((i=>{let{key:s,name:r}=i;return(0,L.cN)({key:`completions.translate.${s}`,analyticsName:`Completions - translate - ${s}`,displayName:r,validators:t,closeParentMenu:!0,right:W("submitPrompt"),action:t=>{let{environment:i}=t;q({environment:i,prompt:e,from:o,type:n,additionalContext:{language:s}})}})})),d=(0,L.$J)({key:"translate language actions",render:e=>(0,g.jsx)(w.Z,{...e}),actions:c}),u=r?()=>(0,g.jsx)(Q,{svg:r,svgFill:a}):void 0;return(0,L.MV)({key:"translate",displayName:s,analyticsName:`Completions - ${i}`,validators:t,svg:u,subActions:()=>[d]})}function U(e,t,n,o){const{key:i,name:s,svg:r,svgFill:a,steps:l}=e;if("changeTone"!==i||!l||1!==l.length||"tone"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((i=>{let{key:s,name:r}=i;return(0,L.cN)({key:`completions.changeTone.${s}`,analyticsName:`Completions - changeTone - ${s}`,displayName:r,validators:t,closeParentMenu:!0,right:W("submitPrompt"),action:t=>{let{environment:i}=t;q({environment:i,prompt:e,from:o,type:n,additionalContext:{tone:s}})}})})),d=(0,L.$J)({key:"changeTone tone actions",render:e=>(0,g.jsx)(w.Z,{...e}),actions:c}),u=r?()=>(0,g.jsx)(Q,{svg:r,svgFill:a}):void 0;return(0,L.MV)({key:"changeTone",displayName:s,analyticsName:`Completions - ${i}`,validators:t,svg:u,subActions:()=>[d]})}function K(e){window.__c={n:"ActionHintIcon"};const{focused:t,type:n}=e,r=(0,o.O7)(),a=(0,i.VK)((()=>r.device.isPhone),[r]),l=(0,s.yK)((e=>({iconStyle:{width:14,height:14,fill:e.mediumIconColor,opacity:!a&&t?1:0},containerStyle:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center"}})),[t,a]);switch(n){case"submitPrompt":return(0,g.jsx)("div",{style:l.containerStyle,children:(0,u.U)(l.iconStyle)});case"updatePrompt":return(0,g.jsx)("div",{style:l.containerStyle,children:v(l.iconStyle)});default:(0,y.t1)(n)}}function W(e){return t=>(0,g.jsx)(K,{type:e,focused:t.focused})}function $(e){const{customPrompt:t,execute:n}=e;return(0,L.cN)({analyticsName:"Completions - execute current prompt input",key:"explicitFreeFormAction",displayName:b.Dr.genericHelpMeWrite,displayNameInterpolatedValues:{filter:t},svg:T,right:W("submitPrompt"),validators:[],closeParentMenu:!1,renderTooltip:L.zz,action(){n()}})}const z=e=>(0,b.L3)(e.environment);function J(e){const{prompt:t,validators:n,type:o,from:i,store:s,sortScoreMultiplier:r}=e,{key:a,name:l}=t;if("translate"===a&&("textSelection"===o||"blockSelection"===o||"cursor"===o))return O(t,n,o,i);if("changeTone"===a&&("textSelection"===o||"blockSelection"===o||"cursor"===o))return U(t,n,o,i);const c=function(e){const{svg:t,svgFill:n}=e;return t?()=>(0,g.jsx)(Q,{svg:t,svgFill:n}):void 0}(t),d=[...n];return t.requiresContent?d.push(M.IC):t.requiresNoContent&&d.push(M.ff(M.IC)),t.isNewModel&&d.push(z),(0,L.cN)({key:`completions.${a}`,analyticsName:`Completions - ${a}`,displayName:l,fuzzySearchKeywords:t.fuzzySearchKeywords,validators:d,closeParentMenu:!0,svg:c,right:W("submitPrompt"),sortScoreMultiplier:r,action:e=>{let{environment:n}=e;q({environment:n,prompt:t,type:o,from:i,store:s})}})}function q(e){const{environment:t,prompt:n,type:o,from:i,store:s,additionalContext:r}=e;if("textSelection"===o)k.openCompletionPopupForSavedContext({environment:t,prompt:n,from:i,additionalContext:r});else if("blockSelection"===o)k.openCompletionPopupForBlockSelectionContext({environment:t,prompt:n,from:i,additionalContext:r});else if("cursor"===o){if(n.preferToNeverInsertTextAtCursor)return void k.selectPageAndOpenCompletionPopupForBlockSelectionContext({environment:t,prompt:n,from:i,additionalContext:r});k.openCompletionPopupForCursorContext({environment:t,prompt:n,from:i,additionalContext:r})}else"aiBlock"===o?s&&k.triggerCompletionForAiBlock({environment:t,store:s,prompt:n,additionalContext:r}):(0,y.t1)(o)}function G(e){const{inputValue:t,from:n,mode:o,environment:i}=e;switch(o){case"edit":return void function(e){const{customPrompt:t,from:n,environment:o}=e,i=(0,b.sB)(t);"closedWithContext"===P.default.state.type&&P.default.state.context&&k.openCompletionPopupForPrefilledContext({environment:o,context:P.default.state.context,prompt:i,additionalContext:{prompt:t},from:n,skipInitialForm:!0})}({environment:i,customPrompt:t,from:n});case"write":const e=(0,b.wq)(t);if(e){const{prompt:t,additionalContext:o}=e,s=(0,S.FD)();if(!s)return;return void k.openCompletionPopupForPrefilledContext({environment:i,context:s,prompt:t,additionalContext:o,from:n,skipInitialForm:!0})}return void function(e){const{environment:t,customPrompt:n,from:o}=e,i=(0,I.qB)({customPrompt:n,isPageEmpty:!M.IC()}),s=(0,S.FD)();s&&k.openCompletionPopupForPrefilledContext({environment:t,context:s,prompt:i,additionalContext:{prompt:n},from:o,skipInitialForm:!0})}({environment:i,customPrompt:t,from:n})}(0,y.t1)(o)}function Y(){window.__c={n:"MoreIcon"};const e=(0,s.Fg)();return(0,d.o)({width:12,marginLeft:2,marginRight:2,fill:e.mediumIconColor})}function Q(e){window.__c={n:"BoxedIcon"};const t=(0,s.yK)((t=>({box:{height:e.fixedWidth?22:void 0,width:e.fixedWidth?22:void 0,display:"flex",alignItems:"center",justifyContent:"center",...e.boxStyles},icon:{height:16,width:16,fill:e.svgFill??(0,a.gh)({theme:"light"}).regularIconColor}})),[e]);return(0,g.jsx)("div",{style:t.box,children:e.svg(t.icon)})}function X(e){window.__c={n:"AiBlockIcon"};const t=(0,s.yK)((e=>({box:{background:e.fill.purple,width:24,height:24,borderRadius:3},icon:{fill:e.icon.purple}})),[]);return(0,g.jsx)(Q,{svg:e.svg,svgFill:t.icon.fill,boxStyles:t.box})}},3316:(e,t,n)=>{n.r(t),n.d(t,{AiEligibilityUpdater:()=>an,CompletionPopup:()=>on});var o=n(67294),i=n(18466),s=n(26263),r=n(1302),a=n(480),l=n(86628),c=n(24405),d=n(42875),u=n(66673),p=n(82883),m=n(62965),f=n(97880),g=n(5366),v=n(46564),h=n(50906),y=n(14871),x=n(39699),C=n(3386),k=n(43250),w=n(91396),M=n(43455),S=n(95083),b=n(77907),I=n(16772),j=n(29798),P=n(84254),A=n(89626),_=n(16091),L=n(92022),F=n(11751),N=n(72897),B=n(32163),T=n(50506),E=n(63296),Z=n(72495),D=n(34859),R=n(85893);function H(e){window.__c={n:"ExitConfirmationDialog"};const{open:t,onCancelExit:n,onConfirmExit:i}=e,s=(0,o.useCallback)((()=>(0,R.jsx)(V,{onConfirmExit:i,onCancelExit:n})),[i,n]);return(0,R.jsx)(T.Z,{open:t,render:s,disableAnimation:!0,onDismiss:n})}function V(e){window.__c={n:"ExitConfirmationDialogContent"};const t=(0,c.yK)((e=>({wrapper:{padding:24,display:"flex",flexDirection:"column",minWidth:280},question:{fontWeight:500,maxWidth:240,textAlign:"center",marginTop:8,marginBottom:8,lineHeight:"1.2em"},icon:{width:32,height:32,alignSelf:"center",paddingTop:8,fill:e.accentColors.purple[400]}})),[]),n={width:"100%",marginTop:8},o=[{key:"confirm",render:e=>(0,R.jsx)(E.Z,{style:n,...e,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.ExitConfirmationDialog.confirmExit",defaultMessage:"Discard"})}),action:e.onConfirmExit},{key:"cancel",render:e=>(0,R.jsx)(E.Z,{style:n,...e,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.ExitConfirmationDialog.cancelExit",defaultMessage:"Cancel"})}),action:e.onCancelExit}];return(0,R.jsx)(N.Z,{capture:!0,preventType:D.Z.All,children:(0,R.jsxs)("div",{style:t.wrapper,children:[(0,F.t)(t.icon),(0,R.jsx)("p",{style:t.question,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.ExitConfirmationDialog.question",defaultMessage:"Do you want to discard the AI response?"})}),(0,R.jsx)(B.Z,{type:B.i.Vertical,initialFocus:0,sections:[{key:"dialog",render:e=>(0,R.jsx)(Z.Z,{topBorder:!1,disableMobileBorders:!0,...e}),items:o}]})]})})}n(57658);var O=n(50780),U=n(72126),K=n(62967),W=n(47307),$=n(64964),z=n(73063),J=n(45010),q=n(80444),G=n(77080),Y=n(30793),Q=n(71184);const X="favorite-actions",ee=(0,g.defineMessages)({favoriteActions:{defaultMessage:"Favorites",id:"ai.favoriteActions.title"},editOrShareFavorite:{defaultMessage:"Edit or share favorite",id:"ai.favoriteActions.editOrShare"}});function te(){const[e,t]=(0,o.useState)(void 0),n=(0,l.VK)((()=>G.default.checkGate("ai_favorites")),[]);return function(e){const t=(0,u.D9)(e);(0,o.useEffect)((()=>{e!==t&&J.Z.MenuScroller&&J.Z.MenuScroller.scrollToTop()}),[e,t])}(Boolean(e)),(0,o.useMemo)((()=>n?e?{type:"active",current:e,set:t,clear:()=>t(void 0)}:{type:"inactive",set:t}:{type:"disabled"}),[e,n])}const ne={maxWidth:400,whiteSpace:"pre-wrap"};function oe(e){const{value:t}=e;return(0,R.jsx)("div",{style:ne,children:(0,R.jsx)("div",{children:t.action.prompt})})}function ie(e,t,n,o,i){const s=i.filterOut.toLocaleLowerCase().trim(),r=(0,Q.JS)(o),a=[];for(const l of r){if(l.action.prompt.toLocaleLowerCase().trim()===s)continue;const o=o=>(0,R.jsxs)("div",{style:{display:"flex"},children:[(0,R.jsx)(z.Z,{style:{visibility:o.focused?"visible":"hidden",width:18,height:18},onClick:()=>{i.favoriteEditingState.set(l),h.VoR(e,{type:"edit",session_id:t.sessionId,gtm_favorite_id:l.gtmFavoriteId})},icon:O.E,ariaLabel:n.formatMessage(ee.editOrShareFavorite)}),!l.executeImmediately&&(0,R.jsx)(v.xj,{type:"updatePrompt",focused:o.focused})]});let r=!1;switch(l.action.type){case"helpMeEdit":"initialPrompt"!==t.stage||"blockSelection"!==t.context.type&&"textSelection"!==t.context.type||(r=!0);break;case"helpMeWrite":"initialPromptForAIBlock"!==t.stage&&"cursor"!==t.context.type||(r=!0);break;default:(0,f.t1)(l.action)}if(r){const e=(0,v.cK)({key:l.id,name:l.name,textToInsert:l.action.prompt,analyticsName:"favoriteAction",gtmFavoriteId:l.gtmFavoriteId,onUpdatePromptState:i.onUpdatePromptState,right:o,renderTooltip:()=>(0,R.jsx)(oe,{value:l}),userProvidedSearchName:`${l.name} ${l.action.prompt}`.slice(0,100),executeImmediately:l.executeImmediately});a.push(e)}}return[(0,K.$J)({key:X,title:ee.favoriteActions,render:e=>(0,R.jsx)(Z.Z,{...e}),actions:a})]}function se(e){const{state:t,environment:n,sessionId:o}=e,{currentUserSettingsStore:i}=q.default.state;i&&(t.current.name?(x.createAndCommit({userAction:"favoriteActions.saveFavoriteEditsAndClearState",environment:n,perform(e){(0,Q.gC)(t.current,i,e)}}),t.clear(),h.VoR(n,{type:"save",session_id:o,gtm_favorite_id:t.current.gtmFavoriteId})):$.oV({label:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Please enter a name for the action.",id:"ai.favoriteActions.nameRequiredMessage"})}))}var re=n(39186),ae=n(38715),le=n(37612),ce=n(48019),de=n(68894),ue=n(78140),pe=n(86825),me=n(64369),fe=n(33929),ge=n(87279);const ve=(0,g.defineMessages)({save:{id:"ai.favorites.save",defaultMessage:"Save changes"},delete:{id:"ai.favorites.delete",defaultMessage:"Delete"},runImmediately:{id:"ai.favorites.runImmediately",defaultMessage:"Run immediately"},actionNameLabel:{id:"ai.favorites.actionNameLabel",defaultMessage:"Action name"},cancelAndGoBack:{id:"ai.favorites.cancelAndGoBack",defaultMessage:"Cancel and go back"}});function he(e){window.__c={n:"FavoriteEditorMenuPopupContent"};const{state:t,context:n,sessionId:i}=e,s=(0,g.useIntl)(),r=(0,a.O7)(),l=(0,o.useMemo)((()=>new j.Z),[]),c=(0,K.cN)({key:"input",analyticsName:"TODO",displayName:ve.save,validators:[],closeParentMenu:!1,render:()=>(0,R.jsx)(Z.Z,{isInput:!0,style:{marginTop:0},children:(0,R.jsx)(de.ZP,{value:t.current.name,onChange:e=>{t.set({...t.current,name:e.target.value}),l.setState({focus:{section:0,indexLocal:1,indexGlobal:1}})},placeholder:fe.default.formatMessage(ve.actionNameLabel),focusInitial:!0})}),action(e,t){}}),d=[(0,K.$J)({key:"favorite options section",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:[c,(0,K.cN)({key:"runImmediately",analyticsName:"TODO",displayName:ve.runImmediately,validators:[],render:(e,n,o)=>{let{blocks:i,environment:s}=n;const r=Boolean(t.current.executeImmediately);return(0,R.jsx)(pe.Z,{...e,title:fe.default.formatMessage(ve.runImmediately),on:r})},closeParentMenu:!1,action(e,n){t.set({...t.current,executeImmediately:!t.current.executeImmediately})}})]}),(0,K.$J)({actions:[(0,K.cN)({key:"save",analyticsName:"TODO",displayName:ve.save,validators:[],svg:ae.N,closeParentMenu:!1,action(e,n){se({state:t,environment:r,sessionId:i})}})],key:"actions",render:e=>(0,R.jsx)(Z.Z,{...e})}),(0,K.$J)({key:"delete action section",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:[(0,K.cN)({key:"delete",analyticsName:"TODO",displayName:ve.delete,validators:[],svg:le.y,closeParentMenu:!1,action(e,n){const{currentUserSettingsStore:o}=q.default.state;o&&(x.createAndCommit({userAction:"ai.favoriteEditorPopup.delete",environment:r,perform(e){(0,Q.QC)(t.current,o,e)}}),t.clear(),h.VoR(r,{type:"delete",session_id:i,gtm_favorite_id:t.current.gtmFavoriteId}))}})]})],u=(0,o.useCallback)((()=>{}),[]);return(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,R.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"8px 8px 0 8px"},children:[(0,R.jsx)(z.Z,{icon:re.G,onClick:()=>{!function(e){const{state:t,environment:n}=e,{currentUserSettingsStore:o}=q.default.state;o&&(t.current.name||x.createAndCommit({userAction:"favoriteActions.cancelFavoriteEditsAndClearState",environment:n,perform(e){(0,Q.QC)(t.current,o,e),(0,Y.Nv)(t.current.action,o,e)}}),t.clear())}({environment:r,state:t})},ariaLabel:s.formatMessage(ve.cancelAndGoBack)}),(0,R.jsx)(me.Z,{isSecondaryColor:!0,isSmall:!0,style:{fontWeight:700},children:(0,R.jsx)(g.FormattedMessage,{id:"ai.favorites.saveHeader",defaultMessage:"Save AI action"})})]}),(0,R.jsx)(ue.Z,{menuType:ge.og.Popup,width:"100%",maxHeight:"min(40vh, 320px)",minHeight:"100%",children:(0,R.jsx)(ce.Z,{menuListStore:l,sections:d,onAccept:u,initialFocus:0,context:n})})]})}var ye=n(57819),xe=n(2585),Ce=n(5257);const ke=(0,g.defineMessages)({undoAriaLabel:{defaultMessage:"Go to previous AI response",id:"id.completions.undoAriaLabel"},redoAriaLabel:{defaultMessage:"Go to next AI response",id:"id.completions.redoAriaLabel"},historyLabel:{defaultMessage:"{currentRevision} of {totalRevisions}",id:"id.completions.historyLabel"}}),we={display:"flex",alignItems:"center",marginLeft:-2,marginRight:-2},Me={width:20,height:20,marginLeft:2,marginRight:2};function Se(e){window.__c={n:"CompletionHistory"};const{onUndo:t,onRedo:n,historyLabel:o}=e,i=(0,g.useIntl)();return t||n?(0,R.jsxs)("div",{style:we,children:[(0,R.jsx)(z.Z,{icon:xe.f,ariaLabel:i.formatMessage(ke.undoAriaLabel),disabled:!t,onClick:t,style:Me}),(0,R.jsx)(me.Z,{isSmall:!0,isSecondaryColor:!0,style:{fontVariantNumeric:"tabular-nums"},children:o}),(0,R.jsx)(z.Z,{icon:Ce.o,ariaLabel:i.formatMessage(ke.redoAriaLabel),disabled:!n,onClick:n,style:Me})]}):null}const be={onUndo:void 0,onRedo:void 0,historyLabel:void 0};function Ie(e,t){const n=I.default.state;if("completionPopup"!==n.type||"results"!==n.stage)return;const{sessionId:o}=n,i=(0,w.xM)(n);h.BpO(e,{session_id:o,inference_id:i.inferenceId,type:t})}var je=n(56863),Pe=n(81598),Ae=n(12921),_e=n(5737),Le=n(82375),Fe=n(11066),Ne=n(1743),Be=n(74194);const Te=(0,g.defineMessages)({promptLabel:{defaultMessage:"Prompt for action",id:"ai.favoritePromptEditor.promptLabel"}});function Ee(e,t){e.set({...e.current,action:{...e.current.action,prompt:t}})}function Ze(e){window.__c={n:"FavoritePromptEditorContent"};const{state:t,inputRef:n,sessionId:o}=e,i=(0,a.O7)(),s=(0,ye.bJ)(),r=(0,g.useIntl)().formatMessage(Te.promptLabel);return(0,R.jsxs)(Ne.Z,{capture:!0,allowMenuList:!1,allowEsc:!0,children:[(0,R.jsx)(Be.Z,{ref:n,format:Be.Z.Format.Transparent,placeholder:r,selectAll:!0,value:t.current.action.prompt,textarea:!0,textareaSubmitOnEnter:!1,autosize:!0,style:{minHeight:28,paddingTop:4,paddingBottom:4},onChange:e=>Ee(t,e.target.value),onKeyDown:e=>{"Enter"===e.key&&Ee(t,`${t.current.action.prompt}\n`)},focusInitial:!1}),(0,R.jsx)("div",{style:s.inputActions,children:(0,R.jsx)(Fe.Z,{style:s.purpleButton,onClick:()=>se({state:t,environment:i,sessionId:o}),children:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Done",id:"ai.favoritePromptEditor.done"})})})]})}var De=n(61519);function Re(e){window.__c={n:"PromptOrActionInput"};const{query:t,setQuery:n,onDismiss:i,onSubmit:s,inputRef:r,submitOnEnter:a,inputPlaceholder:l,children:c}=e,[d,u]=(0,o.useState)(void 0);return(0,R.jsxs)(Ne.Z,{capture:!0,allowMenuList:!1,allowEsc:!0,children:[(0,R.jsx)(Be.Z,{ref:r,format:Be.Z.Format.Transparent,placeholder:l,selectAll:!0,value:t,textarea:!0,textareaSubmitOnEnter:!0,autosize:!0,style:{minHeight:28,paddingTop:4,paddingBottom:4},onSubmit:e=>{t&&a&&(e.stopPropagation(),null==s||s())},onChange:e=>{n(e.target.value)},onKeyUp:e=>{"Backspace"===e.key&&(""===d&&i(),u(void 0))},onKeyDown:e=>{"Backspace"===e.key&&void 0===d&&u(t)},focusInitial:!0}),c]})}var He=n(83065),Ve=n(58261),Oe=n(26388);function Ue(e){window.__c={n:"SubmitAIPromptButton"};const{onSubmit:t,canSend:n}=e,o=(0,ye.bJ)(),i=(0,a.O7)(),s=(0,l.VK)((()=>i.device.isPhone),[i]);return(0,R.jsx)(Oe.Z,{renderTooltip:()=>(0,R.jsxs)("div",{children:[(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Send to AI",id:"completions.CompletionMenuActionBar.sendTooltip"}),(0,R.jsx)(Ve.Z,{style:o.keyboardShortcutInverted,name:"enter"})]}),placement:Oe.Z.Placement.Bottom,render:e=>(0,R.jsx)(z.Z,{icon:He._,onClick:t,isPurple:n,disabled:!n,iconStyle:{height:s?24:20,width:s?24:20},style:{pointerEvents:"auto",height:s?24:20,width:s?24:20},...e})})}const Ke=(0,g.defineMessages)({followUpInputPlaceholder:{id:"AlternativeCommandPalette.followUp.inputPlaceholder",defaultMessage:"Tell AI what to do next…"}}),We={padding:"8px 10px 8px 14px"};function $e(e){window.__c={n:"CompletionFinishedContent"};const t=(0,ye.bJ)(),n=(0,g.useIntl)(),o=0===e.query.trim().length,i=(0,l.VK)((()=>{if(!(0,Ae.E8)()||!(0,Ae.Gw)())return!1;const e=Le.XN.state;return Boolean(e&&e.previewingStep)}),[]);return(0,R.jsx)(Re,{...e,inputPlaceholder:n.formatMessage(Ke.followUpInputPlaceholder),...i&&{onSubmit:void 0},children:(0,R.jsxs)("div",{style:t.inputActions,children:[(0,R.jsx)(Ue,{onSubmit:e.onSubmit,canSend:!o&&!i}),(e.onUndo||e.onRedo)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(De.Z,{vertical:!0,size:1,style:We}),(0,R.jsx)(Se,{...e})]})]})})}var ze=n(64921),Je=n(91839);function qe(e){window.__c={n:"CompletionInProgressContent"};const{onStop:t,onRetry:n}=e,o=(0,ye.bJ)(),i=(0,a.O7)().device,s=i.isMobileNative&&i.isIOS;return(0,R.jsxs)(C.Z,{capture:!0,onEnter:()=>{t()},onEsc:()=>{t()},onKeypress:e=>{e.metaKey||"r"!==e.key||n()},children:[(0,R.jsxs)("div",{style:o.writingLabel,children:[(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.writing",defaultMessage:"AI is writing"}),(0,R.jsx)(Je.Z,{style:o.loadingDots})]}),!s&&(0,R.jsxs)(ze.Z,{style:o.lightweightButton,onClick:n,children:[(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.tryAgain.label",defaultMessage:"Try again"}),(0,R.jsx)("span",{style:o.keyboardShortcut,children:(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.startOver.shortcut",defaultMessage:"r"})})]}),(0,R.jsxs)(ze.Z,{style:o.lightweightButton,onClick:t,children:[s?(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.cancel.label",defaultMessage:"Cancel"}):(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.stop.label",defaultMessage:"Stop"}),(0,R.jsx)("span",{style:o.keyboardShortcut,children:(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.stop.shortcut",defaultMessage:"esc"})})]})]})}var Ge=n(15201),Ye=n(53336),Qe=n(55217);function Xe(e){window.__c={n:"CompletionPreview"};const{temporaryListStore:t,isLoading:n}=e,i=(0,a.O7)(),s=(0,o.useRef)(null),r=null==s?void 0:s.current,c=null==r?void 0:r.getStore(),d=(0,l.VK)((()=>i.device.isPhone),[i]),u=(0,ye.jq)({resetWhenScrolledToBottom:!0,areWeLoading:n,scrollerStore:c});(0,o.useEffect)((()=>{r&&(u?et.cancel():et(r))}),[r,t,u]);const p={scroller:{maxHeight:d?"min(15vh, 200px)":"min(40vh, 320px)",width:"100%"}};return(0,R.jsx)(o.Fragment,{children:(0,R.jsx)(Ye.Z,{type:Ye.Z.OverflowType.Y,style:p.scroller,ref:s,children:(0,R.jsx)(Ge.O,{displayName:"CompletionPopupContent",disabled:!0,children:(0,R.jsx)(Qe.Z,{store:t,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,disableDrag:!0})})})})}const et=U.Ds((e=>{e.scrollToBottom({animate:!0})}),60);var tt=n(63594),nt=n(54497),ot=n(42402);function it(){window.__c={n:"AiWarningNotice"};const e=(0,o.useCallback)((()=>{window.open("/help/guides/using-notion-ai#what-are-the-current-limitations-of-notion-ai")}),[]),t=(0,c.yK)((e=>({icon:{width:12,height:12,fill:e.lightIconColor,marginLeft:2},link:{color:e.lightTextColor,fontWeight:500}})),[]);return(0,R.jsxs)(R.Fragment,{children:[(0,nt.t)(t.icon),(0,R.jsx)(me.Z,{isSecondaryColor:!0,isSmall:!0,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.AiWarning.warning",defaultMessage:"AI responses can be inaccurate or misleading."})}),(0,R.jsx)(me.Z,{isSmall:!0,children:(0,R.jsx)(ot.Z,{onClick:e,style:t.link,disableHover:!0,disableUnderline:!0,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.AiWarning.learnMore",defaultMessage:"Learn more"})})})]})}var st=n(935),rt=n(81570),at=n(1865),lt=n(78291),ct=n(80671),dt=n(13627),ut=n(35057);function pt(){window.__c={n:"UpsellNotice"};const e=(0,a.O7)(),t=(0,l.VK)((()=>e.device.isMobile),[e]),n=(0,l.VK)((()=>{const e=lt.default.state.data;return dt.GJ(e)}),[]),i=(0,o.useCallback)((()=>{t?ct.k2():at.y(e,{from:"ai_upsell_notice",for:(0,ut.zt)(),addOnFeature:"ai"})}),[e,t]),s=(0,c.yK)((e=>({upsellIcon:{width:14,height:14,fill:e.lightIconColor},upsellLink:{color:e.blueColor,fontWeight:500}})),[]);return(0,R.jsxs)(R.Fragment,{children:[(0,rt.T)(s.upsellIcon),(0,R.jsxs)(me.Z,{isSecondaryColor:!0,isSmall:!0,children:[(0,R.jsx)(g.FormattedMessage,{id:"UpsellNotice.label",defaultMessage:"All free AI responses have been used for this workspace."}),!n&&(0,R.jsxs)(R.Fragment,{children:[" ",(0,R.jsx)(g.FormattedMessage,{id:"UpsellNotice.contactWorkspaceOwner.label",defaultMessage:"Contact your workspace owner to add Notion AI."})]})]}),n&&(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(me.Z,{isSmall:!0,children:(0,R.jsx)(ot.Z,{onClick:i,style:s.upsellLink,disableHover:!0,disableUnderline:!0,children:(0,R.jsx)(g.FormattedMessage,{id:"UpsellNotice.link.label",defaultMessage:"Go unlimited"})})})})]})}function mt(e){window.__c={n:"MainPopupFooter"};const{state:t}=e,n=(0,a.O7)(),o=(0,l.VK)((()=>n.device.isPhone),[n]),i=(0,c.yK)((e=>({wrapper:{background:"dark"===e.mode?e.accentColors.gray[100]:e.accentColors.gray[30],display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 12px",borderTop:`1px solid ${e.lightDividerColor}`,gap:8,color:e.lightTextColor,fontSize:12,minHeight:36},noticeContent:{display:"flex",alignItems:"center",gap:8},actionContent:{display:"flex",alignItems:"center"}})),[]),s=(0,l.VK)((()=>!tt.Z.state),[]);if(o)return null;let r,d;return s&&(r=(0,R.jsx)(pt,{})),"results"!==t.stage||t.loading||(r=r??(0,R.jsx)(it,{}),d=(0,R.jsx)(st.u,{revision:(0,w.xM)(t)})),r?(0,R.jsxs)("div",{style:i.wrapper,children:[(0,R.jsx)("div",{style:i.noticeContent,children:r}),d&&(0,R.jsx)("div",{style:i.actionContent,children:d})]}):null}const ft=(0,g.defineMessages)({writeInputPlaceholder:{defaultMessage:"Ask AI to write anything…",id:"completions.PromptMenu.alternativeUiWriteInputPlaceholder"},editInputPlaceholder:{defaultMessage:"Ask AI to edit or generate…",id:"completions.PromptMenu.alternativeUiEditInputPlaceholder"}});function gt(e){window.__c={n:"MainPopupContent"};const{state:t,onDismiss:n,onCompletionRetry:i,onCompletionStop:s,temporaryListStore:r,favoriteEditingState:d}=e,u=(0,o.useRef)(null);(0,o.useEffect)((()=>{je.w()}),[]);const p=(0,a.O7)(),m=(0,l.VK)((()=>p.device.isPhone),[p]),f=(0,l.VK)((()=>q.default.state.currentSpaceStore),[]),g=(0,l.VK)((()=>_e.N.state),[]),v=(0,l.VK)((()=>{if(!(0,Ae.E8)())return;const e=Le.XN.state;return e?e.temporaryClientSteps.filter((e=>"assistantChat"===e.type||"assistantLoadPage"===e.type||"assistantSearch"===e.type)):void 0}),[],{useDeepEqual:!0}),h=(0,c.yK)((e=>({icon:{height:18,width:18,paddingLeft:m?0:4,marginLeft:m?-4:void 0,fill:"dark"===e.mode?e.accentColors.purple[600]:e.accentColors.purple[300]},outer:{width:"100%",minHeight:m?44:36,padding:m?"2px 16px 2px 16px":"2px 12px 2px 8px",display:"flex",flexDirection:"column",justifyContent:"center",gap:2,fontSize:m?16:14}})),[m]),y=(0,R.jsx)("div",{style:{height:36,alignItems:"center",display:"flex"},children:(0,F.t)(h.icon)});if("active"===d.type)return(0,R.jsx)("div",{style:h.outer,ref:u,children:(0,R.jsxs)("div",{style:{display:"flex",gap:8,width:"100%"},children:[y,(0,R.jsx)(Ze,{state:d,inputRef:e.inputRef,sessionId:t.sessionId})]})});const x=(0,R.jsxs)("div",{style:h.outer,ref:u,children:[r&&(0,R.jsx)(Xe,{temporaryListStore:r,isLoading:"results"===t.stage&&t.loading}),v&&f&&(0,R.jsx)(R.Fragment,{children:v.map(((e,t)=>(0,R.jsx)(Pe.qS,{clientStep:e,parentStore:f,parentSpaceId:f.id,configurationState:g},t)))}),(0,R.jsxs)("div",{style:{display:"flex",gap:8,width:"100%"},children:[y,"initialPrompt"===t.stage||"initialPromptForAIBlock"===t.stage?(0,R.jsx)(vt,{...e,paletteMode:(0,ye.rR)(t)}):t.loading?(0,R.jsx)(qe,{onDismiss:n,state:t,onRetry:i,onStop:s}):(0,R.jsx)($e,{...e})]})]});return(0,R.jsxs)(R.Fragment,{children:[x,(0,R.jsx)(mt,{state:t})]})}function vt(e){window.__c={n:"MainPopupInitialPromptContent"};const{query:t,onSubmit:n,paletteMode:o}=e,i=(0,ye.bJ)(),s=(0,g.useIntl)(),r="edit"===o?s.formatMessage(ft.editInputPlaceholder):s.formatMessage(ft.writeInputPlaceholder),a=t.trim().length>0;return(0,R.jsx)(Re,{...e,inputPlaceholder:r,children:(0,R.jsx)("div",{style:i.inputActions,children:(0,R.jsx)(Ue,{onSubmit:n,canSend:a})})})}n(30541);var ht=n(8848),yt=n(7500),xt=n(13148),Ct=n(1230),kt=n(25651),wt=n(91427),Mt=n(98519),St=n(55863),bt=n(68204),It=(n(21703),n(36769)),jt=n(64275),Pt=n(56666),At=n(37181);const _t="recent-actions",Lt=(0,g.defineMessages)({recentActions:{defaultMessage:"Recents",id:"commandPalette.recentActions.title"},more:{defaultMessage:"See more",id:"commandPalette.recentActions.more"},removeFromMenu:{defaultMessage:"Remove this action from the menu",id:"commandPalette.recentActions.removeFromMenu"},addToFavorites:{defaultMessage:"Add to favorites",id:"commandPalette.recentActions.addToFavorites"}});function Ft(e){window.__c={n:"FavoriteButton"};const{focused:t,recentAction:n,state:o,intl:i,sessionId:s}=e,r=(0,a.O7)();return(0,R.jsx)(z.Z,{style:{visibility:t?"visible":"hidden",width:18,height:18},onClick:()=>{h.VoR(r,{type:"create_from_recent",session_id:s,gtm_favorite_id:void 0}),o.set((0,Q.kg)(n))},icon:wt.e,ariaLabel:i.formatMessage(Lt.addToFavorites)})}function Nt(){window.__c={n:"MoreIcon"};const e=(0,c.Fg)();return(0,Pt.o)({width:12,fill:e.mediumIconColor,marginLeft:2,marginRight:2})}function Bt(e){if("completionPopup"!==e.type||"results"!==e.stage)return;const t=(0,w.xM)(e);return"initial"===t.type?t:void 0}(0,It.exposeDebugEnvironmentValue)("resetRecentAndFavoriteAIActions",(e=>()=>{const{currentUserSettingsStore:t}=q.default.state;if(!t)throw new Error("currentUserSettingsStore not found");x.createAndCommit({userAction:"recentActions.debugging.resetRecentAndFavoriteAIActions",environment:e,perform(e){At.d2({userSettingsStore:t,transaction:e,data:{recent_ai_actions:[],favorite_ai_actions:[]}})}})}));const Tt="This string should never show up in analytics",Et=(0,g.defineMessages)({clickToEditAndRetry:{id:"completions.CompletionMenuActionBar.tryAgain.clickToEditAndRetry",defaultMessage:"Click to edit prompt and retry"},clickToRetry:{id:"completions.CompletionMenuActionBar.tryAgain.clickToRetry",defaultMessage:"Click to retry"},tryAgain:{id:"completions.CompletionMenuActionBar.tryAgain",defaultMessage:"Try again"},delete:{id:"completions.CompletionMenuActionBar.delete",defaultMessage:"Discard"},close:{id:"completions.CompletionMenuActionBar.close",defaultMessage:"Close"},keep:{id:"completions.CompletionMenuActionBar.done",defaultMessage:"Done"},replace:{id:"completions.CompletionMenuActionBar.replace",defaultMessage:"Replace selection"},insert:{id:"completions.CompletionMenuActionBar.insert",defaultMessage:"Insert below"},addToFavorites:{id:"completions.CompletionMenuActionBar.addToFavorites",defaultMessage:"Add to favorites"}});function Zt(e){const{filter:t,state:n,from:o,favoriteEditingState:i,onUpdatePromptState:s,onImprove:r,context:a,intl:l,environment:c,completionResultInfo:d}=e,u=(0,Ae.E8)();let p;switch(n.stage){case"initialPrompt":case"initialPromptForAIBlock":p=function(e){const{state:t,environment:n,intl:o,filter:i,from:s,onUpdatePromptState:r,favoriteEditingState:a,type:l}=e,{currentUserSettingsStore:c}=q.default.state;if((0,Ae.E8)())return[];const d=c?function(e,t,n,o,i){const s=i.filterOut.toLocaleLowerCase().trim(),r=(0,Y.pz)(n),a=[];let l=0;for(const u of r){const r="recentAction."+l++,c=s=>(0,R.jsxs)("div",{style:{display:"flex"},children:[(0,R.jsx)(z.Z,{style:{visibility:s.focused?"visible":"hidden",width:18,height:18},onClick:()=>x.createAndCommit({userAction:"ai.recentActions.renderRemoveButton",environment:o,perform(e){(0,Y.lG)(u,n,e)}}),icon:jt.D,ariaLabel:t.formatMessage(Lt.removeFromMenu)}),"inactive"===i.favoriteEditingState.type?(0,R.jsx)(Ft,{sessionId:e.sessionId,state:i.favoriteEditingState,focused:s.focused,recentAction:u,intl:t}):(0,R.jsx)(v.xj,{type:"updatePrompt",focused:s.focused})]});let d;if(u.prompt.toLocaleLowerCase().trim()!==s){switch(u.type){case"helpMeEdit":"initialPrompt"!==e.stage||"blockSelection"!==e.context.type&&"textSelection"!==e.context.type||(d=(0,v.cK)({key:r,name:u.prompt,analyticsName:"recentAction",right:c,onUpdatePromptState:i.onUpdatePromptState,renderTooltip:K.zz}));break;case"helpMeWrite":"initialPromptForAIBlock"!==e.stage&&"cursor"!==e.context.type||(d=(0,v.cK)({key:r,name:u.prompt,analyticsName:"recentAction",right:c,onUpdatePromptState:i.onUpdatePromptState,renderTooltip:K.zz}));break;default:(0,f.t1)(u)}d&&a.push(d)}}const c=a.slice(0,3),d=a.slice(3);if(d.length){const e=(0,K.$J)({key:"more recent actions",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:d}),t=(0,K.MV)({key:"more recent actions extension",displayName:Lt.more,analyticsName:"Completions - more",validators:[],svg:()=>(0,R.jsx)(Nt,{}),subActions:()=>[e],collapseSubActionsIntoParent:!0,width:400});c.push(t)}return[(0,K.$J)({key:_t,title:Lt.recentActions,render:e=>(0,R.jsx)(Z.Z,{...e}),actions:c})]}(t,o,c,n,{onUpdatePromptState:r,favoriteEditingState:a,filterOut:i}):[],u=[...c&&"disabled"!==a.type?ie(n,t,o,c,{onUpdatePromptState:r,favoriteEditingState:a,filterOut:i}):[]];"initialPromptForAIBlock"===t.stage?u.push((0,v.xI)({store:t.store,from:s})):"aiBlock"!==l&&u.push(...(0,v.LK)({from:s,type:l,onUpdatePromptState:r}));return u.push(...d),u}({state:n,environment:c,intl:l,filter:t,from:o,context:a,favoriteEditingState:i,onUpdatePromptState:s,type:(0,ye.VZ)(n)});break;case"results":p=n.loading?[]:function(e){const{environment:t,state:n,defaultAction:o,isAssistant:i,closeOrDiscard:s,favoriteEditingState:r}=e,a={key:"insert",analyticsName:Tt,displayName:Et.insert,validators:[],closeParentMenu:!0,svg:Ct.H,action(){e.onInsert()}},l={key:"delete",analyticsName:Tt,displayName:Et.delete,validators:[],closeParentMenu:!0,svg:le.y,action(){e.onCancel()}},c=function(e){const{state:t,onRetry:n}=e;if("results"!==t.stage)return;return{key:"tryAgain",analyticsName:Tt,displayName:Et.tryAgain,validators:[],closeParentMenu:!0,svg:St.s,renderTooltip:()=>(0,R.jsx)(Rt,{state:t}),action(){n()}}}({...e}),d=[],u=Mt.k;if(i)return[(0,K.$J)({key:"main",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:[(0,K.cN)({key:"keep",analyticsName:Tt,displayName:Et.keep,validators:[],closeParentMenu:!0,svg:u,action(){e.onAccept({exitType:"accept"})}})]})];"accept"===o?d.push((0,K.cN)({key:"keep",analyticsName:Tt,displayName:Et.keep,validators:[],closeParentMenu:!0,svg:u,action(){e.onAccept({exitType:"accept"})}})):"replace"===o?d.push((0,K.cN)({key:"replace",analyticsName:Tt,displayName:Et.replace,validators:[],closeParentMenu:!0,svg:u,action(){e.onReplace()}}),(0,K.cN)(a)):"insert"===o?d.push((0,K.cN)({...a,svg:u})):(0,f.t1)(o);d.push((0,K.cN)({key:"continueWriting",analyticsName:Tt,displayName:w.Dr.continueWriting,validators:[],closeParentMenu:!0,svg:Ht(kt.R),action(){e.onImprove({type:"continueWriting"})}}),(0,K.cN)({key:"makeLonger",analyticsName:Tt,displayName:w.Dr.makeLonger,validators:[],closeParentMenu:!0,svg:Ht(yt.H),action(){e.onImprove({type:"makeLonger"})}}),(0,K.cN)({key:"addToFavorites",analyticsName:Tt,displayName:Et.addToFavorites,validators:[()=>Boolean(Vt(n,r))],closeParentMenu:!0,svg:Ht(wt.e),action(){const e=Vt(n,r);if(!e)return;const o=(0,Q.kg)(e.recentAction);e.favoriteEditingState.set(o),h.VoR(t,{type:"create_from_completion",session_id:n.sessionId,gtm_favorite_id:void 0})}}),(0,K.cN)({key:"convertToAiBlock",analyticsName:Tt,displayName:w.Dr.insertAIBlock,validators:[()=>{if("completionPopup"!==n.type||"results"!==n.stage||"cursor"!==n.context.type)return!1;const e=Bt(n);return!!e&&Boolean((0,Ae.z1)()[e.clientPrompt.key])}],closeParentMenu:!0,svg:Ht(F.t),action(){e.onAccept({exitType:"convert_to_ai_block"})}}));const p=[c?(0,K.cN)(c):void 0,"discard"===s?(0,K.cN)(l):(0,K.cs)({key:"close",analyticsName:Tt,displayName:Et.close,validators:[],closeParentMenu:!0,svg:xt.U,shortcuts:["esc"],action(){e.onAccept({exitType:"click_outside_window_accept",selectInsertion:!0})}})],m=(0,K.$J)({key:"main",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:d}),g=(0,K.$J)({key:"final",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:p.filter(f.$K)});return[m,g]}({environment:c,state:n,onImprove:r,closeOrDiscard:"cursor"===n.context.type?"close":"discard",isAssistant:u,favoriteEditingState:i,...d});break;default:(0,f.t1)(n)}let m=(0,bt.sG)({sections:p,context:a,query:t});if(1===m.length&&m[0].key===_t){const e=m[0].actions.slice();(0,w.LN)(t,l)||e.unshift((0,v.sH)({customPrompt:t,execute:d.onSubmit})),m=[(0,K.$J)({key:"actions",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:e})]}else(function(e){let t=!1;for(const n of e)if(n.key===X)t=!0;else if(n.key!==_t)return!1;return t})(m)&&m.push((0,K.$J)({key:"literal-actions",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:[(0,v.sH)({customPrompt:t,execute:d.onSubmit})]}));return m}function Dt(e,t){switch(t.type){case"continueWriting":return e.formatMessage(w.Dr.continueWriting);case"makeLonger":return e.formatMessage(w.Dr.makeLonger);case"helpMeEdit":return t.prompt}}function Rt(e){window.__c={n:"TryAgainTooltip"};const{state:t}=e,n=(0,c.yK)((e=>({hint:{color:e.mediumInvertedTextColor}})),[]),o=(0,w.xM)(t),i=(0,g.useIntl)();let s,r=Et.clickToEditAndRetry;if("initial"===o.type)if(P.doesPromptNeedAdditionalUserInput(o))s=(0,w.gY)(o);else{r=Et.clickToRetry;const e=o.clientPrompt.name;s="string"==typeof e?e:i.formatMessage(e)}else"followup"===o.type?s=Dt(i,o.improvement):(0,f.t1)(o);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{children:s}),(0,R.jsx)("div",{style:n.hint,children:i.formatMessage(r)})]})}function Ht(e){return()=>(0,R.jsx)(v.lA,{svg:e,svgFill:ht.FN.light.purple[400]})}function Vt(e,t){if("disabled"===t.type)return;const n=Bt(e);if(!n)return;const{currentUserSettingsStore:o}=q.default.state;if(!o)return;const i=(0,Y.BG)({clientPrompt:n.clientPrompt,additionalContext:n.additionalContext,promptTitle:n.promptTitle});return i&&!(0,Q.Gl)(o,i)?{currentInitialRevision:n,recentAction:i,favoriteEditingState:t,currentUserSettingsStore:o}:void 0}function Ot(e){window.__c={n:"MenuPopupContent"};const{sections:t,onCloseParentMenu:n,context:i,menuListStore:s}=e,r=(0,o.useCallback)((e=>{e.closeParentMenu&&n()}),[n]),c=(0,a.O7)(),d=(0,l.VK)((()=>c.device.isPhone),[c]);return(0,R.jsx)(ue.Z,{menuType:d?ge.og.ActionSheet:ge.og.Popup,width:"100%",maxHeight:d?"min(17vh, 160px)":"min(40vh, 320px)",maxWidth:"100%",children:(0,R.jsx)(ce.Z,{menuListStore:s,sections:t,onAccept:r,initialFocus:0,context:i})})}var Ut=n(51454),Kt=n(69454),Wt=n(77794),$t=n(21199),zt=n(90106);function Jt(e){window.__c={n:"PopupPositioner"};const{scrollerStore:t,openState:n,children:i}=e,[s,r]=(0,o.useState)(Date.now()),a=(0,o.useCallback)((()=>r(Date.now())),[]),d=(0,o.useRef)(null),[u,p]=(0,o.useState)(void 0),[m,f]=(0,o.useState)(void 0),g=(0,l.VK)((()=>{const e=(0,ye.$b)(n);if(!e)return;const o=(0,w.wA)(e);if(!o)return;const{origin:i}=e;"results"!==n.stage&&o&&i instanceof zt.G&&("spacebar"===n.from||i.isEmptyEditableBlock())&&(o.height=0);const s=t.state,r=s.clientRect??new DOMRect,a=s.scrollTop;return function(e){const{openState:t,originRect:n,scrollerRect:o,scrollerScrollTop:i,popupRect:s}=e,r=(null==s?void 0:s.height)??0,a=(null==s?void 0:s.width)??0,l=Math.min(Math.max(n.width,500),730);let c;const d=n.bottom-o.top+i+Gt;n.bottom+r+Gt+Yt>o.bottom&&(c=d-(o.height-r-Yt+i));let u;a+Qt+Xt>o.width?u=Qt:n.left+a>o.right?u=o.width-a-Xt:(u=n.left-o.left,"initialPromptForAIBlock"===t.stage&&(u-=a-n.width));return{top:d,left:u,width:l,scrollTopIntoView:c}}({openState:n,originRect:o,scrollerRect:r,scrollerScrollTop:a,popupRect:u})}),[t,u,n]);(0,o.useEffect)((()=>{g&&f(g)}),[g]);const v=g??m;(0,o.useEffect)((()=>{if(Date.now()-s>500)return;const e=null==v?void 0:v.scrollTopIntoView;if(!e)return;const n=en(t);n&&qt(e,n)}),[null==v?void 0:v.scrollTopIntoView,t,s]);const h=(0,c.yK)((e=>({wrap:{position:"absolute",left:null==v?void 0:v.left,top:null==v?void 0:v.top,width:null==v?void 0:v.width,zIndex:Ut.lB}})),[v]);(0,o.useEffect)((()=>{const e=new Wt.E;if(!d.current)throw new Error("ref.current is null");return e.observe(d.current),e.rect.addListener((e=>{p(e.state)})),()=>{e.destroy()}}),[]);const y="results"===n.stage&&!n.loading;(0,o.useEffect)((()=>{y&&a()}),[y,a]);const x="results"===n.stage&&n.loading,C=(0,ye.jq)({resetWhenScrolledToBottom:!1,areWeLoading:x,scrollerStore:t}),k="results"===n.stage&&"cursor"===n.context.type,[M,S]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{!x||!k&&M||(C?qt.cancel():null!=v&&v.scrollTopIntoView&&(a(),S(!0)))}),[C,M,k,x,v,a]),(0,R.jsx)($t.Z,{capture:!0,render:e=>(0,R.jsx)(Ne.Z,{capture:!0,allowMenuList:!0,allowEsc:!0,children:(0,R.jsx)("div",{style:h.wrap,ref:d,...e,children:v&&i})})})}const qt=U.Ds(((e,t)=>{t.scrollByOffset(e,0,{animate:!0}),J.Z.MenuScroller&&J.Z.MenuScroller.scrollToTop()}),60),Gt=4,Yt=6,Qt=6,Xt=16;function en(e){var t,n;return e===(null===(t=J.Z.PageScroller)||void 0===t?void 0:t.stores.store)?J.Z.PageScroller:e===(null===(n=J.Z.PeekViewScroller)||void 0===n?void 0:n.stores.store)?J.Z.PeekViewScroller:void 0}function tn(e){window.__c={n:"MobilePopupPositioner"};const{children:t,scrollerStore:n,openState:i}=e,[s,r]=(0,o.useState)(Date.now()),c=(0,o.useRef)(null),[d,p]=(0,o.useState)(void 0),m=(0,o.useCallback)((()=>r(Date.now())),[]),{WindowSizeStore:f}=(0,a.O7)();(0,o.useEffect)((()=>{const e=new Wt.E,t=c.current;if(!t)throw new Error("ref.current is null");e.observe(t);let n=t.getBoundingClientRect().top;e.rect.addListener((e=>{n=e.state.top,p(e.state)}));const o=setInterval((()=>{const o=t.getBoundingClientRect().top;o!==n&&(n=o,e.recompute())}),50);return()=>{e.destroy(),clearInterval(o)}}),[]);const g="results"===i.stage&&!i.loading,v=("results"===i.stage||"initialPrompt"===i.stage)&&"cursor"===i.context.type,h=(0,l.VK)((()=>{const e=(0,ye.$b)(i);if(!e)return;const t=(0,w.wA)(e);if(!t)return;if(!d)return;const n=t.bottom-d.top;return n>0?n:void 0}),[i,d]);(0,o.useEffect)((()=>{if(Date.now()-s>500)return;if(!h)return;const e=en(n);e&&qt(h,e)}),[h,n,s]),(0,o.useEffect)((()=>{g&&v&&m()}),[g,v,m]);const y="results"===i.stage&&i.loading,x=(0,u.D9)(y),[C,k]=(0,o.useState)();(0,o.useEffect)((()=>{x&&!y&&k(Date.now())}),[y,x]),(0,o.useEffect)((()=>{const e=!!C&&Date.now()-C<1e3;(y||e)&&v&&h&&m()}),[v,y,m,h,C]);const M=(0,l.VK)((()=>{const e=Kt.Z.state.phase===Kt.i.hidden||Kt.Z.state.phase===Kt.i.willHide,t=Kt.Z.estimatedNativeWebBottomOverlap()+Yt;return e?f.getSafePaddingBottomPx(t):t}),[f]);return(0,R.jsx)("div",{ref:c,style:{position:"absolute",bottom:M,left:Qt,right:Qt,zIndex:Ut.Mo},children:t})}const nn="notion-alternate-ai-ui";function on(e){window.__c={n:"CompletionPopup"};const{scrollerStore:t}=e,n=(0,a.O7)(),i=(0,l.VK)((()=>I.default.state),[]);(0,A.w9)(i);const s=(0,o.useMemo)((()=>(0,ye.RR)(i)),[i]),r=(0,l.VK)((()=>s&&(0,ye.$b)(s)),[s]),c=(0,l.VK)((()=>n.device.isPhone),[n]);return s?t!==(null==r?void 0:r.scrollerStore)?null:c?(0,R.jsx)(tn,{scrollerStore:t,openState:s,children:(0,R.jsx)(sn,{openState:s})}):(0,R.jsx)(Jt,{scrollerStore:t,openState:s,children:(0,R.jsx)(sn,{openState:s})}):null}function sn(e){window.__c={n:"PopupContent"};const{openState:t}=e,n=(0,a.O7)(),F=(0,g.useIntl)(),N=(0,o.useState)(function(e){switch(e.stage){case"results":return"";case"initialPromptForAIBlock":return e.prompt??e.prefilledValue;case"initialPrompt":return e.prefilledValue}}(t))[0],[B,T]=function(e){const t=(0,g.useIntl)(),[n,i]=(0,o.useState)("");return[(0,l.VK)((()=>{if("initialPromptForAIBlock"!==e.stage||!(0,w.dU)())return n;const o=e.store.getTitleValue();return(0,p.X)({intl:t,textValue:o,getRecordModel:e.store.getRecordModel,userTimeZone:(0,d.r)()})}),[n,t,e]),i]}(t),[E,Z]=(0,o.useState)(!1),[D,V]=(0,o.useState)(!1),[O,K]=(0,o.useState)(""),$=te(),z=(0,o.useRef)(null),J=(0,ye.rR)(t),Y=(0,o.useMemo)((()=>({environment:n,blocks:[],publicEditMode:void 0})),[n]);(0,A.lZ)(t);const X=(0,o.useCallback)((e=>{h.ovL(n,{session_id:t.sessionId,type:e.analyticsName,gtm_favorite_id:e.gtmFavoriteId}),T(e.insertText),P.maybeSetPromptForCurrentAiBlock(n,e.insertText),e.executeImmediately&&Z(!0),z.current&&z.current.focusInput()}),[t.sessionId,n,T]),ee="results"===t.stage?(0,w.xM)(t).completion:void 0,ne=(0,u.Z_)(ee,P.COMPLETION_THROTTLE,m.Z),oe="results"===t.stage?t:void 0,ie=(0,b.useDependency)(b.deps.markdownLinkifyIt),se=(0,b.useDependency)(b.deps.tinyMceMicrosoftWordPasteFilter),re=(0,o.useMemo)((()=>{if(!oe||"textSelection"!==oe.context.type&&"blockSelection"!==oe.context.type)return;if(["idle","pending"].includes(ie.status)||["idle","pending"].includes(se.status))return;const{userSearchCache:e}=(0,w.xM)(oe);return ne?i.Z.withListenerIgnored((()=>{const t=new s.Z({name:"CompletionPopup.PopupContent",isTemporaryData:!0}),o=x.createAndCommit({userAction:"CompletionPopup.temporarymarkdownToBlocks",environment:n,canUndo:!1,perform:o=>{const i=y.Mt({environment:n,text:ne,inMemoryRecordCache:t,transaction:o,markdownOptions:(0,M.N9)(e),markdownLinkifyIt:ie.value,tinyMceMicrosoftWordPasteFilter:se.value});if(i)return P.postProcessAICreatedStores(n,i),y.Lh({environment:n,stores:i,inMemoryRecordCache:t,transaction:o})}}).performResult;return t.addCacheFallback(n.defaultRecordCache.inMemoryRecordCache),o})):void 0}),[oe,ne,n,ie,se]),ae=(0,l.VK)((()=>{if(!re||!oe||"completionPopup"!==oe.type||"results"!==oe.stage||"textSelection"!==oe.context.type&&"blockSelection"!==oe.context.type)return;return oe.context.stores.every((e=>{const t=e.getType();return!!t&&("blockSelection"===oe.context.type?Boolean(S.d[t]):"textSelection"===oe.context.type&&Boolean(S.D[t]))}))}),[oe,re]);let le=!0,ce=!1;switch(t.stage){case"initialPrompt":if(t.futureRevisions.length>0)break;case"initialPromptForAIBlock":le=!1;break;case"results":t.loading||"cursor"!==t.context.type||""!==B||(ce=!0);break;default:(0,f.t1)(t)}const de=function(e){const{environment:t,sessionId:n}=e,{value:i}=(0,b.useDependency)(b.deps.markdownLinkifyIt),{value:s}=(0,b.useDependency)(b.deps.tinyMceMicrosoftWordPasteFilter),r=(0,o.useCallback)((e=>{let{exitType:o,selectInsertion:r}=e;const a=I.default.state;"completionPopup"!==a.type||"results"!==a.stage||a.loading||(h.HCf(t,{session_id:n,inference_id:(0,w.xM)(a).inferenceId,exit_type:o}),x.createAndCommit({userAction:"CompletionPopup.handleAccept",environment:t,perform:e=>{P.acceptCursorCompletion({environment:t,transaction:e,selectInsertion:r,exitType:o,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:s})}}))}),[t,n,i,s]),a=(0,o.useCallback)((()=>{const e=I.default.state;"completionPopup"!==e.type||"results"!==e.stage||e.loading||((0,ye.Tq)(t),h.HCf(t,{session_id:n,inference_id:(0,w.xM)(e).inferenceId,exit_type:"insert"}),"textSelection"===e.context.type?x.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{P.insertTextSelectionCompletion({environment:t,transaction:e,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:s})}}):"blockSelection"===e.context.type&&x.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{P.insertBlockSelectionCompletion({environment:t,transaction:e,replace:!1,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:s})}}))}),[t,n,i,s]),l=(0,o.useCallback)((()=>{const e=I.default.state;"completionPopup"!==e.type||"results"!==e.stage||e.loading||"textSelection"!==e.context.type&&"blockSelection"!==e.context.type||((0,ye.Tq)(t),h.HCf(t,{session_id:n,inference_id:(0,w.xM)(e).inferenceId,exit_type:"replace"}),"textSelection"===e.context.type?x.createAndCommit({userAction:"CompletionPopup.handleReplace",environment:t,perform:e=>{P.replaceTextSelectionCompletion({environment:t,transaction:e,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:s})}}):"blockSelection"===e.context.type&&x.createAndCommit({userAction:"CompletionPopup.handleReplace",environment:t,perform:e=>{P.insertBlockSelectionCompletion({environment:t,transaction:e,replace:!0,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:s})}}))}),[t,n,i,s]);return(0,o.useMemo)((()=>({onAccept:r,onInsert:a,onReplace:l})),[r,a,l])}({environment:n,sessionId:t.sessionId});(0,o.useEffect)((()=>{T(N),z.current&&z.current.focusInput()}),[N,T]);const ue="results"===t.stage&&t.hasErrored,pe=(0,u.D9)(ue),me=ue&&!pe,fe=(0,o.useCallback)((e=>{const{purgeFromHistory:t}=e,o=P.revertCurrentCompletionRevision({environment:n,purgeFromHistory:t});o&&"followup"===o.type&&(T(Dt(F,o.improvement)),z.current&&z.current.focusInput())}),[n,F,T]),ge=(0,o.useCallback)((()=>{"results"===t.stage&&(P.revertCurrentCompletionRevision({environment:n,purgeFromHistory:!1}),z.current&&z.current.focusInput())}),[t,n]),ve=(0,o.useCallback)((()=>{"results"===t.stage&&(P.redoCompletionRevision(n),z.current&&z.current.focusInput())}),[n,t]);(0,o.useEffect)((()=>{if(!me||"results"!==t.stage)return;const{sessionId:e}=t;if((0,w.sr)(t))return void fe({purgeFromHistory:!0});const o=(0,w.Iz)(t);P.doesPromptNeedAdditionalUserInput(o)?(T(O),(0,L.jn)({environment:n})):P.cancelCompletion({environment:n,sessionId:e,inferenceId:o.inferenceId,exitType:"error_modal"})}),[n,me,t,O,fe,T]);const xe=(0,o.useCallback)((()=>{if("results"!==t.stage)return;const{sessionId:e}=t,o=(0,w.xM)(t);if((0,w.sr)(t))return h.XwB(n,{session_id:e,inference_id:o.inferenceId,is_reverting_follow_up_improvement:!0}),void fe({purgeFromHistory:!1});h.XwB(n,{session_id:e,inference_id:o.inferenceId,is_reverting_follow_up_improvement:!1});const i=(0,w.Iz)(t);P.doesPromptNeedAdditionalUserInput(i)?(T((0,w.gY)(i)),(0,L.jn)({environment:n})):P.handleCompletionPopupRetry({environment:n})}),[n,t,fe,T]),Ce=(0,o.useCallback)((()=>{if("results"!==t.stage)return;if(!(0,w.xM)(t).completion)return(0,w.sr)(t)?void fe({purgeFromHistory:!0}):(T(O),void(0,L.jn)({environment:n}));P.stopCompletion(n)}),[t,n,fe,O,T]),we=(0,o.useCallback)((()=>{V(!1),r.default.afterNextFlush((()=>{z.current&&z.current.focusInput()}))}),[]),Me=(0,o.useCallback)((()=>{switch(t.stage){case"initialPromptForAIBlock":h.HCf(n,{session_id:t.sessionId,inference_id:void 0,exit_type:"accept"}),(0,L.fz)();break;case"initialPrompt":T(""),(0,L.sj)();break;case"results":break;default:(0,f.t1)(t)}}),[t,n,T]),Se=(0,o.useCallback)((e=>{switch((0,ye.Tq)(n),V(!1),t.stage){case"initialPrompt":case"initialPromptForAIBlock":h.HCf(n,{session_id:t.sessionId,inference_id:void 0,exit_type:e}),(0,L.fz)();break;case"results":P.cancelCompletion({environment:n,sessionId:t.sessionId,inferenceId:(0,w.xM)(t).inferenceId,exitType:e});break;default:(0,f.t1)(t)}}),[t,n]),je=(0,o.useCallback)((()=>Se("cancel")),[Se]),Pe=(0,o.useCallback)((()=>{"active"!==$.type?ce?de.onAccept({exitType:"click_outside_window_accept",selectInsertion:!0}):le?V(!0):Se("click_outside_window_cancel"):async function(e){const{state:t}=e,{currentUserSettingsStore:n}=q.default.state;if(n){const e=(0,Q.JS)(n).filter((e=>e.id===t.current.id));if(e.length>0&&U.Xy(t.current,e[0]))return void t.clear()}await W.confirmUserAction({message:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Are you sure you want to stop editing your favorite? Unsaved changes will be lost.",id:"ai.favoriteActions.cancelConfirmation"}),acceptLabel:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Discard changes",id:"ai.favoriteActions.cancelConfirmation.discardChanges"}),cancelLabel:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Go back",id:"ai.favoriteActions.cancelConfirmation.goBack"})})&&t.clear()}({state:$})}),[$,ce,de,Se,le]),Ae=(0,l.VK)((()=>(0,w.dU)()),[]);(0,o.useEffect)((()=>{function e(e){return!!(e instanceof Element&&(e.closest(`.${nn}`)||e.closest(`.${k.YPt}`)||e.closest(`.${k.p4m}`)||e.closest(`.${k.zov}`)))}function t(t){Ae||!e(t.target)&&e(t.relatedTarget)&&t.relatedTarget instanceof HTMLElement&&t.relatedTarget.focus()}function n(t){e(t.target)||("click"!==t.type&&"contextmenu"!==t.type||Pe(),Ae||(t.preventDefault(),t.stopPropagation()))}if(!D)return window.addEventListener("focus",t,!0),window.addEventListener("click",n,!0),window.addEventListener("contextmenu",n,!0),window.addEventListener("mousedown",n,!0),window.addEventListener("mouseup",n,!0),window.addEventListener("mouseover",n,!0),window.addEventListener("mouseout",n,!0),window.addEventListener("mouseenter",n,!0),window.addEventListener("mouseleave",n,!0),window.addEventListener("mousemove",n,!0),()=>{window.removeEventListener("focus",t,!0),window.removeEventListener("click",n,!0),window.removeEventListener("contextmenu",n,!0),window.removeEventListener("mousedown",n,!0),window.removeEventListener("mouseup",n,!0),window.removeEventListener("mouseover",n,!0),window.removeEventListener("mouseout",n,!0),window.removeEventListener("mouseenter",n,!0),window.removeEventListener("mouseleave",n,!0),window.removeEventListener("mousemove",n,!0)}}),[Pe,D,Ae]);const _e=(0,o.useCallback)((e=>{K(B),T(""),P.improveCompletion(n,e)}),[n,B,T]),Le=(0,o.useCallback)((()=>{switch(t.stage){case"initialPrompt":(0,L.sj)(),K(B),T(""),(0,v.Hh)({environment:n,inputValue:B,from:t.from,mode:J});break;case"initialPromptForAIBlock":h.HCf(n,{session_id:t.sessionId,inference_id:void 0,exit_type:"accept"}),(0,L.fz)(),K(B),T(""),(0,v.F0)({environment:n,inputValue:B,store:t.store});break;case"results":_e({type:"helpMeEdit",prompt:B});break;default:(0,f.t1)(t)}}),[B,J,t,n,_e,T]);(0,o.useEffect)((()=>{E&&(Z(!1),Le())}),[E,Le]);let Fe="insert";"results"===t.stage&&"cursor"===t.context.type?Fe="accept":ae&&(Fe="replace");const Ne=(0,l.VK)((()=>t?Zt({environment:n,intl:F,filter:B,state:t,from:t.from,favoriteEditingState:$,onUpdatePromptState:X,onImprove:_e,context:Y,completionResultInfo:{...de,onRetry:xe,onSubmit:Le,onCancel:je,defaultAction:Fe}}):[]),[$,Y,n,X,Le,_e,B,F,t,de,xe,je,Fe]),Be=Ne.length>0,Te=(0,o.useMemo)((()=>new j.Z),[]);(0,o.useEffect)((()=>{Te.setState({focus:{section:0,indexLocal:0,indexGlobal:0}})}),[B,Te]);const Ee=(0,l.VK)((()=>n.device.isPhone),[n]),Ze=(0,c.yK)((e=>({mainPopup:{borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,overflow:"hidden",isolation:"isolate"},menuPopup:{marginTop:4,marginBottom:4,borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,width:Ee?"100%":320,overflow:"hidden",isolation:"isolate"}})),[Ee]),De=(0,o.useRef)(null);let Re;"active"===$.type?Re=(0,R.jsx)("div",{style:Ze.menuPopup,ref:De,className:nn,children:(0,R.jsx)(he,{sessionId:t.sessionId,state:$,context:Y})}):Be&&(Re=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{style:Ze.menuPopup,ref:De,className:nn,children:(0,R.jsx)(Ot,{sections:Ne,onCloseParentMenu:Me,context:Y,menuListStore:Te})}),(0,R.jsx)(_.gl,{originRef:De,openState:t,isInputEmpty:!B})]}));const He=(0,o.useRef)(null),Ve=function(e){const{openState:t,undoRevision:n,redoRevision:i}=e,s=(0,a.O7)(),r=(0,g.useIntl)(),c=(0,l.VK)((()=>G.default.checkGate("ai_multi_level_undo")),[]),d=(0,o.useCallback)((()=>{n(),Ie(s,"undo")}),[s,n]),u=(0,o.useCallback)((()=>{i(),Ie(s,"redo")}),[s,i]);if("results"!==t.stage||!c)return be;const p=t.revisions.length,m=t.futureRevisions.length,f=p+m,v=p;return 1===f?be:{onUndo:p>1?d:void 0,onRedo:m>0?u:void 0,historyLabel:r.formatMessage(ke.historyLabel,{currentRevision:v.toString(),totalRevisions:f.toString()})}}({openState:t,undoRevision:ge,redoRevision:ve});return Ae?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(C.Z,{capture:!0,onEsc:Pe}),Re]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(C.Z,{capture:!0,onEsc:Pe}),Ee&&Re,(0,R.jsx)(_.RD,{originRef:He,openState:t}),(0,R.jsx)("div",{ref:He,className:nn,style:Ze.mainPopup,children:(0,R.jsx)(gt,{state:t,onDismiss:Pe,onCompletionRetry:xe,onCompletionStop:Ce,query:B,setQuery:T,onSubmit:Le,submitOnEnter:!Be&&!D,inputRef:z,temporaryListStore:re,favoriteEditingState:$,...Ve})}),!Ee&&Re,(0,R.jsx)(H,{open:D,onConfirmExit:je,onCancelExit:we})]})}var rn=n(63143);function an(e){window.__c={n:"AiEligibilityUpdater"};const t=(0,a.O7)(),n=(0,l.VK)((()=>"completionPopup"===I.default.state.type),[]),i=(0,u.D9)(n)&&!n,s=n?30*rn.C0:30*rn.hM,r=(0,l.VK)((()=>{var e;return null===(e=q.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]);return(0,o.useEffect)((()=>{async function e(){r&&await P.updateAiEligibility(t,r)}const n=setInterval((()=>{e()}),s);return i||e(),()=>{clearInterval(n)}}),[t,r,s,i]),null}},16859:(e,t,n)=>{n.d(t,{d:()=>_});var o=n(67294),i=n(480),s=n(5366),r=n(73063),a=n(53437),l=n(26388),c=n(935),d=n(24405),u=n(64275),p=n(81570),m=n(83065),f=n(82990),g=n(42922),v=n(64921),h=n(60458),y=n(1743),x=n(74194),C=n(16354),k=n(64369),w=n(42402),M=n(43250),S=n(18514),b=n(85893);function I(e){const{checked:t,onChange:n}=e;return(0,b.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,b.jsx)(h.Z,{checked:t,onClick:n,size:14}),(0,b.jsx)("div",{onClick:n,children:(0,b.jsx)(k.Z,{style:{cursor:"pointer"},isSmall:!0,children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Share this AI session with Notion",id:"completions.FeedbackPopup.shareWithNotion"})})})]})}function j(){window.__c={n:"OptInLearnMore"};const e=(0,d.yK)((e=>({container:{display:"flex",flexDirection:"row"},giftIcon:{width:16,height:16,fill:e.lightIconColor},message:{marginLeft:9,color:e.mediumTextColor,fontSize:12}})),[]);return(0,b.jsxs)("div",{style:e.container,children:[(0,p.T)(e.giftIcon),(0,b.jsx)("div",{style:e.message,children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"You’re sharing data with Notion for AI quality improvement. <aiTerms>Learn more</aiTerms>",id:"completions.OptInLearnMore.description",values:{aiTerms:e=>(0,b.jsx)(w.Z,{external:!0,href:(0,S.UY)("ai.dataSharingTerms"),children:e})}})})]})}function P(e){window.__c={n:"ShareDataPopup"};const{onSubmit:t}=e,n=(0,d.yK)((e=>({container:{width:300,display:"flex",flexDirection:"column",alignItems:"center",padding:19,position:"relative"},closeButtonContainer:{position:"absolute",top:10,right:10},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor},giftIcon:{width:24,height:24,fill:e.lightIconColor},terms:{color:e.mediumTextColor,textAlign:"center",fontSize:13},shareButton:{width:"100%",marginTop:17,paddingTop:7,paddingBottom:7},notNowButton:{color:e.mediumTextColor,fontSize:14,marginTop:15},title:{textAlign:"center",marginTop:9,marginBottom:8,fontWeight:f.Z.fontWeight.semibold}})),[]);return(0,b.jsxs)("div",{style:n.container,children:[(0,b.jsx)("div",{style:n.closeButtonContainer,children:(0,b.jsx)(v.Z,{onClick:()=>{t({optIn:!1})},style:n.closeButton,hoveredStyle:n.closeButtonHover,children:(0,u.D)(n.closeButtonIcon)})}),(0,p.T)(n.giftIcon),(0,b.jsx)("div",{style:n.title,children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Always share data to improve Notion AI?",id:"completions.ShareDataPopup.title"})}),(0,b.jsx)("div",{style:n.terms,children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Help Notion improve AI quality by automatically sharing data from your usage of AI powered features.{br}By continuing, you agree to <aiTerms>AI Data Sharing Terms</aiTerms>",id:"completions.ShareDataPopup.description",values:{br:(0,b.jsx)("br",{}),aiTerms:e=>(0,b.jsx)(w.Z,{external:!0,href:(0,S.UY)("ai.dataSharingTerms"),children:e})}})}),(0,b.jsx)(g.Z,{style:n.shareButton,onClick:()=>{t({optIn:!0})},children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Always share",id:"completions.ShareDataPopup.alwaysShareButton"})}),(0,b.jsx)(C.Z,{style:n.notNowButton,onClick:()=>{t({optIn:!1})},children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Not now",id:"completions.ShareDataPopup.notNowButton"})})]})}function A(e){window.__c={n:"FeedbackPopup"};const{state:t,onUpdate:n,onSubmit:a,onCancel:l,userOptIn:c}=e,d=(0,o.useCallback)((()=>{n({...t,shareWithNotion:!t.shareWithNotion})}),[t,n]),u=(0,o.useCallback)((()=>{a(t)}),[a,t]),p=(0,o.useCallback)((e=>{n({...t,userContent:e.target.value})}),[n,t]),f=(0,s.useIntl)(),g=(0,i.O7)(),v=!c;return(0,b.jsx)("div",{style:{padding:14,...g.device.isMobile?{width:"100%"}:{minWidth:400}},className:M.YOJ,children:(0,b.jsxs)(y.Z,{capture:!0,children:[(0,b.jsx)(x.Z,{value:t.userContent,onChange:p,onSubmit:e=>{e.stopPropagation(),u()},onCancel:l,focusInitial:!0,placeholder:f.formatMessage({id:"completions.FeedbackPopup.userCommentPlaceholder",defaultMessage:"How could the output be improved? (optional)"})}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:10},children:[v?(0,b.jsx)(I,{checked:t.shareWithNotion,onChange:d}):(0,b.jsx)(j,{}),(0,b.jsx)(r.Z,{icon:m._,onClick:u,ariaLabel:f.formatMessage({id:"completions.FeedbackPopup.submitButtonLabel",defaultMessage:"Submit feedback"}),isBlue:!0,iconStyle:{height:24,width:24},style:{height:20,width:20}})]})]})})}function _(e){window.__c={n:"FeedbackButtonWithPopup"};const{type:t,ariaLabel:n,onClick:d,feedbackState:u,onDismiss:p,onSubmit:m,onUpdate:f,showShareDataPopup:g,onDataShareSubmit:v,userOptIn:h,iconButtonStyles:y}=e,x=(0,i.O7)(),C=t===(null==u?void 0:u.type),k=(0,c.L)(t,C),w=(0,o.useCallback)((()=>d(t)),[d,t]),M=(0,b.jsx)(l.Z,{renderTooltip:()=>(0,b.jsx)("div",{children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Share feedback with Notion",id:"completions.CompletionMenuActionBar.feedbackTooltip"})}),placement:l.Z.Placement.Bottom,render:e=>(0,b.jsx)(r.Z,{onClick:w,icon:k,ariaLabel:n,style:{...y},...e})});return(0,b.jsx)(a.ZP,{origin:M,open:(null==u?void 0:u.type)===t,popupType:x.device.isMobile?a.kQ.SlideUp:a.kQ.Popup,onDismiss:p,render:()=>u?g?(0,b.jsx)(P,{onCancel:p,onSubmit:v}):(0,b.jsx)(A,{state:u,onSubmit:m,onUpdate:f,onCancel:p,userOptIn:h}):null})}},935:(e,t,n)=>{n.d(t,{L:()=>k,u:()=>w});var o=n(67294),i=n(480),s=n(86628),r=n(33676),a=n(97022),l=n(39986),c=n(10498),d=n(5366),u=n(50906),p=n(64964),m=n(39699),f=n(37181),g=n(80444),v=n(77080),h=n(35057),y=n(84254),x=n(16859),C=n(85893);function k(e,t){switch(e){case"thumbsup":return t?c.w:l.P;case"thumbsdown":return t?a.E:r.A}}function w(e){window.__c={n:"FeedbackButtons"};const{revision:t}=e,n=(0,d.useIntl)(),r=(0,i.O7)(),[a,l]=(0,o.useState)(void 0),[c,k]=(0,o.useState)(!1),w=(0,o.useRef)(null),M=(0,s.VK)((()=>v.default.checkGate("ai_data_sharing")),[]),S=(0,s.VK)((()=>g.default.state.currentUserSettingsStore),[]),b=(0,s.VK)((()=>{var e;const t=null==S||null===(e=S.getSettings())||void 0===e?void 0:e.seen_ai_data_share_prompt_at,n=!(0,h.mq)();return!Boolean(t)&&n}),[S]),I=(0,s.VK)((()=>{var e;return(null==S||null===(e=S.getSettings())||void 0===e?void 0:e.ai_data_share_opt_in)??false}),[S]),j=(0,o.useCallback)((()=>{p.oV({label:n.formatMessage({id:"completions.CompletionMenuFooter.showFeedbackThanksMessage",defaultMessage:"Thanks for submitting feedback!"})})}),[n]),P=(0,o.useCallback)((e=>{w.current=document.activeElement,l((t=>({userContent:"",shareWithNotion:true,...t,type:e})))}),[]),A=(0,o.useCallback)((e=>{e.shareWithNotion&&b&&M?k(!0):(j(),l(void 0)),y.submitFeedbackForRevision({...e,environment:r,revision:t,userOptIn:I})}),[t,r,I,b,M,j]),_=(0,o.useCallback)((e=>{e&&e.stopPropagation&&e.stopPropagation(),l(void 0),w.current&&w.current instanceof HTMLElement&&w.current.focus()}),[]),L=(0,o.useCallback)((e=>{const{optIn:t}=e;S&&(m.createAndCommit({userAction:"FeedbackButtons.aiDataShareOptIn",environment:r,userId:S.id,perform:e=>{f.d2({userSettingsStore:S,data:{ai_data_share_opt_in:t,seen_ai_data_share_prompt_at:Date.now()},transaction:e})}}),u.bd0(r,{user_opt_in:t}),t?p.oV({label:n.formatMessage({id:"completions.CompletionMenuFooter.dataShareThanks",defaultMessage:"Thank you for your help making Notion better!"})}):j(),k(!1),l(void 0))}),[n,S,r,j]);return t.hasFeedback&&!c?null:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(x.d,{type:"thumbsup",ariaLabel:n.formatMessage({id:"completions.CompletionMenuFooter.thumbsUp",defaultMessage:"Submit positive feedback"}),onClick:P,feedbackState:a,onDismiss:_,onSubmit:A,onUpdate:l,showShareDataPopup:c,onDataShareSubmit:L,userOptIn:I}),(0,C.jsx)(x.d,{type:"thumbsdown",ariaLabel:n.formatMessage({id:"completions.CompletionMenuFooter.thumbsDown",defaultMessage:"Submit negative feedback"}),onClick:P,feedbackState:a,onDismiss:_,onSubmit:A,onUpdate:l,showShareDataPopup:c,onDataShareSubmit:L,userOptIn:I})]})}},80671:(e,t,n)=>{n.d(t,{Cl:()=>l,Kj:()=>c,k2:()=>r,v5:()=>a});var o=n(4615),i=n(896),s=n(63423);function r(){s.Z.setState({open:!0,stage:"limit_reached",addOnUpgradeId:(0,o.ZP)(),tax:0})}function a(){s.Z.setState({open:!1})}function l(e){const t=s.Z.state;t.open&&s.Z.setState({...t,stage:"confirm_purchase",coupon:e&&!(0,i.$v)(e)?e:void 0})}function c(){s.Z.setState({open:!0,stage:"cancel_plan",addOnUpgradeId:(0,o.ZP)(),tax:0})}},39186:(e,t,n)=>{n.d(t,{G:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("backward",{viewBox:"0 0 24 24",svg:(0,i.jsx)("polygon",{points:"23,11 4.801,11 11.4,4.4 10,3 1,12 10,21 11.4,19.6 4.801,13 23,13 "})})},2585:(e,t,n)=>{n.d(t,{f:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},50780:(e,t,n)=>{n.d(t,{E:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("editPropertyType",{viewBox:"0 0 16 16 ",svg:(0,i.jsx)("path",{d:"M11.5615 4.84473L12.2998 4.11328C12.6689 3.74414 12.6826 3.34082 12.3545 3.00586L12.0879 2.73926C11.7529 2.4043 11.3428 2.43848 10.9736 2.79395L10.2354 3.52539L11.5615 4.84473ZM3.22168 13.1641L10.9053 5.4873L9.59277 4.16797L1.90918 11.8516L1.23926 13.4512C1.16406 13.6562 1.37598 13.875 1.57422 13.7998L3.22168 13.1641ZM3.92578 13.8066H14.1045C14.4736 13.8066 14.7744 13.499 14.7744 13.1367C14.7744 12.7676 14.4736 12.4668 14.1045 12.4668H5.27246L3.92578 13.8066Z"})})},81570:(e,t,n)=>{n.d(t,{T:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("giftOutline",{viewBox:"0 0 32 34",svg:(0,i.jsx)("path",{d:"M7.781 33.219h16.422c2.938 0 4.563-1.547 4.563-4.5v-9.594h.109c1.375-.297 2.14-1.406 2.14-3v-4.11c0-1.906-1.062-3.109-2.968-3.109H24.89c.828-.828 1.312-1.953 1.312-3.25 0-3.031-2.39-5.187-5.422-5.187-2.187 0-4 1.203-4.797 3.297C15.187 1.672 13.39.469 11.187.469c-3.016 0-5.422 2.156-5.422 5.187 0 1.297.484 2.422 1.328 3.25H3.937C2.11 8.906.97 10.11.97 12.016v4.109c0 1.594.75 2.703 2.125 3h.11v9.594c0 2.953 1.624 4.5 4.577 4.5zm6.922-24.313h-2.437c-2.454 0-3.891-1.39-3.891-3.11 0-1.718 1.25-2.718 2.969-2.718 1.86 0 3.36 1.406 3.36 3.719v2.11zm2.563 0v-2.11c0-2.312 1.5-3.718 3.359-3.718 1.719 0 2.969 1 2.969 2.719 0 1.719-1.422 3.11-3.89 3.11h-2.438zm-2.672 7.969H4.578c-.781 0-1.094-.328-1.094-1.11V12.36c0-.78.313-1.093 1.094-1.093h10.016v5.609zm2.781 0v-5.61h10.047c.781 0 1.078.313 1.078 1.094v3.407c0 .78-.297 1.109-1.078 1.109H17.375zm-2.781 14H7.75c-1.297 0-2.031-.734-2.031-2.031v-9.61h8.875v11.641zm2.781 0v-11.64h8.875v9.609c0 1.297-.734 2.031-2.031 2.031h-6.844z"})})},1230:(e,t,n)=>{n.d(t,{H:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("insertDown",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M9.55548 13.0343H14.2085C14.5315 13.0343 14.7951 13.2913 14.7951 13.6142C14.7951 13.9372 14.5315 14.1942 14.2085 14.1942H9.55548C9.23254 14.1942 8.9755 13.9372 8.9755 13.6142C8.9755 13.2913 9.23254 13.0343 9.55548 13.0343ZM1.21167 9.67959C1.21167 9.09961 1.52802 8.74371 2.0421 8.74371C2.55617 8.74371 2.87911 9.11279 2.87911 9.65982V10.7868C2.87911 10.945 2.96479 11.0373 3.12956 11.0373H4.70473V10.365C4.70473 9.818 5.26494 9.60709 5.68675 9.94322L7.56509 11.4525C7.84849 11.6766 7.84849 12.0786 7.56509 12.2961L5.68675 13.812C5.25176 14.1679 4.70473 13.9569 4.70473 13.3836V12.7047H2.93184C1.89051 12.7047 1.21167 12.0984 1.21167 11.057V9.67959ZM9.55548 9.58073H14.2085C14.5315 9.58073 14.7951 9.83777 14.7951 10.1607C14.7951 10.4837 14.5315 10.7407 14.2085 10.7407H9.55548C9.23254 10.7407 8.9755 10.4837 8.9755 10.1607C8.9755 9.83777 9.23254 9.58073 9.55548 9.58073ZM1.78506 6.12721H14.2085C14.5315 6.12721 14.7951 6.38425 14.7951 6.70719C14.7951 7.03014 14.5315 7.28717 14.2085 7.28717H1.78506C1.46211 7.28717 1.20508 7.03014 1.20508 6.70719C1.20508 6.38425 1.46211 6.12721 1.78506 6.12721ZM1.78506 2.68028H14.2085C14.5315 2.68028 14.7951 2.93073 14.7951 3.25367C14.7951 3.5832 14.5315 3.83365 14.2085 3.83365H1.78506C1.46211 3.83365 1.20508 3.5832 1.20508 3.25367C1.20508 2.93073 1.46211 2.68028 1.78506 2.68028Z"})})},38715:(e,t,n)=>{n.d(t,{N:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("save",{viewBox:"0 0 16 16",svg:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("path",{d:"M7.99316 10.8877C8.16406 10.8877 8.31445 10.833 8.47168 10.6758L10.7686 8.46094C10.8848 8.34473 10.9463 8.22168 10.9463 8.05762C10.9463 7.74316 10.6934 7.51074 10.3857 7.51074C10.2285 7.51074 10.0713 7.5791 9.96191 7.70215L8.99805 8.7207L8.56055 9.21973L8.62891 8.20801V1.11914C8.62891 0.78418 8.3418 0.49707 7.99316 0.49707C7.65137 0.49707 7.36426 0.78418 7.36426 1.11914V8.20801L7.43262 9.22656L6.98828 8.7207L6.03125 7.70215C5.92188 7.5791 5.75781 7.51074 5.60059 7.51074C5.29297 7.51074 5.04004 7.74316 5.04004 8.05762C5.04004 8.22168 5.1084 8.34473 5.22461 8.46094L7.52148 10.6758C7.67871 10.833 7.8291 10.8877 7.99316 10.8877ZM4.0625 15.3174H11.9307C13.4072 15.3174 14.1729 14.5586 14.1729 13.1025V6.36914C14.1729 4.91309 13.4072 4.1543 11.9307 4.1543H10.0781V5.49414H11.8486C12.4775 5.49414 12.833 5.82227 12.833 6.48535V12.9863C12.833 13.6494 12.4775 13.9775 11.8486 13.9775H4.14453C3.50879 13.9775 3.16016 13.6494 3.16016 12.9863V6.48535C3.16016 5.82227 3.50879 5.49414 4.14453 5.49414H5.92871V4.1543H4.0625C2.58594 4.1543 1.82031 4.91309 1.82031 6.36914V13.1025C1.82031 14.5586 2.58594 15.3174 4.0625 15.3174Z"})})})},83065:(e,t,n)=>{n.d(t,{_:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("sendArrow",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M9.79883 18.5894C14.6216 18.5894 18.5894 14.6216 18.5894 9.79883C18.5894 4.96777 14.6216 1 9.79053 1C4.95947 1 1 4.96777 1 9.79883C1 14.6216 4.96777 18.5894 9.79883 18.5894ZM9.79883 14.3062C9.20947 14.3062 8.76953 13.9077 8.76953 13.3433V9.69922L8.86914 8.00586L8.25488 8.84424L7.3916 9.81543C7.23389 10.0063 6.98486 10.1143 6.72754 10.1143C6.21289 10.1143 5.84766 9.75732 5.84766 9.25928C5.84766 8.99365 5.92236 8.79443 6.12158 8.58691L8.96045 5.61523C9.19287 5.35791 9.4585 5.2417 9.79883 5.2417C10.1309 5.2417 10.4048 5.36621 10.6372 5.61523L13.4761 8.58691C13.667 8.79443 13.75 8.99365 13.75 9.25928C13.75 9.75732 13.3848 10.1143 12.8618 10.1143C12.6128 10.1143 12.3638 10.0063 12.2061 9.81543L11.3428 8.86914L10.7202 7.99756L10.8281 9.69922V13.3433C10.8281 13.9077 10.3799 14.3062 9.79883 14.3062Z"})})},91427:(e,t,n)=>{n.d(t,{e:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("star",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.2627 14.7637C3.58398 15.0098 3.98047 14.9277 4.44531 14.5928L8 11.9814L11.5547 14.5928C12.0195 14.9277 12.4229 15.0098 12.7441 14.7637C13.0586 14.5244 13.127 14.1279 12.9424 13.5879L11.541 9.41113L15.1299 6.83398C15.5879 6.50586 15.7861 6.14355 15.6562 5.76074C15.5264 5.38477 15.1641 5.2002 14.5967 5.20703L10.1943 5.23438L8.85449 1.03711C8.68359 0.490234 8.40332 0.196289 8 0.196289C7.60352 0.196289 7.32324 0.490234 7.14551 1.03711L5.80566 5.23438L1.40332 5.20703C0.835938 5.2002 0.480469 5.38477 0.350586 5.76074C0.220703 6.14355 0.412109 6.50586 0.876953 6.83398L4.46582 9.41113L3.05762 13.5879C2.87305 14.1279 2.94141 14.5244 3.2627 14.7637ZM4.45898 13.1162C4.45215 13.1025 4.45215 13.0957 4.45898 13.0615L5.75781 9.39062C5.87402 9.05566 5.83301 8.84375 5.52539 8.63867L2.3125 6.4375C2.28516 6.42383 2.27148 6.41016 2.27832 6.38965C2.29199 6.37598 2.30566 6.36914 2.33984 6.36914L6.22949 6.45801C6.58496 6.47168 6.7627 6.35547 6.86523 6.01367L7.96582 2.28125C7.97266 2.24023 7.98633 2.2334 8 2.2334C8.02051 2.2334 8.02734 2.24023 8.04102 2.28125L9.13477 6.01367C9.2373 6.35547 9.42188 6.47168 9.77051 6.45801L13.6602 6.36914C13.7012 6.36914 13.7148 6.37598 13.7217 6.38965C13.7285 6.41016 13.7217 6.41699 13.6875 6.4375L10.4814 8.63867C10.167 8.85059 10.126 9.05566 10.2422 9.39062L11.541 13.0615C11.5547 13.0957 11.5547 13.1025 11.541 13.1162C11.5273 13.1367 11.5137 13.123 11.4863 13.1094L8.40332 10.7305C8.12305 10.5117 7.87695 10.5117 7.60352 10.7305L4.52051 13.1094C4.49316 13.123 4.47266 13.1367 4.45898 13.1162Z"})})},33676:(e,t,n)=>{n.d(t,{A:()=>r});n(67294);var o=n(45238),i=n(39986),s=n(85893);const r=(0,o.I)("thumbDown",{viewBox:"0 0 18 19",svg:(0,s.jsx)("g",{transform:"rotate(180 9 9.5)",children:i.f})})},97022:(e,t,n)=>{n.d(t,{E:()=>r});n(67294);var o=n(45238),i=n(10498),s=n(85893);const r=(0,o.I)("thumbDownFilled",{viewBox:"0 0 16 18",svg:(0,s.jsx)("g",{transform:"rotate(180 8 9)",children:i.O})})},39986:(e,t,n)=>{n.d(t,{P:()=>s,f:()=>i});n(67294);var o=n(45238);const i=(0,n(85893).jsx)("path",{d:"M0.539062 12.3125C0.539062 15.0547 2.29688 17.3125 4.54688 17.3125H7.11719C8.17188 17.8516 9.42188 18.1641 10.8047 18.1641H11.8906C12.9062 18.1641 13.7734 18.1016 14.3359 17.9609C15.4766 17.6797 16.1953 16.8672 16.1953 15.8516C16.1953 15.6641 16.1719 15.5 16.1172 15.3281C16.6562 14.9141 16.9609 14.2969 16.9609 13.6328C16.9609 13.3203 16.8984 13.0078 16.7891 12.7578C17.1484 12.375 17.3594 11.8203 17.3594 11.25C17.3594 10.875 17.2656 10.4922 17.1094 10.2031C17.3281 9.86719 17.4531 9.42188 17.4531 8.9375C17.4531 7.69531 16.5078 6.73438 15.2734 6.73438H12.3672C12.1953 6.73438 12.0859 6.65625 12.0938 6.50781C12.1328 5.69531 13.4062 3.75781 13.4062 2.17188C13.4062 1.01562 12.5859 0.171875 11.4688 0.171875C10.6484 0.171875 10.0859 0.59375 9.55469 1.61719C8.58594 3.48438 7.40625 5.125 5.65625 7.28125H4.25C2.14844 7.28125 0.539062 9.52344 0.539062 12.3125ZM5.375 12.25C5.375 10.5938 5.75 9.53125 6.80469 8.11719C7.99219 6.53125 9.625 4.63281 10.8125 2.27344C11.0625 1.77344 11.2344 1.64844 11.4844 1.64844C11.7891 1.64844 11.9844 1.86719 11.9844 2.25C11.9844 3.42188 10.6641 5.35156 10.6641 6.61719C10.6641 7.55469 11.4219 8.15625 12.4375 8.15625H15.2422C15.7031 8.15625 16.0391 8.5 16.0391 8.95312C16.0391 9.28125 15.9297 9.5 15.6562 9.76562C15.4609 9.96875 15.4375 10.25 15.6094 10.4453C15.8359 10.7734 15.9375 10.9844 15.9375 11.25C15.9375 11.5781 15.7812 11.8516 15.4609 12.0938C15.2031 12.2812 15.1094 12.5859 15.2656 12.8828C15.4297 13.2109 15.5156 13.3672 15.5156 13.6172C15.5156 14 15.2734 14.2891 14.7812 14.5469C14.5312 14.6875 14.4609 14.9531 14.5703 15.1875C14.7344 15.5938 14.7578 15.6641 14.7578 15.8438C14.7578 16.1797 14.5078 16.4531 13.9766 16.5859C13.5156 16.7031 12.7812 16.75 11.8203 16.7422L10.8125 16.7344C7.57031 16.7031 5.375 14.8828 5.375 12.25ZM1.9375 12.3125C1.9375 10.3281 2.96094 8.73438 4.14062 8.6875C4.34375 8.6875 4.55469 8.6875 4.75781 8.6875C4.20312 9.76562 3.95312 10.8984 3.95312 12.25C3.95312 13.6875 4.46094 14.9531 5.375 15.9453C5.07812 15.9453 4.76562 15.9375 4.46875 15.9375C3.10156 15.8906 1.9375 14.2812 1.9375 12.3125Z"}),s=(0,o.I)("thumbUp",{viewBox:"0 0 18 19",svg:i})},10498:(e,t,n)=>{n.d(t,{O:()=>i,w:()=>s});n(67294);var o=n(45238);const i=(0,n(85893).jsx)("path",{d:"M4 12.1875C3.99219 15.1641 6.34375 17.4297 10.0859 17.4375H11.1719C12.1953 17.4375 12.9766 17.3594 13.4297 17.2422C14.1016 17.0781 14.7031 16.6562 14.7031 15.8828C14.7031 15.5859 14.625 15.3594 14.5312 15.1875C14.4766 15.1016 14.4922 15.0234 14.5703 14.9922C15.0859 14.7578 15.4766 14.2812 15.4766 13.6562C15.4766 13.2969 15.375 12.9766 15.2031 12.75C15.125 12.6406 15.1406 12.5469 15.2656 12.4766C15.625 12.25 15.875 11.7891 15.875 11.2656C15.875 10.8828 15.7578 10.4844 15.5547 10.2812C15.4453 10.1797 15.4609 10.1094 15.5781 10.0156C15.8281 9.78906 15.9844 9.41406 15.9844 8.96094C15.9844 8.15625 15.3516 7.5 14.5234 7.5H11.7031C11.0234 7.5 10.5781 7.15625 10.5781 6.60156C10.5781 5.54688 11.9141 3.57812 11.9141 2.14844C11.9141 1.375 11.4219 0.90625 10.75 0.90625C10.1641 0.90625 9.85938 1.28906 9.53125 1.9375C8.33594 4.24219 6.75781 6.11719 5.54688 7.72656C4.49219 9.11719 4.00781 10.3125 4 12.1875ZM0.015625 12.25C0.015625 14.6719 1.52344 16.6719 3.53125 16.6719H4.89062C3.47656 15.5938 2.85156 13.9922 2.86719 12.1719C2.875 10.2031 3.57812 8.77344 4.32031 7.79688H3.23438C1.41406 7.79688 0.015625 9.75 0.015625 12.25Z"}),s=(0,o.I)("thumbUpFilled",{viewBox:"0 0 16 18",svg:i})},40591:e=>{e.exports=function(e,t,n){var o=(n=n||{}).marker||":",i=o.charCodeAt(0),s=o.length,r=n.validate||function(e){return e.trim().split(" ",2)[0]===t},a=n.render||function(e,n,o,i,s){return 1===e[n].nesting&&e[n].attrJoin("class",t),s.renderToken(e,n,o,i,s)};e.block.ruler.before("fence","container_"+t,(function(e,n,a,l){var c,d,u,p,m,f,g,v,h=!1,y=e.bMarks[n]+e.tShift[n],x=e.eMarks[n];if(i!==e.src.charCodeAt(y))return!1;for(c=y+1;c<=x&&o[(c-y)%s]===e.src[c];c++);if((u=Math.floor((c-y)/s))<3)return!1;if(c-=(c-y)%s,p=e.src.slice(y,c),m=e.src.slice(c,x),!r(m,p))return!1;if(l)return!0;for(d=n;!(++d>=a)&&!((y=e.bMarks[d]+e.tShift[d])<(x=e.eMarks[d])&&e.sCount[d]<e.blkIndent);)if(i===e.src.charCodeAt(y)&&!(e.sCount[d]-e.blkIndent>=4)){for(c=y+1;c<=x&&o[(c-y)%s]===e.src[c];c++);if(!(Math.floor((c-y)/s)<u||(c-=(c-y)%s,(c=e.skipSpaces(c))<x))){h=!0;break}}return g=e.parentType,v=e.lineMax,e.parentType="container",e.lineMax=d,(f=e.push("container_"+t+"_open","div",1)).markup=p,f.block=!0,f.info=m,f.map=[n,d],e.md.block.tokenize(e,n+1,d),(f=e.push("container_"+t+"_close","div",-1)).markup=e.src.slice(y,c),f.block=!0,e.parentType=g,e.lineMax=v,e.line=d+(h?1:0),!0}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules["container_"+t+"_open"]=a,e.renderer.rules["container_"+t+"_close"]=a}}}]);