"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8319],{33338:(e,t,i)=>{i.d(t,{Z:()=>a});i(67294);var n=i(480),s=i(24405),o=i(42853),r=i(64921),l=i(85893);function a(e){window.__c={n:"CollectionViewFilterPill"};const{icon:t,title:i,on:a,hasDiff:h,wrapStyle:p,innerStyle:u,hideChevron:m}=e,c=(0,s.Fg)(),g=(0,n.O7)();return(0,l.jsxs)("div",{style:{borderRadius:14,marginRight:6,display:"inline-flex",...h&&{position:"relative"},...p},children:[(0,l.jsxs)(r.Z,{disabled:e.disabled,style:d(Boolean(a),c,u,g.device.isMobile),hoveredStyle:a?{background:c.outlineBlueButtonHoveredBackground}:void 0,pressedStyle:a?{background:c.outlineBlueButtonPressedBackground}:void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[t,i,!m&&(0,o.i)({width:10,marginLeft:4,marginTop:1,fill:a?c.blueColor:c.lightIconColor})]}),h&&(0,l.jsx)("div",{style:{position:"absolute",top:-2,right:-2,background:"dark"===c.mode?c.accentColors.orange[500]:c.accentColors.orange[300],border:`1px solid ${c.contentBackground}`,width:9,height:9,borderRadius:9}})]})}function d(e,t,i,n){return{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:n?28:24,lineHeight:n?"28px":"24px",padding:"0 8px",border:`1px solid ${t.outlineButtonBorder}`,color:t.mediumTextColor,...e&&{color:t.blueColor,border:`1px solid ${t.filterPillBorder}`,background:t.filterPillBackground},...i}}},255:(e,t,i)=>{i.d(t,{Z:()=>a});i(67294);var n=i(83355),s=i(53465),o=i(73063),r=i(85893);class l extends n.Z{constructor(){super(...arguments),this.styles={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}}}renderComponent(){const{onClick:e,disabled:t}=this.props,i=this.styles,{device:n}=this.environment,l=n.isMobile?{...i.removeFilterButton,...i.removeFilterButtonMobile}:i.removeFilterButton;return(0,r.jsx)(o.Z,{icon:s.X,onClick:e,disabled:t,disableBackground:!0,style:l})}}l.displayName="MenuItemRemoveButton";const a=l},8319:(e,t,i)=>{i.d(t,{z:()=>L,Z:()=>A});var n=i(67294),s=i(83355),o=i(47453),r=i(72126),l=i(97880),a=i(5366),d=i(75024),h=i(49085);class p extends h.default{getInitialState(){return{isMenuOpen:!1,inputTemporaryValue:"",indexToReplace:void 0,popupOriginRect:void 0}}}const u=p;var m=i(33338),c=i(42922),g=i(52275),M=i(89728),y=i(53437),b=i(72495),v=i(75689),x=i(91642),C=i(68626),S=i(91155),k=i(87279),T=i(29798),I=i(72087),f=i(78140),j=i(32163),B=i(43765),F=i(40721),R=i(77137),Z=i(47082),O=i(85893);class w extends s.Z{constructor(){super(...arguments),this.storeTypes={requestStore:I.Z,menuListStore:T.Z},this.renderRequest=(e,t,i)=>{const{labelText:n,value:s}=this.props,{menuListStore:o}=this.stores,r=e=>(0,O.jsx)(b.Z,{...e,title:n.resultSectionTitle,loading:!i});if(e)return C.log({level:"error",from:n.componentDebugName,type:"requestFailed",error:(0,S.Ui)(e),data:{miscDataToConvertToString:{query:s}}}),(0,O.jsx)(r,{children:(0,O.jsx)(B.Z,{title:(0,O.jsx)(a.FormattedMessage,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!t)return(0,O.jsx)(r,{children:(0,O.jsx)(B.Z,{title:(0,O.jsx)(a.FormattedMessage,{defaultMessage:"Loadingâ€¦",id:"search.inputMenu.loading.message"})})});if(t&&0===t.length)return(0,O.jsx)(r,{children:(0,O.jsx)(B.Z,{title:(0,O.jsx)(a.FormattedMessage,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})})});const l={key:"results",items:t.map(this.getResultMenuItem),render:r};return(0,O.jsx)(j.Z,{type:j.i.Vertical,store:o,initialFocus:0,sections:[l]})},this.handleMenuInputRemoveLast=()=>{const{items:e,onRemove:t}=this.props,i=r.Z$(e);i&&t(i)},this.getResultMenuItem=e=>{const{renderResultMenuItem:t,onConfirm:i}=this.props;return{key:e,action:()=>i(e),render:i=>t(e,i)}},this.styles={input:{marginTop:8,marginLeft:8,marginRight:8,boxSizing:"border-box",width:"auto"},menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}}}renderComponent(){const{value:e,items:t,performRequest:i}=this.props,{requestStore:n}=this.stores,s={query:e,current:t};return(0,O.jsx)(f.Z,{...this.getMenuProps(),children:(0,O.jsx)(R.Z,{debounce:100,requestStore:n,request:s,performRequest:i,render:this.renderRequest})})}renderTokenInput(){const{labelText:e,value:t,items:i,disabled:n,onChange:s,renderToken:o,onRemove:r,onClear:l}=this.props,a=i.map((e=>o(e,{onRemove:()=>r(e)})));return(0,O.jsx)(Z.Z,{focus:!this.isMobile()||void 0,focusAfterAnimation:!0,format:Z.Z.Format.FilterValue,tokens:a,placeholder:e.tokenInputPlaceholder,onRemoveLastToken:this.handleMenuInputRemoveLast,onClearButtonClick:l,value:t,onChange:s,showClearButton:!0,disabled:Boolean(n),style:this.styles.inputMenu})}getMenuProps(){const{onDismiss:e,labelText:t}=this.props,i=this.styles;if(this.isMobile()){return{menuType:k.og.Modal,title:t.title,right:(0,O.jsx)(F.DoneMenuText,{}),onClickRight:e,header:this.renderTokenInput()}}return{menuType:k.og.Popup,onClickOutside:e,header:this.renderTokenInput(),...i.menu}}isMobile(){const{device:e}=this.environment;return e.isMobile}}w.displayName="SearchTokenInputMenu";const P=w;let L=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});class D extends s.Z{constructor(){super(...arguments),this.animationFrame=void 0,this.origin=n.createRef(),this.storeTypes={componentStore:u},this.renderMobileFilterSummary=e=>{const{title:t,items:i,renderItemForSummary:s}=this.props,{disableFilters:o}=e,r=this.styles,l={...d.mK,...r.summary},a=i.length-1,h=(0,O.jsx)("ul",{style:l,children:i.map(((e,t)=>(0,O.jsx)("li",{style:r.summaryItem,children:(0,O.jsxs)(n.Fragment,{children:[s(e),t!==a&&","," "]})},e)))});return(0,O.jsx)(v.Z,{disabled:o,onClick:this.handleMenuOpenMobile,onClickClear:this.clearItems,label:t,title:h})},this.renderMenu=()=>{const{renderToken:e,renderFooter:t,allowApplyBatchSelection:i}=this.props,{componentStore:{state:n}}=this.stores;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(P,{...this.props,value:n.inputTemporaryValue,onChange:this.handleMenuInputChange,onDismiss:this.handleMenuClose,onConfirm:this.handleItemConfirm,onClear:()=>{this.handleClearTemporary(),this.clearItems()},onRemove:this.handleFilterRemove,renderToken:e}),t&&(0,O.jsxs)(b.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"},children:[(0,O.jsx)(M.Z,{onClick:()=>{this.clearItems()},children:(0,O.jsx)(a.FormattedMessage,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),i&&(0,O.jsx)(c.Z,{onClick:()=>{this.handleMenuClose("applyButton")},children:(0,O.jsx)(a.FormattedMessage,{id:"searchTokenFilter.applyButton",defaultMessage:"Apply"})})]})]})},this.handleMenuOpen=e=>{this.scheduleMeasurement(void 0,(t=>({...t,isMenuOpen:!0,indexToReplace:e})))},this.handleMenuOpenMobile=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,isMenuOpen:!0})},this.handleMenuClose=e=>{const{onMenuDismiss:t}=this.props,{componentStore:i}=this.stores;this.clearInput(),i.setState({...i.state,isMenuOpen:!1,indexToReplace:void 0}),t&&t(e)},this.handleClearTemporary=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,inputTemporaryValue:""})},this.handleItemConfirm=e=>{const{items:t}=this.props,{componentStore:i}=this.stores,{indexToReplace:n}=i.state;"number"==typeof n&&n<t.length?this.replaceItem(n,e):t.includes(e)&&D.Mode.Pill?this.removeItem(e):this.addItem(e),this.props.keepInputOnItemConfirm||this.clearInput()},this.handleFilterRemove=e=>{this.removeItem(e)},this.handleMenuInputChange=e=>{const{componentStore:t}=this.stores,{target:i}=e;t.setState({...t.state,inputTemporaryValue:String(i.value)})},this.scheduleMeasurement=(e,t)=>{this.animationFrame=requestAnimationFrame(this.measureOriginRect(t))},this.measureOriginRect=e=>t=>{const{componentStore:i}=this.stores;if(!this.origin)return;if(!this.origin.current)return;const n=e?e(i.state):i.state;i.setState({...n,popupOriginRect:this.origin.current.getBoundingClientRect()})},this.isMenuOpen=()=>{const{componentStore:{state:e}}=this.stores;return e.isMenuOpen},this.removeItem=e=>{const{items:t,onChange:i}=this.props;i(t.filter((t=>t!==e)))},this.clearItems=()=>{const{onChange:e}=this.props;e([])},this.replaceItem=(e,t)=>{const{items:i,onChange:n}=this.props;n(i.slice(0,e).concat(t,i.slice(e+1)))},this.clearInput=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,inputTemporaryValue:"",indexToReplace:void 0})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:d.yv(this.environment,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===this.props.mode?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}didMount(){window.addEventListener("resize",this.scheduleMeasurement)}willUnmount(){window.removeEventListener("resize",this.scheduleMeasurement),this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0)}didUpdate(e){(e.items.length!==this.props.items.length||e.mode!==this.props.mode)&&this.scheduleMeasurement()}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t,disabled:i}=this.props,{componentStore:{state:n}}=this.stores,s=i||n.isMenuOpen;let o;const r=(()=>e===D.Mode.Section?(o=t,this.renderSectionOrigin()):e===D.Mode.Button?this.renderButtonOrigin():e===D.Mode.Pill?this.renderPillOrigin():void(0,l.t1)(e))();return(0,O.jsxs)(x.Z,{title:o,marginAfter:e===D.Mode.Section,style:this.styles.sectionMenuItem,children:[e!==D.Mode.Pill&&this.renderFilters({disableFilters:s,showLabel:!1}),r,(0,O.jsx)(y.ZP,{popupType:y.ZP.PopupType.Popup,placementToOrigin:y.ZP.Placement.Bottom,alignmentToOrigin:y.ZP.Alignment.Start,open:this.isMenuOpen(),originRect:n.popupOriginRect,render:()=>this.renderMenu(),onDismiss:this.handleMenuClose,keepFocus:!0,preventScaleTransition:!0})]})}renderButtonOrigin(){const{icon:e,title:t,disabled:i,focused:n}=this.props,s=this.styles,o=this.getThemeColors(),r={...s.menuItem,...o.buttonMenuItem};return(0,O.jsx)("div",{ref:this.origin,style:s.menuItemWrapper,children:(0,O.jsx)(g.Z,{disabled:i||this.isMenuOpen(),icon:e(s.icon),title:t,focused:n,onClick:e=>this.handleMenuOpen(),style:r})})}renderPillOrigin(){const{icon:e,title:t,disabled:i,iconStyles:n}=this.props,s=this.styles,o=this.props.mode===L.Pill&&this.props.hasItemsSelected;return(0,O.jsx)("div",{ref:this.origin,style:s.menuItemWrapper,children:(0,O.jsx)(m.Z,{on:o,icon:e({...s.icon,...n}),title:(0,O.jsx)("span",{children:t}),onClick:e=>this.handleMenuOpen(),wrapStyle:{opacity:i?.4:1}})})}renderSectionOrigin(){const{addItemLabel:e,disabled:t}=this.props,i=this.styles,s=this.getThemeColors();return(0,O.jsxs)(n.Fragment,{children:[(0,O.jsx)("div",{ref:this.origin,style:i.menuItemWrapper}),(0,O.jsx)(g.Z,{disabled:t||this.isMenuOpen(),icon:(0,o.R)(i.iconSmall),title:e,focused:!1,onClick:e=>this.handleMenuOpen(),style:{...i.appendListItemButton,...s.appendListItemButton}})]})}renderMobile(e){const{disabled:t}=this.props,i=t||this.isMenuOpen(),n=e===D.Mode.Section?this.renderMobileFilterSummary({disableFilters:i}):this.renderMobileButtonOrigin({disableFilters:i});return(0,O.jsx)(y.ZP,{popupType:y.ZP.PopupType.SlideUp,open:this.isMenuOpen(),origin:n,render:this.renderMenu,onDismiss:this.handleMenuClose,keepFocus:!0})}renderMobileButtonOrigin(e){const{icon:t,title:i}=this.props,n=this.styles;return(0,O.jsx)(g.Z,{disabled:e.disableFilters,focused:!1,icon:t({...n.icon}),title:i,onClick:e=>this.handleMenuOpenMobile()})}renderFilters(e){const{items:t,renderFilter:i}=this.props,{device:n}=this.environment,s=t.map(((t,s)=>(0,O.jsx)("li",{children:i(t,{disabled:e.disableFilters,onRemove:()=>this.handleFilterRemove(t),onClick:()=>n.isMobile?this.handleMenuOpenMobile():this.handleMenuOpen(s)})},`${t}_${s}`)));return(0,O.jsx)("ul",{style:d.mK,children:s})}addItem(e){const{items:t,onChange:i}=this.props,n=t.concat(e);i(r.jj(n))}getThemeColors(){return{buttonMenuItem:{color:this.theme.mediumTextColor},appendListItemButton:{color:this.theme.lightTextColor}}}}D.displayName="SearchTokenFilter",D.Mode=L;const A=D},75689:(e,t,i)=>{i.d(t,{Z:()=>h});i(67294);var n=i(83355),s=i(82990),o=i(52275),r=i(24006),l=i(255),a=i(85893);class d extends n.Z{constructor(){super(...arguments),this.styles={menuItem:{background:void 0,minHeight:void 0,fontSize:this.environment.device.isMobile?s.Z.fontSize.UISmall.mobile:s.Z.fontSize.UIRegular.desktop,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}renderComponent(){const{disabled:e,label:t,title:i,onClick:n,isToggle:s,...r}=this.props,l=this.getThemeColors(),d=this.styles,h=(0,a.jsx)("span",{style:l.menuItemLabel,children:t});return(0,a.jsx)(o.Z,{focused:!1,...r,inline:s,disabled:e,icon:h,title:i,right:this.renderRight(),onClick:n,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:d.menuItem,desktopIconStyle:d.menuItemLabel})}renderRight(){const{disabled:e}=this.props,t=this.styles.rightWrapper;return this.props.isToggle?(0,a.jsx)("div",{style:t,children:(0,a.jsx)(r.Z,{on:this.props.isToggleActive,onClick:this.props.onClick})}):(0,a.jsx)(l.Z,{disabled:e,onClick:this.props.onClickClear})}getThemeColors(){return{menuItemLabel:{color:this.theme.lightTextColor}}}}d.displayName="SearchFilterSummaryMenuItem";const h=d},91642:(e,t,i)=>{i.d(t,{Z:()=>l});i(67294);var n=i(83355),s=i(72495),o=i(85893);class r extends n.Z{constructor(){super(...arguments),this.styles={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}}}renderComponent(){const{title:e,marginAfter:t,desktopStyle:i,desktopTitleStyle:n,...r}=this.props,l=this.styles,a=(t||i)&&{...t&&l.marginAfter,...i},d=n?{...l.desktopTitleStyle,...n}:l.desktopTitleStyle;return(0,o.jsx)(s.Z,{isTitleUppercase:!0,disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:a,desktopTitleStyle:d,shouldShowBottomDivider:!1,title:e,style:r.style,...r})}}r.displayName="SearchSectionMenuItem";const l=r}}]);