"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[1125],{89466:(e,t,o)=>{o.d(t,{Z:()=>Ze});var i=o(67294),r=o(83355),n=o(1302),a=o(480),s=o(53150),l=o(6740),d=o(86628),c=o(24405),u=o(49085),m=o(75071),p=o(15157),g=o(69246),h=o(97880),S=o(82990),y=o(5366),f=o(89858),b=o(24677),v=o(37190),x=o(89971),T=o(59389),I=o(98104),w=o(39699),j=o(43250),C=o(92639),M=o(87279),B=o(98742),k=o(50659);var P=o(8848),Z=o(3338),O=o(50906),L=o(23063),V=o(31945),_=o(55118),A=o(26388),K=o(5210),F=o(85893);const R=function(e){window.__c={n:"TeamCaratSwitcher"};const{outlinerToggleButtonStore:t,outlinerTeamOnToggle:o,style:i}=e,r=(0,c.Fg)(),n=(0,c.yK)((()=>({caratContainer:{minHeight:20,minWidth:20,...i||{}}})),[i]),a=(0,d.VK)((()=>t.state.isHidden),[t]);return(0,F.jsx)("div",{style:n.caratContainer,children:(0,F.jsx)(K.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:!a,color:r.lightIconColor,onClick:o,disabled:!0})})};var D=o(69814),H=(o(57658),o(19889)),N=o(64684),E=o(95697),z=o(90106),U=o(29302);function W(e){window.__c={n:"TeamMembersList"};const t=(0,a.O7)(),[o,r]=(0,i.useState)(!1),{teamStore:n,spaceStore:s,teamOutlinerType:l}=e,{isReady:u,allMembersUserIds:m,userStores:p}=(0,d.VK)((()=>{const e=(0,E.tO)({teamStore:n,spaceStore:s}),t=e.map((e=>z.U6.createChildStore(n,{table:H.KJ,id:e}))),o=t&&t.every((e=>e.isReady()));return{allMembersUserIds:e,userStores:t,isReady:o}}),[n,s]),{ownerStores:g,memberStores:h}=(0,d.VK)((()=>{const e=[],t=[];if(!n.isReady())return{ownerStores:e,memberStores:t};for(const o of p){(null==o?void 0:o.id)&&((0,N.pd)({membership:n.getMembers()},null==o?void 0:o.id)?e.push(o):t.push(o))}return{ownerStores:e,memberStores:t}}),[n,p]),S=(0,c.yK)((e=>({membershipSection:{display:"flex",flexDirection:"row",fontSize:14,alignItems:"center",whiteSpace:"nowrap"},members:{display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginRight:10,marginLeft:5},avatar:{width:23,height:23,borderRadius:23,marginRight:-5,position:"relative"},teamMemberTooltipSectionLabel:{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"},teamMemberList:{paddingTop:3},moreMessage:{marginLeft:2,marginTop:4,color:e.mediumInvertedTextColor}})),[]);let f=0,b=p;return b=[...g,...h],p.length>5&&(f=p.length-5,b=b.slice(0,5)),u?(0,F.jsx)("div",{style:S.membershipSection,children:(0,F.jsx)(A.Z,{placement:A.Z.Placement.Bottom,disableTooltip:m.length<=0,render:t=>{return(0,F.jsxs)("span",{...t,style:e.renderStyle,children:[m.length," ",(o=m.length,o>1?(0,F.jsx)(y.FormattedMessage,{defaultMessage:"members",id:"teamBrowser.teamCard.MembershipPlural"}):(0,F.jsx)(y.FormattedMessage,{defaultMessage:"member",id:"teamBrowser.teamCard.Membership"}))]});var o},renderTooltip:e=>(o||(r(!0),O.v2V(t,{teamStore:n,outliner_type:l})),(0,F.jsx)("div",{...e,children:(0,F.jsxs)("div",{style:{marginBottom:4},children:[b.map((e=>(0,F.jsx)(U.Z,{style:S.teamMemberList,userStore:e,avatarSize:18},e.id))),f>0&&(0,F.jsx)("div",{style:S.moreMessage,children:(0,F.jsx)(y.FormattedMessage,{id:"teamMembersList.tooltip.overflowMessage",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:f}})})]})}))})}):null}var G=o(93686),J=o(12534),Y=o(35026),Q=o(75024),q=o(71064),$=o(80444);var X=o(43914),ee=o(77907),te=o(3418),oe=o(42185),ie=o(33052),re=o(35817),ne=o(14720),ae=o(64921),se=o(68785),le=o(61766),de=o(37181),ce=o(28451),ue=o(81415),me=o(74263);function pe(e){let{teamId:t,origin:o}=e;window.__c={n:"TeamAddAppTemplateTooltip"};const r=(0,a.O7)(),[n,s]=(0,i.useState)(!1),l=(0,c.yK)((()=>({tooltip:{width:240}})),[]);(0,i.useEffect)((()=>{if(!o)return;const{current:e}=o;if(!e)return;const t="IntersectionObserver"in window?new IntersectionObserver((e=>{let[t]=e;return s(t.isIntersecting)}),{threshold:1}):void 0;return null==t||t.observe(e),()=>null==t?void 0:t.unobserve(e)}),[o]);const d=(0,i.useCallback)((()=>{me.Z.setState({hasShownTooltip:!0,teamId:t}),O.Khd(r,{from:"team_add_app_template"})}),[r,t]),u=(0,i.useCallback)((()=>de.$n({environment:r,teamId:t})),[r,t]);return n?(0,F.jsx)(ce.P,{calloutId:"team_add_app_template_tooltip",onShow:d,children:(0,F.jsx)(ue.U,{origin:o,placementToOrigin:"right",header:(0,F.jsx)(y.FormattedMessage,{id:"teamAddAppTemplateTooltip.header",defaultMessage:"Add templates to your teamspace"}),content:(0,F.jsx)(y.FormattedMessage,{id:"teamAddAppTemplateTooltip.content",defaultMessage:"Get started with projects, docs, wiki, and more"}),onCloseClick:()=>u(),shouldDismissUponOutsideClick:!1,pointerPosition:"0%",pointerLength:24,style:l.tooltip})}):null}function ge(e){const t=(0,a.O7)();return(0,d.VK)((()=>(0,E.dY)({environment:t,teamId:e})),[t,e])}function he(e){window.__c={n:"OutlinerTeamToggleAddPageButton"};const{teamStore:t}=e,o=(0,y.useIntl)(),r=(0,d.qz)(void 0,le.Z),n=(0,i.useRef)(null),s=ge(t.id),l=o.formatMessage({id:"sidebar.addAPageOrTemplateButtonTeamToggle.tooltip",defaultMessage:"Add a page or template"}),u=function(){const e=(0,a.Fy)(),t=e.isMobile?32:20;return(0,c.yK)((o=>({button:{height:t,width:t,border:"none",borderRadius:3,marginLeft:e.isMobile?0:4},mediumText:{color:o.mediumInvertedTextColor},plusIcon:{fill:e.isMobile?o.lightIconColor:o.sidebarTextColor,...e.isMobile?{width:18,height:18}:{width:14,height:14}},plusIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",color:o.legacyRedSelectColor,height:t,width:t},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:3,height:20,width:20},menuItemButton:{minWidth:200},caption:{minWidth:230}})),[e.isMobile,t])}();return(0,F.jsxs)(F.Fragment,{children:[s&&(0,F.jsx)(pe,{teamId:t.id,origin:n}),(0,F.jsx)(V.ZP,{popupType:V.Z4.Popup,buttonPopupStore:r,alignmentToOrigin:V.vR.Start,originGap:2,renderOrigin:e=>(0,F.jsx)(A.Z,{textWrap:!1,renderTooltip:()=>l,placement:A.Z.Placement.Bottom,render:t=>(0,F.jsx)(ae.Z,{ariaLabel:l,ref:n,style:u.button,...(0,B.Z)(t,e),children:(0,F.jsx)("div",{style:u.plusIconContainer,children:(0,m.f)(u.plusIcon)})})}),render:e=>(0,F.jsx)(ne.p7,{renderLoading:e=>(0,F.jsx)("div",{style:ne.Ry.LazyTeamAddAppTemplateMenu,children:e&&(0,F.jsx)(se.Z,{})}),teamStore:t,closePopup:e.close,from:"sidebar_team_new_page"})})]})}function Se(e){window.__c={n:"OutlinerTeamToggleButton"};const{teamStore:t,label:o,isHovered:r,outlinerToggleButtonStore:n,teamOutlinerType:s,outlinerTeamOnToggle:l,onTeamJoinComplete:u,labelAriaId:m}=e,p=(0,a.Fy)().isMobile,b=function(e){switch(e){case g.cz:case g.mu:return!0;case g.PT:case g.kg:return!1;default:(0,h.t1)(e)}}(s),v=(0,a.O7)(),{name:x,showAddPageButton:T}=(0,d.VK)((()=>({name:t.getName(),showAddPageButton:t.canAddOrRemoveTopLevelPages()})),[t]),I=(0,q.e)(t),w=function(e){const t=(0,a.O7)(),o=(0,d.VK)((()=>$.default.state.currentSpaceStore),[]);return(0,d.VK)((()=>(0,E.zz)({teamStore:e,spaceStore:o,userId:t.currentUser.id})),[o,t.currentUser.id,e])}(t),j=(0,X.K)(t),C=(0,d.VK)((()=>$.default.state.currentSpaceStore),[]),[,,M]=(0,d.AF)(void 0,ie.Z),B=(0,a.Fy)(),k=p||r,K=(0,c.yK)((e=>({teamHighlightAnimationBackgroundContainer:{backgroundColor:P.ZP.frontTertiaryButtonBackgroundHovered,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:-1,borderRadius:3},container:{position:"relative",display:"flex",alignItems:"center",minHeight:p?48:b?30:28,padding:b?"6px 12px":"0px 10px 0px 11px"},overflow:{marginLeft:5,justifySelf:"flex-end",height:22,display:"flex",alignItems:"center"},labelContainer:{flexShrink:1,flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",height:"100%",...S.Z.textOverflowStyle},labelText:{display:"flex",width:"100%",alignItems:"center",lineHeight:S.Z.lineHeight.UISmall.desktop,marginBottom:1,...S.Z.textOverflowStyle},membersCountText:{display:"flex",fontSize:12,fontWeight:S.Z.fontWeight.regular,lineHeight:1.3,color:e.lightTextColor,width:"100%",...S.Z.textOverflowStyle},joinedBadge:{color:e.darkTextColor,lineHeight:1.2,...S.Z.textOverflowStyle},joinedBadgeIcon:{display:"inline",color:e.darkTextColor,marginBottom:-1,marginRight:2,marginLeft:3,width:10,height:10},joinLeaveButton:{background:"none",color:e.mediumTextColor,fontSize:13,borderRadius:4,padding:"0px 4px",height:22,...k?{}:Q.jy},joinLeaveButtonHovered:{background:e.buttonHoveredBackground},unjoinedOverflowMenu:{display:"flex",height:22,marginLeft:8,marginRight:-6,...k?{}:Q.jy},teamIconContainer:{minHeight:20,minWidth:20,marginRight:9},closedTeamLabelContainer:{display:"flex"},closedTeamLabel:{display:"flex",alignItems:"center"},closedTeamTooltip:{whiteSpace:"normal",width:220},carat:{minHeight:b?15:20,height:b?15:20}})),[p,b,k]),H=(0,d.VK)((()=>t.getTeamPagesStore()),[t]),N=(0,d.VK)((()=>oe.Z.state===t.id),[t.id]),z=(0,d.VK)((()=>t.getTeamAccessLevel()),[t]),[U,ne]=(0,i.useState)(void 0),ae=ge(t.id),se=(0,i.useCallback)((e=>{let{draggingStores:t}=e;return!!C&&(0,Y.Pl)({environment:v,draggingStores:t,parentStore:H,currentSpaceStore:C})}),[C,v,H]),le=(0,i.useCallback)((async e=>{await f.NP({dropArgs:e,environment:v,type:"team",isTopLevel:!0,parentStore:H})}),[v,H]);if(!x)return null;const de=!w,ce=function(e,t){if(!t)return!1;switch(e){case g.mu:return!0;case g.PT:case g.kg:case g.cz:return!1;default:(0,h.t1)(e)}}(s,I),ue=!B.isMobile&&!I&&"closed"===z,me=e=>{te.Z.addNamedPopup("team_more_actions"),O.QkQ(v,{store:t,from:e})},pe=()=>{te.Z.removeNamedPopup("team_more_actions")};return(0,F.jsxs)(_.G,{dropTargetKey:re.Ui(t),canDropOnto:!e.isExpanded,shouldShowDropZone:!0,canAcceptDrop:se,onSelectableDrop:le,children:[(0,F.jsx)(V.ZP,{popupType:V.Z4.Popup,alignmentToOrigin:V.vR.Start,placementToOrigin:V.pO.Right,preventSlideUpTransition:!0,preventScaleTransition:!0,originRect:U,render:e=>(0,F.jsx)(ee.LazyTeamOverflowMenu,{teamStore:t,permissionsInviteStore:M,onDismiss:e.close,from:"teamSidebar"}),renderOrigin:e=>{let{onClick:i}=e;return(0,F.jsxs)("div",{style:K.container,onContextMenu:e=>{!B.isMobile&&(0,J.ZP)({event:e,context:J.Af.EditorContextMenu,callback:()=>{e.preventDefault(),ne(new DOMRect(e.clientX,e.clientY)),i()}})},children:[B.isMobile&&(0,F.jsx)(R,{store:t,outlinerToggleButtonStore:n,outlinerTeamOnToggle:l}),(0,F.jsx)("div",{style:K.teamIconContainer,children:(0,F.jsx)(G.p,{size:20,store:t,disabled:!0,style:{fontWeight:S.Z.fontWeight.medium}})}),(0,F.jsxs)("div",{style:K.labelContainer,children:[(0,F.jsxs)("div",{style:K.labelText,id:m,children:[o,!B.isMobile&&(0,F.jsx)(R,{store:t,outlinerToggleButtonStore:n,outlinerTeamOnToggle:l,style:k?K.carat:Q.jy})]}),b&&void 0!==j&&(0,F.jsxs)("div",{style:K.membersCountText,children:[C&&(0,F.jsx)(W,{teamStore:t,spaceStore:C,renderStyle:K.membersCountText,teamOutlinerType:s}),ue&&(0,F.jsx)(A.Z,{placement:A.Z.Placement.Bottom,renderTooltip:e=>(0,F.jsx)("div",{style:K.closedTeamTooltip,...e,children:ye({accessLevel:z})}),render:e=>(0,F.jsxs)("div",{style:K.closedTeamLabel,...e,children:[" ","·"," ",(0,F.jsx)(y.FormattedMessage,{id:"outlinerTeamToggleButton.closedTeamLabel",defaultMessage:"Closed"})]})}),ce&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("span",{children:" "})," ·",(0,F.jsx)("span",{children:(0,Z.p)(K.joinedBadgeIcon)}),(0,F.jsx)("span",{style:K.joinedBadge,children:(0,F.jsx)(y.FormattedMessage,{id:"outlinerTeamToggleButton.joinedBadge",defaultMessage:"Joined"})})]})]})]}),I&&(0,F.jsxs)("div",{style:{...K.overflow,...k||ae?{}:Q.jy},children:[(0,F.jsx)(ee.LazyOutlinerTeamOverflow,{teamStore:t,from:s,onPopupClick:()=>me(s),onPopupClose:pe}),T&&!B.isMobile&&(0,F.jsx)(he,{teamStore:t})]}),!I&&(0,F.jsx)("div",{style:K.unjoinedOverflowMenu,children:(0,F.jsx)(ee.LazyOutlinerTeamOverflow,{teamStore:t,from:s,hideJoin:!0,onPopupClick:()=>me(s),onPopupClose:pe})}),!B.isMobile&&de&&(0,F.jsx)(D.M,{style:K.joinLeaveButton,hoveredStyle:K.joinLeaveButtonHovered,teamStore:t,placement:A.Z.Placement.Right,from:"sidebar_team_modal",navigateToTeamHomeOnJoin:!0,onJoinedTeam:u}),T&&B.isMobile&&(0,F.jsx)("div",{style:{...K.overflow,...k?{}:Q.jy},children:(0,F.jsx)(he,{teamStore:t})}),(0,F.jsx)(L.Z,{isVisible:N,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},exitAnimationStyle:{opacity:0},springConfig:{stiffness:30,damping:10,precision:.001},render:()=>(0,F.jsx)("div",{style:K.teamHighlightAnimationBackgroundContainer})})]})},onClick:()=>me("teamSidebar"),onClose:pe}),(0,F.jsx)(ee.LazyTeamPermissionsInviteWithModal,{permissionsInviteStore:M,store:t})]})}function ye(e){let{accessLevel:t}=e;if("private"===t)return(0,F.jsx)(y.FormattedMessage,{id:"teamJoinLeaveButton.joinTeam.privateTeamTooltip",defaultMessage:"You can only join a private teamspace with an invite from a member"})}var fe=o(38676),be=(o(77080),o(31792)),ve=o(70704),xe=o(52275),Te=o(78140),Ie=o(32163),we=o(72495),je=o(14694);class Ce extends r.Z{constructor(){super(...arguments),this.storeTypes={mouseStore:be.Z,focusStore:u.default.createClass(!1),labelMouseStore:be.Z,labelFocusStore:u.default.createClass(!1),outlinerToggleButtonStore:ve.Z},this.headerRef=i.createRef(),this.contentsAriaId=(0,s.Z)(),this.labelAriaId=(0,s.Z)(),this.handleHideClick=()=>{const{isHidden:e}=this.getToggleButtonStore().state,t=!e;"team"===this.props.type?x.k7({environment:this.environment,spaceViewStore:this.props.spaceViewStore,teamStore:this.props.teamStore,outlinerToggleButtonStore:this.getToggleButtonStore(),newIsHidden:t,shouldPersistToggleState:this.props.shouldPersistToggleState,teamOutlinerType:this.props.teamOutlinerType,isExplicitUserAction:!0}):f.Eo({environment:this.environment,spaceViewStore:this.props.spaceViewStore,type:this.props.type,outlinerToggleButtonStore:this.getToggleButtonStore(),newIsHidden:t,shouldPersistToggleState:this.props.shouldPersistToggleState})}}willMount(e){if(super.willMount(e),e.initialToggleState&&this.getToggleButtonStore().setState({...this.getToggleButtonStore().state,isHidden:"hidden"===e.initialToggleState}),!e.shouldPersistToggleState)return;const t="team"===e.type?x.RW(e.spaceViewStore,e.teamStore.id):f.B8(e.spaceViewStore,e.type),o=p.Z.get({userId:this.environment.currentUser.id,key:t});o&&this.getToggleButtonStore().setState({...this.getToggleButtonStore().state,isHidden:o})}renderComponent(){const{renderSidebar:e,isLastTeam:t,marginBottomOverrideWhenExpanded:o,marginBottomOverrideWhenCollapsed:i}=this.props,{isHidden:r}=this.getToggleButtonStore().state,n={bookmarks:j.F4o,workspace:j.j35,shared:j.MU2,private:j.aL4,offline:j.yNE,team:j.l24,[g.PT]:j.RG3,[g.cz]:j.Uwd,[g.mu]:j.jWx,[g.kg]:j.rIE}[this.props.type];return(0,F.jsxs)("div",{ref:this.headerRef,onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,l.E)(t)&&this.stores.focusStore.setState(!0)},onBlur:()=>this.stores.focusStore.setState(!1),onMouseMove:()=>this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!0}),onMouseLeave:()=>this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!1}),style:{marginBottom:r||t&&!this.environment.device.isMobile?i:o??Ce.marginBottom,width:"100%"},className:`${n}-container`,children:[this.renderLabel(n),!r&&e({headerRef:this.headerRef,labelAriaId:this.labelAriaId,contentsAriaId:this.contentsAriaId})]})}renderLabel(e){const{isMobile:t}=this.environment.device,{isHidden:o}=this.getToggleButtonStore().state,{labelMouseStore:i,labelFocusStore:r}=this.stores,n=o?(0,F.jsx)(y.FormattedMessage,{defaultMessage:"Click to show section",id:"sidebar.sectionHeaderShow.tooltip"}):(0,F.jsx)(y.FormattedMessage,{defaultMessage:"Click to hide section",id:"sidebar.sectionHeaderHide.tooltip"}),a={...t?this.getMobileSectionLabelStyle():this.getSectionLabelStyle(),transition:"color 100ms ease-out",..."team"===this.props.type?{width:"100%"}:{}};(i.state.mouseEntered||r.state)&&Object.assign(a,this.getSectionLabelHoverStyles());const s="team"===this.props.type?{width:"100%",display:"flex",alignItems:"center",...(0,k.G$)({isMobile:t})}:this.getLabelButtonStyle();return(0,F.jsx)(je.Z,{className:e,disableMobileBorder:o&&"team"!==this.props.type,shouldShowMobileMarginBottom:o&&"team"!==this.props.type,style:"team"===this.props.type?this.getSectionTeamItemStyle():this.getSectionSidebarItemStyle(),childrenStyle:{overflow:"visible"},right:(0,F.jsx)(Me,{right:this.props.right,showAddButton:this.props.showAddButton,type:this.props.type,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,shouldPersistToggleState:this.props.shouldPersistToggleState,focusStore:this.stores.focusStore,outlinerToggleButtonStore:this.stores.outlinerToggleButtonStore}),children:(0,F.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,F.jsx)(A.Z,{textWrap:!1,disableTooltip:"team"===this.props.type,renderTooltip:()=>(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{children:n}),(0,F.jsx)("span",{style:{color:this.theme.mediumInvertedTextColor,whiteSpace:"nowrap"},children:this.props.labelTooltip})]}),placement:A.Z.Placement.Top,render:e=>(0,F.jsx)(ae.Z,{..."team"===this.props.type&&this.props.teamHeaderLabel?{"aria-labelledby":this.labelAriaId}:{id:this.labelAriaId},"aria-expanded":!o,"aria-controls":this.contentsAriaId,mobileFeedback:t,style:s,hovered:!!this.props.forceHoveredButtonStyle||void 0,onClick:()=>this.handleHideClick(),...(0,B.Z)(e,{onMouseMove:()=>i.setState({...i.state,mouseEntered:!0}),onMouseLeave:()=>i.setState({...i.state,mouseEntered:!1}),onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,l.E)(t)&&r.setState(!0)},onBlur:()=>r.setState(!1)}),children:(0,F.jsx)("span",{style:a,children:this.renderLabelContent()})})})})})}renderLabelContent(){switch(this.props.type){case"bookmarks":return(0,F.jsx)(y.FormattedMessage,{defaultMessage:"Favorites",id:"sidebar.favoritesSection.header"});case"workspace":return(0,F.jsx)(y.FormattedMessage,{defaultMessage:"Workspace",id:"sidebar.workspaceSection.header"});case"private":return(0,F.jsx)(y.FormattedMessage,{defaultMessage:"Private",id:"sidebar.privateSection.header"});case"shared":return(0,F.jsx)(y.FormattedMessage,{defaultMessage:"Shared",id:"sidebar.sharedSection.header"});case"team":if(this.props.teamHeaderLabel){const{isHidden:e}=this.getToggleButtonStore().state,{mouseEntered:t}=this.stores.labelMouseStore.state;return(0,F.jsx)(Se,{isHovered:t||this.stores.labelFocusStore.state,isExpanded:!e,teamStore:this.props.teamStore,label:this.props.teamHeaderLabel,outlinerToggleButtonStore:this.getToggleButtonStore(),outlinerTeamOnToggle:()=>this.handleHideClick(),teamOutlinerType:this.props.teamOutlinerType,onTeamJoinComplete:this.props.onTeamJoinComplete,labelAriaId:this.labelAriaId})}break;case g.kg:case g.mu:case g.cz:case g.PT:return this.props.sectionLabel;default:(0,h.t1)(this.props)}}getToggleButtonStore(){const{guidedTutorialStore:e}=$.default.state,{type:t}=this.props,o=this.props.customToggleButtonStore||this.stores.outlinerToggleButtonStore;if(e&&"team"===t){const{teamStore:t}=this.props;Object.keys(e.state.sidebarToggleStores.teams).includes(t.id)||e.setState({...e.state,sidebarToggleStores:{teams:{...e.state.sidebarToggleStores.teams,[t.id]:o}}})}return o}getSectionSidebarItemStyle(){return{paddingTop:0,paddingBottom:0,paddingRight:14,paddingLeft:15,minHeight:24,marginBottom:2,marginTop:6}}getSectionTeamItemStyle(){return{padding:0,margin:0,paddingLeft:10,borderRadius:0}}getSectionLabelStyle(){return{textTransform:"initial",fontSize:12,lineHeight:1,color:this.theme.lightTextColor,fontWeight:S.Z.fontWeight.semibold}}getMobileSectionLabelStyle(){return{textTransform:"initial",fontSize:13,lineHeight:1,color:this.theme.lightTextColor,fontWeight:S.Z.fontWeight.semibold}}getSectionLabelHoverStyles(){return{color:this.theme.darkTextColor}}getLabelButtonStyle(){const{isMobile:e}=this.environment.device;return{display:"flex",alignItems:"center",borderRadius:3,padding:"2px 4px",marginLeft:-4,...e&&{marginBottom:8}}}}function Me(e){let{right:t,showAddButton:o,focusStore:i,...r}=e;window.__c={n:"OutlinerToggleButtonRightLabel"};const n=(0,d.VK)((()=>{const e=fe.xH.state||i.state,t=["new-page-sidebar","congratulations"].includes(v.getShadowCursorCurrentElementName()||"");return e||t}),[i]),a=(0,c.yK)((()=>({wrapper:{display:"flex",alignItems:"center",opacity:n?1:0,pointerEvents:n?"auto":"none",transition:"opacity 200ms ease-in"}})),[n]);return(0,F.jsxs)("div",{style:a.wrapper,children:[t,o&&(0,F.jsx)(Be,{...r})]})}function Be(e){let{type:t,disableTooltip:o,labelTooltip:r,spaceStore:s,spaceViewStore:l,shouldPersistToggleState:u,outlinerToggleButtonStore:p}=e;window.__c={n:"OutlinerToggleAddButton"};const S=(0,a.O7)(),x=S.device.isMobile,j=function(e){switch(e){case"bookmarks":case"private":case"shared":case"team":case"workspace":return!1;case g.PT:case g.cz:case g.mu:case g.kg:return!0;default:(0,h.t1)(e)}}(t),M=(0,y.useIntl)(),B=(0,i.useRef)(null),{guidedTutorialStore:k,mainEditorCurrentBlockStore:P,currentUserSettingsStore:Z}=(0,d.VK)((()=>{const{guidedTutorialStore:e,currentUserSettingsStore:t,mainEditorCurrentBlockStore:o}=$.default.state;return{guidedTutorialStore:e,currentUserSettingsStore:t,mainEditorCurrentBlockStore:o}}),[]),O=(0,d.VK)((()=>{var e;return null===(e=k.state)||void 0===e?void 0:e.type}),[k]),L=(0,d.VK)((()=>v.getShadowCursorCurrentElementName()),[]),V=(0,i.useCallback)((async e=>{if("team"!==t)if("private"===t&&"new-page-sidebar"===v.getShadowCursorCurrentElementName()){const e=f.kC({environment:S,spaceStore:s,spaceViewStore:l,type:t,outlinerToggleButtonStore:p,prepend:!0,shouldPersistToggleState:u,title:"My First Page"}),o=await e;n.default.afterNextFlush((()=>{o&&(w.createAndCommit({userAction:"outlinerToggleButton.guidedTutorialStoreInit",environment:S,perform:e=>T.eV({environment:S,store:o,transaction:e})}),setTimeout((()=>{const e=null==P?void 0:P.getContentStores()[0];e&&(b.eP({environment:S,store:e}),I.NX({store:e.getBlockTitleStore()})),Z&&v.pointToSupportedCursorElement(S,{elementName:"new-page-blank-line",userSettingsStore:Z})}),"tooltip"===O?100:1e3))}))}else f.kC({environment:S,spaceStore:s,spaceViewStore:l,type:t,outlinerToggleButtonStore:p,prepend:!0,shouldPersistToggleState:u,useCrdt:e})}),[Z,S,P,p,u,s,l,O,t]),_=(0,i.useCallback)((()=>{re.lo("sidebar_team_section")}),[]),K=(0,i.useCallback)((()=>{Z&&k&&v.complete(S,Z,k)}),[Z,S,k]),R=(0,c.yK)((e=>({plusButton:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:3,marginLeft:x?0:4},plusIcon:{fill:e.mediumIconColor,width:14,height:14},tutorialTooltip:{width:230},tutorialText:{fontSize:16,lineHeight:.85},labelTooltip:{color:e.mediumInvertedTextColor}})),[x]),D=j?M.formatMessage({defaultMessage:"New teamspace",id:"sidebar.addButton.addTeamTooltip"}):M.formatMessage({defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"}),H=(0,d.VK)((()=>!1),[]);return(0,F.jsxs)(F.Fragment,{children:["congrats"===L&&!j&&(0,F.jsx)(ue.U,{origin:()=>B.current||null,placementToOrigin:"right",header:(0,F.jsx)(y.FormattedMessage,{defaultMessage:"Congratulations! You created a page and a subpage.",id:"sidebar.shadowCursorCongrats.header"}),content:(0,F.jsx)(y.FormattedMessage,{defaultMessage:"You can use this method to organize your content. Click {char} to find your subpages.",id:"sidebar.shadowCursorCongrats.content",values:{char:(0,F.jsx)("span",{style:R.tutorialText,children:(0,F.jsx)(C.sr,{char:"›",light:!0})})}}),onCloseClick:K,pointerPosition:"20%",pointerLength:24,pointerOffset:-3,style:R.tutorialTooltip,shouldDismissUponOutsideClick:!0}),(0,F.jsx)(A.Z,{textWrap:!1,disableTooltip:o,renderTooltip:()=>(0,F.jsxs)(F.Fragment,{children:[D,(0,F.jsx)("br",{}),(0,F.jsx)("span",{style:R.labelTooltip,children:!j&&r})]}),placement:A.Z.Placement.Bottom,render:e=>!j&&H?(0,F.jsx)(ke,{...e,createPageFn:V}):(0,F.jsxs)(ae.Z,{ariaLabel:D,style:R.plusButton,mobileFeedback:x,onClick:j?_:()=>V(),className:"private"===t?"shadow-cursor-new-page-sidebar":void 0,...e,children:[(0,F.jsx)("span",{ref:B}),(0,m.f)(R.plusIcon)]})})]})}function ke(e){window.__c={n:"AddCrdtPageButtonPopup"};const{createPageFn:t}=e,o=(0,c.yK)((e=>({button:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:3},icon:{fill:e.mediumIconColor,width:14,height:14}})),[]);return(0,F.jsx)(V.ZP,{popupType:V.Z4.Popup,alignmentToOrigin:V.vR.Start,originGap:2,renderOrigin:t=>(0,F.jsx)(ae.Z,{mobileFeedback:!1,style:o.button,...e,...t,children:(0,m.f)(o.icon)}),render:e=>(0,F.jsx)(Pe,{onDismiss:e.close,createPageFn:t}),onClick:()=>{te.Z.addNamedPopup("outliner_add_page")},onClose:()=>{te.Z.removeNamedPopup("outliner_add_page")}})}function Pe(e){const{onDismiss:t,createPageFn:o}=e,i=[{key:"addRegularPage",render:e=>(0,F.jsx)(xe.Z,{...e,title:"Add regular page"}),action:()=>{t(),o(!1)}},{key:"addCrdtPage",render:e=>(0,F.jsx)(xe.Z,{...e,title:"Add CRDT page"}),action:()=>{t(),o(!0)}}];return(0,F.jsx)(Te.Z,{menuType:M.og.Popup,children:(0,F.jsx)(Ie.Z,{type:Ie.i.Vertical,sections:[{key:"addPageOptions",render:e=>(0,F.jsx)(we.Z,{...e}),items:i}],initialFocus:void 0})})}Ce.displayName="OutlinerToggleButton",Ce.marginBottom=18;const Ze=Ce},69814:(e,t,o)=>{o.d(t,{M:()=>x});var i=o(67294),r=o(480),n=o(86628),a=o(24405),s=o(82990),l=o(38755),d=o(95697),c=o(6617),u=o(71064),m=o(5366),p=o(80444),g=o(35817),h=o(89728),S=o(85893);const y=function(e){window.__c={n:"TeamJoinButton"};const{teamStore:t,from:o,navigateToTeamHomeOnJoin:a,onJoinedTeam:s,style:l,hoveredStyle:d,icon:c,isRed:u}=e,y=(0,r.O7)(),f=(0,n.VK)((()=>p.default.state.currentSpaceStore),[]),b=(0,i.useCallback)((async()=>{f&&(await g.um({environment:y,teamStore:t,currentSpaceStore:f,from:o,andNavigateToTeamHome:a??!1}),null==s||s())}),[f,y,t,o,a,s]);return(0,S.jsx)(h.Z,{style:l,hoveredStyle:d,onClick:b,icon:c,isRed:u,children:(0,S.jsx)(m.FormattedMessage,{id:"outlinerTeamToggleButton.joinTeamButton",defaultMessage:"Join"})})};var f=o(22235),b=o(78504);const v=function(e){window.__c={n:"TeamRequestButton"};const{teamStore:t,style:o,hoveredStyle:r}=e,[a,s]=(0,i.useState)(!1),l=(0,n.VK)((()=>t.getName()),[t]);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h.Z,{style:o,hoveredStyle:r,onClick:()=>s(!0),children:(0,S.jsx)(m.FormattedMessage,{id:"teamRequestButton.requestButton.label",defaultMessage:"Request"})}),(0,S.jsx)(b.Z,{teamStore:t,teamName:l,teamId:t.id,isModalOpen:a,onDismiss:()=>s(!1)})]})};function x(e){window.__c={n:"TeamJoinLeaveButton"};const{teamStore:t,style:o,hoveredStyle:i}=e,m=(0,r.O7)(),p=(0,c.Q)(),g=(0,u.e)(t),h=(0,n.VK)((()=>t.getTeamAccessLevel()),[t]),b=(0,a.yK)((e=>({joinTeamButton:{maxHeight:26,marginLeft:10,paddingLeft:10,paddingRight:10,borderRadius:100,fontSize:13,fontWeight:s.Z.fontWeight.semibold,background:e.buttonHoveredBackground,alignSelf:"center",...o},joinTeamButtonHoveredStyle:{background:e.buttonPressedBackground,...i}})),[o,i]),x=(0,n.VK)((()=>(0,d.Hu)({membership:t.getRawMembership()})&&(0,l.Fn)(m)),[m,t]),T=!g&&"open"===h||x,I=!g&&"closed"===h;return p?null:g?(0,S.jsx)(f.Z,{...e,style:b.joinTeamButton,hoveredStyle:b.joinTeamButtonHoveredStyle}):T?(0,S.jsx)(y,{...e,style:b.joinTeamButton,hoveredStyle:b.joinTeamButtonHoveredStyle}):I?(0,S.jsx)(v,{teamStore:t,style:b.joinTeamButton,hoveredStyle:b.joinTeamButtonHoveredStyle}):null}},22235:(e,t,o)=>{o.d(t,{Z:()=>h});var i=o(67294),r=o(480),n=o(86628),a=o(36591),s=o(72126),l=o(64684),d=o(5366),c=o(80444);var u=o(35817),m=o(89728),p=o(26388),g=o(85893);const h=function(e){window.__c={n:"TeamLeaveButton"};const{teamStore:t,from:o,onLeavingTeam:h,style:S,hoveredStyle:y,icon:f,isRed:b,placement:v,alignment:x,buttonInternals:T}=e,I=(0,r.O7)(),w=(0,n.VK)((()=>c.default.state.currentSpaceStore),[]),j=(0,i.useCallback)((async()=>{if(!w)return;await u.s({environment:I,teamStore:t,currentSpaceStore:w,from:o})&&(null==h||h())}),[w,I,t,o,h]),C=(0,g.jsx)(d.FormattedMessage,{id:"teamJoinLeaveButton.leaveTeam.enabledTooltip",defaultMessage:"Click to leave teamspace"}),M=function(e){let{teamStore:t}=e;const o=(0,r.O7)().currentUser.id,{isDefaultTeam:i}=(0,n.VK)((()=>({isDefaultTeam:t.isDefault()})),[t]),a=function(e){const t=(0,n.VK)((()=>c.default.state.currentSpaceStore),[]);return(0,n.VK)((()=>e.isDefined()&&null!=t&&t.isDefined()?(0,l.x4)({members:e.getMembers(),groups:(null==t?void 0:t.getPermissionGroups())??[]}):[]),[e,t])}(t),u=(0,n.VK)((()=>o?a.filter((e=>{var t;return null===(t=e.user_ids)||void 0===t?void 0:t.includes(o)})):[]),[a,o]),m=(0,n.VK)((()=>{if(!t.isReady())return!1;const e=(0,l.XO)({membership:t.getMembers()});return 1===e.length&&e[0]===o}),[t,o]);return function(e){let{isDefaultTeam:t,isOnlyTeamOwner:o,userGroups:i}=e;if(t)return(0,g.jsx)(d.FormattedMessage,{id:"teamBrowser.teamCard.leaveTeam.defaultTeamTooltip",defaultMessage:"You can’t leave this teamspace because everyone in the workspace must be a member"});if(o)return(0,g.jsx)(d.FormattedMessage,{id:"teamJoinLeaveButton.leaveTeam.onlyOwnerTooltip",defaultMessage:"Invite another teamspace owner to leave this teamspace"});if(i.length>0)return(0,g.jsx)(d.FormattedMessage,{id:"teamBrowser.teamCard.leaveTeam.groupTooltip",defaultMessage:"{groupNames, plural, one {You can't leave this teamspace because you're a member of multiple groups, {groupNames}.} other {You can't leave this teamspace because you're a member of the group, {groupNames}.}}",values:{groupNames:s.oA(i.map((e=>e.name))).join()}})}({isDefaultTeam:i,isOnlyTeamOwner:m,userGroups:u})}({teamStore:t}),B=Boolean(M),k=B?M:C;return(0,g.jsx)(p.Z,{style:B?{width:240}:void 0,disableTooltip:!Boolean(k),renderTooltip:e=>(0,g.jsx)("div",{...e,children:k}),textWrap:B,placement:v,alignment:x,render:e=>(0,g.jsx)(m.Z,{...e,style:S,hoveredStyle:y,onClick:j,disabled:B,disabledFeedback:B,icon:f,isRed:b,children:T||(0,g.jsxs)(g.Fragment,{children:[(0,a.e)({width:12.5,marginRight:4}),(0,g.jsx)(d.FormattedMessage,{id:"teamBrowser.teamCard.button.joined",defaultMessage:"Joined"})]})})})}},58260:(e,t,o)=>{o.d(t,{Z:()=>s});o(67294);var i=o(16184),r=o(5366),n=o(26388),a=o(85893);function s(e){let{iconStyle:t}=e;return(0,a.jsx)(n.Z,{textWrap:!0,style:{width:210},placement:n.Z.Placement.Bottom,renderTooltip:()=>(0,a.jsx)(r.FormattedMessage,{id:"teamLockIcon.tooltip",defaultMessage:"Private teamspaces can only be accessed or joined by invitation"}),render:e=>(0,a.jsx)("div",{...e,children:(0,i.Q)(t)})})}},6617:(e,t,o)=>{o.d(t,{Q:()=>l});var i=o(480),r=o(86628),n=o(38755),a=o(80444),s=o(78291);function l(){const e=function(){const e=(0,i.O7)();return(0,r.VK)((()=>{const t=a.default.state.currentSpaceStore,o=s.default.state.data;return t?n.Cx(t)?o?{loading:!1,isUserTeamGuestOfSpace:n.di(e,o)}:{loading:!0}:{loading:!1,isUserTeamGuestOfSpace:!1}:{loading:!0}}),[e])}();return(0,r.VK)((()=>e.loading||e.isUserTeamGuestOfSpace),[e])}},71064:(e,t,o)=>{o.d(t,{e:()=>s});var i=o(480),r=o(86628),n=o(95697),a=o(80444);function s(e){const t=(0,i.O7)(),o=(0,r.VK)((()=>a.default.state.currentSpaceStore),[]);return(0,r.VK)((()=>(0,n.AL)({teamStore:e,spaceStore:o,userId:t.currentUser.id})),[o,t.currentUser.id,e])}},43914:(e,t,o)=>{o.d(t,{K:()=>s});var i=o(86628),r=o(27006),n=o(95697),a=o(80444);function s(e){return(0,i.VK)((()=>{if(!e)return 0;const t=a.default.state.currentSpaceStore,o=a.default.state.currentUserStore;if(!r.YX((null==t?void 0:t.getRole())??"none")){return(0,n.tu)({currentUserStore:o,currentSpaceStore:t,teamStore:e,members:e.getMembers()}).length}return(0,n.tO)({teamStore:e,spaceStore:t}).length}),[e])}},3392:(e,t,o)=>{o.d(t,{Z:()=>M});var i=o(67294),r=o(480),n=o(86628),a=o(24405),s=o(75071),l=o(72126),d=o(69246),c=o(5366),u=o(89858),m=o(64921),p=o(55118),g=o(25777),h=o(14694),S=o(43250),y=o(35026),f=o(80444),b=o(74948),v=o(24359),x=o(85893);function T(e){window.__c={n:"EmptyChildrenPlaceholder"};const t=(0,r.Fy)(),o=(0,a.yK)((e=>({placeholder:{color:e.lightTextColor,paddingLeft:12,...t.isMobile&&{display:"flex",alignItems:"center",height:32}}})),[t]);return(0,x.jsx)(h.Z,{role:"treeitem",style:e.itemStyle,children:(0,x.jsx)("div",{style:o.placeholder,children:(0,x.jsx)(c.FormattedMessage,{defaultMessage:"No pages inside",id:"outliner.NoPagesInside.placeholder"})})})}function I(e){window.__c={n:"AddPageButton"};const{type:t}=e,o=(0,r.O7)(),{currentSpaceStore:i,currentSpaceViewStore:s}=(0,n.VK)((()=>f.default.state),[]),l=o.device.isMobile,d=(0,a.yK)((e=>({sidebarItem:{color:e.mediumTextColor}})),[]);if(!i||!s)return null;return(0,x.jsx)(m.Z,{mobileFeedback:l,onClick:async()=>{if("team"===t)return;await u.kC({environment:o,spaceStore:i,spaceViewStore:s,type:t,prepend:!1,shouldPersistToggleState:!0})&&l&&b.close()},children:(0,x.jsx)(h.Z,{style:d.sidebarItem,left:(0,x.jsx)(C,{}),disableMobileBorder:!0,children:(0,x.jsx)(c.FormattedMessage,{defaultMessage:"Add a page",id:"sidebar.addAWorkspaceOrPrivatePage.tooltip"})})})}function w(e){const{store:t,index:o}=e;return(0,x.jsx)(v.ZP,{type:e.type,store:t,style:e.itemStyle,toggleStyle:e.itemToggleStyle,itemIndex:o,itemDepth:e.itemDepth,parentStore:t.getRecordStoreUIParent(),onNavigate:e.onNavigate,disabled:e.disabled},t.id)}function j(e){window.__c={n:"EmptyDroppable"};const t=(0,r.O7)(),{type:o,parentStore:i}=e,n=l.oA(["OutlinerItem",o,null==i?void 0:i.id]).join("_");return(0,x.jsx)(p.G,{dropTargetKey:n,canDropBelow:!0,onSelectableDrop:async e=>{await u.NP({dropArgs:e,environment:t,type:o,isTopLevel:!0,parentStore:i})},shouldShowDropZone:!0,canAcceptDrop:e=>{const{currentSpaceStore:o}=f.default.state;return!!o&&(0,y.Pl)({environment:t,draggingStores:e.draggingStores,parentStore:i,currentSpaceStore:o})}})}function C(){window.__c={n:"PlusIcon"};const e=(0,a.yK)((e=>({icon:{fill:e.mediumIconColor,width:16,height:16},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"}})),[]);return(0,x.jsx)("div",{style:e.iconContainer,children:(0,s.f)(e.icon)})}const M=function(e){window.__c={n:"Outliner"};const{disabled:t,childStores:o,areChildrenLoading:n,itemDepth:a,type:s}=e,l=(0,r.Fy)(),c=o.map(((t,o)=>(0,i.createElement)(w,{...e,key:t.id,store:t,index:o}))),u=0===a,m=0===c.length,p=(m||e.isHeaderless||l.isMobile)&&u&&("private"===s||"workspace"===s)&&!t,h=m&&!p&&!u,y={offline:S.blN,bookmarks:S.fe0,workspace:S.BEs,shared:S.JkF,private:S.q1J,team:S.l24,[d.PT]:void 0,[d.cz]:void 0,[d.mu]:void 0,[d.kg]:void 0}[e.type];return(0,x.jsxs)(g.Z,{id:e.id,"aria-labelledby":e["aria-labelledby"],role:u?"tree":"group",style:e.style,className:y,loaded:!n,showSpinnerTimeout:3e3,spinnerSize:"1em",children:[c,m&&u&&(0,x.jsx)(j,{type:e.type,parentStore:e.parentStore}),p&&(0,x.jsx)(I,{type:e.type}),h&&(0,x.jsx)(T,{itemStyle:e.itemStyle})]})}},24359:(e,t,o)=>{o.d(t,{gZ:()=>Ke,aZ:()=>Fe,ZP:()=>Re});var i=o(67294),r=o(480),n=o(97511),a=o(33125),s=o(86628),l=o(24405),d=o(41432),c=o(15157),u=o(89858),m=o(79954),p=o(19037),g=o(35026),h=o(52315),S=o(81844),y=o(49085);class f extends y.default{getInitialState(){return{open:!1,hovered:!1,focused:!1}}}const b=f;var v=o(90106),x=o(26664),T=o(24646),I=o(6740),w=o(21202),j=o(82990),C=o(50906),M=o(17659),B=o(84076),k=o(68785),P=o(76798),Z=o(14694),O=o(93959),L=o(84210),V=o(17652),_=o(50659),A=o(98165),K=o(95697),F=o(91948),R=o(80444),D=o(80796),H=o(11646),N=o(5366),E=o(9953),z=o(39699),U=o(31278),W=o(26388),G=o(85893);function J(e){window.__c={n:"OutlinerItemIcon"};const{targetStore:t,canEditItem:o}=e,i=(0,N.useIntl)(),n=(0,r.O7)(),{isMobile:a}=n.device,d=(0,s.VK)((()=>t.getIcon()),[t]),c=(0,s.VK)((()=>!a&&o&&!t.isLocked()),[a,o,t]),u=(0,s.VK)((()=>{var e;return null===(e=t.getIconStore())||void 0===e?void 0:e.table}),[t]),m=(0,l.yK)((e=>({pageIcon:{fill:e.mediumIconColor}})),[]),p=e=>{const o=t.getIconStore();o&&z.createAndCommit({userAction:"OutlinerItem.handleRecordIconChange",environment:n,perform:t=>{E.sO({store:o,value:e,transaction:t})}})};return(0,G.jsx)(W.Z,{renderTooltip:()=>(0,G.jsx)(N.FormattedMessage,{defaultMessage:"Change icon",id:"sidebarItem.changeIconButton.tooltip"}),placement:W.Z.Placement.Bottom,render:e=>{var o;return c?(0,G.jsx)(U.Z,{bucket:"secure",disabled:!1,icon:d,store:t,title:void 0,isEmptyPage:t.isEmptyPage(),size:a?24:20,onChange:p,pageIconStyle:m.pageIcon,...e,largeIcon:!0,iconLoggingData:{recordTable:u,source:"sidebar",block_type:t.getType(),collection_id:"collection"===u?null===(o=t.getIconStore())||void 0===o?void 0:o.id:void 0},label:i.formatMessage({defaultMessage:"Change page icon",id:"sidebarItem.changeIconButton.buttonLabel"})}):(0,G.jsx)(U.Z,{disabled:!0,icon:d,title:void 0,isEmptyPage:t.isEmptyPage(),size:a?24:20,pageIconStyle:m.pageIcon,largeIcon:!0,label:i.formatMessage({defaultMessage:"Page icon",id:"sidebarItem.changeIconButton.disabledLabel"})})}})}var Y=o(5210);function Q(e){window.__c={n:"OutlinerItemLeftToggleButton"};const{store:t,outlinerItemStore:o,targetStore:i,type:n,itemIndex:a,itemDepth:d}=e,c=(0,r.O7)(),{isMobile:u}=c.device,m=(0,s.VK)((()=>o.state.open),[o]),p=(0,s.VK)((()=>{if((0,K.ku)()){const e=Boolean(null==i?void 0:i.isCollectionView()),o=g.Yz(t).length>0;return e||o}return!0}),[t,i]),h=(0,l.yK)((e=>({hiddenToggle:{width:(0,Y.q)({isMobile:u,isSidebar:!0})},toggle:{color:e.lightIconColor}})),[u]);if(!p)return(0,G.jsx)("div",{style:h.hiddenToggle});return(0,G.jsx)(Y.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:Boolean(m),color:h.toggle.color,onClick:()=>{const e=0===d,i=A.VP(t);C.t8_(c,{teamStore:i,type:e?"top_level":"nested",is_toggled:!m,outliner_type:n,outliner_position:a,outliner_depth:d}),g.Ps({store:t,toggleStore:o,toOpen:!m,environment:c,isTopLevelItem:e})},"aria-describedby":e["aria-describedby"],"aria-controls":e["aria-controls"]})}var q=o(56666),$=o(75071),X=o(6404),ee=o(24677),te=o(64921),oe=o(52275),ie=o(31945),re=o(78140),ne=o(32163),ae=o(40721),se=o(72495),le=o(33929),de=o(87279),ce=o(98742),ue=o(75024),me=o(34583),pe=o(74948);const ge=(0,N.defineMessages)({addAPageInside:{defaultMessage:"Quickly add a page inside",id:"sidebarItem.addAPageInside.tooltip"}});function he(e){window.__c={n:"OutlinerItemRightIcons"};const{store:t,outlinerItemStore:o,canEditItem:i,itemDepth:n}=e,{isMobile:a}=(0,r.Fy)(),d=(0,s.VK)((()=>a||o.state.hovered||o.state.focused),[a,o]),c=(0,s.VK)((()=>{var e;const o=Boolean(t.getAppContainerBlockStore()),r=null===(e=t.getCollectionViewCollectionStore())||void 0===e?void 0:e.isSyncedCollection();return Boolean(t.getType()&&i&&!o&&!r)}),[t,i]),u=(0,l.yK)((()=>({iconContainer:{display:"flex",paddingLeft:3,...d?{}:{...ue.jy,display:"block"}}})),[d]);return(0,G.jsxs)("div",{style:u.iconContainer,children:[(0,G.jsx)(be,{store:t,type:e.type,itemIndex:e.itemIndex,itemDepth:n}),c&&(0,G.jsx)(Se,{store:t,outlinerItemStore:o,isTopLevelItem:0===n})]})}function Se(e){window.__c={n:"AddPageButton"};const{store:t,outlinerItemStore:o,isTopLevelItem:i}=e,n=(0,r.O7)(),{isMobile:a}=n.device,l=(0,s.VK)((()=>t.getLinkedViewCollectionBlockStores()),[t]),d=le.default.formatMessage(ge.addAPageInside);return l.length<=1?(0,G.jsx)(W.Z,{renderTooltip:()=>d,placement:W.Z.Placement.Bottom,render:e=>{const r={...e,onClick:()=>{ve({store:t,outlinerItemStore:o,sourceStore:l[0]??t,shouldNavigateToSource:!1,environment:n,isTopLevelItem:i})}};return(0,G.jsx)(ye,{events:r})}}):(0,G.jsx)(W.Z,{renderTooltip:()=>d,placement:W.Z.Placement.Bottom,render:e=>(0,G.jsx)(ie.ZP,{popupType:a?ie.Z4.SlideUp:ie.Z4.Popup,renderOrigin:t=>(0,G.jsx)(ye,{events:(0,ce.Z)(e,t)}),render:e=>(0,G.jsx)(fe,{store:t,outlinerItemStore:o,parent:e,isTopLevelItem:i})})})}function ye(e){window.__c={n:"AddPageButtonInternal"};const{isMobile:t}=(0,r.Fy)(),o=xe();return(0,G.jsx)(te.Z,{ariaLabel:le.default.formatMessage(ge.addAPageInside),mobileFeedback:t,style:o.button,...e.events,children:(0,$.f)(o.buttonIcon)})}function fe(e){window.__c={n:"AddToCollectionViewMenu"};const{store:t,outlinerItemStore:o,parent:i,isTopLevelItem:n}=e,a=(0,r.O7)(),{isMobile:d}=a.device,c=(0,s.VK)((()=>t.getLinkedViewCollectionBlockStores()),[t]),u=(0,l.yK)((()=>({menuItem:{display:"flex",alignItems:"center",whiteSpace:"pre"}})),[]),m={menuType:d?de.og.Modal:de.og.Popup,right:d?(0,G.jsx)(ae.DoneMenuText,{}):void 0},p={key:"collections",render:e=>(0,G.jsx)(se.Z,{...e,title:(0,G.jsx)(N.FormattedMessage,{defaultMessage:"Add to",id:"sidebarItem.addAPageInside.popup.addTo"})}),items:c.map((e=>({key:e.id,render:t=>(0,G.jsx)(oe.Z,{...t,title:(0,G.jsx)("div",{style:u.menuItem,children:(0,G.jsx)(P.Z,{store:e})}),icon:(0,G.jsx)(U.Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:14})}),action:()=>{ve({store:e,outlinerItemStore:o,sourceStore:e,shouldNavigateToSource:!0,environment:a,isTopLevelItem:n})}})))};return(0,G.jsx)(re.Z,{...m,children:(0,G.jsx)(ne.Z,{type:ne.i.Vertical,onAccept:i.close,initialFocus:void 0,sections:[p]})})}function be(e){window.__c={n:"MenuButton"};const{store:t,type:o,itemDepth:i,itemIndex:n}=e,a=(0,N.useIntl)(),s=(0,r.O7)(),{isMobile:l}=s.device,d=xe(),c=e=>{const r=A.VP(t);ee.Ys({environment:s,store:t}),X.Qn({environment:s,stores:[t],left:e.clientX,top:e.clientY,showInput:!1,actionSectionGroupKey:"sidebar_outliner",analyticsFrom:"sidebar_more_menu",optionalAnalyticsProperties:{teamStore:r,type:0===i?"top_level":"nested",outliner_type:o,outliner_position:n,outliner_depth:i}})},u="bookmarks"===o?a.formatMessage({defaultMessage:"Remove, rename, and more…",id:"sidebarItem.favoritedPageMenuButton.tooltip"}):a.formatMessage({defaultMessage:"Delete, duplicate, and more…",id:"sidebarItem.pageMenuButton.tooltip"});return(0,G.jsx)(W.Z,{renderTooltip:()=>u,placement:W.Z.Placement.Bottom,render:e=>(0,G.jsx)(te.Z,{ariaLabel:u,mobileFeedback:l,style:d.button,onClick:c,...e,children:(0,q.o)(d.buttonIcon)})})}function ve(e){const{store:t,outlinerItemStore:o,sourceStore:i,shouldNavigateToSource:r,environment:n,isTopLevelItem:a}=e;me.M_(n)&&(n.device.isMobile&&pe.close(),z.createAndCommit({userAction:"OutlinerItem.createdPage",environment:n,perform:e=>u.D0({environment:n,store:i,transaction:e,navigateToParent:r})}),t.isCollectionView()||g.Ps({store:t,toggleStore:o,toOpen:!0,environment:n,isTopLevelItem:a}))}function xe(){const e=(0,r.O7)().device.isMobile;return(0,l.yK)((t=>({button:e?{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:3,marginLeft:0}:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:3,marginLeft:4},buttonIcon:e?{fill:t.lightIconColor,width:18}:{fill:t.sidebarTextColor,width:14}})),[e])}function Te(e){window.__c={n:"BlockSidebarItem"};const{store:t,outlinerItemStore:o,style:i,targetStore:n,itemDepth:a,type:d,nestedOutlinerAriaId:c,titleAriaId:u}=e,m=(0,r.O7)(),p=m.device.isMobile,h=(0,s.VK)((()=>"copy_indicator"===t.getType()),[t]),S=(0,s.VK)((()=>function(e){const{targetStore:t,type:o}=e;if(!t)return;const i=(0,g.N)(o);if(t.isNavigableBlock())return(0,L.ZP)({store:t,fullyQualified:!1,pageVisitSource:i});{const e=A.Dg(t);if(e)return(0,L.ZP)({store:e,scrollToBlockId:t.id,fullyQualified:!1,pageVisitSource:i})}}({targetStore:n,type:d})),[n,d]),y=(0,s.VK)((()=>h&&H.transactionQueue.isPendingTransactionForRecord(t.pointer)),[h,t]),f=(0,s.VK)((()=>{const{mainEditorCurrentBlockStore:e}=R.default.state;return e&&t.id===e.id}),[t]),b=(0,s.VK)((()=>o.state.open),[o]),v=(0,s.VK)((()=>(0,V.H)()),[]),x=(0,l.yK)((e=>({sidebarItem:{...!p&&{paddingLeft:5},...f&&{fontWeight:j.Z.fontWeight.semibold,background:e.sidebarItemSelectedBackground,color:e.regularTextColor,...p&&{boxShadow:`\n                            0 1px 0 ${e.buttonHoveredBackground}\n                        `}},...(0,_.Z3)({isMobile:p}),...i},children:{display:"flex",alignItems:"center"},loadingSpinner:{marginLeft:6},moveOrDuplicateProgress:{flex:1,marginLeft:p?10:6,marginRight:p?12:void 0},link:{width:"100%"}})),[p,f,i]),T={role:"treeitem","aria-current":f?"page":void 0,"aria-expanded":!!b,"aria-owns":c,"aria-labelledby":u};if(h)return y?(0,G.jsxs)(Z.Z,{style:x.sidebarItem,childrenStyle:x.children,onFocus:we(o),onBlur:je(o),onMouseMove:Ce(o),onMouseLeave:Me(o),children:[(0,G.jsx)(k.Z,{style:x.loadingSpinner}),(0,G.jsx)(F.Z,{targetRecordId:t.id,style:x.moveOrDuplicateProgress})]}):null;if(S){const i=()=>{e.onNavigate&&e.onNavigate(t),v&&M.qQ({environment:m,open:!1});const o=A.VP(t);C.Yg1(m,{teamStore:o,type:0===a?"top_level":"nested",outliner_type:e.type,outliner_position:e.itemIndex,outliner_depth:a})};return(0,G.jsx)(B.Z,{onFocus:we(o),onBlur:je(o),style:x.link,href:S,onClick:i,innerStyle:(0,_.G$)({isMobile:p}),...T,children:(0,G.jsx)(Ie,{...e,sidebarItemStyle:x.sidebarItem,sidebarItemChildrenStyle:x.children,titleAriaId:u,nestedOutlinerAriaId:c})})}return(0,G.jsx)(Ie,{...e,onFocus:we(o),onBlur:je(o),sidebarItemStyle:x.sidebarItem,sidebarItemChildrenStyle:x.children,titleAriaId:u,nestedOutlinerAriaId:c,...T})}function Ie(e){window.__c={n:"SidebarItemContainer"};const{store:t,parentStore:o,outlinerItemStore:i,targetStore:r,itemDepth:n,type:a,onFocus:l,onBlur:c,titleAriaId:u,nestedOutlinerAriaId:m}=e,p=(0,s.VK)((()=>function(e){const{store:t,parentStore:o,isTopLevelItem:i,type:r}=e;if(t.isDefined()&&(0,O.h7)(t))return!1;if(t.isCollectionView()&&!(0,K.bq)())return!t.getCollectionViewSourceCollectionStore();if("block"===(null==o?void 0:o.table)){if(v.G.createChildStore(o,{table:w.iU,id:o.id,spaceId:t.getSpaceId()}).isType("collection_view_page"))return!1}if(t.isDefined()&&t.getType()===d.Ti.alias)return!0;if(i&&"team"!==r)return!1;if(!o)return!1;if(t.isDefined())return t.getParentId()!==o.id;return!1}({store:t,parentStore:o,isTopLevelItem:0===n,type:a})),[t,o,n,a]);return(0,G.jsx)(Z.Z,{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:e.sidebarItemStyle,childrenStyle:e.sidebarItemChildrenStyle,left:(0,G.jsx)(Q,{store:t,outlinerItemStore:i,targetStore:r,type:a,itemIndex:e.itemIndex,itemDepth:n,"aria-controls":m,"aria-describedby":u}),icon:r&&(0,G.jsx)(J,{targetStore:r,canEditItem:e.canEditItem}),right:(0,G.jsx)(he,{store:t,outlinerItemStore:i,type:a,itemIndex:e.itemIndex,itemDepth:n,canEditItem:e.canEditItem}),onFocus:l,onBlur:c,onMouseMove:Ce(i),onMouseLeave:Me(i),isAlias:p,children:(0,G.jsx)(P.Z,{id:u,store:t})})}function we(e){return t=>{const o=t.target;o instanceof HTMLElement&&(0,I.E)(o)&&e.update((e=>({...e,focused:!0})))}}function je(e){return t=>{e.update((e=>({...e,focused:!1})))}}function Ce(e){return t=>{D.Z.state.isDragging||e.update((e=>({...e,hovered:!0})))}}function Me(e){return t=>{e.update((e=>({...e,hovered:!1})))}}var Be=o(12534),ke=o(45669),Pe=o(3392);function Ze(e){window.__c={n:"CollectionViewOutlinerItem"};const{store:t,collectionViewStore:o,onNavigate:i,type:n}=e,a=(0,r.O7)(),d=(0,s.VK)((()=>t.getCollectionViewStores().some((e=>"page"===e.getType()))),[t]),c=(0,s.VK)((()=>{const{mainEditorCurrentBlockStore:e,currentCollectionViewStore:i}=R.default.state;return!d&&Boolean(e&&t.id===e.id&&i&&i.id===o.id)}),[o.id,t.id,d]),u=(0,l.yK)((t=>({initialIcon:{fontSize:12,fontWeight:500,marginLeft:5,color:t.mediumTextColor},sideBarItem:{...c&&{fontWeight:j.Z.fontWeight.semibold,background:t.buttonHoveredBackground,color:t.regularTextColor,...a.device.isMobile&&{boxShadow:`\n\t\t\t\t\t\t0 1px 0 ${t.buttonHoveredBackground}\n\t\t\t\t\t`}},...e.style}})),[a.device.isMobile,c,e.style]),m=(0,s.VK)((()=>(0,L.ZP)({store:t,fullyQualified:!1,collectionViewId:o.id,pageVisitSource:(0,g.N)(n)})),[o.id,t,n]),p=(0,s.VK)((()=>({ready:o.isReady(),type:o.getType(),pagePointer:o.getFormat().page_pointer,name:o.getName()})),[o]),S=(0,s.VK)((()=>{if("page"!==p.type||!p.pagePointer)return null;const e=v.G.createChildStore(t,{table:p.pagePointer.table,id:p.pagePointer.id}),o=(0,g.Q2)(e);return{pageStore:e,ready:(0,h.b)(e),outlinerItems:o}}),[p,t]);if(!p.ready)return null;if("page"===p.type&&S){const{ready:o,outlinerItems:i}=S;return(0,G.jsx)(Pe.Z,{type:e.type,childStores:i,areChildrenLoading:!o,itemDepth:e.itemDepth+1,parentStore:t.getContentStore(),itemStyle:u.sideBarItem,itemToggleStyle:e.itemToggleStyle,onNavigate:e.onNavigate,disabled:e.disabled})}return d?null:(0,G.jsx)(B.Z,{href:m,style:{width:"100%"},innerStyle:(0,_.G$)({isMobile:a.device.isMobile}),onClick:()=>{i&&i(t)},role:"treeitem","aria-current":c?"step":void 0,children:(0,G.jsx)(Z.Z,{icon:(0,G.jsx)("div",{style:u.initialIcon,children:"•"}),style:u.sideBarItem,children:(0,G.jsx)(ke.Z,{collectionViewName:p.name,collectionViewType:p.type??"table"})})})}function Oe(e){window.__c={n:"CollectionViewOutliner"};const{store:t}=e,o=(0,s.VK)((()=>t.getCollectionViewStores()),[t]);return(0,G.jsx)("div",{role:"group",id:e.id,"aria-labelledby":e["aria-labelledby"],onContextMenu:e=>{e.preventDefault(),(0,Be.ZP)({event:e,context:Be.Af.EditorContextMenu,callback:()=>{}})},children:o.map((o=>(0,G.jsx)(Ze,{store:t,collectionViewStore:o,style:e.itemStyle,onNavigate:e.onNavigate,type:e.type,itemDepth:e.itemDepth,disabled:e.disabled,childStores:e.childStores},o.id)))})}function Le(e){window.__c={n:"NestedOutliner"};const{disabled:t,store:o,style:i,targetStore:n,itemDepth:a,nestedOutlinerAriaId:d,titleAriaId:c}=e,{isMobile:u}=(0,r.Fy)(),m=(0,s.VK)((()=>!(0,h.b)(o)),[o]),p=(0,s.VK)((()=>n.isCollectionView()?n:null),[n]),S=(0,s.VK)((()=>(0,g.Yz)(o)),[o]),y=(0,l.yK)((()=>{const e="number"==typeof(null==i?void 0:i.paddingLeft)?i.paddingLeft:u?Ke:5,t=u?Fe:14;return{item:{...i,paddingLeft:e+t}}}),[i,u]);return p?(0,G.jsx)(Oe,{store:p,itemStyle:y.item,onNavigate:e.onNavigate,type:e.type,childStores:S,areChildrenLoading:!1,itemDepth:a+1,parentStore:n.getContentStore(),itemToggleStyle:e.toggleStyle,disabled:t,id:d,"aria-labelledby":c}):(0,G.jsx)(Pe.Z,{type:e.type,childStores:S,areChildrenLoading:m,itemDepth:a+1,parentStore:n.getContentStore(),itemStyle:y.item,itemToggleStyle:e.toggleStyle,onNavigate:e.onNavigate,disabled:t,id:d,"aria-labelledby":c})}function Ve(e){return`Outliner-${e.id}`}function _e(e){let{store:t,type:o,isTopLevelItem:i}=e;return e=>{const r=t.getRecordStoreUIParent();null!=r&&r.valueIs(x.i)&&u.A5({...e,type:o,targetStore:t,targetParentStore:r,isTopLevelItem:i})}}function Ae(e){let{environment:t,store:o,parentStore:i,type:r,isTopLevelItem:n}=e;return async e=>{const{droppedDirection:a,droppedStores:s,duplicate:l}=e;i&&await u.v9({environment:t,type:r,targetParentStore:i,targetStore:o,isTopLevelItem:n,droppedDirection:a,droppedStores:s,duplicate:l})}}const Ke=6,Fe=22,Re=function(e){window.__c={n:"OutlinerItem"};const{store:t,itemIndex:o,parentStore:l,type:g,itemDepth:h,disabled:y}=e,f=(0,r.O7)(),x=(0,n.l)(),I=(0,s.qz)(void 0,b),w=(0,i.useId)(),j=(0,i.useId)(),C=(0,s.VK)((()=>function(e){if(e.getType()===d.Ti.alias){const t=e.getAliasTargetStore();return t instanceof v.G?t:void 0}return e}(t)),[t]),M=(0,s.VK)((()=>T.Bb(t)),[t]),B=(0,s.VK)((()=>!y&&(0,p.J5)({environment:f,blocks:[t],publicEditMode:x&&x.publicEditModeStore.state})),[y,x,f,t]),k=(0,s.VK)((()=>B&&!t.isLinkedCollectionView()),[t,B]),P=(0,s.VK)((()=>I.state.open),[I]),Z=function(e){return 0===e}(h);(0,i.useEffect)((()=>{if(Z){const e=c.Z.get({userId:f.currentUser.id,key:Ve(t)});I.update((t=>({...t,open:e})))}}),[]);const O=(0,i.useRef)(null);(0,a.c)(S.Z,(()=>({store:t,parentStore:l,type:g,isTopLevelItem:Z,getNode:()=>O.current})),[t,l,g,Z]);const L=M&&l?{onInsertBelow:e=>u.LR({...e,environment:f,store:t,parentStore:l,before:!0,type:g}),onInsertAbove:e=>u.LR({...e,environment:f,store:t,parentStore:l,before:!1,type:g})}:{},V=0===o;return C?(0,G.jsxs)(m.Z,{analyticsName:"outliner_item",actionSectionGroupKey:"sidebar_outliner",contextMenuAndDragStores:[t],canDrag:M,canDropAbove:V,canDropBelow:M,canDropOnto:k,canInsertBelow:M,canInsertAbove:M,canSelect:M,canTriggerContextMenu:!0,onRemove:_e({store:t,type:g,isTopLevelItem:Z}),onSelectableDrop:Ae({environment:f,store:t,parentStore:l,type:g,isTopLevelItem:Z}),shouldShowDropZone:!0,showBlockMenuInput:!1,store:t,...L,ref:O,children:[(0,G.jsx)(Te,{store:t,outlinerItemStore:I,style:e.style,parentStore:l,type:g,itemIndex:e.itemIndex,itemDepth:e.itemDepth,onNavigate:e.onNavigate,targetStore:C,canEditItem:B,nestedOutlinerAriaId:w,titleAriaId:j}),P&&(0,G.jsx)(Le,{...e,targetStore:C,nestedOutlinerAriaId:w,titleAriaId:j})]}):null}},75546:(e,t,o)=>{o.d(t,{o:()=>c});o(67294);var i=o(480),r=o(86628),n=o(24405),a=o(82990),s=o(58260),l=o(95697),d=o(85893);function c(e){let{teamStore:t,withSelectedStyle:o}=e;window.__c={n:"TeamHeaderLabel"};const c=(0,i.Fy)(),u=(0,r.VK)((()=>{var e;return{teamName:t.getName()??"",shouldShowLock:(0,l.C2)(null==t||null===(e=t.getSettingsStore())||void 0===e?void 0:e.getValue())}}),[t]),m=(0,n.yK)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},lockIcon:{width:15,marginLeft:6,marginBottom:1,fill:e.mediumIconColor},labelText:{...a.Z.textOverflowStyle,...o?{color:e.regularTextColor,fontWeight:a.Z.fontWeight.semibold}:{color:e.darkTextColor,fontWeight:a.Z.fontWeight.medium},fontSize:c.isMobile?a.Z.fontSize.UIRegular.mobile:a.Z.fontSize.UIRegular.desktop}})),[c.isMobile,o]);return u?(0,d.jsxs)("div",{style:m.container,children:[(0,d.jsx)("div",{style:m.labelText,children:u.teamName}),u.shouldShowLock&&(0,d.jsx)(s.Z,{iconStyle:m.lockIcon})]}):null}},29165:(e,t,o)=>{o.d(t,{O:()=>T});var i=o(67294),r=o(480),n=o(86628),a=o(29369),s=o(5366),l=o(89466),d=o(80444),c=o(70704),u=o(75546),m=o(24405),p=o(75071),g=o(14720),h=o(64921),S=o(31945),y=o(68785),f=o(14694),b=o(85893);function v(e){let{teamStore:t}=e;window.__c={n:"TeamOutlinerEmptyState"};const o=(0,r.Fy)(),a=(0,n.VK)((()=>t.canAddOrRemoveTopLevelPages()),[t]),[l,d]=(0,i.useState)(void 0),c=(0,m.yK)((e=>({emptyPlaceholder:{color:e.lightTextColor,paddingLeft:12,...!o.isMobile&&{fontSize:14},...o.isMobile&&{display:"flex",alignItems:"center",height:32},display:"flex",alignItems:"center"},addPage:{color:e.mediumTextColor,borderRadius:3},addPageButton:{borderRadius:3,marginLeft:4,marginRight:4},addPageIconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},addPageIcon:{fill:e.mediumIconColor,width:16,height:16}})),[o]);return a?(0,b.jsx)(S.ZP,{popupType:S.Z4.Popup,alignmentToOrigin:S.vR.Start,originGap:2,originRect:l,renderOrigin:e=>(0,b.jsx)(h.Z,{mobileFeedback:o.isMobile,style:c.addPageButton,...e,onClick:t=>{d(new DOMRect(t.clientX,t.clientY)),e.onClick(t)},children:(0,b.jsx)(f.Z,{style:c.addPage,disableMobileBorder:!0,left:(0,b.jsx)("div",{style:c.addPageIconContainer,children:(0,p.f)(c.addPageIcon)}),children:(0,b.jsx)(s.FormattedMessage,{id:"teamOutliner.addPage",defaultMessage:"Add a page"})})}),render:e=>(0,b.jsx)(g.p7,{renderLoading:e=>(0,b.jsx)("div",{style:g.Ry.LazyTeamAddAppTemplateMenu,children:e&&(0,b.jsx)(y.Z,{})}),teamStore:t,closePopup:e.close,from:"sidebar_team_empty_new_page"})}):(0,b.jsx)(f.Z,{disableMobileBorder:!0,children:(0,b.jsx)("div",{style:c.emptyPlaceholder,children:(0,b.jsx)("span",{children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"No pages inside",id:"teamOutliner.noOverflowEmptyMessage"})})})})}var x=o(54396);function T(e){let{teamStore:t,sidebarState:o,isLastTeam:i,initialToggleState:m,shouldPersistToggleState:p,customToggleStore:g,teamOutlinerType:h,onNavigate:S,onTeamJoinComplete:y}=e;window.__c={n:"TeamOutliner"};const{currentSpaceStore:f,currentSpaceViewStore:T,currentUserSettingsStore:I}=(0,n.VK)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:t,currentUserSettingsStore:o}=d.default.state;return{currentSpaceStore:e,currentSpaceViewStore:t,currentUserSettingsStore:o}}),[]),w=(0,n.qz)(void 0,c.Z),j=g??w,C=(0,n.VK)((()=>t.getTeamPagesStores()),[t]),M=(0,r.Fy)(),B=(0,n.VK)((()=>{const e=d.default.state.mainEditorCurrentBlockStore;return(null==e?void 0:e.getParentTable())===a.e0&&(null==e?void 0:e.getParentId())===t.id&&!M.isMobile&&j.state.isHidden}),[M.isMobile,t.id,j]);return f&&T&&I?(0,b.jsx)(l.Z,{type:"team",customToggleButtonStore:j,forceHoveredButtonStyle:B,initialToggleState:m,shouldPersistToggleState:p,teamHeaderLabel:(0,b.jsx)(u.o,{teamStore:t,withSelectedStyle:B}),teamStore:t,spaceStore:f,spaceViewStore:T,showAddButton:!1,isLastTeam:i,teamOutlinerType:h,labelTooltip:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"One of your teams",id:"sidebar.teamSection.tooltip"}),onTeamJoinComplete:y,marginBottomOverrideWhenExpanded:M.isMobile?0:16,marginBottomOverrideWhenCollapsed:M.isMobile?0:1,renderSidebar:e=>{let{labelAriaId:i,contentsAriaId:r}=e;if(!t)return;const n=new Set(C.map((e=>e.id)));return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.r,{state:{type:"team",teamSectionType:h,teamStore:t},sidebarState:o,onNavigate:S,additionalOutlinerProps:{id:r,"aria-labelledby":i}}),0===n.size&&(0,b.jsx)(v,{teamStore:t})]})}}):null}},54396:(e,t,o)=>{o.d(t,{r:()=>S});var i=o(67294),r=o(480),n=o(86628),a=o(24405),s=o(97880),l=o(35683),d=o(35026),c=o(80444),u=o(61738),m=o(99757),p=o(3392),g=o(24359),h=o(85893);function S(e){window.__c={n:"TopLevelSidebarOutliner"};const{state:t,sidebarState:o,onNavigate:S,additionalOutlinerProps:y,id:f,isHeaderless:b}=e,v=(0,n.VK)((()=>c.default.state.currentSpaceStore),[]),x=(0,n.VK)((()=>c.default.state.currentSpaceViewStore),[]),T=(0,r.O7)(),I=(0,r.Fy)().isMobile,w=(0,n.VK)((()=>!m.n.state),[]),j=(0,n.VK)((()=>(null==v?void 0:v.canEdit())&&w),[v,w]),C=(0,n.VK)((()=>t),[t]),M=(0,n.VK)((()=>{if(x)return(0,d.EE)({currentSpaceViewStore:x,typeWithTeam:C,environment:T,sidebarState:o})}),[x,T,o,C]),B=(0,n.VK)((()=>{if(x&&v)return(0,d.P4)({currentSpaceStore:v,currentSpaceViewStore:x,typeWithTeam:C})}),[v,x,C]),k=(0,i.useCallback)((e=>{switch(C.type){case"bookmarks":u.Z.recordVisit({id:e.id,blockType:e.getType(),type:l.vu.Favorite,currentUserId:T.currentUser.id});break;case"team":case"workspace":case"shared":u.Z.recordVisit({id:e.id,blockType:e.getType(),type:l.vu.Link,currentUserId:T.currentUser.id});break;case"private":break;default:(0,s.t1)(C)}null==S||S()}),[T.currentUser.id,S,C]),P=(0,a.yK)((()=>({outliner:{display:"block"},outlinerItem:{...I&&"team"===C.type?{paddingLeft:g.gZ+g.aZ}:void 0}})),[I,C.type]);return v&&x&&M?(0,h.jsx)(p.Z,{type:C.type,disabled:!j,itemDepth:0,childStores:M,parentStore:B,style:P.outliner,itemStyle:P.outlinerItem,onNavigate:k,id:f,"aria-labelledby":e["aria-labelledby"],isHeaderless:b,...y}):null}},14720:(e,t,o)=>{o.d(t,{Aj:()=>s,Rv:()=>n,Ry:()=>d,p7:()=>l,tn:()=>r,vs:()=>a});var i=o(77907);const r=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarTeamBrowserContent)),n=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarSwitcherMultiAccountPopup)),a=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarFooter)),s=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarSectionOnboardingHighlightPopup)),l=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.TeamAddAppTemplateMenu)),d={LazyTeamAddAppTemplateMenu:{width:250,paddingTop:8,paddingBottom:8,display:"flex",justifyContent:"center"}}},33052:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(49085),r=o(29369);class n extends i.default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"member",isInviteTargetsEmpty:!0,table:r.e0,isFocused:!0,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const a=n},30278:(e,t,o)=>{o.d(t,{Z:()=>n});var i=o(49085);class r extends i.default{getInitialState(){return{contacts:!1}}}const n=r}}]);